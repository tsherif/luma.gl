(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{423:function(t,o,e){"use strict";e.r(o);var n=e(1),r=e.n(n),i=e(402),a=(e(11),e(289)),c=e(413),s=e(431),l=e(65),u=e(448),d=e(442),v=e(432),p=e(73),m=e(436);var f=Object(m.b)(),_="attribute vec3 positions;\nattribute vec3 normals;\n\nuniform vec3 uColor;\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\n\nvarying vec3 color;\n\nvoid main(void) {\n  vec3 normal = vec3(uModel * vec4(normals, 0.0));\n\n  // Set up data for modules\n  color = uColor;\n  LUMAGL_normal(normal);\n  gl_Position = uProjection * uView * uModel * vec4(positions, 1.0);\n}\n",h="precision highp float;\n\nvarying vec3 color;\n\nvoid main(void) {\n  gl_FragColor = vec4(color, 1.);\n  LUMAGL_fragmentColor(gl_FragColor);\n}\n",g=function(t){var o,e;function n(){return t.call(this,{debug:!0})||this}e=t,(o=n).prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e,n.getInfo=function(){return"\nUsing a ProgramManager to cache and share programs between models.\n"};var r=n.prototype;return r.onInitialize=function(t){var o=t.gl,e=t.aspect;Object(l.c)(o,{clearColor:[0,0,0,1],clearDepth:1,depthTest:!0,depthFunc:o.LEQUAL});var n=new a.a(o);n.addShaderHook("vs:LUMAGL_normal(inout vec3 normal)"),n.addShaderHook("fs:LUMAGL_fragmentColor(inout vec4 color)"),n.addModuleInjection(u.a,{hook:"vs:LUMAGL_normal",injection:"project_setNormal(normal);"}),n.addModuleInjection(u.a,{hook:"fs:LUMAGL_fragmentColor",injection:"color = dirlight_filterColor(color);"});var r=[[2,-2,0],[2,2,0],[-2,2,0],[-2,-2,0]],i=[[f(),f(),f()],[f(),f(),f()],[f(),f(),f()],[f(),f(),f()]],s=[[1,0,0],[0,1,0],[0,0,1],[1,1,0]];this.cubes=new Array(4);for(var m=0;m<4;++m)this.cubes[m]={translation:r[m],rotation:i[m],model:new c.a(o,{programManager:n,vs:_,fs:h,modules:m%2==0?[]:[u.a],geometry:new d.a,uniforms:{uProjection:(new v.a).perspective({fov:Object(p.e)(60),aspect:e,near:1,far:20}),uView:(new v.a).lookAt({center:[0,0,0],eye:[0,0,-8]}),uColor:s[m]}})};return{programManager:n}},r.onRender=function(t){var o=t.gl,e=t.tick,n=t.programManager;if(e%240==0&&(e%480==0?n.removeDefaultModule(u.a):n.addDefaultModule(u.a)),e%120==0)for(var r=e%240==0,i=0;i<4;++i)this.cubes[i].model.setProgram({vs:_,fs:h,modules:i%2===Number(r)?[]:[u.a]});var a=new v.a;o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);for(var c=0;c<4;++c){var s=this.cubes[c];s.rotation[0]+=.01,s.rotation[1]+=.01,s.rotation[2]+=.01,a.identity().translate(s.translation).rotateXYZ(s.rotation),s.model.setUniforms({uModel:a}).draw()}},r.onFinalize=function(t){t.gl;for(var o=0;o<4;++o)this.cubes[o].model.delete()},n}(s.a);"undefined"==typeof window||window.website||(new g).start();e.d(o,"default",(function(){return w}));var w=function(t){var o,e;function n(){return t.apply(this,arguments)||this}return e=t,(o=n).prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e,n.prototype.render=function(){return r.a.createElement(i.a,{AnimationLoop:g,exampleConfig:this.props.pageContext.exampleConfig})},n}(r.a.Component)},436:function(t,o,e){"use strict";e.d(o,"a",(function(){return n})),e.d(o,"b",(function(){return r}));var n=function(){function t(){}t.getInfo=function(){return""};var o=t.prototype;return o.start=function(){},o.stop=function(){},o.delete=function(){},o._setDisplay=function(){},o._getCanvas=function(t){var o;if(void 0===t&&(t={}),t.canvas){o=document.getElementById(t.canvas);var e=window.devicePixelRatio||1;o.height=o.clientHeight*e,o.width=o.clientWidth*e}else(o=document.createElement("canvas")).width=800,o.height=600,document.body.appendChild(o);return o},t}();function r(){var t=1,o=1;return function(){return t=Math.sin(17.23*o),o=Math.cos(27.92*t),(e=1432.71*Math.abs(t*o))-Math.floor(e);var e}}},438:function(t,o,e){"use strict";e.d(o,"a",(function(){return s}));e(11),e(15),e(3);var n=e(147),r=e(16);function i(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,o,e){return o&&i(t.prototype,o),e&&i(t,e),t}var c={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},s=function(){function t(t){void 0===t&&(t={});var o=t,e=o.id,r=void 0===e?Object(n.c)("geometry"):e,i=o.drawMode,a=void 0===i?c.TRIANGLES:i,s=o.attributes,l=void 0===s?{}:s,u=o.indices,d=void 0===u?null:u,v=o.vertexCount,p=void 0===v?null:v;this.id=r,this.drawMode=0|a,this.attributes={},this.userData={},this._setAttributes(l,d),this.vertexCount=p||this._calculateVertexCount(this.attributes,this.indices)}a(t,null,[{key:"DRAW_MODE",get:function(){return c}}]);var o=t.prototype;return o.getVertexCount=function(){return this.vertexCount},o.getAttributes=function(){return this.indices?Object.assign({indices:this.indices},this.attributes):this.attributes},o._print=function(t){return"Geometry "+this.id+" attribute "+t},o._setAttributes=function(t,o){for(var e in o&&(this.indices=ArrayBuffer.isView(o)?{value:o,size:1}:o),t){var n=t[e];n=ArrayBuffer.isView(n)?{value:n}:n,Object(r.a)(ArrayBuffer.isView(n.value),this._print(e)+": must be typed array or object with value as typed array"),"POSITION"!==e&&"positions"!==e||n.size||(n.size=3),"indices"===e?(Object(r.a)(!this.indices),this.indices=n):this.attributes[e]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this},o._calculateVertexCount=function(t,o){if(o)return o.value.length;var e=1/0;for(var n in t){var i=t[n],a=i.value,c=i.size;!i.constant&&a&&c>=1&&(e=Math.min(e,a.length/c))}return Object(r.a)(Number.isFinite(e)),e},a(t,[{key:"mode",get:function(){return this.drawMode}}]),t}()},442:function(t,o,e){"use strict";e.d(o,"a",(function(){return u}));e(3),e(36),e(148);var n=e(438),r=e(147);var i=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),c=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),s=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),l={POSITION:{size:3,value:new Float32Array(a)},NORMAL:{size:3,value:new Float32Array(c)},TEXCOORD_0:{size:2,value:new Float32Array(s)}},u=function(t){var o,e;function n(o){void 0===o&&(o={});var e=o.id,n=void 0===e?Object(r.c)("cube-geometry"):e;return t.call(this,Object.assign({},o,{id:n,indices:{size:1,value:new Uint16Array(i)},attributes:Object.assign({},l,{},o.attributes)}))||this}return e=t,(o=n).prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e,n}(n.a)},448:function(t,o,e){"use strict";e(36);var n=e(432),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i={modelMatrix:r,viewMatrix:r,projectionMatrix:r,cameraPositionWorld:[0,0,0]};var a={name:"project",getUniforms:function(t,o){void 0===t&&(t=i),void 0===o&&(o={});var e={};return void 0!==t.modelMatrix&&(e.modelMatrix=t.modelMatrix),void 0!==t.viewMatrix&&(e.viewMatrix=t.viewMatrix),void 0!==t.projectionMatrix&&(e.projectionMatrix=t.projectionMatrix),void 0!==t.cameraPositionWorld&&(e.cameraPositionWorld=t.cameraPositionWorld),void 0===t.projectionMatrix&&void 0===t.viewMatrix||(e.viewProjectionMatrix=new n.a(t.projectionMatrix).multiplyRight(t.viewMatrix)),e},vs:"varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n",fs:"\nvarying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n"},c={lightDirection:new Float32Array([1,1,2])};o.a={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\n\n/*\n * Returns color attenuated by angle from light source\n */\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(t){void 0===t&&(t=c);var o={};return t.lightDirection&&(o.dirlight_uLightDirection=t.lightDirection),o},dependencies:[a]}}}]);
//# sourceMappingURL=component---templates-api-example-program-management-jsx-ba3e7c1fdb9502079548.js.map