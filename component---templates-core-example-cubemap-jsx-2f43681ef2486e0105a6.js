(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{298:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(335),a=(n(3),n(318)),u=n.n(a),c=n(361),s=n(349),l=n(448),f=n(437),d=n(570),v=n(586),p=n(354);function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var y=function(e){function t(t,n){return e.call(this,t,Object.assign({geometry:new c.a},n,{fs:"precision highp float;\n\nuniform samplerCube uTextureCube;\nvarying vec3 vPosition;\n\nvoid main(void) {\n  // The outer cube just samples the texture cube directly\n  gl_FragColor = textureCube(uTextureCube, normalize(vPosition) * vec3(-1.0, 1.0, 1.0));\n}\n",vs:"attribute vec3 positions;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\n\nvarying vec3 vPosition;\n\nvoid main(void) {\n  gl_Position = uProjection * uView * uModel * vec4(positions, 1.0);\n  vPosition = positions;\n}\n"}))||this}return m(t,e),t}(s.a),b=function(e){function t(t,n){return e.call(this,t,Object.assign({geometry:new c.a},n,{vs:"attribute vec3 positions;\nattribute vec3 normals;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n  gl_Position = uProjection * uView * uModel * vec4(positions, 1.0);\n  vPosition = vec3(uModel * vec4(positions,1));\n  vNormal = vec3(uModel * vec4(normals, 1));\n}\n",fs:"precision highp float;\n\nuniform samplerCube uTextureCube;\nuniform float uReflect;\nuniform float uRefract;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n  vec4 color = vec4(1, 0, 0, 1); // Prism color is red\n\n  vec3 offsetPosition = vPosition - vec3(0, 0, 2.5);\n\n  // The inner prism samples the texture cube in refract and reflect directions\n  vec3 reflectedDir = normalize(reflect(offsetPosition, vNormal));\n  vec3 refractedDir = normalize(refract(offsetPosition, vNormal, 0.75));\n  vec4 reflectedColor = mix(color, textureCube(uTextureCube, reflectedDir), uReflect);\n  vec4 refractedColor = mix(color, textureCube(uTextureCube, refractedDir), uRefract);\n\n  // Mix and multiply to keep it red\n  gl_FragColor = color * mix(reflectedColor, refractedColor, 0.5);\n}\n"}))||this}return m(t,e),t}(s.a),w=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t.getInfo=function(){return'\n<p>\nA <code>cubemapped</code> prism within a larger cubemapped cube\n<p>\nUses a luma.gl <code>TextureCube</code> and\nthe GLSL <code>reflect</code> and <code>refract</code> builtin functions\nto calculate reflection and refraction directions from the prism normals\n</p>\n<div>\n  Reflection\n  <input id="reflection"\n    type="range" min="0.0" max="1.0" value="1.0" step="0.01">\n  <br>\n  Refraction\n  <input id="refraction"\n    type="range" min="0.0" max="1.0" value="1.0" step="0.01">\n  <br>\n</div>\n'};var n=t.prototype;return n.onInitialize=function(e){var t=e.gl;e.canvas;Object(l.a)(t,{clearColor:[0,0,0,1],clearDepth:1,depthTest:!0,depthFunc:u.a.LEQUAL});var n=new f.a(t,{data:h({size:512})});return{cube:new y(t,{uniforms:{uTextureCube:n,uModel:(new v.a).scale([5,5,5])}}),prism:new b(t,{_animationLoop:this,uniforms:{uTextureCube:n,uModel:function(e){var t=e.tick;return(new v.a).rotateX(.01*t).rotateY(.013*t)}}})}},n.onRender=function(e){var t=e.gl,n=e.aspect,i=e.cube,r=e.prism,o=(new v.a).lookAt({eye:[0,0,-1]}).translate([0,0,4]),a=(new v.a).perspective({fov:Object(p.e)(75),aspect:n}),c=function(){if("undefined"==typeof document)return{uReflect:1,uRefract:1};var e=document.getElementById("reflection"),t=document.getElementById("refraction");return{uReflect:e?parseFloat(e.value):1,uRefract:t?parseFloat(t.value):1}}(),s=c.uReflect,l=c.uRefract;t.clear(u.a.COLOR_BUFFER_BIT|u.a.DEPTH_BUFFER_BIT),i.draw({uniforms:{uView:o,uProjection:a}}),r.draw({uniforms:{uView:o,uProjection:a,uReflect:s,uRefract:l}})},t}(d.a);function h(e){for(var t=e.size,n=["pos","neg"],i={pos:{},neg:{}},r=0,o="undefined"==typeof document?new OffscreenCanvas(t,t):document.createElement("canvas"),a=o.getContext("2d"),u=0,c=["x","y","z"];u<c.length;u++)for(var s=c[u],l=0,d=n;l<d.length;l++){var v=d[l];o.width=t,o.height=t,g({ctx:a,sign:v,axis:s,size:t}),i[f.a.FACES[r++]]=a.getImageData(0,0,t,t)}return i}function g(e){var t=e.ctx,n=e.sign,i=e.axis,r=e.size,o="rgb(0,64,128)";t.fillStyle=o,t.fillRect(0,0,r,r),t.fillStyle="white",t.fillRect(8,8,r-16,r-16),t.fillStyle=o,t.font=r/4+"px serif",t.textAlign="center",t.textBaseline="middle",t.fillText(n+"-"+i,r/2,r/2),t.strokeStyle=o,t.strokeRect(0,0,r,r)}"undefined"==typeof window||window.website||(new w).start();n.d(t,"default",function(){return _});var _=function(e){var t,n;function i(){return e.apply(this,arguments)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.prototype.render=function(){return r.a.createElement(o.a,{AnimationLoop:w,exampleConfig:this.props.pageContext.exampleConfig})},i}(r.a.Component)},326:function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(135),n(316),n(3);var i=n(511),r=n(429);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function e(e){void 0===e&&(e={});var t=e,n=t.id,r=void 0===n?Object(i.c)("geometry"):n,o=t.drawMode,a=void 0===o?u.TRIANGLES:o,c=t.attributes,s=void 0===c?{}:c,l=t.indices,f=void 0===l?null:l,d=t.vertexCount,v=void 0===d?null:d;this.id=r,this.drawMode=0|a,this.attributes={},this.userData={},this._setAttributes(s,f),this.vertexCount=v||this._calculateVertexCount(this.attributes,this.indices)}a(e,null,[{key:"DRAW_MODE",get:function(){return u}}]);var t=e.prototype;return t.getVertexCount=function(){return this.vertexCount},t.getAttributes=function(){return this.indices?Object.assign({indices:this.indices},this.attributes):this.attributes},t._print=function(e){return"Geometry "+this.id+" attribute "+e},t._setAttributes=function(e,t){for(var n in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var i=e[n];i=ArrayBuffer.isView(i)?{value:i}:i,Object(r.a)(ArrayBuffer.isView(i.value),this._print(n)+": must be typed array or object with value as typed array"),"POSITION"!==n&&"positions"!==n||i.size||(i.size=3),"indices"===n?(Object(r.a)(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this},t._calculateVertexCount=function(e,t){if(t)return t.value.length;var n=1/0;for(var i in e){var o=e[i],a=o.value,u=o.size;!o.constant&&a&&u>=1&&(n=Math.min(n,a.length/u))}return Object(r.a)(Number.isFinite(n)),n},a(e,[{key:"mode",get:function(){return this.drawMode}}]),e}()},337:function(e,t,n){"use strict";n(29),n(18),n(102),n(32),n(57),n(136),n(137),n(77),n(5),n(6),n(4),n(56),n(101),n(10),n(8),n(1),Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="undefined"!=typeof window&&window.addEventListener,o=new Map,a=function(){return r&&window.__SEER_INITIALIZED__},u=function(e,t){var n=o.get(e),i=Date.now();return!!(n&&i-n<t)||(o.set(e,i),!1)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r&&a()){var n=new Set,o=JSON.stringify(t,function(e){return function(t,n){if(!n||"object"!==(void 0===n?"undefined":i(n))||!e.has(n))return e.add(n),Object.prototype.toString.call(n).slice(8,-1).includes("Array")?Array.prototype.slice.call(n,0,20):n}}(n));try{window.postMessage({type:e,payload:o,source:"seer-agent"},"*")}catch(c){if(u("seer-log",2e3))return;console.log(c)}}},s=new Map,l=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,n=t.type,i=t.payload,r=s.get(n);r&&r.forEach(function(e){return e(i)})}},f=function(){r&&!window.__SEER_LISTENER__&&(window.addEventListener("message",l),window.__SEER_LISTENER__=!0)};t.default={send:c,throttle:u,isReady:a,list:function(e,t){return c("LIST",{key:e,data:t})},listItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c("LIST_ITEM",{key:e,itemKey:t,data:n})},updateItem:function(e,t,n,i){return c("UPDATE_ITEM",{key:e,itemKey:t,path:n,data:i})},multiUpdate:function(e,t,n){return c("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:n})},deleteItem:function(e,t){return c("DELETE_ITEM",{key:e,itemKey:t})},addLog:function(e,t,n){return c("ADD_LOG",{key:e,itemKey:t,msg:n})},listeners:s,listenFor:function(e,t){if(r){if(!e||!t)throw new Error("Please provide a type and callback");s.has(e)||s.set(e,[]),window.__SEER_LISTENER__||f(),s.get(e).push(t)}},removeListener:function(e){s.forEach(function(t,n){s.set(n,t.filter(function(t){return t!==e}))})},init:f,clean:function(){r&&window.__SEER_LISTENER__&&(window.removeEventListener("message",l),delete window.__SEER_LISTENER__)}}},361:function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(3),n(317),n(321);var i=n(326),r=n(511);var o=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),u=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),c=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),s={POSITION:{size:3,value:new Float32Array(a)},NORMAL:{size:3,value:new Float32Array(u)},TEXCOORD_0:{size:2,value:new Float32Array(c)}},l=function(e){var t,n;function i(t){void 0===t&&(t={});var n=t.id,i=void 0===n?Object(r.c)("cube-geometry"):n;return e.call(this,Object.assign({},t,{id:i,indices:{size:1,value:new Uint16Array(o)},attributes:Object.assign({},s,t.attributes)}))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(i.a)}}]);
//# sourceMappingURL=component---templates-core-example-cubemap-jsx-2f43681ef2486e0105a6.js.map