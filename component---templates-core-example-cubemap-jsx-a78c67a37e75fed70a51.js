(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{427:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(408),a=(n(7),n(6),n(4),n(2),n(0)),c=n.n(a),u=n(459),l=n(410),s=n(297),f=n(295),p=n(453),v=n(454),d=n(66);function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var y=function(e){function t(t,n){return e.call(this,t,Object.assign({geometry:new u.a},n,{fs:"precision highp float;\n\nuniform samplerCube uTextureCube;\nvarying vec3 vPosition;\n\nvoid main(void) {\n  // The outer cube just samples the texture cube directly\n  gl_FragColor = textureCube(uTextureCube, normalize(vPosition) * vec3(-1.0, 1.0, 1.0));\n}\n",vs:"attribute vec3 positions;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\n\nvarying vec3 vPosition;\n\nvoid main(void) {\n  gl_Position = uProjection * uView * uModel * vec4(positions, 1.0);\n  vPosition = positions;\n}\n"}))||this}return m(t,e),t}(l.a),b=function(e){function t(t,n){return e.call(this,t,Object.assign({geometry:new u.a},n,{vs:"attribute vec3 positions;\nattribute vec3 normals;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n  gl_Position = uProjection * uView * uModel * vec4(positions, 1.0);\n  vPosition = vec3(uModel * vec4(positions,1));\n  vNormal = vec3(uModel * vec4(normals, 1));\n}\n",fs:"precision highp float;\n\nuniform samplerCube uTextureCube;\nuniform float uReflect;\nuniform float uRefract;\n\nvarying vec3 vPosition;\nvarying vec3 vNormal;\n\nvoid main(void) {\n  vec4 color = vec4(1, 0, 0, 1); // Prism color is red\n\n  vec3 offsetPosition = vPosition - vec3(0, 0, 2.5);\n\n  // The inner prism samples the texture cube in refract and reflect directions\n  vec3 reflectedDir = normalize(reflect(offsetPosition, vNormal));\n  vec3 refractedDir = normalize(refract(offsetPosition, vNormal, 0.75));\n  vec4 reflectedColor = mix(color, textureCube(uTextureCube, reflectedDir), uReflect);\n  vec4 refractedColor = mix(color, textureCube(uTextureCube, refractedDir), uRefract);\n\n  // Mix and multiply to keep it red\n  gl_FragColor = color * mix(reflectedColor, refractedColor, 0.5);\n}\n"}))||this}return m(t,e),t}(l.a),g=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t.getInfo=function(){return'\n<p>\nA <code>cubemapped</code> prism within a larger cubemapped cube\n<p>\nUses a luma.gl <code>TextureCube</code> and\nthe GLSL <code>reflect</code> and <code>refract</code> builtin functions\nto calculate reflection and refraction directions from the prism normals\n</p>\n<div>\n  Reflection\n  <input id="reflection"\n    type="range" min="0.0" max="1.0" value="1.0" step="0.01">\n  <br>\n  Refraction\n  <input id="refraction"\n    type="range" min="0.0" max="1.0" value="1.0" step="0.01">\n  <br>\n</div>\n'};var n=t.prototype;return n.onInitialize=function(e){var t=e.gl;e.canvas;Object(s.a)(t,{clearColor:[0,0,0,1],clearDepth:1,depthTest:!0,depthFunc:c.a.LEQUAL});var n=new f.a(t,{data:w({size:512})});return{cube:new y(t,{uniforms:{uTextureCube:n,uModel:(new v.a).scale([5,5,5])}}),prism:new b(t,{_animationLoop:this,uniforms:{uTextureCube:n,uModel:function(e){var t=e.tick;return(new v.a).rotateX(.01*t).rotateY(.013*t)}}})}},n.onRender=function(e){var t=e.gl,n=e.aspect,r=e.cube,o=e.prism,i=(new v.a).lookAt({eye:[0,0,-1]}).translate([0,0,4]),a=(new v.a).perspective({fov:Object(d.e)(75),aspect:n}),u=function(){if("undefined"==typeof document)return{uReflect:1,uRefract:1};var e=document.getElementById("reflection"),t=document.getElementById("refraction");return{uReflect:e?parseFloat(e.value):1,uRefract:t?parseFloat(t.value):1}}(),l=u.uReflect,s=u.uRefract;t.clear(c.a.COLOR_BUFFER_BIT|c.a.DEPTH_BUFFER_BIT),r.draw({uniforms:{uView:i,uProjection:a}}),o.draw({uniforms:{uView:i,uProjection:a,uReflect:l,uRefract:s}})},t}(p.a);function w(e){for(var t=e.size,n=["pos","neg"],r={pos:{},neg:{}},o=0,i="undefined"==typeof document?new OffscreenCanvas(t,t):document.createElement("canvas"),a=i.getContext("2d"),c=0,u=["x","y","z"];c<u.length;c++){var l=u[c],s=n,p=Array.isArray(s),v=0;for(s=p?s:s[Symbol.iterator]();;){var d;if(p){if(v>=s.length)break;d=s[v++]}else{if((v=s.next()).done)break;d=v.value}var m=d;i.width=t,i.height=t,h({ctx:a,sign:m,axis:l,size:t}),r[f.a.FACES[o++]]=a.getImageData(0,0,t,t)}}return r}function h(e){var t=e.ctx,n=e.sign,r=e.axis,o=e.size,i="rgb(0,64,128)";t.fillStyle=i,t.fillRect(0,0,o,o),t.fillStyle="white",t.fillRect(8,8,o-16,o-16),t.fillStyle=i,t.font=o/4+"px serif",t.textAlign="center",t.textBaseline="middle",t.fillText(n+"-"+r,o/2,o/2),t.strokeStyle=i,t.strokeRect(0,0,o,o)}"undefined"==typeof window||window.website||(new g).start();n.d(t,"default",(function(){return x}));var x=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){return o.a.createElement(i.a,{AnimationLoop:g,exampleConfig:this.props.pageContext.exampleConfig})},r}(o.a.Component)},459:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(2),n(36),n(148);var r=n(409),o=n(133);var i=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),c=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),u=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),l={POSITION:{size:3,value:new Float32Array(a)},NORMAL:{size:3,value:new Float32Array(c)},TEXCOORD_0:{size:2,value:new Float32Array(u)}},s=function(e){var t,n;function r(t){void 0===t&&(t={});var n=t.id,r=void 0===n?Object(o.c)("cube-geometry"):n;return e.call(this,Object.assign({},t,{id:r,indices:{size:1,value:new Uint16Array(i)},attributes:Object.assign({},l,{},t.attributes)}))||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(r.a)}}]);
//# sourceMappingURL=component---templates-core-example-cubemap-jsx-a78c67a37e75fed70a51.js.map