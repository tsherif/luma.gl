(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{429:function(o,r,n){"use strict";n.r(r);var t=n(1),e=n.n(t),i=n(407),a=(n(10),n(295)),c=n(291),l=n(476),d=n(409),v=n(458),s=n(452),p=n(453),m=n(65);var u="attribute vec3 positions;\nattribute vec3 normals;\n\nuniform vec3 uColor;\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\n\nvarying vec3 color;\n\nvoid main(void) {\n  vec3 normal = vec3(uModel * vec4(normals, 0.0));\n\n  // Set up data for modules\n  color = uColor;\n  LUMAGL_normal(normal);\n  gl_Position = uProjection * uView * uModel * vec4(positions, 1.0);\n}\n",_="precision highp float;\n\nvarying vec3 color;\n\nvoid main(void) {\n  gl_FragColor = vec4(color, 1.);\n  LUMAGL_fragmentColor(gl_FragColor);\n}\n",f=function(o){var r,n;function t(){return o.call(this,{debug:!0})||this}n=o,(r=t).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,t.getInfo=function(){return"\nUsing a ProgramManager to cache and share programs between models.\n"};var e=t.prototype;return e.onInitialize=function(o){var r=o.gl,n=o.aspect;Object(a.a)(r,{clearColor:[0,0,0,1],clearDepth:1,depthTest:!0,depthFunc:r.LEQUAL});var t=new c.a(r);t.addShaderHook("vs:LUMAGL_normal(inout vec3 normal)"),t.addShaderHook("fs:LUMAGL_fragmentColor(inout vec4 color)"),t.addModuleInjection(l.a,{hook:"vs:LUMAGL_normal",injection:"project_setNormal(normal);"}),t.addModuleInjection(l.a,{hook:"fs:LUMAGL_fragmentColor",injection:"color = dirlight_filterColor(color);"});var e=[[2,-2,0],[2,2,0],[-2,2,0],[-2,-2,0]],i=[[Math.random(),Math.random(),Math.random()],[Math.random(),Math.random(),Math.random()],[Math.random(),Math.random(),Math.random()],[Math.random(),Math.random(),Math.random()]],s=[[1,0,0],[0,1,0],[0,0,1],[1,1,0]];this.cubes=new Array(4);for(var f=0;f<4;++f)this.cubes[f]={translation:e[f],rotation:i[f],model:new d.a(r,{programManager:t,vs:u,fs:_,modules:f%2==0?[]:[l.a],geometry:new v.a,uniforms:{uProjection:(new p.a).perspective({fov:Object(m.e)(60),aspect:n,near:1,far:20}),uView:(new p.a).lookAt({center:[0,0,0],eye:[0,0,-8]}),uColor:s[f]}})};return{programManager:t}},e.onRender=function(o){var r=o.gl,n=o.tick,t=o.programManager;if(n%240==0&&(n%480==0?t.removeDefaultModule(l.a):t.addDefaultModule(l.a)),n%120==0)for(var e=n%240==0,i=0;i<4;++i)this.cubes[i].model.setProgram({vs:u,fs:_,modules:i%2===Number(e)?[]:[l.a]});var a=new p.a;r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);for(var c=0;c<4;++c){var d=this.cubes[c];d.rotation[0]+=.01,d.rotation[1]+=.01,d.rotation[2]+=.01,a.identity().translate(d.translation).rotateXYZ(d.rotation),d.model.setUniforms({uModel:a}).draw()}},e.onFinalize=function(o){o.gl;for(var r=0;r<4;++r)this.cubes[r].model.delete()},t}(s.a);"undefined"==typeof window||window.website||(new f).start();n.d(r,"default",(function(){return M}));var M=function(o){var r,n;function t(){return o.apply(this,arguments)||this}return n=o,(r=t).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,t.prototype.render=function(){return e.a.createElement(i.a,{AnimationLoop:f,exampleConfig:this.props.pageContext.exampleConfig})},t}(e.a.Component)},458:function(o,r,n){"use strict";n.d(r,"a",(function(){return v}));n(2),n(35),n(146);var t=n(408),e=n(132);var i=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),a=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),c=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),l=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),d={POSITION:{size:3,value:new Float32Array(a)},NORMAL:{size:3,value:new Float32Array(c)},TEXCOORD_0:{size:2,value:new Float32Array(l)}},v=function(o){var r,n;function t(r){void 0===r&&(r={});var n=r.id,t=void 0===n?Object(e.c)("cube-geometry"):n;return o.call(this,Object.assign({},r,{id:t,indices:{size:1,value:new Uint16Array(i)},attributes:Object.assign({},d,{},r.attributes)}))||this}return n=o,(r=t).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,t}(t.a)},476:function(o,r,n){"use strict";n(35);var t=n(453),e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i={modelMatrix:e,viewMatrix:e,projectionMatrix:e,cameraPositionWorld:[0,0,0]};var a={name:"project",getUniforms:function(o,r){void 0===o&&(o=i),void 0===r&&(r={});var n={};return void 0!==o.modelMatrix&&(n.modelMatrix=o.modelMatrix),void 0!==o.viewMatrix&&(n.viewMatrix=o.viewMatrix),void 0!==o.projectionMatrix&&(n.projectionMatrix=o.projectionMatrix),void 0!==o.cameraPositionWorld&&(n.cameraPositionWorld=o.cameraPositionWorld),void 0===o.projectionMatrix&&void 0===o.viewMatrix||(n.viewProjectionMatrix=new t.a(o.projectionMatrix).multiplyRight(o.viewMatrix)),n},vs:"varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n\n\n// Unprefixed uniforms\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n",fs:"\nvarying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n"},c={lightDirection:new Float32Array([1,1,2])};r.a={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\n\n/*\n * Returns color attenuated by angle from light source\n */\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(o){void 0===o&&(o=c);var r={};return o.lightDirection&&(r.dirlight_uLightDirection=o.lightDirection),r},dependencies:[a]}}}]);
//# sourceMappingURL=component---templates-core-example-program-management-jsx-78c7d95cf1212ef1d1b9.js.map