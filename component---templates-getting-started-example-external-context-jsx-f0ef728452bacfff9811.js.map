{"version":3,"sources":["webpack:///../examples/utils/index.js","webpack:///../examples/getting-started/external-context/app.js","webpack:///./templates/getting-started/example-external-context.jsx"],"names":["MiniAnimationLoop","start","stop","delete","onFinalize","waitForRender","Promise","_setDisplay","_getCanvas","props","canvas","document","dpr","window","_getContainer","this","container","parent","width","height","style","position","top","appendChild","_removeContainer","removeChild","getRandom","s","c","Math","n","AppAnimationLoop","getInfo","gl","instrumentGLContext","positionBuffer","Float32Array","colorBuffer","model","vs","fs","attributes","color","vertexCount","resources","requestAnimationFrame","draw","clear","cancelAnimationFrame","animationLoop","Example","render","pageContext","exampleConfig","AnimationLoop","React","Component"],"mappings":"wLAIaA,EAAb,mCACE,WACE,MAAM,IAFV,iCAKEC,aALF,OAOEC,aAPF,SASEC,aATF,aAWEC,aAXF,gBAaEC,WACE,OAAOC,QAAP,WAdJ,cAiBEC,aAjBF,aAmBEC,YACE,MACA,QAFqB,IAAZC,MAAQ,IAEbA,EAAJ,OAAkB,CAChBC,EAASC,wBAAwBF,EAAjCC,QACA,IAAME,EAAMC,yBAAZ,EACAH,SAAgBA,eAAhBA,EACAA,QAAeA,cAAfA,OAEAA,EAASC,uBAATD,WACAA,UACAA,aACAC,6BAGF,OAAOD,GAjCX,gBAoCEI,YACE,QADwB,IAAZL,MAAQ,IAChBM,KAAJ,UACE,OAAOA,KAAP,UAGF,MACA,EAIA,GAFAA,KAAKC,UAAYL,uBAAjB,OAEIF,EAAJ,OAAkB,CAChB,IAAMC,EAASC,wBAAwBF,EAAvC,QACAM,KAAKE,OAASP,EAAd,cACAQ,EAAQR,EAARQ,YACAC,EAAST,EAATS,aACAJ,KAAKC,UAAUI,MAAMC,SAArB,WACAN,KAAKC,UAAUI,MAAME,IAArB,gBAEAP,KAAKE,OAASN,SAAd,KACAO,MACAC,MAOF,OAJAJ,KAAKC,UAAUI,MAAMF,MAAWA,EAAhC,KACAH,KAAKC,UAAUI,MAAMD,OAAYA,EAAjC,KACAJ,KAAKE,OAAOM,YAAYR,KAAxB,WAEOA,KAAP,WA/DJ,mBAkEES,iBAA6B,IAAZf,MAAQ,IACvBM,KAAKE,OAAOQ,YAAYV,KAAxB,YAnEJ,KAwEO,SAASW,IACd,IAAIC,EAAJ,EACIC,EAAJ,EACA,OAAO,WAGL,OAFAD,EAAIE,SAAJF,MAAaC,GACbA,EAAIC,SAAJD,MAAaD,IAKFG,EAJX,QAAaD,SAASF,EAATE,IAKJA,WAAX,GADF,IAAeC,K,wJC/Ef,IAIqBC,E,+JACZC,QAAP,WACE,MANJ,wD,2BASE/B,kBACE,IAAMS,EAASK,KAAKP,WAApB,GACMyB,EAAKC,YACTxB,uBAA8BA,aADhC,uBAGAuB,sBAEA,IAAME,EAAiB,IAAI,EAAJ,IAAe,IAAIC,aAAa,kBAAvD,MAEMC,EAAc,IAAI,EAAJ,IAElB,IAAID,aAAa,CAAC,EAAI,EAAL,YAFnB,KAyBME,EAAQ,IAAI,EAAJ,IAAc,CAC1BC,GArBF,8MAsBEC,GAVF,gHAWEC,WAAY,CACVpB,SADU,EAEVqB,MAAOL,GAETM,YAAa,IAGTC,EAAY,CAChBT,eADgB,EAEhBE,YAFgB,EAGhBC,SAGFM,YAAsBC,uBAAsB,SAASC,IACnDF,YAAsBC,sBAAtBD,GAEAG,YAAMd,EAAI,CAACS,MAAO,CAAC,EAAE,EAAH,OAClBJ,YAGFvB,KAAK6B,UAAL,G,EAGF1C,gBACE8C,qBAAqBjC,KAAK6B,UAA1BI,Y,EAGF7C,kBAAU,IAAD,EACsCY,KADtC,UACAoB,EADA,iBACgBE,EADhB,cAC6BC,EAD7B,QAEPH,WACAE,WACAC,Y,GAzE0CtC,KA6E1C,oBAAOa,QAA2BA,OAAtC,UACwB,IAAtB,GACAoC,Q,4CCtFmBC,E,gLACnBC,kBAAU,IACAC,EAAgBrC,KADjB,kBAEDsC,EAAiBD,GAAeA,EAAhB,eAAtB,GACA,OACE,uBAA0BE,cAA1B,EAAwDD,cAAeA,K,GALxCE,IAAMC","file":"component---templates-getting-started-example-external-context-jsx-f0ef728452bacfff9811.js","sourcesContent":["/* global window, document */\n\n// Light class implementing the AnimationLoop interface\n// use by examples w/o creating a gl context\nexport class MiniAnimationLoop {\n  static getInfo() {\n    return '';\n  }\n\n  start() {}\n\n  stop() {}\n\n  delete() {}\n\n  onFinalize() {}\n\n  waitForRender() {\n    return Promise.resolve();\n  }\n\n  _setDisplay() {}\n\n  _getCanvas(props = {}) {\n    let canvas;\n    if (props.canvas) {\n      canvas = document.getElementById(props.canvas);\n      const dpr = window.devicePixelRatio || 1;\n      canvas.height = canvas.clientHeight * dpr;\n      canvas.width = canvas.clientWidth * dpr;\n    } else {\n      canvas = document.createElement('canvas');\n      canvas.width = 800;\n      canvas.height = 600;\n      document.body.appendChild(canvas);\n    }\n\n    return canvas;\n  }\n\n  _getContainer(props = {}) {\n    if (this.container) {\n      return this.container;\n    }\n\n    let width;\n    let height;\n\n    this.container = document.createElement('div');\n\n    if (props.canvas) {\n      const canvas = document.getElementById(props.canvas);\n      this.parent = canvas.parentElement;\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n      this.container.style.position = 'relative';\n      this.container.style.top = `-${height}px`;\n    } else {\n      this.parent = document.body;\n      width = 800;\n      height = 800;\n    }\n\n    this.container.style.width = `${width}px`;\n    this.container.style.height = `${height}px`;\n    this.parent.appendChild(this.container);\n\n    return this.container;\n  }\n\n  _removeContainer(props = {}) {\n    this.parent.removeChild(this.container);\n  }\n}\n\n// Create a deterministic pseudorandom number generator\nexport function getRandom() {\n  let s = 1;\n  let c = 1;\n  return () => {\n    s = Math.sin(c * 17.23);\n    c = Math.cos(s * 27.92);\n    return fract(Math.abs(s * c) * 1432.71);\n  };\n}\n\nfunction fract(n) {\n  return n - Math.floor(n);\n}\n","/* global window, requestAnimationFrame, cancelAnimationFrame */\nimport 'core-js';\nimport {Model} from '@luma.gl/engine';\nimport {Buffer, clear} from '@luma.gl/webgl';\nimport {instrumentGLContext} from '@luma.gl/gltools';\nimport {MiniAnimationLoop} from '../../utils';\n\nconst INFO_HTML = `\nUsing an externally created context with luma.gl\n`;\n\nexport default class AppAnimationLoop extends MiniAnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  start(props) {\n    const canvas = this._getCanvas(props);\n    const gl = instrumentGLContext(\n      canvas.getContext('webgl') || canvas.getContext('experimental-webgl')\n    );\n    gl.clearColor(0, 0, 0, 1);\n\n    const positionBuffer = new Buffer(gl, new Float32Array([-0.5, -0.5, 0.5, -0.5, 0.0, 0.5]));\n\n    const colorBuffer = new Buffer(\n      gl,\n      new Float32Array([1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0])\n    );\n\n    const vs = `\n      attribute vec2 position;\n      attribute vec3 color;\n\n      varying vec3 vColor;\n\n      void main() {\n        vColor = color;\n        gl_Position = vec4(position, 0.0, 1.0);\n      }\n    `;\n\n    const fs = `\n      varying vec3 vColor;\n\n      void main() {\n        gl_FragColor = vec4(vColor, 1.0);\n      }\n    `;\n\n    const model = new Model(gl, {\n      vs,\n      fs,\n      attributes: {\n        position: positionBuffer,\n        color: colorBuffer\n      },\n      vertexCount: 3\n    });\n\n    const resources = {\n      positionBuffer,\n      colorBuffer,\n      model\n    };\n\n    resources.rafHandle = requestAnimationFrame(function draw() {\n      resources.rafHandle = requestAnimationFrame(draw);\n\n      clear(gl, {color: [0, 0, 0, 1]});\n      model.draw();\n    });\n\n    this.resources = resources;\n  }\n\n  stop() {\n    cancelAnimationFrame(this.resources.rafHandle);\n  }\n\n  delete() {\n    const {positionBuffer, colorBuffer, model} = this.resources;\n    positionBuffer.delete();\n    colorBuffer.delete();\n    model.delete();\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/getting-started/external-context/app';\n\nexport default class Example extends React.Component {\n  render() {\n    const { pageContext } = this.props;\n    const exampleConfig = (pageContext && pageContext.exampleConfig) || {};\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={exampleConfig} />\n    );\n  }\n}\n"],"sourceRoot":""}