{"version":3,"sources":["webpack:///../examples/utils/index.js","webpack:///../examples/getting-started/hello-instancing-low/app.js","webpack:///./templates/getting-started/example-hello-instancing-low.jsx"],"names":["MiniAnimationLoop","start","stop","delete","onFinalize","_setDisplay","_getCanvas","props","canvas","document","dpr","window","_getContainer","this","container","parent","width","height","style","position","top","appendChild","_removeContainer","removeChild","getRandom","s","c","Math","n","AppAnimationLoop","getInfo","isDemoSupported","Boolean","gl","polyfillContext","vShader","fShader","program","vertexArray","positionBuffer","Float32Array","positionLocation","colorBuffer","colorLocation","offsetBuffer","offsetLocation","resources","requestAnimationFrame","draw","cancelAnimationFrame","animationLoop","Example","render","pageContext","exampleConfig","AnimationLoop","React","Component"],"mappings":"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","file":"component---templates-getting-started-example-hello-instancing-low-jsx-9270480f7e0976eed486.js","sourcesContent":["/* global window, document */\n\n// Light class implementing the AnimationLoop interface\n// use by examples w/o creating a gl context\nexport class MiniAnimationLoop {\n  static getInfo() {\n    return '';\n  }\n\n  start() {}\n\n  stop() {}\n\n  delete() {}\n\n  onFinalize() {}\n\n  _setDisplay() {}\n\n  _getCanvas(props = {}) {\n    let canvas;\n    if (props.canvas) {\n      canvas = document.getElementById(props.canvas);\n      const dpr = window.devicePixelRatio || 1;\n      canvas.height = canvas.clientHeight * dpr;\n      canvas.width = canvas.clientWidth * dpr;\n    } else {\n      canvas = document.createElement('canvas');\n      canvas.width = 800;\n      canvas.height = 600;\n      document.body.appendChild(canvas);\n    }\n\n    return canvas;\n  }\n\n  _getContainer(props = {}) {\n    if (this.container) {\n      return this.container;\n    }\n\n    let width;\n    let height;\n\n    this.container = document.createElement('div');\n\n    if (props.canvas) {\n      const canvas = document.getElementById(props.canvas);\n      this.parent = canvas.parentElement;\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n      this.container.style.position = 'relative';\n      this.container.style.top = `-${height}px`;\n    } else {\n      this.parent = document.body;\n      width = 800;\n      height = 800;\n    }\n\n    this.container.style.width = `${width}px`;\n    this.container.style.height = `${height}px`;\n    this.parent.appendChild(this.container);\n\n    return this.container;\n  }\n\n  _removeContainer(props = {}) {\n    this.parent.removeChild(this.container);\n  }\n}\n\n// Create a deterministic pseudorandom number generator\nexport function getRandom() {\n  let s = 1;\n  let c = 1;\n  return () => {\n    s = Math.sin(c * 17.23);\n    c = Math.cos(s * 27.92);\n    return fract(Math.abs(s * c) * 1432.71);\n  };\n}\n\nfunction fract(n) {\n  return n - Math.floor(n);\n}\n","/* global window, requestAnimationFrame, cancelAnimationFrame */\nimport 'core-js';\nimport {polyfillContext} from '@luma.gl/gltools';\nimport {MiniAnimationLoop} from '../../utils';\n\nconst INFO_HTML = `\nInstanced triangles using luma.gl's low-level API\n`;\n\nexport default class AppAnimationLoop extends MiniAnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  start(props) {\n    const canvas = this._getCanvas(props);\n\n    this.isDemoSupported = Boolean(canvas.getContext('webgl'));\n    if (!this.isDemoSupported) {\n      return;\n    }\n\n    const gl = polyfillContext(canvas.getContext('webgl'));\n    gl.clearColor(0, 0, 0, 1);\n\n    const vs = `\n      attribute vec2 position;\n      attribute vec3 color;\n      attribute vec2 offset;\n\n      varying vec3 vColor;\n\n      void main() {\n        vColor = color;\n        gl_Position = vec4(position + offset, 0.0, 1.0);\n      }\n    `;\n    const fs = `\n      precision highp float;\n\n      varying vec3 vColor;\n\n      void main() {\n        gl_FragColor = vec4(vColor, 1.0);\n      }\n    `;\n\n    const vShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vShader, vs);\n    gl.compileShader(vShader);\n\n    const fShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fShader, fs);\n    gl.compileShader(fShader);\n\n    const program = gl.createProgram();\n    gl.attachShader(program, vShader);\n    gl.attachShader(program, fShader);\n    gl.linkProgram(program);\n\n    const vertexArray = gl.createVertexArray();\n    gl.bindVertexArray(vertexArray);\n\n    const positionBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n    gl.bufferData(\n      gl.ARRAY_BUFFER,\n      new Float32Array([-0.2, -0.2, 0.2, -0.2, 0.0, 0.2]),\n      gl.STATIC_DRAW\n    );\n\n    const positionLocation = gl.getAttribLocation(program, 'position');\n    gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(positionLocation);\n\n    const colorBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\n    gl.bufferData(\n      gl.ARRAY_BUFFER,\n      new Float32Array([1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0]),\n      gl.STATIC_DRAW\n    );\n\n    const colorLocation = gl.getAttribLocation(program, 'color');\n    gl.vertexAttribPointer(colorLocation, 3, gl.FLOAT, false, 0, 0);\n    gl.vertexAttribDivisor(colorLocation, 1);\n    gl.enableVertexAttribArray(colorLocation);\n\n    const offsetBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, offsetBuffer);\n    gl.bufferData(\n      gl.ARRAY_BUFFER,\n      new Float32Array([0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5]),\n      gl.STATIC_DRAW\n    );\n\n    const offsetLocation = gl.getAttribLocation(program, 'offset');\n    gl.vertexAttribPointer(offsetLocation, 2, gl.FLOAT, false, 0, 0);\n    gl.vertexAttribDivisor(offsetLocation, 1);\n    gl.enableVertexAttribArray(offsetLocation);\n\n    gl.bindVertexArray(null);\n\n    const resources = {\n      gl,\n      positionBuffer,\n      colorBuffer,\n      offsetBuffer,\n      program,\n      vertexArray\n    };\n\n    resources.rafHandle = requestAnimationFrame(function draw() {\n      resources.rafHandle = requestAnimationFrame(draw);\n\n      gl.clear(gl.COLOR_BUFFER_BIT);\n      gl.bindVertexArray(vertexArray);\n      gl.useProgram(program);\n      gl.drawArraysInstanced(gl.TRIANGLES, 0, 3, 4);\n    });\n\n    gl.deleteShader(vShader);\n    gl.deleteShader(fShader);\n\n    this.resources = resources;\n  }\n\n  stop() {\n    if (!this.isDemoSupported) {\n      return;\n    }\n    cancelAnimationFrame(this.resources.rafHandle);\n  }\n\n  delete() {\n    if (!this.isDemoSupported) {\n      return;\n    }\n\n    const {gl, positionBuffer, colorBuffer, offsetBuffer, program, vertexArray} = this.resources;\n    gl.deleteBuffer(positionBuffer);\n    gl.deleteBuffer(colorBuffer);\n    gl.deleteBuffer(offsetBuffer);\n    gl.deleteProgram(program);\n    gl.deleteVertexArray(vertexArray);\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/getting-started/hello-instancing-low/app';\n\nexport default class Example extends React.Component {\n  render() {\n    const { pageContext } = this.props;\n    const exampleConfig = (pageContext && pageContext.exampleConfig) || {};\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={exampleConfig} />\n    );\n  }\n}\n"],"sourceRoot":""}