(window.webpackJsonp=window.webpackJsonp||[]).push([[31,3],{297:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),a=r(335),s=r(318),o=r.n(s),u=r(448),f=r(405),d=r(428),c=r(570),l=r(586),h=r(354),g=(r(317),r(12),r(28),r(326)),m=r(569),v=r(364);var p="attribute vec3 positions;\nattribute vec2 texCoords;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * vec4(positions, 1.0);\n  vTextureCoord = texCoords;\n}\n",_="precision highp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void) {\n  gl_FragColor = vec4(texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t)).rgb, 1.0);\n}\n";var b=function(e){var t,r;function n(t){void 0===t&&(t={});var r=new m.a(t.gl,{fs:_,vs:p});return e.call(this,t.gl,{program:r,geometry:t.geometry,uniforms:{uSampler:t.texture}})||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n}(v.a),y=r(485);var E={pitch:0,pitchRate:0,yaw:0,yawRate:0,xPos:0,yPos:.4,zPos:0,speed:0,joggingAngle:0,direction:[0,0,-1]},O={lastTime:0},A={},M=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.getInfo=function(){return'\n<p>\n  <a href="http://learningwebgl.com/blog/?p=1067" target="_blank">\n    Loading a world, and the most basic kind of camera\n  </a>\n\n  </br>\n  </br>\n  Use the cursor keys or WASD to run around, and <code>+</code>/<code>-</code> to look up and down.\n<p>\nThe classic WebGL Lessons in luma.gl\n'};var i=n.prototype;return i.onInitialize=function(e){var t,r=e.canvas,n=e.gl;this.eventManager=new y.a(r),this.eventManager.on({keydown:function(e){A[e.srcEvent.code]=!0},keyup:function(e){A[e.srcEvent.code]=!1}}),function(e){var t=!1,r=0,n=0;e.on({panstart:function(e){t=!0,r=e.offsetCenter.x,n=e.offsetCenter.y},panend:function(){t=!1},panmove:function(e){if(t){var i=e.offsetCenter.x-r,a=e.offsetCenter.y-n;E.yaw+=.1*i,E.pitch+=.1*a,r=e.offsetCenter.x,n=e.offsetCenter.y}}})}(this.eventManager),Object(u.a)(n,{clearColor:[0,0,0,1],clearDepth:1,depthTest:!0});var i=new f.a(n,{data:"cave.jpg",parameters:(t={},t[n.TEXTURE_WRAP_S]=n.MIRRORED_REPEAT,t[n.TEXTURE_WRAP_T]=n.MIRRORED_REPEAT,t)});return Object(d.a)("world.txt").then(function(e){var t=function(e){var t=e.split("\n"),r=[],n=[];for(var i in t){var a=t[i].replace(/^\s+/,"").split(/\s+/);5===a.length&&"//"!==a[0]&&(r.push(parseFloat(a[0])),r.push(parseFloat(a[1])),r.push(parseFloat(a[2])),n.push(parseFloat(a[3])),n.push(parseFloat(a[4])))}return new g.a({vertexCount:r.length/3,attributes:{positions:new Float32Array(r),texCoords:new Float32Array(n)}})}(e);return{world:new b({gl:n,geometry:t,texture:i})}})},i.onRender=function(e){var t=e.gl,r=(e.tick,e.aspect),n=e.world,i=[E.xPos,E.yPos,E.zPos],a=(new l.a).rotateX(Object(h.e)(E.pitch)).rotateY(Object(h.e)(E.yaw)).transform(E.direction).map(function(e,t){return e+i[t]}),s=(new l.a).lookAt({eye:i,center:a,up:[0,1,0]});return function(){A.PageUp||A.Equal?E.pitchRate=.1:A.PageDown||A.Minus?E.pitchRate=-.1:E.pitchRate=0;A.ArrowLeft||A.KeyA?E.yawRate=.1:A.ArrowRight||A.KeyD?E.yawRate=-.1:E.yawRate=0;A.ArrowUp||A.KeyW?E.speed=.003:A.ArrowDown||A.KeyS?E.speed=-.003:E.speed=0}(),function(){var e=(new Date).getTime();if(0!==O.lastTime){var t=e-O.lastTime;0!==E.speed&&(E.xPos-=Math.sin(Object(h.e)(E.yaw))*E.speed*t,E.zPos-=Math.cos(Object(h.e)(E.yaw))*E.speed*t,E.joggingAngle+=.6*t,E.yPos=Math.sin(Object(h.e)(E.joggingAngle))/20+.4),E.yaw+=E.yawRate*t,E.pitch+=E.pitchRate*t}O.lastTime=e}(),t.clear(o.a.COLOR_BUFFER_BIT|o.a.DEPTH_BUFFER_BIT),n.setUniforms({uMVMatrix:s,uPMatrix:(new l.a).perspective({fov:45*Math.PI/180,aspect:r,near:.1,far:100})}).draw()},i.onFinalize=function(){this.eventManager.destroy()},n}(c.a);"undefined"==typeof window||window.website||(new M).start();r.d(t,"default",function(){return x});var x=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){return i.a.createElement(a.a,{AnimationLoop:M,exampleConfig:this.props.pageContext.exampleConfig})},n}(i.a.Component)},326:function(e,t,r){"use strict";r.d(t,"a",function(){return u});r(135),r(316),r(3);var n=r(511),i=r(429);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}var o={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},u=function(){function e(e){void 0===e&&(e={});var t=e,r=t.id,i=void 0===r?Object(n.c)("geometry"):r,a=t.drawMode,s=void 0===a?o.TRIANGLES:a,u=t.attributes,f=void 0===u?{}:u,d=t.indices,c=void 0===d?null:d,l=t.vertexCount,h=void 0===l?null:l;this.id=i,this.drawMode=0|s,this.attributes={},this.userData={},this._setAttributes(f,c),this.vertexCount=h||this._calculateVertexCount(this.attributes,this.indices)}s(e,null,[{key:"DRAW_MODE",get:function(){return o}}]);var t=e.prototype;return t.getVertexCount=function(){return this.vertexCount},t.getAttributes=function(){return this.indices?Object.assign({indices:this.indices},this.attributes):this.attributes},t._print=function(e){return"Geometry "+this.id+" attribute "+e},t._setAttributes=function(e,t){for(var r in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var n=e[r];n=ArrayBuffer.isView(n)?{value:n}:n,Object(i.a)(ArrayBuffer.isView(n.value),this._print(r)+": must be typed array or object with value as typed array"),"POSITION"!==r&&"positions"!==r||n.size||(n.size=3),"indices"===r?(Object(i.a)(!this.indices),this.indices=n):this.attributes[r]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this},t._calculateVertexCount=function(e,t){if(t)return t.value.length;var r=1/0;for(var n in e){var a=e[n],s=a.value,o=a.size;!a.constant&&s&&o>=1&&(r=Math.min(r,s.length/o))}return Object(i.a)(Number.isFinite(r)),r},s(e,[{key:"mode",get:function(){return this.drawMode}}]),e}()},341:function(e,t,r){"use strict";r(76),r(135),r(316),r(10),r(8),r(5),r(63),r(3),r(20),r(12),r(28);var n=r(359),i=r(342);r(6),r(4),r(9);var a=r(377),s=7936,o=7937,u=7938,f=35724,d={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},c={};Object.keys(d).forEach(function(e){c[e]=e});var l={};function h(e,t,r){void 0===r&&(r={});var n=d[t];if(Object(a.a)(n,t),!function(e){void 0===e&&(e={});var t="undefined"!=typeof window&&window.navigator||{},r=e.userAgent||t.userAgent||"",n=-1!==r.indexOf("MSIE "),i=-1!==r.indexOf("Trident/");return n||i}(r))return!0;if(t in l)return l[t];var i="#extension GL_"+n[0]+" : "+(r.behavior||"enable")+"\nvoid main(void) {}",s=e.createShader(e.VERTEX_SHADER);e.shaderSource(s,i),e.compileShader(s);var o=e.getShaderParameter(s,e.COMPILE_STATUS);return e.deleteShader(s),l[t]=o,o}function g(e,t){var r=d[t];Object(a.a)(r,t);var n=function(e){return Boolean(e&&2===e._version)}(e)&&r[1]||r[0],i="string"==typeof n?Boolean(e.getExtension(n)):n;return Object(a.a)(!1===i||!0===i),i}function m(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return g(e,t)})}function v(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||s),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||o);return{gpuVendor:function(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(r,n),vendor:r,renderer:n,version:e.getParameter(u),shadingLanguageVersion:e.getParameter(f)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}var p,_,b,y=r(351);r.d(t,"c",function(){return D}),r.d(t,"b",function(){return C}),r.d(t,"a",function(){return R});var E="\n\n"+y.a+"\n\n",O=((p={})[n.b]="vertex",p[n.a]="fragment",p),A=((_={})[n.b]={},_[n.a]={},_),M=((b={})[n.b]={},b[n.a]={},b),x="precision highp float;\n\n";function D(e,t){void 0===t&&(t={});var r=(e=e.trim()).split(":"),n=r[0],i=r[1],a=e.replace(/\(.+/,"");A[n][a]=Object.assign(t,{signature:i})}function C(e,t){var r=t.hook,n=t.injection,i=t.order,s=void 0===i?0:i,o=r.slice(0,2),u=M[o];u[e]=u[e]||{},Object(a.a)(!u[e][r],"Module injection already created"),u[e][r]={injection:n,order:s}}function R(e,t){var r=t.vs,a=t.fs,s=Object(i.b)(t.modules||[]);return{gl:e,vs:T(e,Object.assign({},t,{source:r,type:n.b,modules:s})),fs:T(e,Object.assign({},t,{source:a,type:n.a,modules:s})),getUniforms:P(s),modules:w(s)}}function T(e,t){var r,i,s=t.id,o=t.source,u=t.type,f=t.modules,d=t.defines,l=void 0===d?{}:d,g=t.hookFunctions,p=void 0===g?A:g,_=t.moduleInjections,b=void 0===_?M:_,D=t.inject,C=void 0===D?{}:D,R=t.prologue,T=void 0===R||R,P=t.log;(Object(a.a)("string"==typeof o,"shader source must be a string"),p!==A)&&((r={})[n.b]=Object.assign({},A[n.b],p[n.b]),r[n.a]=Object.assign({},A[n.a],p[n.a]),p=r);b!==M&&((i={})[n.b]=Object.assign({},M[n.b],b[n.b]),i[n.a]=Object.assign({},M[n.a],b[n.a]),b=i);var w=u===n.b,j=o.split("\n"),I=100,S="",L=o;0===j[0].indexOf("#version ")?(I=300,S=j[0],L=j.slice(1).join("\n")):S="#version "+I;var F={};f.forEach(function(e){Object.assign(F,e.getDefines())}),Object.assign(F,l);var U=T?S+"\n"+function(e){var t=e.id,r=e.source,n=e.type;return t&&"string"==typeof t&&-1===r.indexOf("SHADER_NAME")?"\n#define SHADER_NAME "+t+"_"+O[n]+"\n\n":""}({id:s,source:o,type:u})+"\n"+function(e){var t=e.type;return"\n#define SHADER_TYPE_"+O[t].toUpperCase()+"\n"}({type:u})+"\n"+v(e)+"\n"+function(e,t,r){var n="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return m(e,c.GLSL_FRAG_DEPTH)&&(n+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),m(e,c.GLSL_DERIVATIVES)&&h(e,c.GLSL_DERIVATIVES)&&(n+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),m(e,c.GLSL_FRAG_DATA)&&h(e,c.GLSL_FRAG_DATA,{behavior:"require"})&&(n+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),m(e,c.GLSL_TEXTURE_LOD)&&(n+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),n}(e)+"\n"+function(e){void 0===e&&(e={});var t=0,r="";for(var n in e){0===t&&(r+="\n// APPLICATION DEFINES\n"),t++;var i=e[n];(i||Number.isFinite(i))&&(r+="#define "+n.toUpperCase()+" "+e[n]+"\n")}0===t&&(r+="\n");return r}(F)+"\n"+(w?"":x)+"\n":S+"\n",N=!1,k={},G={};for(var B in C){var V="string"==typeof C[B]?{injection:C[B],order:0}:C[B];B.match(/^(v|f)s:/)?"#"===B[3]?G[B]=[V]:k[B]=[V]:G[B]=[V]}var H=f,z=Array.isArray(H),X=0;for(H=z?H:H[Symbol.iterator]();;){var W;if(z){if(X>=H.length)break;W=H[X++]}else{if((X=H.next()).done)break;W=X.value}var K=W;switch(K.name){case"inject":N=!0;break;default:if(P&&K.checkDeprecations(L,P),U+=K.getModuleSource(u,I),b[u][K.name]){var Q=b[u][K.name];for(var Y in Q)Y.match(/^(v|f)s:#/)?(G[Y]=G[Y]||[],G[Y].push(Q[Y])):(k[Y]=k[Y]||[],k[Y].push(Q[Y]))}}}return U+=E,U+=function(e,t){var r="";for(var n in e){var i=e[n];if(r+="void "+i.signature+" {\n",i.header&&(r+="  "+i.header),t[n]){var a=t[n];a.sort(function(e,t){return e.order-t.order});for(var s=a,o=Array.isArray(s),u=0,s=o?s:s[Symbol.iterator]();;){var f;if(o){if(u>=s.length)break;f=s[u++]}else{if((u=s.next()).done)break;f=u.value}var d=f;r+="  "+d.injection+"\n"}}i.footer&&(r+="  "+i.footer),r+="}\n"}return r}(p[u],k),U+=L,U=Object(y.c)(U,u,G,N)}function P(e){return function(t){var r={},n=e,i=Array.isArray(n),a=0;for(n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o=s.getUniforms(t,r);Object.assign(r,o)}return r}}function w(e){var t={},r=e,n=Array.isArray(r),a=0;for(r=n?r:r[Symbol.iterator]();;){var s;if(n){if(a>=r.length)break;s=r[a++]}else{if((a=r.next()).done)break;s=a.value}var o=s,u=Object(i.a)(o);t[o]=u}return t}},342:function(e,t,r){"use strict";r(20),r(10),r(8),r(5),r(6),r(4),r(9),r(76);var n=r(350),i=r(377),a=function(){function e(){this.shaderModules={},this.defaultShaderModules=[]}var t=e.prototype;return t.setDefaultShaderModules=function(e){this.defaultShaderModules=this.resolveModules(e)},t.getDefaultShaderModules=function(){return this.defaultShaderModules},t.registerShaderModules=function(e,t){var r=(void 0===t?{}:t).ignoreMultipleRegistrations,n=void 0!==r&&r,i=e,a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var o;if(a){if(s>=i.length)break;o=i[s++]}else{if((s=i.next()).done)break;o=s.value}var u=o;this._registerShaderModule(u,n)}},t.getShaderModule=function(e){if(e instanceof n.a)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||Object(i.a)(!1,"Unknown shader module "+e),t},t.resolveModules=function(e){var t=this;return e.map(function(e){return t.getShaderModule(e)})},t._registerShaderModule=function(e,t){if(void 0===t&&(t=!1),e instanceof n.a)return e;if(Object(i.a)(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module "+e.name+" already registered");return(e=new n.a(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]},e}();r.d(t,"b",function(){return o}),r.d(t,"a",function(){return u});var s=new a;function o(e){return e=e.concat(s.defaultShaderModules),f(e=s.resolveModules(e))}function u(e){return s.getShaderModule(e)}function f(e){var t={},r={};return d({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort(function(e,t){return r[t]-r[e]}).map(function(e){return t[e]})}function d(e){var t=e.modules,r=e.level,n=e.moduleMap,i=e.moduleDepth;if(r>=5)throw new Error("Possible loop in shader dependency graph");var a=t,s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var u;if(s){if(o>=a.length)break;u=a[o++]}else{if((o=a.next()).done)break;u=o.value}var f=u;n[f.name]=f,(void 0===i[f.name]||i[f.name]<r)&&(i[f.name]=r)}var c=t,l=Array.isArray(c),h=0;for(c=l?c:c[Symbol.iterator]();;){var g;if(l){if(h>=c.length)break;g=c[h++]}else{if((h=c.next()).done)break;g=h.value}var m=g;m.dependencies&&d({modules:m.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}}},343:function(e,t,r){"use strict";r.d(t,"a",function(){return o});r(3),r(32),r(4),r(20);var n=r(363),i=r(586),a=r(511),s=r(429),o=function(){function e(e){void 0===e&&(e={});var t=e.id;this.id=t||Object(a.c)(this.constructor.name),this.display=!0,this.position=new n.a,this.rotation=new n.a,this.scale=new n.a(1,1,1),this.matrix=new i.a,this.userData={},this.props={},this._setScenegraphNodeProps(e)}var t=e.prototype;return t.delete=function(){},t.setProps=function(e){return this._setScenegraphNodeProps(e),this},t.toString=function(){return"{type: ScenegraphNode, id: "+this.id+")}"},t.setPosition=function(e){return Object(s.a)(3===e.length,"setPosition requires vector argument"),this.position=e,this},t.setRotation=function(e){return Object(s.a)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this},t.setScale=function(e){return Object(s.a)(3===e.length,"setScale requires vector argument"),this.scale=e,this},t.setMatrix=function(e,t){void 0===t&&(t=!0),t?this.matrix.copy(e):this.matrix=e},t.setMatrixComponents=function(e){var t=e.position,r=e.rotation,n=e.scale,i=e.update,a=void 0===i||i;return t&&this.setPosition(t),r&&this.setRotation(r),n&&this.setScale(n),a&&this.updateMatrix(),this},t.updateMatrix=function(){var e=this.position,t=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(r),this},t.update=function(e){var t=void 0===e?{}:e,r=t.position,n=t.rotation,i=t.scale;return r&&this.setPosition(r),n&&this.setRotation(n),i&&this.setScale(i),this.updateMatrix(),this},t.getCoordinateUniforms=function(e,t){Object(s.a)(e),t=t||this.matrix;var r=new i.a(e).multiplyRight(t),n=r.invert(),a=n.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:r,worldInverseMatrix:n,worldInverseTransposeMatrix:a}},t._setScenegraphNodeProps=function(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)},e}()},349:function(e,t,r){"use strict";r(20),r(135),r(316),r(3);var n=r(318),i=r.n(n),a=r(347),s=r(409),o=(r(330),r(321),r(429)),u={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function f(e,t){var r=(t||{}).attributeMap,n=void 0===r?u:r;return n&&n[e]||e}function d(e,t){var r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors"}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}Object(o.a)(Number.isFinite(t.size),"attribute "+e+" needs size")}r(5),r(6),r(4),r(9),r(10),r(8),r(76),r(12),r(28),r(186);var c=r(341),l=r(569),h=function(){function e(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._moduleInjections={vs:{},fs:{}},this._hookFunctions={vs:{},fs:{}},this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}e.getDefaultProgramManager=function(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new e(t),t.luma.defaultProgramManager};var t=e.prototype;return t.addDefaultModule=function(e){this._defaultModules.find(function(t){return t.name===e.name})||this._defaultModules.push(e),this.stateHash++},t.removeDefaultModule=function(e){var t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(function(e){return e.name!==t}),this.stateHash++},t.addModuleInjection=function(e,t){var r="string"==typeof e?e:e.name,n=t.hook,i=t.injection,a=t.order,s=void 0===a?0:a,o=n.slice(0,2),u=this._moduleInjections[o];u[r]=u[r]||{},u[r][n]={injection:i,order:s},this.stateHash++},t.addShaderHook=function(e,t){void 0===t&&(t={});var r=(e=e.trim()).split(":"),n=r[0],i=r[1],a=e.replace(/\(.+/,"");this._hookFunctions[n][a]=Object.assign(t,{signature:i}),this.stateHash++},t.get=function(e){var t=this;void 0===e&&(e={});var r=e,n=r.vs,i=void 0===n?"":n,a=r.fs,s=void 0===a?"":a,o=r.defines,u=void 0===o?{}:o,f=r.inject,d=void 0===f?{}:f,h=r.varyings,g=void 0===h?[]:h,m=r.bufferMode,v=void 0===m?35981:m,p=this._getModuleList(e.modules),_=this._getHash(i),b=this._getHash(s),y=p.map(function(e){return t._getHash("string"==typeof e?e:e.name)}).sort(),E=g.map(function(e){return t._getHash(e)}),O=Object.keys(u).sort(),A=Object.keys(d).sort(),M=[],x=O,D=Array.isArray(x),C=0;for(x=D?x:x[Symbol.iterator]();;){var R;if(D){if(C>=x.length)break;R=x[C++]}else{if((C=x.next()).done)break;R=C.value}var T=R;M.push(this._getHash(T)),M.push(this._getHash(u[T]))}var P=A,w=Array.isArray(P),j=0;for(P=w?P:P[Symbol.iterator]();;){var I;if(w){if(j>=P.length)break;I=P[j++]}else{if((j=P.next()).done)break;I=j.value}var S=I;M.push(this._getHash(S)),M.push(this._getHash(d[S]))}var L=_+"/"+b+"D"+M.join("/")+"M"+y.join("/")+"I"+[].join("/")+"V"+E.join("/")+"H"+this.stateHash+"B"+v;if(!this._programCache[L]){var F=Object(c.a)(this.gl,{vs:i,fs:s,modules:p,inject:d,defines:u,hookFunctions:this._hookFunctions,moduleInjections:this._moduleInjections});this._programCache[L]=new l.a(this.gl,{hash:L,vs:F.vs,fs:F.fs,varyings:g,bufferMode:v}),this._getUniforms[L]=F.getUniforms||function(e){},this._useCounts[L]=0}return this._useCounts[L]++,this._programCache[L]},t.getUniforms=function(e){return this._getUniforms[e.hash]||null},t.release=function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])},t._getHash=function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]},t._getModuleList=function(e){void 0===e&&(e=[]);for(var t=new Array(this._defaultModules.length+e.length),r={},n=0,i=0,a=this._defaultModules.length;i<a;++i){var s=this._defaultModules[i],o="string"==typeof s?s:s.name;t[n++]=s,r[o]=!0}for(var u=0,f=e.length;u<f;++u){var d=e[u],c="string"==typeof d?d:d.name;r[c]||(t[n++]=d,r[c]=!0)}return t.length=n,t},e}(),g=r(510),m=r(435),v=r(515),p=r(574),_=r(353),b=r(512),y=r(355);function E(e,t){void 0===t&&(t={});var r=t.isInteger,n=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){for(var r=t.maxElts,n=void 0===r?16:r,i=t.size,a=void 0===i?1:i,s="[",o=0;o<e.length&&o<n;++o)o>0&&(s+=","+(o%a==0?" ":"")),s+=E(e[o],t);return s+(e.length>n?"...":"]")}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return n?"0":"0.";if(n)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function O(e,t,r,n){var i,s,o=e.gl;if(!t)return(s={})[n]="null",s["Format "]="N/A",s;var u,f,d,c="NOT PROVIDED",l="N/A",h="N/A",g="N/A";if(r&&(c=r.type,l=r.size,u=-1!==(c=String(c).replace("Array","")).indexOf("nt")),t instanceof a.a){var m,v,p=t,_=p.getDebugData(),y=_.data;if(f=_.modified?"*":"",d=y,h=(g=p.byteLength)/y.BYTES_PER_ELEMENT/l,r)v=(r.divisor>0?"I ":"P ")+" "+h+" (x"+l+"="+g+" bytes "+Object(b.a)(o,c)+")";else u=!0,v=g+" bytes";return(m={})[n]=""+f+E(d,{size:l,isInteger:u}),m["Format "]=v,m}return d=t,l=t.length,u=-1!==(c=String(t.constructor.name).replace("Array","")).indexOf("nt"),(i={})[n]=E(d,{size:l,isInteger:u})+" (constant)",i["Format "]=l+"x"+c+" (constant)",i}function A(e,t){var r=t.type,n=t.size,i=Object(y.b)(r,n);return i?e+" ("+i.name+")":e}r(63);function M(e){var t=void 0===e?{}:e,r=t.header,n=void 0===r?"Uniforms":r,i=t.program,a=t.uniforms,s=t.undefinedOnly,u=void 0!==s&&s;Object(o.a)(i);var f=i._uniformSetters,d={},c=Object.keys(f).sort(),l=0,h=c,g=Array.isArray(h),m=0;for(h=g?h:h[Symbol.iterator]();;){var v;if(g){if(m>=h.length)break;v=h[m++]}else{if((m=h.next()).done)break;v=m.value}var p=v;p.match(".*_.*")||p.match(".*Matrix")||x({table:d,header:n,uniforms:a,uniformName:p,undefinedOnly:u})&&l++}var _=c,b=Array.isArray(_),y=0;for(_=b?_:_[Symbol.iterator]();;){var O;if(b){if(y>=_.length)break;O=_[y++]}else{if((y=_.next()).done)break;O=y.value}var A=O;A.match(".*Matrix")&&x({table:d,header:n,uniforms:a,uniformName:A,undefinedOnly:u})&&l++}var M=c,D=Array.isArray(M),C=0;for(M=D?M:M[Symbol.iterator]();;){var R;if(D){if(C>=M.length)break;R=M[C++]}else{if((C=M.next()).done)break;R=C.value}d[R]||x({table:d,header:n,uniforms:a,uniformName:R,undefinedOnly:u})&&l++}var T=0,P={};if(!u)for(var w in a){var j,I=a[w];if(!d[w])T++,P[w]=((j={Type:"NOT USED: "+I})[n]=E(I),j)}return{table:d,count:l,unusedTable:P,unusedCount:T}}function x(e){var t,r=e.table,n=e.header,i=e.uniforms,a=e.uniformName,s=e.undefinedOnly,o=i[a],u=function(e){return null!=e}(o);return(!s||!u)&&(r[a]=((t={})[n]=u?E(o):"N/A",t["Uniform Type"]=u?o:"NOT PROVIDED",t),!0)}function D(e){var t=e.accessor,r=t.type,n=t.size,i=Object(y.b)(r,n);return i?i.name+" "+e.name:e.name}r(56),r(101);var C=r(337),R=r.n(C),T=r(376),P={},w=function e(t,r,n){t&&(r.length>1?e(t[r[0]],r.slice(1),n):t[r[0]]=n)},j=new Map;R.a.listenFor("luma.gl",function(e){var t=P[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var r=e.valuePath.slice(1);!function(e,t,r){T.b.__SEER_INITIALIZED__&&(j.has(e)||j.set(e,new Map),j.get(e).set(t,r))}(e.itemKey,r,e.value);var n=t.getUniforms();w(n,r,e.value),t.setUniforms(n)}});var I=r(511),S=r(385),L=function(){function e(e,t){void 0===t&&(t={}),Object(o.a)(Object(g.c)(e));var r=t.id,n=void 0===r?Object(I.c)("base-model"):r;this.id=n,this.gl=e,this.id=t.id||Object(I.c)("Model"),this.lastLogTime=0,this.initialize(t)}var t=e.prototype;return t.initialize=function(e){this.props={},e.shaderCache&&S.a.warn("ShaderCache property is deprecated")(),this.programManager=e.programManager||h.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,r=void 0===t?null:t,n=e.vs,i=e.fs,a=e.modules,s=e.defines,o=e.inject,u=e.varyings,f=e.bufferMode;this.programProps={program:r,vs:n,fs:i,modules:a,defines:s,inject:o,varyings:u,bufferMode:f},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._checkProgram(),this._setBaseModelProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings)))},t.setProps=function(e){this._setBaseModelProps(e)},t.delete=function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();var t;this._managedProgram&&this.programManager.release(this.program),this.vertexArray.delete(),t=this.id,delete P[t],R.a.deleteItem("luma.gl",t)},t.isAnimated=function(){return this.animated},t.getProgram=function(){return this.program},t.setProgram=function(e){this.programProps=Object.assign({},e),this._programDirty=!0},t.getUniforms=function(){return this.uniforms},t.setUniforms=function(e){return void 0===e&&(e={}),e=Object.assign({},e),function(e,t){if(T.b.__SEER_INITIALIZED__&&e){var r=j.get(e);r&&r.forEach(function(e,r){w(t,r,e)})}}(this.id,e),e=this._extractAnimatedUniforms(e),Object.assign(this.uniforms,e),this},t.getModuleUniforms=function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}},t.updateModuleSettings=function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)},t.clear=function(e){return Object(m.a)(this.program.gl,e),this},t.drawGeometry=function(e){void 0===e&&(e={}),this._checkProgram();var t,r=e,n=r.moduleSettings,i=void 0===n?null:n,a=r.framebuffer,s=r.uniforms,o=void 0===s?{}:s,u=r.attributes,f=void 0===u?{}:u,d=r.transformFeedback,c=void 0===d?this.transformFeedback:d,l=r.parameters,h=void 0===l?{}:l,g=r.vertexArray,m=void 0===g?this.vertexArray:g,v=r.animationProps;P[(t=this).id]||(P[t.id]=t,R.a.listItem("luma.gl",t.id)),this.setAttributes(f),this.updateModuleSettings(i),this.setUniforms(o),this._refreshAnimationProps(v);var p=this._logDrawCallStart(2),_=this.vertexArray.getDrawParams(this.props);_.isInstanced&&!this.isInstanced&&S.a.warn("Found instanced attributes on non-instanced model",this.id)();var b=_.isIndexed,y=_.indexType,E=_.indexOffset,O=this.isInstanced,A=this.instanceCount,M=function(){},x=this.props,D=x.onBeforeRender,C=void 0===D?M:D,T=x.onAfterRender,w=void 0===T?M:T;C(),this._timerQueryStart(),this.program.setUniforms(this.uniforms);var j=this.program.draw(Object.assign({},e,{logPriority:p,uniforms:null,framebuffer:a,parameters:h,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:m,transformFeedback:c,isIndexed:b,indexType:y,isInstanced:O,instanceCount:A,offset:b?E:0}));return this._timerQueryEnd(),w(),this._logDrawCallEnd(p,m,a),j},t._setBaseModelProps=function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&v.a.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&S.a.warn("GPU timer not supported")()),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)},t._checkProgram=function(e){if(void 0===e&&(e=null),this._programDirty||this.programManager.stateHash!==this._programManagerState){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var r=this.programProps,n=r.vs,i=void 0===n?_.a.vs:n,a=r.fs,s=void 0===a?_.a.fs:a,u=r.modules,f=r.inject,d=r.defines,c=r.varyings,h=r.bufferMode;t=this.programManager.get({vs:i,fs:s,modules:u,inject:f,defines:d,varyings:c,bufferMode:h}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(o.a)(t instanceof l.a,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new p.a(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}},t._refreshAnimationProps=function(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)},t._evaluateAnimateUniforms=function(e){if(!this.animated)return{};var t={};for(var r in this.animatedUniforms){var n=this.animatedUniforms[r];t[r]=n(e)}return t},t._extractAnimatedUniforms=function(e){var t=!1;for(var r in e){var n=e[r];"function"==typeof n?(this.animatedUniforms[r]=n,t=!0):delete this.animatedUniforms[r]}if(this.animated=!Object(I.a)(this.animatedUniforms),!t)return e;var i={};for(var a in e)this.animatedUniforms[a]||(i[a]=e[a]);return i},t._timerQueryStart=function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new v.a(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))},t._timerQueryEnd=function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,S.a.log(2,"GPU time "+this.program.id+": "+this.stats.lastFrameTime+"ms average "+this.stats.averageFrameTime+"ms accumulated: "+this.stats.accumulatedFrameTime+"ms count: "+this.stats.profileFrameCount)()}},t._logDrawCallStart=function(e){var t=e>3?0:1e4;if(!(S.a.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),S.a.group(2,">>> DRAWING MODEL "+this.id,{collapsed:S.a.priority<=2})(),e},t._logDrawCallEnd=function(e,t,r,n){if(void 0!==e){var i=function(e){var t=void 0===e?{}:e,r=t.vertexArray,n=t.header,i=void 0===n?"Attributes":n;if(!r.configuration)return{};var a={};r.elements&&(a.ELEMENT_ARRAY_BUFFER=O(r,r.elements,null,i));var s=r.values;for(var o in s){var u=r._getAttributeInfo(o);if(u){var f=o+": "+u.name,d=r.accessors[u.location];d&&(f=o+": "+A(u.name,d)),a[f]=O(r,s[o],d,i)}}return a}({vertexArray:t,header:this.id+" attributes",attributes:this._attributes}),a=M({header:this.id+" uniforms",program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),s=a.table,o=a.unusedTable,u=a.unusedCount,f=M({header:this.id+" uniforms",program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0}),d=f.table;f.count>0&&S.a.log("MISSING UNIFORMS",Object.keys(d))(),u>0&&S.a.log("UNUSED UNIFORMS",Object.keys(o))();var c=function(e){var t={},r="Accessors for "+e.id,n=e.attributeInfos,i=Array.isArray(n),a=0;for(n=i?n:n[Symbol.iterator]();;){var s;if(i){if(a>=n.length)break;s=n[a++]}else{if((a=n.next()).done)break;s=a.value}var o,u=s;u&&(t["in "+D(u)]=((o={})[r]=JSON.stringify(u.accessor),o))}var f=e.varyingInfos,d=Array.isArray(f),c=0;for(f=d?f:f[Symbol.iterator]();;){var l;if(d){if(c>=f.length)break;l=f[c++]}else{if((c=f.next()).done)break;l=c.value}var h,g=l;g&&(t["out "+D(g)]=((h={})[r]=JSON.stringify(g.accessor),h))}return t}(this.vertexArray.configuration);S.a.table(e,i)(),S.a.table(e,s)(),S.a.table(e+1,c)(),function(e,t){if(R.a.isReady()&&!R.a.throttle("luma.gl:"+e.id,1e3)){var r=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,n=Object.assign({},e.uniforms,t);R.a.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:n},{path:"objects.attributes",data:r}])}}(this,r),n&&n.log({priority:2,message:"Rendered to "+n.id}),S.a.groupEnd(2,">>> DRAWING MODEL "+this.id)()}},e}();r.d(t,"a",function(){return F});var F=function(e){var t,r;function n(t,r){void 0===r&&(r={});var n=r.id,i=void 0===n?Object(I.c)("model"):n;return e.call(this,t,Object.assign({},r,{id:i}))||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.initialize=function(t){e.prototype.initialize.call(this,t),this.drawMode=void 0!==t.drawMode?t.drawMode:i.a.TRIANGLES,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced,this._setModelProps(t),this.geometry={},Object(o.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")},u.setProps=function(t){e.prototype.setProps.call(this,t),this._setModelProps(t)},u.delete=function(){e.prototype.delete.call(this),this._deleteGeometryBuffers()},u.getDrawMode=function(){return this.drawMode},u.getVertexCount=function(){return this.vertexCount},u.getInstanceCount=function(){return this.instanceCount},u.getAttributes=function(){return this.attributes},u.setDrawMode=function(e){return this.drawMode=e,this},u.setVertexCount=function(e){return Object(o.a)(Number.isFinite(e)),this.vertexCount=e,this},u.setInstanceCount=function(e){return Object(o.a)(Number.isFinite(e)),this.instanceCount=e,this},u.setGeometry=function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,r){var n={},s=t.indices;for(var u in t.attributes){var c=t.attributes[u],l=f(u,r);if("indices"===u)s=c;else if(c.constant)n[l]=c.value;else{var h=c.value,g=Object.assign({},c);delete g.value,n[l]=[new a.a(e,h),g],d(u,g)}}if(s){var m=s.value||s;Object(o.a)(m instanceof Uint16Array||m instanceof Uint32Array,'attribute array for "indices" must be of integer type');var v={size:1,isIndexed:void 0===s.isIndexed||s.isIndexed};n.indices=[new a.a(e,{data:m,target:i.a.ELEMENT_ARRAY_BUFFER}),v]}return n}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this},u.setAttributes=function(e){if(void 0===e&&(e={}),Object(I.a)(e))return this;var t={};for(var r in e){var n=e[r];t[r]=n.getValue?n.getValue():n}return this.vertexArray.setAttributes(t),this},u.draw=function(e){return void 0===e&&(e={}),this.drawGeometry(e)},u.transform=function(e){void 0===e&&(e={});var t,r=e,n=r.discard,a=void 0===n||n,s=r.feedbackBuffers,o=r.unbindModels,u=void 0===o?[]:o,f=e.parameters;(s&&this._setFeedbackBuffers(s),a)&&(f=Object.assign({},f,((t={})[i.a.RASTERIZER_DISCARD]=a,t)));u.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:f}))}finally{u.forEach(function(e){return e.vertexArray.bindBuffers()})}return this},u.render=function(e){return void 0===e&&(e={}),S.a.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()},u._setModelProps=function(e){"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)},u._deleteGeometryBuffers=function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof a.a&&t.delete()}},u._setAnimationProps=function(e){if(this.animated){Object(o.a)(e,"Model.draw(): animated uniforms but no animationProps");var t=this._evaluateAnimateUniforms(e);Object.assign(this.uniforms,t)}},u._setFeedbackBuffers=function(e){if(void 0===e&&(e={}),Object(I.a)(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new s.a(t,{program:this.program}),this.transformFeedback.setBuffers(e),this},n}(L)},350:function(e,t,r){"use strict";r(139),r(20),r(12);function n(e,t,r){switch(t){case 300:return r?function(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e):function(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e);case 100:return r?function(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e):function(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e);default:throw new Error("unknown GLSL version "+t)}}var i=r(377),a=(r(3),r(135),r(316),{number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}});function s(e){var t=o(e);return"object"===t?e?"type"in e?Object.assign({},e,a[e.type]):"value"in e?(t=o(e.value),Object.assign({type:t},e,a[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},a[t])}function o(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}r.d(t,"a",function(){return u});var u=function(){function e(e){var t=e.name,r=e.vs,n=e.fs,a=e.dependencies,o=void 0===a?[]:a,u=e.uniforms,f=e.getUniforms,d=e.deprecations,c=void 0===d?[]:d,l=e.defines,h=void 0===l?{}:l,g=e.vertexShader,m=e.fragmentShader;Object(i.a)("string"==typeof t),this.name=t,this.vs=r||g,this.fs=n||m,this.getModuleUniforms=f,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=h,u&&(this.uniforms=function(e){var t={};for(var r in e){var n=s(e[r]);t[r]=n}return t}(u))}var t=e.prototype;return t.getModuleSource=function(e,t){var r;switch(e){case"vs":r=n(this.vs||"",t,!0);break;case"fs":r=n(this.fs||"",t,!1);break;default:Object(i.a)(!1)}return"#define MODULE_"+this.name.toUpperCase()+"\n"+r+"// END MODULE_"+this.name+"\n\n"},t.getUniforms=function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}},t.getDefines=function(){return this.defines},t.checkDeprecations=function(e,t){this.deprecations.forEach(function(r){r.regex.test(e)&&(r.deprecated?t.deprecated(r.old,r.new)():t.removed(r.old,r.new)())})},t._parseDeprecationDefinitions=function(e){return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b"+e.old+"\\(");break;default:e.regex=new RegExp(e.type+" "+e.old+";")}}),e},t._defaultGetUniforms=function(e){void 0===e&&(e={});var t={},r=this.uniforms;for(var n in r){var a=r[n];n in e&&!a.private?(a.validate&&Object(i.a)(a.validate(e[n],a),this.name+": invalid "+n),t[n]=e[n]):t[n]=a.value}return t},e}()},351:function(e,t,r){"use strict";r(12),r(76);var n,i=r(359),a=r(377);r.d(t,"a",function(){return o}),r.d(t,"c",function(){return c}),r.d(t,"b",function(){return l});var s=((n={})[i.b]="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",n[i.a]="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n",n),o="__LUMA_INJECT_DECLARATIONS__",u=/void main\s*\([^)]*\)\s*\{\n?/,f=/}\n?[^{}]*$/,d=[];function c(e,t,r,n){var a=t===i.b,c=function(t){var n=r[t];n.sort(function(e,t){return e.order-t.order}),d.length=n.length;for(var i=0,s=n.length;i<s;++i)d[i]=n[i].injection;var c=d.join("\n")+"\n";switch(t){case"vs:#decl":a&&(e=e.replace(o,c));break;case"vs:#main-start":a&&(e=e.replace(u,function(e){return e+c}));break;case"vs:#main-end":a&&(e=e.replace(f,function(e){return c+e}));break;case"fs:#decl":a||(e=e.replace(o,c));break;case"fs:#main-start":a||(e=e.replace(u,function(e){return e+c}));break;case"fs:#main-end":a||(e=e.replace(f,function(e){return c+e}));break;default:e=e.replace(t,function(e){return e+c})}};for(var l in r)c(l);return e=e.replace(o,""),n&&(e=e.replace(/\}\s*$/,function(e){return e+s[t]})),e}function l(e){var t={};return Object(a.a)(Array.isArray(e)&&e.length>1),e.forEach(function(e){for(var r in e)t[r]=t[r]?t[r]+"\n"+e[r]:e[r]}),t}},353:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={vs:"#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",fs:"#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",uniforms:{}}},359:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i});var n="vs",i="fs"},364:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(349);var i=function(e){var t,r;function i(t,r){var i;return void 0===r&&(r={}),(i=e.call(this,r)||this).onBeforeRender=null,i.AfterRender=null,t instanceof n.a?(i.model=t,i._setModelNodeProps(r)):i.model=new n.a(t,r),i.managedResources=r.managedResources||[],i}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=i.prototype;return a.setProps=function(t){return e.prototype.setProps.call(this,t),this._setModelNodeProps(t),this},a.delete=function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(e){return e.delete()}),this.managedResources=[]},a.draw=function(){var e;return(e=this.model).draw.apply(e,arguments)},a.setUniforms=function(){var e;return(e=this.model).setUniforms.apply(e,arguments),this},a.setAttributes=function(){var e;return(e=this.model).setAttributes.apply(e,arguments),this},a.updateModuleSettings=function(){var e;return(e=this.model).updateModuleSettings.apply(e,arguments),this},a._setModelNodeProps=function(e){this.model.setProps(e)},i}(r(343).a)},377:function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}r.d(t,"a",function(){return n})},409:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r(316),r(135),r(320);var n=r(318),i=r.n(n),a=r(344),s=r(347),o=r(510),u=r(511),f=r(385);var d=function(e){var t,r;function n(t,r){var n;return void 0===r&&(r={}),Object(o.a)(t),(n=e.call(this,t,r)||this).initialize(r),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.isSupported=function(e){return Object(o.d)(e)};var a=n.prototype;return a.initialize=function(e){var t=this;return void 0===e&&(e={}),this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(u.a)(this.buffers)||this.bind(function(){return t._unbindBuffers()}),this.setProps(e),this},a.setProps=function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)},a.setBuffers=function(e){var t=this;return void 0===e&&(e={}),this.bind(function(){for(var r in e)t.setBuffer(r,e[r])}),this},a.setBuffer=function(e,t){var r=this,n=this._getVaryingIndex(e),i=this._getBufferParams(t),a=i.buffer,s=i.byteSize,o=i.byteOffset;return n<0?(this.unused[e]=a,f.a.warn(function(){return r.id+" unused varying buffer "+e})(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,a,o,s),this)},a.begin=function(e){return void 0===e&&(e=i.a.POINTS),this.gl.bindTransformFeedback(i.a.TRANSFORM_FEEDBACK,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this},a.end=function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(i.a.TRANSFORM_FEEDBACK,null),this},a._getBufferParams=function(e){var t,r,n;return e instanceof s.a==!1?(n=e.buffer,r=e.byteSize,t=e.byteOffset):n=e,void 0===t&&void 0===r||(t=t||0,r=r||n.byteLength-t),{buffer:n,byteOffset:t,byteSize:r}},a._getVaryingInfo=function(e){return this.configuration&&this.configuration.getVaryingInfo(e)},a._getVaryingIndex=function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1},a._bindBuffers=function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),r=t.buffer,n=t.byteSize,i=t.byteOffset;this._bindBuffer(e,r,i,n)}},a._unbindBuffers=function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)},a._bindBuffer=function(e,t,r,n){void 0===r&&(r=0);var a=t&&t.handle;return a&&void 0!==n?this.gl.bindBufferRange(i.a.TRANSFORM_FEEDBACK_BUFFER,e,a,r,n):this.gl.bindBufferBase(i.a.TRANSFORM_FEEDBACK_BUFFER,e,a),this},a._createHandle=function(){return this.gl.createTransformFeedback()},a._deleteHandle=function(){this.gl.deleteTransformFeedback(this.handle)},a._bindHandle=function(e){this.gl.bindTransformFeedback(i.a.TRANSFORM_FEEDBACK,this.handle)},n}(a.a)}}]);
//# sourceMappingURL=component---templates-lessons-example-10-jsx-039bbff23a5833e8e836.js.map