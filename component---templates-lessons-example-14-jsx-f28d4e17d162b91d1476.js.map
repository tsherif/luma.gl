{"version":3,"sources":["webpack:///../examples/lessons/14/app.js","webpack:///./templates/lessons/example-14.jsx","webpack:///../modules/core/src/geometry/geometry.js","webpack:///../node_modules/seer/dist/index.js","webpack:///../modules/core/src/scenegraph/nodes/scenegraph-node.js","webpack:///../node_modules/math.gl/dist/esm/classes/base/vector.js","webpack:///../node_modules/math.gl/dist/esm/classes/vector3.js","webpack:///../modules/core/src/scenegraph/nodes/model-node.js"],"names":["TEAPOT_UNIFORMS","uMaterialShininess","uShowSpecularHighlights","uUseLighting","uUseTextures","LIGHT_UNIFORMS","uAmbientColor","uPointLightingLocation","uPointLightingSpecularColor","uPointLightingDiffuseColor","AppAnimationLoop","getInfo","onInitialize","_setParameters","gl","_ref","setParameters","clearColor","clearDepth","depthTest","GL","UNPACK_FLIP_Y_WEBGL","Object","load_file","then","file","_parameters","_parameters2","teapotJson","JSON","galvanizedTexture","texture_2d","data","parameters","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","mipmap","earthTexture","urls","teapot","model_node","id","fs","vs","geometry","attributes","positions","Float32Array","normals","texCoords","indices","Uint16Array","drawMode","TRIANGLES","uniforms","assign","uSampler","onRender","_ref2","tick","aspect","DEPTH_BUFFER_BIT","eyePos","matrix4","rotateX","radians","transform","uVMatrix","lookAt","eye","center","up","_getHTMLControls","$id","document","$value","defaultValue","Number","$checked","useSpecular","useLighting","useTextures","shininess","pointLightPosition","pointLightSpecularColor","pointLightDiffuseColor","ambientColor","texture","getHTMLControls","selectedTexture","phi","setUniforms","uMMatrix","translate","rotateY","uPMatrix","perspective","fov","Math","PI","near","far","draw","AnimationLoop","window","website","app_AppAnimationLoop","animationLoop","Example","render","react_default","a","createElement","animation_loop_example_page","exampleConfig","this","props","pageContext","React","Component","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","_props","_props$id","uid","_props$drawMode","_props$attributes","_props$indices","_props$vertexCount","vertexCount","userData","_setAttributes","_calculateVertexCount","getVertexCount","getAttributes","_print","attributeName","ArrayBuffer","isView","value","size","attribute","assert","undefined","isIndexed","length","Infinity","constant","__webpack_require__","defineProperty","exports","_typeof","Symbol","iterator","obj","constructor","prototype","isBrowser","addEventListener","timers","Map","isReady","__SEER_INITIALIZED__","throttle","key","delay","time","get","now","Date","set","send","type","arguments","seen","Set","payload","stringify","has","add","toString","call","slice","includes","Array","replacer","postMessage","source","e","console","log","listeners","listener","message","_message$data","typeListeners","forEach","cb","init","__SEER_LISTENER__","list","listItem","itemKey","updateItem","path","multiUpdate","array","deleteItem","addLog","msg","listenFor","Error","push","removeListener","filter","l","clean","removeEventListener","ScenegraphNode","name","display","position","math_gl__WEBPACK_IMPORTED_MODULE_4__","rotation","scale","matrix","math_gl__WEBPACK_IMPORTED_MODULE_5__","_setScenegraphNodeProps","delete","setProps","setPosition","setRotation","setScale","setMatrix","copyMatrix","copy","setMatrixComponents","_ref$update","update","updateMatrix","pos","rot","identity","rotateXYZ","_temp","getCoordinateUniforms","modelMatrix","worldMatrix","viewMatrix","multiplyRight","worldInverse","invert","worldInverseTranspose","transpose","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","vector_Vector","_MathArray","Vector","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","inherits","createClass","sqrt","lengthSquared","len","i","ELEMENTS","mathArray","distanceSquared","dist","validators","product","magnitude","check","_len","vectors","_key","_i","_vectors","vector","_len2","_key2","_i2","_vectors2","distance","b","subtract","multiply","multiplyScalar","math_array","d","__webpack_exports__","vector3_Vector3","ORIGIN","_Vector","Vector3","_this","x","y","z","common","debug","object","vec3","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","transformAsPoint","gl_matrix_extras","matrix3","matrix2","quaternion","ModelNode","_ScenegraphNode","onBeforeRender","AfterRender","_lib_model__WEBPACK_IMPORTED_MODULE_0__","model","_setModelNodeProps","managedResources","resource","_this$model","_this$model2","setAttributes","_this$model3","updateModuleSettings","_this$model4"],"mappings":"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","file":"component---templates-lessons-example-14-jsx-f28d4e17d162b91d1476.js","sourcesContent":["import GL from '@luma.gl/constants';\nimport {\n  AnimationLoop,\n  Geometry,\n  Texture2D,\n  loadFile,\n  setParameters,\n  ModelNode\n} from '@luma.gl/core';\nimport {Matrix4, radians} from 'math.gl';\n\nconst INFO_HTML = `\n<p>\n  <a href=\"http://learningwebgl.com/blog/?p=1658\" target=\"_blank\">\n    Specular highlights and loading a JSON model\n  </a>\n<p>\n  The classic WebGL Lessons in luma.gl\n\n<div id=\"control-elements\">\n  <input type=\"checkbox\" id=\"specular\" checked/> Show specular highlight<br/>\n  <input type=\"checkbox\" id=\"lighting\" checked/> Use lighting<br/>\n  Texture:\n  <select id=\"texture\">\n    <option value=\"none\">None</option>\n    <option selected value=\"galvanized\">Galvanized</option>\n    <option value=\"earth\">Earth</option>\n  </select>\n\n  <br/>\n  <h2>Material:</h2>\n  <div class=\"control-block\">\n    <div class=\"control-row\">\n      <div><b>Shininess:</b></div>\n      <input id=\"shininess\" type=\"range\" value=\"32.0\" min=\"0.0\" max=\"100.0\" step=\"1\"/>\n    </div>\n  </div>\n\n  <h2>Point light:</h2>\n  <div class=\"control-block\">\n    <div class=\"control-row\">\n      <div><b>Location:</b></div>\n      <div>X: <input type=\"text\" id=\"lightPositionX\" value=\"-10.0\"/></div>\n      <div>Y: <input type=\"text\" id=\"lightPositionY\" value=\"4.0\"/></div>\n      <div>Z: <input type=\"text\" id=\"lightPositionZ\" value=\"-20.0\"/></div>\n    </div>\n    <div class=\"control-row\">\n      <div><b>Specular colour:</b></div>\n      <div>R:\n        <input id=\"specularR\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>G:\n        <input id=\"specularG\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>B:\n        <input id=\"specularB\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n    </div>\n    <div class=\"control-row\">\n      <div><b>Diffuse colour:</b></div>\n      <div>R:\n        <input id=\"diffuseR\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>G:\n        <input id=\"diffuseG\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>B:\n        <input id=\"diffuseB\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n    </div>\n  </div>\n\n  <h2>Ambient light:</h2>\n  <div class=\"control-block\">\n    <div class=\"control-row\">\n      <div><b>Colour:</b></div>\n        <div>R:\n          <input id=\"ambientR\" type=\"range\" value=\"0.2\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n        </div>\n        <div>G:\n          <input id=\"ambientG\" type=\"range\" value=\"0.2\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n        </div>\n        <div>B:\n          <input id=\"ambientB\" type=\"range\" value=\"0.2\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n        </div>\n      </div>\n  </div>\n\n  <br/>\n  Galvanized texture courtesy of\n  <a href=\"http://www.arroway-textures.com/\">Arroway Textures</a>.<br/>\n  Earth texture courtesy of\n  <a href=\"http://www.esa.int/esaEO/SEMGSY2IU7E_index_0.html\">\n    the European Space Agency/Envisat\n  </a>.<br/>\n\n  <br/>\n  The classic WebGL Lessons in luma.gl\n\n </div>\n`;\n\n// Read Lighting form elements variables\nfunction getHTMLControls() {\n  /* global document */\n  const $id = id => document.getElementById(id);\n  const $value = (id, defaultValue = 1) => ($id(id) ? Number($id(id).value) : defaultValue);\n  const $checked = id => ($id(id) ? $id(id).checked : true);\n\n  // Get lighting form elements\n  // const useLighting = lighting.checked;\n  // const useSpecular = specular.checked;\n  // const materialShininess = shininess.value;\n\n  // Get lighting form elements\n  const useSpecular = $checked('specular');\n  const useLighting = $checked('lighting');\n  const useTextures = $value('texture', 'none') !== 'none';\n\n  const shininess = $value('shininess');\n\n  const pointLightPosition = [\n    $value('lightPositionX', -10),\n    $value('lightPositionY', 4),\n    $value('lightPositionZ', -20)\n  ];\n  const pointLightSpecularColor = [\n    $value('specularR', 0.8),\n    $value('specularG', 0.8),\n    $value('specularB', 0.8)\n  ];\n  const pointLightDiffuseColor = [\n    $value('diffuseR', 0.8),\n    $value('diffuseG', 0.8),\n    $value('diffuseB', 0.8)\n  ];\n  const ambientColor = [$value('ambientR', 0.2), $value('ambientG', 0.2), $value('ambientB', 0.2)];\n\n  return {\n    useLighting,\n    useSpecular,\n    useTextures,\n\n    shininess,\n    texture: $value('texture'),\n\n    ambientColor,\n    pointLightPosition,\n    pointLightSpecularColor,\n    pointLightDiffuseColor\n  };\n}\n\nconst FRAGMENT_LIGHTING_VERTEX_SHADER = `\\\nprecision highp float;\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 texCoords;\n\nuniform mat4 uMMatrix;\nuniform mat4 uVMatrix;\nuniform mat4 uPMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vTransformedNormal;\nvarying vec4 vPosition;\n\nvoid main(void) {\n  vPosition = uMMatrix * vec4(positions, 1.0);\n  gl_Position = uPMatrix * uVMatrix * vPosition;\n  vTextureCoord = texCoords;\n  vTransformedNormal = uMMatrix * vec4(normals, 0.0);\n}\n`;\n\nconst FRAGMENT_LIGHTING_FRAGMENT_SHADER = `\\\nprecision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vTransformedNormal;\nvarying vec4 vPosition;\n\nuniform float uMaterialShininess;\nuniform bool uShowSpecularHighlights;\nuniform bool uUseLighting;\nuniform bool uUseTextures;\nuniform vec3 uAmbientColor;\nuniform vec3 uPointLightingLocation;\nuniform vec3 uPointLightingSpecularColor;\nuniform vec3 uPointLightingDiffuseColor;\nuniform sampler2D uSampler;\n\nvoid main(void) {\n    vec3 lightWeighting;\n    if (!uUseLighting) {\n        lightWeighting = vec3(1.0, 1.0, 1.0);\n    } else {\n        vec3 lightDirection = normalize(uPointLightingLocation - vPosition.xyz);\n        vec3 normal = normalize(vTransformedNormal.xyz);\n        float specularLightWeighting = 0.0;\n        if (uShowSpecularHighlights) {\n            vec3 eyeDirection = normalize(-vPosition.xyz);\n            vec3 reflectionDirection = reflect(-lightDirection, normal);\n            specularLightWeighting =\n              pow(max(dot(reflectionDirection, eyeDirection), 0.0), uMaterialShininess);\n        }\n        float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        lightWeighting = uAmbientColor\n            + uPointLightingSpecularColor * specularLightWeighting\n            + uPointLightingDiffuseColor * diffuseLightWeighting;\n    }\n    vec4 fragmentColor;\n    if (uUseTextures) {\n        fragmentColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n    } else {\n        fragmentColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n    gl_FragColor = vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n}\n`;\n\nconst TEAPOT_UNIFORMS = {\n  uMaterialShininess: 20.0,\n  uShowSpecularHighlights: true,\n  uUseLighting: true,\n  uUseTextures: true\n};\n\nconst LIGHT_UNIFORMS = {\n  uAmbientColor: [0.2, 0.2, 0.2],\n  uPointLightingLocation: [-10.0, 4.0, -20.0],\n  uPointLightingSpecularColor: [0.8, 0.8, 0.8],\n  uPointLightingDiffuseColor: [0.8, 0.8, 0.8]\n};\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  onInitialize({gl}) {\n    setParameters(gl, {\n      clearColor: [0, 0, 0, 1],\n      clearDepth: 1,\n      depthTest: true,\n      [GL.UNPACK_FLIP_Y_WEBGL]: true\n    });\n\n    return loadFile('Teapot.json').then(file => {\n      const teapotJson = JSON.parse(file);\n\n      const galvanizedTexture = new Texture2D(gl, {\n        data: 'arroway.de_metal+structure+06_d100_flat.jpg',\n        parameters: {\n          [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n          [gl.TEXTURE_MIN_FILTER]: gl.LINEAR_MIPMAP_NEAREST,\n          [gl.TEXTURE_WRAP_S]: gl.REPEAT,\n          [gl.TEXTURE_WRAP_T]: gl.REPEAT\n        },\n        mipmap: true\n      });\n\n      const earthTexture = new Texture2D(gl, {\n        urls: 'earth.jpg',\n        parameters: {\n          [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n          [gl.TEXTURE_MIN_FILTER]: gl.LINEAR_MIPMAP_NEAREST,\n          [gl.TEXTURE_WRAP_S]: gl.REPEAT,\n          [gl.TEXTURE_WRAP_T]: gl.REPEAT\n        },\n        mipmap: true\n      });\n\n      const teapot = new ModelNode(gl, {\n        id: 'teapot-model',\n        fs: FRAGMENT_LIGHTING_FRAGMENT_SHADER,\n        vs: FRAGMENT_LIGHTING_VERTEX_SHADER,\n        geometry: new Geometry({\n          id: 'teapot-geometry',\n          attributes: {\n            positions: new Float32Array(teapotJson.positions),\n            normals: new Float32Array(teapotJson.normals),\n            texCoords: new Float32Array(teapotJson.texCoords),\n            indices: new Uint16Array(teapotJson.indices)\n          },\n          drawMode: GL.TRIANGLES\n        }),\n        uniforms: Object.assign({uSampler: galvanizedTexture}, TEAPOT_UNIFORMS, LIGHT_UNIFORMS)\n      });\n      return {teapot, earthTexture, galvanizedTexture};\n    });\n  }\n\n  onRender({gl, tick, aspect, teapot, earthTexture, galvanizedTexture}) {\n    gl.clear(GL.COLOR_BUFFER_BIT | GL.DEPTH_BUFFER_BIT);\n\n    // set camera position\n    const eyePos = new Matrix4().rotateX(radians(-30)).transform([0, 0, 5]);\n\n    const uVMatrix = new Matrix4().lookAt({eye: eyePos, center: [0, 0, 0], up: [0, 1, 0]});\n\n    const {\n      useLighting,\n      useSpecular,\n      useTextures,\n      texture,\n      shininess,\n      ambientColor,\n      pointLightPosition,\n      pointLightSpecularColor,\n      pointLightDiffuseColor\n    } = getHTMLControls();\n\n    teapot.setUniforms({\n      uUseLighting: useLighting,\n      uUseTextures: useTextures,\n      uShowSpecularHighlights: useSpecular,\n      uMaterialShininess: shininess\n    });\n\n    if (useLighting) {\n      teapot.setUniforms({\n        uAmbientColor: ambientColor,\n        uPointLightingLocation: pointLightPosition,\n        uPointLightingSpecularColor: pointLightSpecularColor,\n        uPointLightingDiffuseColor: pointLightDiffuseColor\n      });\n    }\n\n    if (useTextures) {\n      const selectedTexture = texture;\n      teapot.setUniforms({\n        uSampler: selectedTexture === 'earth' ? earthTexture : galvanizedTexture\n      });\n    }\n\n    const phi = tick * 0.01;\n    return teapot\n      .setUniforms({\n        uMMatrix: new Matrix4().translate([0, -35, -68]).rotateY(phi),\n        uVMatrix,\n        uPMatrix: new Matrix4().perspective({\n          fov: (45 * Math.PI) / 180,\n          aspect,\n          near: 0.1,\n          far: 100\n        })\n      })\n      .draw();\n  }\n}\n\n/* global window */\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/lessons/14/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import {uid, assert} from '../utils';\n\n// Rendering primitives - specify how to extract primitives from vertices.\n// NOTE: These are numerically identical to the corresponding WebGL/OpenGL constants\nexport const DRAW_MODE = {\n  POINTS: 0x0000, // draw single points.\n  LINES: 0x0001, // draw lines. Each vertex connects to the one after it.\n  LINE_LOOP: 0x0002, // draw lines. Each set of two vertices is treated as a separate line segment.\n  LINE_STRIP: 0x0003, // draw a connected group of line segments from the first vertex to the last\n  TRIANGLES: 0x0004, // draw triangles. Each set of three vertices creates a separate triangle.\n  TRIANGLE_STRIP: 0x0005, // draw a connected group of triangles.\n  TRIANGLE_FAN: 0x0006 // draw a connected group of triangles.\n  // Each vertex connects to the previous and the first vertex in the fan.\n};\n\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor(props = {}) {\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n\n    // stubRemovedMethods(this, [\n    //   'setNeedsRedraw', 'needsRedraw', 'setAttributes'\n    // ], 'Immutable');\n\n    // stubRemovedMethods(this, [\n    //   'hasAttribute', 'getAttribute', 'getArray'\n    // ], 'Use geometry.attributes and geometry.indices');\n\n    // deprecateMethods(this, ['getAttributes'])\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  // Return an object with all attributes plus indices added as a field.\n  getAttributes() {\n    return this.indices ? {indices: this.indices, ...this.attributes} : this.attributes;\n  }\n\n  // PRIVATE\n\n  _print(attributeName) {\n    return `Geometry ${this.id} attribute ${attributeName}`;\n  }\n\n  // Attribute\n  // value: typed array\n  // type: indices, vertices, uvs\n  // size: elements per vertex\n  // target: WebGL buffer type (string or constant)\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {value: indices, size: 1} : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n\n      // Wrap \"unwrapped\" arrays and try to autodetect their type\n      attribute = ArrayBuffer.isView(attribute) ? {value: attribute} : attribute;\n\n      assert(\n        ArrayBuffer.isView(attribute.value),\n        `${this._print(attributeName)}: must be typed array or object with value as typed array`\n      );\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      // Move indices to separate field\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n    let vertexCount = Infinity;\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {value, size, constant} = attribute;\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n}\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.set\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.map\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n}; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\nvar isBrowser = typeof window !== 'undefined' && window.addEventListener;\nvar timers = new Map();\n/**\n * Ready check for Seer initialization\n *\n * @returns {Boolean}\n */\n\nvar isReady = function isReady() {\n  return isBrowser && window.__SEER_INITIALIZED__;\n};\n/**\n * Utility method allowing to throttle a user action based on a key and a minimun delay.\n *\n * @param key {String} A unique key\n * @param delay {Number} The minimal delay to throttle\n * @returns {Boolean}\n */\n\n\nvar throttle = function throttle(key, delay) {\n  var time = timers.get(key);\n  var now = Date.now();\n\n  if (time && now - time < delay) {\n    return true;\n  }\n\n  timers.set(key, now);\n  return false;\n};\n\nvar replacer = function replacer(seen) {\n  return function (key, value) {\n    if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && seen.has(value)) {\n      return;\n    }\n\n    seen.add(value);\n    var isArray = Object.prototype.toString.call(value).slice(8, -1).includes('Array');\n\n    if (isArray) {\n      return Array.prototype.slice.call(value, 0, 20);\n    }\n\n    return value;\n  };\n};\n/**\n * Low-level api leveraging window.postMessage\n *\n * @param type {String} The action type\n * @param payload {Any} The action payload\n */\n\n\nvar send = function send(type) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isBrowser || !isReady()) {\n    return;\n  }\n\n  var seen = new Set();\n  var payload = JSON.stringify(data, replacer(seen));\n\n  try {\n    window.postMessage({\n      type: type,\n      payload: payload,\n      source: 'seer-agent'\n    }, '*');\n  } catch (e) {\n    if (throttle('seer-log', 2E3)) {\n      return;\n    }\n\n    console.log(e); // eslint-disable-line\n  }\n};\n\nvar listeners = new Map();\n\nvar listener = function listener(message) {\n  if (!message || !message.data || message.data.source !== 'seer-core') {\n    return;\n  }\n\n  var _message$data = message.data,\n      type = _message$data.type,\n      payload = _message$data.payload;\n  var typeListeners = listeners.get(type);\n\n  if (typeListeners) {\n    typeListeners.forEach(function (cb) {\n      return cb(payload);\n    });\n  }\n};\n/**\n * Initilize window listener. There will be only one for the whole process\n * to prevent too many registrations.\n *\n * This method will be called automatically if you use the `listenFor` method.\n */\n\n\nvar init = function init() {\n  if (!isBrowser || window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.addEventListener('message', listener);\n  window.__SEER_LISTENER__ = true;\n};\n/**\n * Clean listener. Can be useful in case you want to unregister upcoming events\n * or liberate memory.\n */\n\n\nvar clean = function clean() {\n  if (!isBrowser || !window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.removeEventListener('message', listener);\n  delete window.__SEER_LISTENER__;\n};\n/**\n * Create a listener that will be called upon events of the given key.\n *\n * @param key {String} The unique tab key\n * @param cb {Function} A callback that will receive the message payload\n */\n\n\nvar listenFor = function listenFor(type, cb) {\n  if (!isBrowser) {\n    return;\n  }\n\n  if (!type || !cb) {\n    throw new Error('Please provide a type and callback');\n  }\n\n  if (!listeners.has(type)) {\n    listeners.set(type, []);\n  }\n\n  if (!window.__SEER_LISTENER__) {\n    init();\n  }\n\n  listeners.get(type).push(cb);\n};\n/**\n * Remove an identity listener\n *\n * @param cb {Function} The callback to remove\n */\n\n\nvar removeListener = function removeListener(cb) {\n  listeners.forEach(function (typeListeners, key) {\n    listeners.set(key, typeListeners.filter(function (l) {\n      return l !== cb;\n    }));\n  });\n};\n/**\n * Creates a new indexed list.\n * It works by index to get O(1) accessing and performance.\n *\n * @param key {String} The key of the tab\n * @param data {Object} The indexed object\n */\n\n\nvar list = function list(key, data) {\n  return send('LIST', {\n    key: key,\n    data: data\n  });\n};\n/**\n * Creates an element in the indexed list, based on the itemKey.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param data {Any} The value of the item\n */\n\n\nvar listItem = function listItem(key, itemKey) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return send('LIST_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    data: data\n  });\n};\n/**\n * Update an item property, can be deeply nested.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param path {String} The path of the variable you want to update\n * @param data {Object} The new value\n */\n\n\nvar updateItem = function updateItem(key, itemKey, path, data) {\n  return send('UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    path: path,\n    data: data\n  });\n};\n/**\n * Similar to updateItem, but allows to pass an array with {path,data} pairs for\n * multiple update of the same item without having to send multiple messages.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param array {Array} The array of updates\n * @param array.path {String} The path for this update\n * @param array.data {Object} The value of this update\n */\n\n\nvar multiUpdate = function multiUpdate(key, itemKey, array) {\n  return send('MULTI_UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    array: array\n  });\n};\n/**\n * Remove a specific item in a specific tab.\n *\n * @param key {String} They key of the tab\n * @param itemKey {String} The key of the item\n */\n\n\nvar deleteItem = function deleteItem(key, itemKey) {\n  return send('DELETE_ITEM', {\n    key: key,\n    itemKey: itemKey\n  });\n};\n/**\n * Will create a log message to an item, that will be displayde with the current time.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param msg {String} The message to display\n */\n\n\nvar addLog = function addLog(key, itemKey, msg) {\n  return send('ADD_LOG', {\n    key: key,\n    itemKey: itemKey,\n    msg: msg\n  });\n};\n\nexports[\"default\"] = {\n  send: send,\n  throttle: throttle,\n  isReady: isReady,\n  list: list,\n  listItem: listItem,\n  updateItem: updateItem,\n  multiUpdate: multiUpdate,\n  deleteItem: deleteItem,\n  addLog: addLog,\n  listeners: listeners,\n  listenFor: listenFor,\n  removeListener: removeListener,\n  init: init,\n  clean: clean\n};","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '../../utils';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","import Model from '../../lib/model';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n"],"sourceRoot":""}