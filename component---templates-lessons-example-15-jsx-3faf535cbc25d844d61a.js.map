{"version":3,"sources":["webpack:///../examples/lessons/15/app.js","webpack:///./templates/lessons/example-15.jsx","webpack:///../modules/core/src/geometry/geometry.js","webpack:///../node_modules/seer/dist/index.js","webpack:///../modules/core/src/geometries/sphere-geometry.js"],"names":["EARTH_UNIFORMS","uUseColorMap","uUseSpecularMap","uShowSpecularHighlights","uUseLighting","LIGHT_UNIFORMS","uAmbientColor","uPointLightingLocation","uPointLightingSpecularColor","uPointLightingDiffuseColor","AppAnimationLoop","getInfo","onInitialize","_ref","canvas","_parameters","_parameters2","gl","setParameters","clearColor","clearDepth","depthTest","specularTexture","texture_2d","data","parameters","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","mipmap","colorTexture","earth","model","geometry","sphere_geometry","nlat","nlong","radius","fs","vs","uniforms","Object","assign","uColorMapSampler","uSpecularMapSampler","onRender","_ref2","tick","aspect","GL","DEPTH_BUFFER_BIT","uVMatrix","matrix4","lookAt","eye","center","up","_getControlValues","useLighting","$checked","useSpecularMap","useColorMap","point","position","$value","specular","diffuse","ambientColor","pointLightingLocation","pointLightSpecularColor","pointLightingDiffuseColor","getControlValues","phi","setUniforms","uMMatrix","translate","rotateY","uPMatrix","perspective","fov","Math","PI","near","far","draw","AnimationLoop","$id","id","document","defaultValue","value","Number","isNaN","window","website","app_AppAnimationLoop","animationLoop","Example","render","react_default","a","createElement","animation_loop_example_page","exampleConfig","this","props","pageContext","React","Component","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","_props","_props$id","uid","_props$drawMode","drawMode","_props$attributes","attributes","_props$indices","indices","_props$vertexCount","vertexCount","userData","_setAttributes","_calculateVertexCount","getVertexCount","getAttributes","_print","attributeName","ArrayBuffer","isView","size","attribute","assert","undefined","isIndexed","length","Infinity","constant","__webpack_require__","defineProperty","exports","_typeof","Symbol","iterator","obj","constructor","prototype","isBrowser","addEventListener","timers","Map","isReady","__SEER_INITIALIZED__","throttle","key","delay","time","get","now","Date","set","send","type","arguments","seen","Set","payload","JSON","stringify","has","add","toString","call","slice","includes","Array","replacer","postMessage","source","e","console","log","listeners","listener","message","_message$data","typeListeners","forEach","cb","init","__SEER_LISTENER__","list","listItem","itemKey","updateItem","path","multiUpdate","array","deleteItem","addLog","msg","listenFor","Error","push","removeListener","filter","l","clean","removeEventListener","SphereGeometry","_tesselateSphere","_props$nlat","_props$nlong","_props$radius","latRange","longRange","numVertices","n1","n2","n3","u","v","positions","Float32Array","normals","texCoords","Uint16Array","y","x","index","i2","i3","theta","sinTheta","cosTheta","sinPhi","cosPhi","ux","uy","uz","r","numVertsAround","_y","_x","POSITION","NORMAL","TEXCOORD_0","tesselateSphere","_Geometry"],"mappings":"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","file":"component---templates-lessons-example-15-jsx-3faf535cbc25d844d61a.js","sourcesContent":["import GL from '@luma.gl/constants';\nimport {AnimationLoop, Texture2D, setParameters, Model, SphereGeometry} from '@luma.gl/core';\nimport {Matrix4} from 'math.gl';\n\nconst EARTH_UNIFORMS = {\n  uUseColorMap: true,\n  uUseSpecularMap: true,\n  uShowSpecularHighlights: true,\n  uUseLighting: true\n};\n\nconst LIGHT_UNIFORMS = {\n  uAmbientColor: [0.4, 0.4, 0.4],\n  uPointLightingLocation: [-10.0, 4.0, -20.0],\n  uPointLightingSpecularColor: [5.0, 5.0, 5.0],\n  uPointLightingDiffuseColor: [0.8, 0.8, 0.8]\n};\n\nconst FRAGMENT_LIGHTING_VERTEX_SHADER = `\\\nprecision highp float;\n\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 texCoords;\n\nuniform mat4 uMMatrix;\nuniform mat4 uVMatrix;\nuniform mat4 uPMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vTransformedNormal;\nvarying vec4 vPosition;\n\nvoid main(void) {\n  vPosition = uMMatrix * vec4(positions, 1.0);\n  gl_Position = uPMatrix * uVMatrix * vPosition;\n  vTextureCoord = texCoords;\n  vTransformedNormal = uMMatrix * vec4(normals, 0.0);\n}\n`;\n\nconst FRAGMENT_LIGHTING_FRAGMENT_SHADER = `\\\nprecision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vTransformedNormal;\nvarying vec4 vPosition;\n\nuniform bool uUseColorMap;\nuniform bool uUseSpecularMap;\nuniform bool uUseLighting;\nuniform vec3 uAmbientColor;\nuniform vec3 uPointLightingLocation;\nuniform vec3 uPointLightingSpecularColor;\nuniform vec3 uPointLightingDiffuseColor;\n\nuniform sampler2D uSpecularMapSampler;\nuniform sampler2D uColorMapSampler;\n\nvoid main(void) {\n  vec3 lightWeighting;\n  if (!uUseLighting) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n} else {\n    vec3 lightDirection = normalize(uPointLightingLocation - vPosition.xyz);\n    vec3 normal = normalize(vTransformedNormal.xyz);\n    float specularLightWeighting = 0.0;\n    float shininess = 32.0;\n    if (uUseSpecularMap) {\n      shininess = texture2D(uSpecularMapSampler, vTextureCoord).r * 255.0;\n    }\n    if (shininess < 255.0) {\n       vec3 eyeDirection = normalize(-vPosition.xyz);\n       vec3 reflectionDirection = reflect(-lightDirection, normal);\n       specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n    }\n    float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n    lightWeighting = uAmbientColor\n        + uPointLightingSpecularColor * specularLightWeighting\n        + uPointLightingDiffuseColor * diffuseLightWeighting;\n  }\n  vec4 fragmentColor;\n  fragmentColor = uUseColorMap ?\n    texture2D(uColorMapSampler, vTextureCoord) : vec4(1.0, 1.0, 1.0, 1.0);\n  gl_FragColor = vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n}\n`;\n\nconst INFO_HTML = `\n<p>\n  <a href=\"http://learningwebgl.com/blog/?p=1778\" target=\"_blank\">\n    Specular maps\n  </a>\n\n<div id=\"controls-elements\">\n  <input type=\"checkbox\" id=\"color-map\" checked/> Use color map<br/>\n  <input type=\"checkbox\" id=\"specular-map\" checked/> Use specular map<br/>\n  <input type=\"checkbox\" id=\"lighting\" checked/> Use lighting<br/>\n\n  <br/>\n  <h2>Point light:</h2>\n\n  <div class=\"control-block\">\n    <div class=\"control-row\">\n      <div><b>Location:</b></div>\n      <div>X: <input type=\"text\" id=\"lightPositionX\" value=\"-10.0\"/></div>\n      <div>Y: <input type=\"text\" id=\"lightPositionY\" value=\"4.0\"/></div>\n      <div>Z: <input type=\"text\" id=\"lightPositionZ\" value=\"-20.0\"/></div>\n    </div>\n    <div class=\"control-row\">\n      <div><b>Specular colour:</b></div>\n      <div>R:\n        <input id=\"specularR\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>G:\n        <input id=\"specularG\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>B:\n        <input id=\"specularB\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n    </div>\n    <div class=\"control-row\">\n      <div><b>Diffuse colour:</b></div>\n      <div>R:\n        <input id=\"diffuseR\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>G:\n        <input id=\"diffuseG\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n      <div>B:\n        <input id=\"diffuseB\" type=\"range\" value=\"0.8\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n      </div>\n    </div>\n  </div>\n\n  <h2>Ambient light:</h2>\n  <div class=\"control-block\">\n    <div class=\"control-row\">\n      <div><b>Colour:</b></div>\n        <div>R:\n          <input id=\"ambientR\" type=\"range\" value=\"0.2\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n        </div>\n        <div>G:\n          <input id=\"ambientG\" type=\"range\" value=\"0.2\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n        </div>\n        <div>B:\n          <input id=\"ambientB\" type=\"range\" value=\"0.2\" min=\"0.0\" max=\"1.0\" step=\"0.01\"/>\n        </div>\n      </div>\n  </div>\n\n  <br/>\n  Earth texture courtesy of\n  <a href=\"http://www.esa.int/esaEO/SEMGSY2IU7E_index_0.html\">\n    the European Space Agency/Envisat\n  </a>.<br/>\n  <br/>\n</div>\n<p>\n  The classic WebGL Lessons in luma.gl\n`;\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  onInitialize({canvas, gl}) {\n    setParameters(gl, {\n      clearColor: [0, 0, 0, 1],\n      clearDepth: 1,\n      depthTest: true\n    });\n\n    const specularTexture = new Texture2D(gl, {\n      data: 'earth-specular.gif',\n      parameters: {\n        [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n        [gl.TEXTURE_MIN_FILTER]: gl.LINEAR_MIPMAP_NEAREST,\n        [gl.TEXTURE_WRAP_S]: gl.REPEAT,\n        [gl.TEXTURE_WRAP_T]: gl.REPEAT\n      },\n      mipmap: true\n    });\n\n    const colorTexture = new Texture2D(gl, {\n      data: 'earth.jpg',\n      parameters: {\n        [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n        [gl.TEXTURE_MIN_FILTER]: gl.LINEAR_MIPMAP_NEAREST,\n        [gl.TEXTURE_WRAP_S]: gl.REPEAT,\n        [gl.TEXTURE_WRAP_T]: gl.REPEAT\n      },\n      mipmap: true\n    });\n\n    const earth = new Model(gl, {\n      geometry: new SphereGeometry({\n        nlat: 30,\n        nlong: 30,\n        radius: 13\n      }),\n      fs: FRAGMENT_LIGHTING_FRAGMENT_SHADER,\n      vs: FRAGMENT_LIGHTING_VERTEX_SHADER,\n      uniforms: Object.assign(\n        {\n          uColorMapSampler: colorTexture,\n          uSpecularMapSampler: specularTexture\n        },\n        EARTH_UNIFORMS,\n        LIGHT_UNIFORMS\n      )\n    });\n\n    return {earth, specularTexture, colorTexture};\n  }\n\n  onRender({gl, tick, aspect, earth}) {\n    gl.clear(GL.COLOR_BUFFER_BIT | GL.DEPTH_BUFFER_BIT);\n\n    // set camera position\n    const uVMatrix = new Matrix4().lookAt({eye: [0, 0, 10], center: [0, 0, 0], up: [-0.5, 1, 0]});\n\n    const {\n      useLighting,\n      useSpecularMap,\n      useColorMap,\n      ambientColor,\n      pointLightingLocation,\n      pointLightSpecularColor,\n      pointLightingDiffuseColor\n    } = getControlValues();\n\n    earth.setUniforms({\n      uUseSpecularMap: useSpecularMap,\n      uUseColorMap: useColorMap,\n      uUseLighting: useLighting\n    });\n\n    if (useLighting) {\n      earth.setUniforms({\n        uAmbientColor: ambientColor,\n        uPointLightingLocation: pointLightingLocation,\n        uPointLightingSpecularColor: pointLightSpecularColor,\n        uPointLightingDiffuseColor: pointLightingDiffuseColor\n      });\n    }\n\n    const phi = tick * 0.01;\n    return earth\n      .setUniforms({\n        uMMatrix: new Matrix4().translate([0, 0, -40]).rotateY(phi),\n        uVMatrix,\n        uPMatrix: new Matrix4().perspective({\n          fov: (45 * Math.PI) / 180,\n          aspect,\n          near: 0.1,\n          far: 100\n        })\n      })\n      .draw();\n  }\n}\n\n/* global document */\nconst $id = id => document.getElementById(id);\nconst $checked = id => ($id(id) ? $id(id).checked : true);\nconst $value = (id, defaultValue = 1) => {\n  const value = $id(id) ? Number($id(id).value) : defaultValue;\n  return isNaN(value) ? 0 : value;\n};\n\n// Read Light settings HTML form\nfunction getControlValues() {\n  const useLighting = $checked('lighting');\n  const useSpecularMap = $checked('specular-map');\n  const useColorMap = $checked('color-map');\n\n  const point = {\n    position: [$value('lightPositionX'), $value('lightPositionY'), $value('lightPositionZ')],\n    specular: [$value('specularR'), $value('specularG'), $value('specularB')],\n    diffuse: [$value('diffuseR'), $value('diffuseG'), $value('diffuseB')]\n  };\n\n  const ambientColor = [$value('ambientR'), $value('ambientG'), $value('ambientB')];\n\n  return {\n    useLighting,\n    useSpecularMap,\n    useColorMap,\n\n    ambientColor: useLighting && ambientColor,\n    pointLightingLocation: useLighting && point.position,\n    pointLightSpecularColor: useLighting && point.specular,\n    pointLightingDiffuseColor: useLighting && point.diffuse\n  };\n}\n\n/* global window */\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/lessons/15/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import {uid, assert} from '../utils';\n\n// Rendering primitives - specify how to extract primitives from vertices.\n// NOTE: These are numerically identical to the corresponding WebGL/OpenGL constants\nexport const DRAW_MODE = {\n  POINTS: 0x0000, // draw single points.\n  LINES: 0x0001, // draw lines. Each vertex connects to the one after it.\n  LINE_LOOP: 0x0002, // draw lines. Each set of two vertices is treated as a separate line segment.\n  LINE_STRIP: 0x0003, // draw a connected group of line segments from the first vertex to the last\n  TRIANGLES: 0x0004, // draw triangles. Each set of three vertices creates a separate triangle.\n  TRIANGLE_STRIP: 0x0005, // draw a connected group of triangles.\n  TRIANGLE_FAN: 0x0006 // draw a connected group of triangles.\n  // Each vertex connects to the previous and the first vertex in the fan.\n};\n\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor(props = {}) {\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n\n    // stubRemovedMethods(this, [\n    //   'setNeedsRedraw', 'needsRedraw', 'setAttributes'\n    // ], 'Immutable');\n\n    // stubRemovedMethods(this, [\n    //   'hasAttribute', 'getAttribute', 'getArray'\n    // ], 'Use geometry.attributes and geometry.indices');\n\n    // deprecateMethods(this, ['getAttributes'])\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  // Return an object with all attributes plus indices added as a field.\n  getAttributes() {\n    return this.indices ? {indices: this.indices, ...this.attributes} : this.attributes;\n  }\n\n  // PRIVATE\n\n  _print(attributeName) {\n    return `Geometry ${this.id} attribute ${attributeName}`;\n  }\n\n  // Attribute\n  // value: typed array\n  // type: indices, vertices, uvs\n  // size: elements per vertex\n  // target: WebGL buffer type (string or constant)\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {value: indices, size: 1} : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n\n      // Wrap \"unwrapped\" arrays and try to autodetect their type\n      attribute = ArrayBuffer.isView(attribute) ? {value: attribute} : attribute;\n\n      assert(\n        ArrayBuffer.isView(attribute.value),\n        `${this._print(attributeName)}: must be typed array or object with value as typed array`\n      );\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      // Move indices to separate field\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n    let vertexCount = Infinity;\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {value, size, constant} = attribute;\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n}\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.set\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.map\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n}; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\nvar isBrowser = typeof window !== 'undefined' && window.addEventListener;\nvar timers = new Map();\n/**\n * Ready check for Seer initialization\n *\n * @returns {Boolean}\n */\n\nvar isReady = function isReady() {\n  return isBrowser && window.__SEER_INITIALIZED__;\n};\n/**\n * Utility method allowing to throttle a user action based on a key and a minimun delay.\n *\n * @param key {String} A unique key\n * @param delay {Number} The minimal delay to throttle\n * @returns {Boolean}\n */\n\n\nvar throttle = function throttle(key, delay) {\n  var time = timers.get(key);\n  var now = Date.now();\n\n  if (time && now - time < delay) {\n    return true;\n  }\n\n  timers.set(key, now);\n  return false;\n};\n\nvar replacer = function replacer(seen) {\n  return function (key, value) {\n    if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && seen.has(value)) {\n      return;\n    }\n\n    seen.add(value);\n    var isArray = Object.prototype.toString.call(value).slice(8, -1).includes('Array');\n\n    if (isArray) {\n      return Array.prototype.slice.call(value, 0, 20);\n    }\n\n    return value;\n  };\n};\n/**\n * Low-level api leveraging window.postMessage\n *\n * @param type {String} The action type\n * @param payload {Any} The action payload\n */\n\n\nvar send = function send(type) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isBrowser || !isReady()) {\n    return;\n  }\n\n  var seen = new Set();\n  var payload = JSON.stringify(data, replacer(seen));\n\n  try {\n    window.postMessage({\n      type: type,\n      payload: payload,\n      source: 'seer-agent'\n    }, '*');\n  } catch (e) {\n    if (throttle('seer-log', 2E3)) {\n      return;\n    }\n\n    console.log(e); // eslint-disable-line\n  }\n};\n\nvar listeners = new Map();\n\nvar listener = function listener(message) {\n  if (!message || !message.data || message.data.source !== 'seer-core') {\n    return;\n  }\n\n  var _message$data = message.data,\n      type = _message$data.type,\n      payload = _message$data.payload;\n  var typeListeners = listeners.get(type);\n\n  if (typeListeners) {\n    typeListeners.forEach(function (cb) {\n      return cb(payload);\n    });\n  }\n};\n/**\n * Initilize window listener. There will be only one for the whole process\n * to prevent too many registrations.\n *\n * This method will be called automatically if you use the `listenFor` method.\n */\n\n\nvar init = function init() {\n  if (!isBrowser || window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.addEventListener('message', listener);\n  window.__SEER_LISTENER__ = true;\n};\n/**\n * Clean listener. Can be useful in case you want to unregister upcoming events\n * or liberate memory.\n */\n\n\nvar clean = function clean() {\n  if (!isBrowser || !window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.removeEventListener('message', listener);\n  delete window.__SEER_LISTENER__;\n};\n/**\n * Create a listener that will be called upon events of the given key.\n *\n * @param key {String} The unique tab key\n * @param cb {Function} A callback that will receive the message payload\n */\n\n\nvar listenFor = function listenFor(type, cb) {\n  if (!isBrowser) {\n    return;\n  }\n\n  if (!type || !cb) {\n    throw new Error('Please provide a type and callback');\n  }\n\n  if (!listeners.has(type)) {\n    listeners.set(type, []);\n  }\n\n  if (!window.__SEER_LISTENER__) {\n    init();\n  }\n\n  listeners.get(type).push(cb);\n};\n/**\n * Remove an identity listener\n *\n * @param cb {Function} The callback to remove\n */\n\n\nvar removeListener = function removeListener(cb) {\n  listeners.forEach(function (typeListeners, key) {\n    listeners.set(key, typeListeners.filter(function (l) {\n      return l !== cb;\n    }));\n  });\n};\n/**\n * Creates a new indexed list.\n * It works by index to get O(1) accessing and performance.\n *\n * @param key {String} The key of the tab\n * @param data {Object} The indexed object\n */\n\n\nvar list = function list(key, data) {\n  return send('LIST', {\n    key: key,\n    data: data\n  });\n};\n/**\n * Creates an element in the indexed list, based on the itemKey.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param data {Any} The value of the item\n */\n\n\nvar listItem = function listItem(key, itemKey) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return send('LIST_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    data: data\n  });\n};\n/**\n * Update an item property, can be deeply nested.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param path {String} The path of the variable you want to update\n * @param data {Object} The new value\n */\n\n\nvar updateItem = function updateItem(key, itemKey, path, data) {\n  return send('UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    path: path,\n    data: data\n  });\n};\n/**\n * Similar to updateItem, but allows to pass an array with {path,data} pairs for\n * multiple update of the same item without having to send multiple messages.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param array {Array} The array of updates\n * @param array.path {String} The path for this update\n * @param array.data {Object} The value of this update\n */\n\n\nvar multiUpdate = function multiUpdate(key, itemKey, array) {\n  return send('MULTI_UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    array: array\n  });\n};\n/**\n * Remove a specific item in a specific tab.\n *\n * @param key {String} They key of the tab\n * @param itemKey {String} The key of the item\n */\n\n\nvar deleteItem = function deleteItem(key, itemKey) {\n  return send('DELETE_ITEM', {\n    key: key,\n    itemKey: itemKey\n  });\n};\n/**\n * Will create a log message to an item, that will be displayde with the current time.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param msg {String} The message to display\n */\n\n\nvar addLog = function addLog(key, itemKey, msg) {\n  return send('ADD_LOG', {\n    key: key,\n    itemKey: itemKey,\n    msg: msg\n  });\n};\n\nexports[\"default\"] = {\n  send: send,\n  throttle: throttle,\n  isReady: isReady,\n  list: list,\n  listItem: listItem,\n  updateItem: updateItem,\n  multiUpdate: multiUpdate,\n  deleteItem: deleteItem,\n  addLog: addLog,\n  listeners: listeners,\n  listenFor: listenFor,\n  removeListener: removeListener,\n  init: init,\n  clean: clean\n};","import Geometry from '../geometry/geometry';\nimport {uid} from '../utils';\n\nexport default class SphereGeometry extends Geometry {\n  constructor(props = {}) {\n    const {id = uid('sphere-geometry')} = props;\n    const {indices, attributes} = tesselateSphere(props);\n    super({\n      ...props,\n      id,\n      indices,\n      attributes: {...attributes, ...props.attributes}\n    });\n  }\n}\n\n// Primitives inspired by TDL http://code.google.com/p/webglsamples/,\n// copyright 2011 Google Inc. new BSD License\n// (http://www.opensource.org/licenses/bsd-license.php).\n/* eslint-disable max-statements, complexity */\nfunction tesselateSphere(props) {\n  const {nlat = 10, nlong = 10} = props;\n  let {radius = 1} = props;\n\n  const startLat = 0;\n  const endLat = Math.PI;\n  const latRange = endLat - startLat;\n  const startLong = 0;\n  const endLong = 2 * Math.PI;\n  const longRange = endLong - startLong;\n  const numVertices = (nlat + 1) * (nlong + 1);\n\n  if (typeof radius === 'number') {\n    const value = radius;\n    radius = (n1, n2, n3, u, v) => value;\n  }\n\n  const positions = new Float32Array(numVertices * 3);\n  const normals = new Float32Array(numVertices * 3);\n  const texCoords = new Float32Array(numVertices * 2);\n  const indices = new Uint16Array(nlat * nlong * 6);\n\n  // Create positions, normals and texCoords\n  for (let y = 0; y <= nlat; y++) {\n    for (let x = 0; x <= nlong; x++) {\n      const u = x / nlong;\n      const v = y / nlat;\n\n      const index = x + y * (nlong + 1);\n      const i2 = index * 2;\n      const i3 = index * 3;\n\n      const theta = longRange * u;\n      const phi = latRange * v;\n      const sinTheta = Math.sin(theta);\n      const cosTheta = Math.cos(theta);\n      const sinPhi = Math.sin(phi);\n      const cosPhi = Math.cos(phi);\n      const ux = cosTheta * sinPhi;\n      const uy = cosPhi;\n      const uz = sinTheta * sinPhi;\n\n      const r = radius(ux, uy, uz, u, v);\n\n      positions[i3 + 0] = r * ux;\n      positions[i3 + 1] = r * uy;\n      positions[i3 + 2] = r * uz;\n\n      normals[i3 + 0] = ux;\n      normals[i3 + 1] = uy;\n      normals[i3 + 2] = uz;\n\n      texCoords[i2 + 0] = u;\n      texCoords[i2 + 1] = 1 - v;\n    }\n  }\n\n  // Create indices\n  const numVertsAround = nlat + 1;\n  for (let x = 0; x < nlat; x++) {\n    for (let y = 0; y < nlong; y++) {\n      const index = (x * nlong + y) * 6;\n\n      indices[index + 0] = y * numVertsAround + x;\n      indices[index + 1] = y * numVertsAround + x + 1;\n      indices[index + 2] = (y + 1) * numVertsAround + x;\n\n      indices[index + 3] = (y + 1) * numVertsAround + x;\n      indices[index + 4] = y * numVertsAround + x + 1;\n      indices[index + 5] = (y + 1) * numVertsAround + x + 1;\n    }\n  }\n\n  return {\n    indices: {size: 1, value: indices},\n    attributes: {\n      POSITION: {size: 3, value: positions},\n      NORMAL: {size: 3, value: normals},\n      TEXCOORD_0: {size: 2, value: texCoords}\n    }\n  };\n}\n"],"sourceRoot":""}