{"version":3,"sources":["webpack:///../examples/lessons/16/app.js","webpack:///./templates/lessons/example-16.jsx","webpack:///../modules/core/src/geometry/geometry.js","webpack:///../node_modules/seer/dist/index.js","webpack:///../modules/core/src/scenegraph/nodes/scenegraph-node.js","webpack:///../modules/core/src/geometries/cube-geometry.js","webpack:///../node_modules/math.gl/dist/esm/classes/base/vector.js","webpack:///../node_modules/math.gl/dist/esm/classes/vector3.js","webpack:///../modules/core/src/scenegraph/nodes/model-node.js","webpack:///../modules/core/src/geometries/sphere-geometry.js"],"names":["rttFramebuffer","rttTexture","squareGeometry","geometry_geometry","drawMode","GL","TRIANGLE_STRIP","attributes","positions","Float32Array","colors","size","value","RENDER_SQUARE","VERTEX_SHADER","FRAGMENT_SHADER","DISABLE_FB","FB_WIDTH","FB_HEIGHT","moonAngle","cubeAngle","Math","PI","laptopAngle","moonAngleDelta","cubeAngleDelta","laptopAngleDelta","AppAnimationLoop","getInfo","onInitialize","_ref","canvas","_parameters","_parameters2","gl","setParameters","clearColor","clearDepth","depthTest","depthFunc","LEQUAL","tMoon","texture_2d","data","parameters","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","mipmap","tCrate","Object","load_file","then","macbookJSON","program","classes_program","vs","fs","macbook","opts","_opts","file","_opts$program","json","JSON","error","Error","parseJSON","modelOptions","key","Array","Uint16Array","lib_model","assign","geometry","parseModel","id","uniforms","uMaterialAmbientColor","uMaterialDiffuseColor","uMaterialSpecularColor","uMaterialShininess","uMaterialEmissiveColor","uShowSpecularHighlights","uPointLightingLocation","uAmbientLightingColor","uPointLightingDiffuseColor","uPointLightingSpecularColor","moon","model_node","sphere_geometry","nlat","nlong","radius","uUseTextures","uSampler","cube","cube_geometry","_parameters3","_attachments","format","RGBA","type","UNSIGNED_BYTE","border","mipmaps","NEAREST","width","height","dataFormat","renderbuffer","classes_renderbuffer","DEPTH_COMPONENT16","framebuffer","attachments","COLOR_ATTACHMENT0","DEPTH_ATTACHMENT","setupFramebuffer","laptopScreenModel","POSITIONS","NORMALS","TEXCOORDS","normals","texCoords","generateLaptopScreenModel","programSQ","tSquare","onRender","_ref2","aspect","tick","DEPTH_BUFFER_BIT","uMVMatrix","matrix","uPMatrix","matrix4","perspective","lookAt","eye","translate","rotateY","rotateX","multiplyRight","near","far","generateTextureForLaptopScreen","texture","drawOuterScene","AnimationLoop","window","website","app_AppAnimationLoop","animationLoop","Example","render","react_default","a","createElement","animation_loop_example_page","exampleConfig","this","props","pageContext","React","Component","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_FAN","Geometry","_props","_props$id","uid","_props$drawMode","_props$attributes","_props$indices","indices","_props$vertexCount","vertexCount","userData","_setAttributes","_calculateVertexCount","getVertexCount","getAttributes","_print","attributeName","ArrayBuffer","isView","attribute","assert","undefined","isIndexed","length","Infinity","constant","Number","__webpack_require__","defineProperty","exports","_typeof","Symbol","iterator","obj","constructor","prototype","isBrowser","addEventListener","timers","Map","isReady","__SEER_INITIALIZED__","throttle","delay","time","get","now","Date","set","send","arguments","seen","Set","payload","stringify","has","add","toString","call","slice","includes","replacer","postMessage","source","e","console","log","listeners","listener","message","_message$data","typeListeners","forEach","cb","init","__SEER_LISTENER__","list","listItem","itemKey","updateItem","path","multiUpdate","array","deleteItem","addLog","msg","listenFor","push","removeListener","filter","l","clean","removeEventListener","ScenegraphNode","name","display","position","math_gl__WEBPACK_IMPORTED_MODULE_4__","rotation","scale","math_gl__WEBPACK_IMPORTED_MODULE_5__","_setScenegraphNodeProps","delete","setProps","setPosition","setRotation","setScale","setMatrix","copyMatrix","copy","setMatrixComponents","_ref$update","update","updateMatrix","pos","rot","identity","rotateXYZ","_temp","getCoordinateUniforms","modelMatrix","worldMatrix","viewMatrix","worldInverse","invert","worldInverseTranspose","transpose","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","CUBE_INDICES","CUBE_POSITIONS","CUBE_NORMALS","CUBE_TEX_COORDS","ATTRIBUTES","POSITION","NORMAL","TEXCOORD_0","CubeGeometry","_Geometry","vector_Vector","_MathArray","Vector","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","inherits","createClass","sqrt","lengthSquared","len","i","ELEMENTS","mathArray","distanceSquared","dist","validators","product","magnitude","check","_len","vectors","_key","_i","_vectors","vector","_len2","_key2","_i2","_vectors2","distance","b","subtract","multiply","multiplyScalar","math_array","d","__webpack_exports__","vector3_Vector3","ORIGIN","_Vector","Vector3","_this","x","y","z","common","debug","object","vec3","radians","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","transformAsPoint","gl_matrix_extras","matrix3","matrix2","quaternion","ModelNode","_ScenegraphNode","onBeforeRender","AfterRender","_lib_model__WEBPACK_IMPORTED_MODULE_0__","model","_setModelNodeProps","managedResources","resource","draw","_this$model","setUniforms","_this$model2","setAttributes","_this$model3","updateModuleSettings","_this$model4","SphereGeometry","_tesselateSphere","_props$nlat","_props$nlong","_props$radius","latRange","longRange","numVertices","n1","n2","n3","u","v","index","i2","i3","theta","phi","sinTheta","cosTheta","sinPhi","cosPhi","ux","uy","uz","r","numVertsAround","_y","_x","tesselateSphere"],"mappings":"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","file":"component---templates-lessons-example-16-jsx-5509a910e7a59b45d255.js","sourcesContent":["// TODO: Remaining issues\n// 1. Specular highlights don not match with example:\n//    verify light position relative to moon/cube\n// 2. Fix positioning (translations) of moon and cube.\n// 3. Match laptopScreen uniforms with the example.\n// 4. Match zNear/zFar values with example on all cases.\n// 5. Verify lookAt matrix used. (do we need it?)\n\n/* eslint-disable max-statements, indent, no-multi-spaces */\nimport GL from '@luma.gl/constants';\nimport {\n  AnimationLoop,\n  Model,\n  Geometry,\n  Texture2D,\n  Program,\n  Renderbuffer,\n  Framebuffer,\n  setParameters,\n  loadFile,\n  ModelNode,\n  CubeGeometry,\n  SphereGeometry\n} from '@luma.gl/core';\nimport {Matrix4} from 'math.gl';\n\nconst INFO_HTML = `\n<p>\n  <a href=\"http://learningwebgl.com/blog/?p=1786\" target=\"_blank\">\n    Rendering to textures\n  </a>\n\n  <br/>\n  <br/>\n  Laptop model adapted from\n  <a href=\"http://www.turbosquid.com/3d-models/apple-macbook-max-free/391534\">\n    this 3DS Max model by Xedium\n  </a><br/>\n  Moon texture courtesy of\n  <a href=\"http://maps.jpl.nasa.gov/\">\n    the Jet Propulsion Laboratory\n  </a>.\n\n<p>\n  The classic WebGL Lessons in luma.gl\n`;\n\n// TODO: For Debugging only, remove once rendering issues fixed.\nconst FRAGMENT_SHADER_SQ = `\\\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n`;\nconst VERTEX_SHADER_SQ = `\\\nattribute vec3 positions;\nattribute vec4 colors;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = uPMatrix * uMVMatrix * vec4(positions, 1.0);\n  vColor = colors;\n}\n`;\n\nconst squareGeometry = new Geometry({\n  drawMode: GL.TRIANGLE_STRIP,\n  attributes: {\n    positions: new Float32Array([1, 1, 0, -1, 1, 0, 1, -1, 0, -1, -1, 0]),\n    colors: {\n      size: 4,\n      value: new Float32Array([1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1])\n    }\n  }\n});\n\nconst RENDER_SQUARE = false;\n\nconst VERTEX_SHADER = `\\\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 texCoords;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vTransformedNormal;\nvarying vec4 vPosition;\n\n\nvoid main(void) {\n  // Perform lighting in world space\n  // we should use 'transpose(inverse(mat3(uMVMatrix)))', but\n  // 'inverse' matrix operation not supported in GLSL 1.0, for now use\n  // upper-left 3X3 matrix of model view matrix, it works since we are not\n  // doing any non-uniform scaling transormations in this example.\n  mat3 normalMatrix = mat3(uMVMatrix);\n  vPosition = uMVMatrix * vec4(positions, 1.0);\n  gl_Position = uPMatrix * vPosition;\n  vTextureCoord = texCoords;\n  vTransformedNormal = normalMatrix * normals;\n}\n`;\n\nconst FRAGMENT_SHADER = `\\\nprecision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vTransformedNormal;\nvarying vec4 vPosition;\n\nuniform vec3 uMaterialAmbientColor;\nuniform vec3 uMaterialDiffuseColor;\nuniform vec3 uMaterialSpecularColor;\nuniform float uMaterialShininess;\nuniform vec3 uMaterialEmissiveColor;\nuniform bool uShowSpecularHighlights;\nuniform bool uUseTextures;\nuniform vec3 uAmbientLightingColor;\nuniform vec3 uPointLightingLocation;\nuniform vec3 uPointLightingDiffuseColor;\nuniform vec3 uPointLightingSpecularColor;\nuniform sampler2D uSampler;\n\nvoid main(void) {\n  vec3 ambientLightWeighting = uAmbientLightingColor;\n\n  vec3 lightDirection = normalize(uPointLightingLocation - vPosition.xyz);\n  vec3 normal = normalize(vTransformedNormal);\n\n  vec3 specularLightWeighting = vec3(0.0, 0.0, 0.0);\n  if (uShowSpecularHighlights) {\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection = reflect(-lightDirection, normal);\n\n    float specularLightBrightness =\n      pow(max(dot(reflectionDirection, eyeDirection), 0.0), uMaterialShininess);\n    specularLightWeighting = uPointLightingSpecularColor * specularLightBrightness;\n  }\n\n  float diffuseLightBrightness = max(dot(normal, lightDirection), 0.0);\n  vec3 diffuseLightWeighting = uPointLightingDiffuseColor * diffuseLightBrightness;\n\n  vec3 materialAmbientColor = uMaterialAmbientColor;\n  vec3 materialDiffuseColor = uMaterialDiffuseColor;\n  vec3 materialSpecularColor = uMaterialSpecularColor;\n  vec3 materialEmissiveColor = uMaterialEmissiveColor;\n  float alpha = 1.0;\n  if (uUseTextures) {\n    vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n    materialAmbientColor = materialAmbientColor * textureColor.rgb;\n    materialDiffuseColor = materialDiffuseColor * textureColor.rgb;\n    materialEmissiveColor = materialEmissiveColor * textureColor.rgb;\n    alpha = textureColor.a;\n  }\n  gl_FragColor = vec4(\n    materialAmbientColor * ambientLightWeighting\n    + materialDiffuseColor * diffuseLightWeighting\n    + materialSpecularColor * specularLightWeighting\n    + materialEmissiveColor,\n    alpha\n  );\n}\n`;\n\nlet rttFramebuffer;\nlet rttTexture;\n\nconst DISABLE_FB = false;\nconst FB_WIDTH = 512;\nconst FB_HEIGHT = 512;\n\nlet moonAngle = 0.0;\nlet cubeAngle = Math.PI;\nlet laptopAngle = 0.0;\nconst moonAngleDelta = 0.01; // * Math.PI / 180.0;\nconst cubeAngleDelta = 0.01; // * Math.PI / 180.0;\nconst laptopAngleDelta = -0.002; // * Math.PI / 180.0;\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n\n  onInitialize({canvas, gl}) {\n    setParameters(gl, {\n      clearColor: [0, 0, 0, 1],\n      clearDepth: 1,\n      depthTest: true,\n      depthFunc: GL.LEQUAL\n    });\n\n    const tMoon = new Texture2D(gl, {\n      data: 'moon.gif',\n      parameters: {\n        [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n        [gl.TEXTURE_MIN_FILTER]: gl.LINEAR_MIPMAP_NEAREST\n      },\n      mipmap: true\n    });\n\n    const tCrate = new Texture2D(gl, {\n      data: 'crate.gif',\n      parameters: {\n        [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n        [gl.TEXTURE_MIN_FILTER]: gl.LINEAR_MIPMAP_NEAREST\n      },\n      mipmap: true\n    });\n\n    return loadFile('macbook.json').then(macbookJSON => {\n      // Fix attribute name to match with Shaders\n      macbookJSON = macbookJSON.replace('vertices', 'positions');\n      const program = new Program(gl, {vs: VERTEX_SHADER, fs: FRAGMENT_SHADER});\n      const macbook = parseModel(gl, {\n        id: 'macbook',\n        file: macbookJSON,\n        program,\n        uniforms: Object.assign({}, getLaptopUniforms(), getLightUniforms())\n      });\n\n      const moon = new ModelNode(gl, {\n        geometry: new SphereGeometry({\n          nlat: 30,\n          nlong: 30,\n          radius: 2\n        }),\n        vs: VERTEX_SHADER,\n        fs: FRAGMENT_SHADER,\n        uniforms: Object.assign(\n          {uUseTextures: true, uSampler: tMoon},\n          getMoonCubeUniforms(),\n          getLightUniforms()\n        )\n      });\n\n      const cube = new ModelNode(gl, {\n        id: 'cube-model',\n        geometry: new CubeGeometry(),\n        vs: VERTEX_SHADER,\n        fs: FRAGMENT_SHADER,\n        uniforms: Object.assign(\n          {uUseTextures: true, uSampler: tCrate},\n          getMoonCubeUniforms(),\n          getLightUniforms()\n        )\n      });\n      setupFramebuffer(gl);\n      const laptopScreenModel = generateLaptopScreenModel(gl);\n\n      // TODO: Square program/model for debugging only, remove once all rendering issues resolved\n      const programSQ = new Program(gl, {vs: VERTEX_SHADER_SQ, fs: FRAGMENT_SHADER_SQ});\n      const tSquare = new Model(gl, {geometry: squareGeometry, program: programSQ});\n\n      return {moon, macbook, cube, laptopScreenModel, tCrate, tSquare};\n    });\n  }\n\n  onRender({gl, tick, aspect, moon, macbook, cube, laptopScreenModel, canvas, tCrate, tSquare}) {\n    generateTextureForLaptopScreen(gl, tick, aspect, moon, cube, tSquare);\n    if (!DISABLE_FB) {\n      drawOuterScene(gl, tick, aspect, macbook, laptopScreenModel, canvas, tCrate);\n    }\n  }\n}\n\nfunction getLaptopUniforms() {\n  return {\n    uMaterialAmbientColor: [1.0, 1.0, 1.0],\n    uMaterialDiffuseColor: [1.0, 1.0, 1.0],\n    uMaterialSpecularColor: [1.5, 1.5, 1.5],\n    uMaterialShininess: 5.0,\n    uMaterialEmissiveColor: [0, 0, 0],\n    uShowSpecularHighlights: true,\n    uPointLightingLocation: [-1, 2, -1]\n  };\n}\n\nfunction getMoonCubeUniforms() {\n  return {\n    uMaterialAmbientColor: [1.0, 1.0, 1.0],\n    uMaterialDiffuseColor: [1.0, 1.0, 1.0],\n    uMaterialSpecularColor: [0.0, 0.0, 0.0],\n    uMaterialShininess: 0.0,\n    uMaterialEmissiveColor: [0.0, 0.0, 0.0],\n    uShowSpecularHighlights: false,\n    uPointLightingLocation: [0, 0, -5]\n  };\n}\n\nfunction getLaptopScreenUniforms() {\n  return {\n    uMaterialAmbientColor: [1.0, 1.0, 1.0], // [0, 0, 0],\n    uMaterialDiffuseColor: [1.0, 1.0, 1.0], // [0, 0, 0],\n    uMaterialSpecularColor: [0.5, 0.5, 0.5],\n    uMaterialShininess: 20.0,\n    uMaterialEmissiveColor: [0.0, 0.0, 0.0],\n    uShowSpecularHighlights: true,\n    uPointLightingLocation: [1.5, 1.5, 1.5]\n  };\n}\nfunction getLightUniforms() {\n  return {\n    uAmbientLightingColor: [0.2, 0.2, 0.2],\n    uPointLightingDiffuseColor: [0.8, 0.8, 0.8],\n    uPointLightingSpecularColor: [0.8, 0.8, 0.8]\n  };\n}\n\nfunction generateLaptopScreenModel(gl) {\n  const POSITIONS = new Float32Array([\n    0.580687,\n    0.659,\n    0.813106,\n    -0.580687,\n    0.659,\n    0.813107,\n    0.580687,\n    0.472,\n    0.113121,\n    -0.580687,\n    0.472,\n    0.113121\n  ]);\n  const NORMALS = new Float32Array([\n    0.0,\n    -0.965926,\n    0.258819,\n    0.0,\n    -0.965926,\n    0.258819,\n    0.0,\n    -0.965926,\n    0.258819,\n    0.0,\n    -0.965926,\n    0.258819\n  ]);\n  const TEXCOORDS = new Float32Array([1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0]);\n\n  const geometry = new Geometry({\n    id: 'laptopscreen-geometry',\n    attributes: {\n      positions: POSITIONS,\n      normals: NORMALS,\n      texCoords: TEXCOORDS\n    },\n    drawMode: GL.TRIANGLE_STRIP\n  });\n\n  const model = new Model(gl, {\n    gl,\n    id: 'laptopscreen-model',\n    geometry,\n    vs: VERTEX_SHADER,\n    fs: FRAGMENT_SHADER,\n    uniforms: Object.assign({uUseTextures: true}, getLaptopScreenUniforms(), getLightUniforms())\n  });\n\n  return model;\n}\n\nfunction setupFramebuffer(gl) {\n  rttTexture = new Texture2D(gl, {\n    data: null,\n    format: GL.RGBA,\n    type: GL.UNSIGNED_BYTE,\n    border: 0,\n    mipmaps: true,\n    parameters: {\n      [GL.TEXTURE_MAG_FILTER]: GL.NEAREST, // GL.LINEAR,\n      [GL.TEXTURE_MIN_FILTER]: GL.NEAREST // GL.LINEAR_MIPMAP_NEAREST\n    },\n    width: FB_WIDTH,\n    height: FB_HEIGHT,\n    dataFormat: GL.RGBA\n  });\n\n  const renderbuffer = new Renderbuffer(gl, {\n    format: GL.DEPTH_COMPONENT16,\n    width: FB_WIDTH,\n    height: FB_HEIGHT\n  });\n\n  rttFramebuffer = new Framebuffer(gl, {\n    width: FB_WIDTH,\n    height: FB_HEIGHT,\n    attachments: {\n      [GL.COLOR_ATTACHMENT0]: rttTexture,\n      [GL.DEPTH_ATTACHMENT]: renderbuffer\n    }\n  });\n\n  if (DISABLE_FB === true) {\n    rttFramebuffer = null;\n  }\n}\n\n// eslint-disable-next-line max-params\nfunction generateTextureForLaptopScreen(gl, tick, aspect, moon, cube, tSquare) {\n  moonAngle += moonAngleDelta;\n  cubeAngle += cubeAngleDelta;\n  gl.viewport(0, 0, FB_WIDTH, FB_HEIGHT);\n\n  if (!DISABLE_FB) {\n    rttFramebuffer.bind();\n  }\n\n  gl.clear(GL.COLOR_BUFFER_BIT | GL.DEPTH_BUFFER_BIT);\n\n  // Rendering square for dubgging only, remove once all issues are resolved.\n  if (RENDER_SQUARE) {\n    // Draw Square\n    tSquare\n      .setPosition([0, 0, -1])\n      .updateMatrix()\n      .setUniforms({\n        uMVMatrix: tSquare.matrix,\n        uPMatrix: new Matrix4().perspective({aspect})\n      })\n      .draw();\n  } else {\n    let uMVMatrix = new Matrix4()\n      .lookAt({eye: [0, 0, 20]})\n      .translate([2, 0, 0])\n      .rotateY(moonAngle)\n      .rotateX((30 * Math.PI) / 180.0)\n      .translate([0, 0, -5])\n      .multiplyRight(moon.matrix);\n\n    moon\n      .setUniforms({\n        uMVMatrix,\n        uPMatrix: new Matrix4().perspective({aspect: FB_WIDTH / FB_HEIGHT, near: 0.1, far: 500})\n      })\n      .draw();\n\n    uMVMatrix = new Matrix4()\n      .lookAt({eye: [0, 0, 20]})\n      .translate([1, 0, 0])\n      .rotateY(cubeAngle)\n      .translate([0, 0, -5])\n      .multiplyRight(cube.matrix);\n\n    cube\n      .setUniforms({\n        uMVMatrix,\n        uPMatrix: new Matrix4().perspective({aspect: FB_WIDTH / FB_HEIGHT})\n      })\n      .draw();\n  }\n\n  if (!DISABLE_FB) {\n    rttFramebuffer.unbind();\n  }\n}\n\n// eslint-disable-next-line max-params\nfunction drawOuterScene(gl, tick, aspect, macbook, laptopScreenModel, canvas, tCrate) {\n  laptopAngle += laptopAngleDelta;\n\n  gl.viewport(0, 0, canvas.width, canvas.height);\n  gl.clear(GL.COLOR_BUFFER_BIT | GL.DEPTH_BUFFER_BIT);\n\n  const uMVMatrix = new Matrix4()\n    .lookAt({eye: [0, 0, 0]})\n    .translate([0, -0.5, -3])\n    .rotateY(laptopAngle)\n    .rotateX((-80.0 * Math.PI) / 180.0);\n\n  macbook\n    .setUniforms({\n      uMVMatrix,\n      uPMatrix: new Matrix4().perspective({aspect}),\n      uUseTextures: false\n    })\n    .draw();\n\n  laptopScreenModel\n    .setUniforms({\n      uMVMatrix,\n      uPMatrix: new Matrix4().perspective({aspect}),\n      uUseTextures: true,\n      uSampler: rttFramebuffer.texture\n    })\n    .draw();\n}\n\nfunction parseModel(gl, opts = {}) {\n  const {file, program = new Program(gl)} = opts;\n  const json = typeof file === 'string' ? parseJSON(file) : file;\n  // Remove any attributes so that we can create a geometry\n  // TODO - change format to put these in geometry sub object?\n  const attributes = {};\n  const modelOptions = {};\n  for (const key in json) {\n    const value = json[key];\n    if (Array.isArray(value)) {\n      attributes[key] = key === 'indices' ? new Uint16Array(value) : new Float32Array(value);\n    } else {\n      modelOptions[key] = value;\n    }\n  }\n\n  return new Model(\n    gl,\n    Object.assign({program, geometry: new Geometry({attributes})}, modelOptions, opts)\n  );\n}\n\nfunction parseJSON(file) {\n  try {\n    return JSON.parse(file);\n  } catch (error) {\n    throw new Error(`Failed to parse JSON: ${error}`);\n  }\n}\n\n/* global window */\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/lessons/16/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import {uid, assert} from '../utils';\n\n// Rendering primitives - specify how to extract primitives from vertices.\n// NOTE: These are numerically identical to the corresponding WebGL/OpenGL constants\nexport const DRAW_MODE = {\n  POINTS: 0x0000, // draw single points.\n  LINES: 0x0001, // draw lines. Each vertex connects to the one after it.\n  LINE_LOOP: 0x0002, // draw lines. Each set of two vertices is treated as a separate line segment.\n  LINE_STRIP: 0x0003, // draw a connected group of line segments from the first vertex to the last\n  TRIANGLES: 0x0004, // draw triangles. Each set of three vertices creates a separate triangle.\n  TRIANGLE_STRIP: 0x0005, // draw a connected group of triangles.\n  TRIANGLE_FAN: 0x0006 // draw a connected group of triangles.\n  // Each vertex connects to the previous and the first vertex in the fan.\n};\n\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor(props = {}) {\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n\n    // stubRemovedMethods(this, [\n    //   'setNeedsRedraw', 'needsRedraw', 'setAttributes'\n    // ], 'Immutable');\n\n    // stubRemovedMethods(this, [\n    //   'hasAttribute', 'getAttribute', 'getArray'\n    // ], 'Use geometry.attributes and geometry.indices');\n\n    // deprecateMethods(this, ['getAttributes'])\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  // Return an object with all attributes plus indices added as a field.\n  getAttributes() {\n    return this.indices ? {indices: this.indices, ...this.attributes} : this.attributes;\n  }\n\n  // PRIVATE\n\n  _print(attributeName) {\n    return `Geometry ${this.id} attribute ${attributeName}`;\n  }\n\n  // Attribute\n  // value: typed array\n  // type: indices, vertices, uvs\n  // size: elements per vertex\n  // target: WebGL buffer type (string or constant)\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {value: indices, size: 1} : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n\n      // Wrap \"unwrapped\" arrays and try to autodetect their type\n      attribute = ArrayBuffer.isView(attribute) ? {value: attribute} : attribute;\n\n      assert(\n        ArrayBuffer.isView(attribute.value),\n        `${this._print(attributeName)}: must be typed array or object with value as typed array`\n      );\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      // Move indices to separate field\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n    let vertexCount = Infinity;\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {value, size, constant} = attribute;\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n}\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.set\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.map\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n}; // Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\nvar isBrowser = typeof window !== 'undefined' && window.addEventListener;\nvar timers = new Map();\n/**\n * Ready check for Seer initialization\n *\n * @returns {Boolean}\n */\n\nvar isReady = function isReady() {\n  return isBrowser && window.__SEER_INITIALIZED__;\n};\n/**\n * Utility method allowing to throttle a user action based on a key and a minimun delay.\n *\n * @param key {String} A unique key\n * @param delay {Number} The minimal delay to throttle\n * @returns {Boolean}\n */\n\n\nvar throttle = function throttle(key, delay) {\n  var time = timers.get(key);\n  var now = Date.now();\n\n  if (time && now - time < delay) {\n    return true;\n  }\n\n  timers.set(key, now);\n  return false;\n};\n\nvar replacer = function replacer(seen) {\n  return function (key, value) {\n    if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && seen.has(value)) {\n      return;\n    }\n\n    seen.add(value);\n    var isArray = Object.prototype.toString.call(value).slice(8, -1).includes('Array');\n\n    if (isArray) {\n      return Array.prototype.slice.call(value, 0, 20);\n    }\n\n    return value;\n  };\n};\n/**\n * Low-level api leveraging window.postMessage\n *\n * @param type {String} The action type\n * @param payload {Any} The action payload\n */\n\n\nvar send = function send(type) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isBrowser || !isReady()) {\n    return;\n  }\n\n  var seen = new Set();\n  var payload = JSON.stringify(data, replacer(seen));\n\n  try {\n    window.postMessage({\n      type: type,\n      payload: payload,\n      source: 'seer-agent'\n    }, '*');\n  } catch (e) {\n    if (throttle('seer-log', 2E3)) {\n      return;\n    }\n\n    console.log(e); // eslint-disable-line\n  }\n};\n\nvar listeners = new Map();\n\nvar listener = function listener(message) {\n  if (!message || !message.data || message.data.source !== 'seer-core') {\n    return;\n  }\n\n  var _message$data = message.data,\n      type = _message$data.type,\n      payload = _message$data.payload;\n  var typeListeners = listeners.get(type);\n\n  if (typeListeners) {\n    typeListeners.forEach(function (cb) {\n      return cb(payload);\n    });\n  }\n};\n/**\n * Initilize window listener. There will be only one for the whole process\n * to prevent too many registrations.\n *\n * This method will be called automatically if you use the `listenFor` method.\n */\n\n\nvar init = function init() {\n  if (!isBrowser || window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.addEventListener('message', listener);\n  window.__SEER_LISTENER__ = true;\n};\n/**\n * Clean listener. Can be useful in case you want to unregister upcoming events\n * or liberate memory.\n */\n\n\nvar clean = function clean() {\n  if (!isBrowser || !window.__SEER_LISTENER__) {\n    return;\n  }\n\n  window.removeEventListener('message', listener);\n  delete window.__SEER_LISTENER__;\n};\n/**\n * Create a listener that will be called upon events of the given key.\n *\n * @param key {String} The unique tab key\n * @param cb {Function} A callback that will receive the message payload\n */\n\n\nvar listenFor = function listenFor(type, cb) {\n  if (!isBrowser) {\n    return;\n  }\n\n  if (!type || !cb) {\n    throw new Error('Please provide a type and callback');\n  }\n\n  if (!listeners.has(type)) {\n    listeners.set(type, []);\n  }\n\n  if (!window.__SEER_LISTENER__) {\n    init();\n  }\n\n  listeners.get(type).push(cb);\n};\n/**\n * Remove an identity listener\n *\n * @param cb {Function} The callback to remove\n */\n\n\nvar removeListener = function removeListener(cb) {\n  listeners.forEach(function (typeListeners, key) {\n    listeners.set(key, typeListeners.filter(function (l) {\n      return l !== cb;\n    }));\n  });\n};\n/**\n * Creates a new indexed list.\n * It works by index to get O(1) accessing and performance.\n *\n * @param key {String} The key of the tab\n * @param data {Object} The indexed object\n */\n\n\nvar list = function list(key, data) {\n  return send('LIST', {\n    key: key,\n    data: data\n  });\n};\n/**\n * Creates an element in the indexed list, based on the itemKey.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param data {Any} The value of the item\n */\n\n\nvar listItem = function listItem(key, itemKey) {\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return send('LIST_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    data: data\n  });\n};\n/**\n * Update an item property, can be deeply nested.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param path {String} The path of the variable you want to update\n * @param data {Object} The new value\n */\n\n\nvar updateItem = function updateItem(key, itemKey, path, data) {\n  return send('UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    path: path,\n    data: data\n  });\n};\n/**\n * Similar to updateItem, but allows to pass an array with {path,data} pairs for\n * multiple update of the same item without having to send multiple messages.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param array {Array} The array of updates\n * @param array.path {String} The path for this update\n * @param array.data {Object} The value of this update\n */\n\n\nvar multiUpdate = function multiUpdate(key, itemKey, array) {\n  return send('MULTI_UPDATE_ITEM', {\n    key: key,\n    itemKey: itemKey,\n    array: array\n  });\n};\n/**\n * Remove a specific item in a specific tab.\n *\n * @param key {String} They key of the tab\n * @param itemKey {String} The key of the item\n */\n\n\nvar deleteItem = function deleteItem(key, itemKey) {\n  return send('DELETE_ITEM', {\n    key: key,\n    itemKey: itemKey\n  });\n};\n/**\n * Will create a log message to an item, that will be displayde with the current time.\n *\n * @param key {String} The key of the tab\n * @param itemKey {String} The key of the item\n * @param msg {String} The message to display\n */\n\n\nvar addLog = function addLog(key, itemKey, msg) {\n  return send('ADD_LOG', {\n    key: key,\n    itemKey: itemKey,\n    msg: msg\n  });\n};\n\nexports[\"default\"] = {\n  send: send,\n  throttle: throttle,\n  isReady: isReady,\n  list: list,\n  listItem: listItem,\n  updateItem: updateItem,\n  multiUpdate: multiUpdate,\n  deleteItem: deleteItem,\n  addLog: addLog,\n  listeners: listeners,\n  listenFor: listenFor,\n  removeListener: removeListener,\n  init: init,\n  clean: clean\n};","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '../../utils';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import Geometry from '../geometry/geometry';\nimport {uid} from '../utils';\n\n// prettier-ignore\nconst CUBE_INDICES = new Uint16Array([\n  0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13,\n  14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23\n]);\n\n// prettier-ignore\nconst CUBE_POSITIONS = new Float32Array([\n  -1,  -1,  1, 1,  -1,  1,  1,  1,  1,  -1,  1,  1,\n  -1,  -1,  -1,  -1,  1,  -1,  1,  1,  -1,  1,  -1,  -1,\n  -1,  1,  -1,  -1,  1,  1,  1,  1,  1,  1,  1,  -1,\n  -1,  -1,  -1,  1,  -1,  -1,  1,  -1,  1,  -1,  -1,  1,\n  1,  -1,  -1,  1,  1,  -1,  1,  1,  1,  1,  -1,  1,\n  -1,  -1,  -1,  -1,  -1,  1,  -1,  1,  1,  -1,  1,  -1\n]);\n\n// TODO - could be Uint8\n// prettier-ignore\nconst CUBE_NORMALS = new Float32Array([\n  // Front face\n  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,\n  // Back face\n  0,  0,  -1,  0,  0,  -1,  0,  0,  -1,  0,  0,  -1,\n  // Top face\n  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,\n  // Bottom face\n  0,  -1,  0,  0,  -1,  0,  0,  -1,  0,  0,  -1,  0,\n  // Right face\n  1,  0,  0,  1,  0,  0,  1,  0,  0,  1,  0,  0,\n  // Left face\n  -1,  0,  0,  -1,  0,  0,  -1,  0,  0,  -1,  0,  0\n]);\n\n// prettier-ignore\nconst CUBE_TEX_COORDS = new Float32Array([\n  // Front face\n  0,  0,  1,  0,  1,  1,  0,  1,\n  // Back face\n  1,  0,  1,  1,  0,  1,  0,  0,\n  // Top face\n  0,  1,  0,  0,  1,  0,  1,  1,\n  // Bottom face\n  1,  1,  0,  1,  0,  0,  1,  0,\n  // Right face\n  1,  0,  1,  1,  0,  1,  0,  0,\n  // Left face\n  0,  0,  1,  0,  1,  1,  0,  1\n]);\n\nconst ATTRIBUTES = {\n  POSITION: {size: 3, value: new Float32Array(CUBE_POSITIONS)},\n  NORMAL: {size: 3, value: new Float32Array(CUBE_NORMALS)},\n  TEXCOORD_0: {size: 2, value: new Float32Array(CUBE_TEX_COORDS)}\n};\n\nexport default class CubeGeometry extends Geometry {\n  constructor(props = {}) {\n    const {id = uid('cube-geometry')} = props;\n    super({\n      ...props,\n      id,\n      indices: {size: 1, value: new Uint16Array(CUBE_INDICES)},\n      attributes: {...ATTRIBUTES, ...props.attributes}\n    });\n  }\n}\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","import Model from '../../lib/model';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","import Geometry from '../geometry/geometry';\nimport {uid} from '../utils';\n\nexport default class SphereGeometry extends Geometry {\n  constructor(props = {}) {\n    const {id = uid('sphere-geometry')} = props;\n    const {indices, attributes} = tesselateSphere(props);\n    super({\n      ...props,\n      id,\n      indices,\n      attributes: {...attributes, ...props.attributes}\n    });\n  }\n}\n\n// Primitives inspired by TDL http://code.google.com/p/webglsamples/,\n// copyright 2011 Google Inc. new BSD License\n// (http://www.opensource.org/licenses/bsd-license.php).\n/* eslint-disable max-statements, complexity */\nfunction tesselateSphere(props) {\n  const {nlat = 10, nlong = 10} = props;\n  let {radius = 1} = props;\n\n  const startLat = 0;\n  const endLat = Math.PI;\n  const latRange = endLat - startLat;\n  const startLong = 0;\n  const endLong = 2 * Math.PI;\n  const longRange = endLong - startLong;\n  const numVertices = (nlat + 1) * (nlong + 1);\n\n  if (typeof radius === 'number') {\n    const value = radius;\n    radius = (n1, n2, n3, u, v) => value;\n  }\n\n  const positions = new Float32Array(numVertices * 3);\n  const normals = new Float32Array(numVertices * 3);\n  const texCoords = new Float32Array(numVertices * 2);\n  const indices = new Uint16Array(nlat * nlong * 6);\n\n  // Create positions, normals and texCoords\n  for (let y = 0; y <= nlat; y++) {\n    for (let x = 0; x <= nlong; x++) {\n      const u = x / nlong;\n      const v = y / nlat;\n\n      const index = x + y * (nlong + 1);\n      const i2 = index * 2;\n      const i3 = index * 3;\n\n      const theta = longRange * u;\n      const phi = latRange * v;\n      const sinTheta = Math.sin(theta);\n      const cosTheta = Math.cos(theta);\n      const sinPhi = Math.sin(phi);\n      const cosPhi = Math.cos(phi);\n      const ux = cosTheta * sinPhi;\n      const uy = cosPhi;\n      const uz = sinTheta * sinPhi;\n\n      const r = radius(ux, uy, uz, u, v);\n\n      positions[i3 + 0] = r * ux;\n      positions[i3 + 1] = r * uy;\n      positions[i3 + 2] = r * uz;\n\n      normals[i3 + 0] = ux;\n      normals[i3 + 1] = uy;\n      normals[i3 + 2] = uz;\n\n      texCoords[i2 + 0] = u;\n      texCoords[i2 + 1] = 1 - v;\n    }\n  }\n\n  // Create indices\n  const numVertsAround = nlat + 1;\n  for (let x = 0; x < nlat; x++) {\n    for (let y = 0; y < nlong; y++) {\n      const index = (x * nlong + y) * 6;\n\n      indices[index + 0] = y * numVertsAround + x;\n      indices[index + 1] = y * numVertsAround + x + 1;\n      indices[index + 2] = (y + 1) * numVertsAround + x;\n\n      indices[index + 3] = (y + 1) * numVertsAround + x;\n      indices[index + 4] = y * numVertsAround + x + 1;\n      indices[index + 5] = (y + 1) * numVertsAround + x + 1;\n    }\n  }\n\n  return {\n    indices: {size: 1, value: indices},\n    attributes: {\n      POSITION: {size: 3, value: positions},\n      NORMAL: {size: 3, value: normals},\n      TEXCOORD_0: {size: 2, value: texCoords}\n    }\n  };\n}\n"],"sourceRoot":""}