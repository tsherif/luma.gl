{"version":3,"sources":["webpack:///../node_modules/math.gl/dist/esm/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/isarray/index.js","webpack:///../modules/engine/src/animation/timeline.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/stream-utils.node.js","webpack:///../node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/core-js/modules/es6.date.to-json.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/validate-loader-version.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/constants.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/merge-options.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack:///./node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/stream-utils.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncIterator.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/memory-copy-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/async-iterator-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.browser.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/check-errors.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-loader-context.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/binary-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-worker-url.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-thread.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-pool.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-farm.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/register-loaders.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/select-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/parse.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/image-type.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/parsed-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-parsers.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-svg.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/get-first-characters.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/parser-utils/parse-json.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/memory-copy-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/resolve-url.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/get-typed-array.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-scenegraph.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-attribute-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_draco_mesh_compression.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-constants.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_lights_punctual.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_materials_unlit.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_techniques_webgl.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/gltf-extensions.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-glb.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/post-process-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/library-utils/library-utils.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-module-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-parser.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/draco-loader.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/headers.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/response.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/fetch.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/index.js","webpack:///../modules/experimental/src/scenegraph/nodes/scenegraph-node.js","webpack:///../modules/experimental/src/scenegraph/nodes/group-node.js","webpack:///../modules/experimental/src/gltf/gltf-animator.js","webpack:///../modules/shadertools/src/modules/pbr/pbr.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-vertex.glsl.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-fragment.glsl.js","webpack:///../modules/experimental/src/scenegraph/nodes/model-node.js","webpack:///../modules/experimental/src/gltf/gltf-material-parser.js","webpack:///../modules/experimental/src/gltf/create-gltf-model.js","webpack:///../modules/experimental/src/gltf/gltf-instantiator.js","webpack:///../modules/experimental/src/gltf/create-gltf-objects.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/generate-url.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/async-deep-map.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/deep-load.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/load-image.js","webpack:///../modules/experimental/src/gltf/gltf-environment.js","webpack:///../examples/showcase/gltf/app.js","webpack:///./templates/showcase/example-gltf.jsx","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/btoa.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/to-array-buffer.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../node_modules/gl-matrix/esm/mat3.js","webpack:///../node_modules/gl-matrix/esm/quat.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/quaternion.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/read-file.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/globals.js","webpack:///./node_modules/core-js/modules/es6.object.define-properties.js","webpack:///../node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/parse-image.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./node_modules/ieee754/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/vec2.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/encoding.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/decode-data-uri.node.js","webpack:///./node_modules/core-js/modules/_own-keys.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/to-array-buffer.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/encode-image.node.js","webpack:///../modules/shadertools/src/modules/lights/lights.glsl.js","webpack:///../modules/shadertools/src/modules/lights/lights.js","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/common.js"],"names":["assert","condition","message","Error","concat","toString","module","exports","Array","isArray","arr","call","channelHandles","animationHandles","Timeline","this","time","channels","animations","playing","lastEngineTime","addChannel","props","delay","duration","Number","rate","handle","channel","repeat","_setChannelTime","set","removeChannel","delete","animationHandle","animation","detachAnimation","isFinished","get","getTime","setTime","Math","animationData","play","pause","reset","attachAnimation","channelHandle","update","engineTime","offsetTime","concatenateReadStream","readStream","arrayBuffer","ArrayBuffer","string","Promise","resolve","reject","data","chunk","source1","source2","sourceArray1","sourceArray2","temp","Uint8Array","byteLength","on","error","complete","clone","a","out","fromValues","x","y","z","w","copy","add","b","scale","length","sqrt","squaredLength","normalize","len","dot","lerp","t","ax","ay","az","aw","transformMat4","m","transformQuat","q","qx","qy","qz","qw","ix","iy","iz","iw","exactEquals","equals","a0","a1","a2","a3","b0","b1","b2","b3","abs","max","vec","Float32Array","$export","toObject","toPrimitive","P","F","Date","NaN","toJSON","prototype","toISOString","key","O","pv","isFinite","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","Arr","_byteLength","curByte","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","parts","len2","push","encodeChunk","lookup","join","code","indexOf","start","end","num","output","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","value","TypeError","array","byteOffset","undefined","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","checked","buffer","val","type","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","e","typedArraySupport","poolSize","_augment","Symbol","species","Object","defineProperty","configurable","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","arguments","inspect","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","trim","replace","stringtrim","base64clean","src","dst","asyncGeneratorStep","gen","_next","_throw","info","done","then","_asyncToGenerator","fn","self","args","err","globals","window","document","global_","isBrowser","process","browser","isWorker","importScripts","matches","version","parseFloat","validateLoaderVersion","loader","coreVersion","loaderVersion","parseVersion","split","map","major","minor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","source","forEach","getOwnPropertyDescriptors","defineProperties","isLoaderObject","hasParser","parseTextSync","parseSync","parse","parseStream","parseInBatches","loaderOptions","options","id","workerUrl","normalizeLoader","extension","extensions","text","binary","NullLog","_","DEFAULT_LOADER_OPTIONS","CDN","worker","log","ConsoleLog","console","_this$console$log","_len","_key","bind","_this$console$info","_len2","_key2","_this$console$warn","_len3","_key3","warn","_this$console$error","_len4","_key4","dataType","constructor","globalOptions","mergeOptions","url","mergedOptions","defaultOptions","baseUri","addUrlOptions","mergeNestedFields","isBoolean","isFunction","isIterable","iterator","isAsyncIterable","asyncIterator","isFetchResponse","Response","json","isFileReadable","File","isFile","Blob","isBlob","isReadableStream","tee","cancel","pipeTo","getReader","isReadableDOMStream","pipe","readable","isReadableNodeStream","_AwaitValue","wrapped","_awaitAsyncGenerator","AsyncGenerator","front","back","resume","result","wrappedAwait","settle","next","_invoke","request","_wrapAsyncGenerator","getStreamIterator","stream","getIterator","_x","_makeBrowserStreamIterator","makeBrowserStreamIterator","_x2","_makeNodeStreamIterator","makeNodeStreamIterator","mark","_callee","reader","_ref","wrap","_context","prev","sent","abrupt","t0","releaseLock","stop","_callee2","_context2","_readableState","ended","onceReadable","_x3","_onceReadable","_callee3","_context3","once","_asyncIterator","iterable","method","concatenateArrayBuffers","concatenateAsyncIterator","_x9","_concatenateAsyncIterator","_callee6","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_value","_context6","finish","FileReadableResponse","fileOrBlob","_fileOrBlob","bodyUsed","_json","_text","_arrayBuffer","_this$_getFileReader","promise","_getFileReader","readAsArrayBuffer","_this$_getFileReader2","readAsText","JSON","FileReader","onerror","onabort","onload","Headers","name","fetchFileReadable","checkFetchResponseStatus","_checkFetchResponseStatus","response","errorMessage","ok","status","ERR_DATA","getUrlFromData","getArrayBufferOrStringFromDataSync","TextDecoder","decode","getArrayBufferOrStringFromData","_getArrayBufferOrStringFromData","isArrayBuffer","pathPrefix","fileAliases","resolvePath","filename","alias","startsWith","replacement","fetchFile","_fetchFile","fetch","getLoaderContext","context","previousContext","loaders","getLoaders","candidateLoaders","contextLoaders","toArrayBuffer","TextEncoder","encode","workerURLCache","Map","buildScript","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","MessagePort","ImageBitmap","OffscreenCanvas","defaultOnMessage","WorkerThread","_ref2","_ref2$name","onMessage","workerSource","endsWith","workerURL","blob","URL","createObjectURL","getWorkerURL","Worker","_process","_this","onmessage","event","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","jobQueue","idleQueue","count","isDestroyed","destroy","jobName","_startQueuedJob","_this2","_getAvailableWorker","job","shift","backlog","_onWorkerDone","WorkerFarm","workerPools","workerPool","workerName","_getWorkerPool","canParseWithWorker","isSupported","localWorkerUrl","useWorker","parseWithWorker","workerFarm","_workerFarm","onWorkerMessage","setProps","getWorkerFarm","stringify","warning","arraybuffer","_onWorkerMessage","t1","registeredLoaders","getRegisteredLoaders","EXT_PATTERN","DATA_URL_PATTERN","selectLoader","_ref$nothrow","nothrow","_loader","normalizeLoaders","findLoaderByUrl","findLoaderByContentType","findLoaderByExamingInitialData","getFirstCharacters","mimeType","findLoaderByMimeType","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","findLoaderByExtension","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","mimeTypes","headers","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","testText","testBinary","test","some","getMagicString","dataView","DataView","magic","getUint8","_x4","_parse","autoUrl","parseWithLoader","_x5","_x6","_x7","_x8","_parseWithLoader","IMAGE_SUPPORTED","Image","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","Boolean","_parseImageNode","isImageTypeSupported","getImageType","image","format","getImageTypeOrNull","getImageData","canvas","createElement","getContext","width","height","drawImage","parseToImage","_parseToImage","objectUrl","webkitURL","loadToImage","revokeObjectURL","_loadToImage","imagebitmapOptionsSupported","parseToImageBitmap","_parseToImageBitmap","imagebitmapOptions","isEmptyObject","imagebitmap","createImageBitmap","EMPTY_OBJECT","mimeTypeMap","isPng","getSize","getUint32","isJpeg","getUint16","_getJpegMarkers","tableMarkers","sofMarkers","getJpegMarkers","marker","has","isGif","isBmp","getBinaryImageMIMEType","toDataView","entries","_step$value","parseToNodeImage","parseSVG","_parseSVG","textDecoder","xmlText","btoa","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","parseImage","_parseImage","imageOptions","imageType","loadType","getLoadableImageType","getDefaultImageType","parseJSON","padTo4Bytes","getZeroOffsetArrayBuffer","subArray","copyToArray","targetOffset","sourceArray","srcByteOffset","srcByteLength","resolveUrl","baseUrl","uri","buffers","bufferViewIndex","bufferView","bufferViews","binChunk","TYPES","ARRAY_TO_COMPONENT_TYPE","Int8Array","Int16Array","Uint16Array","Uint32Array","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5120","5121","5122","5123","5125","5126","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","getAccessorTypeFromSize","getComponentTypeFromArray","typedArray","componentType","getAccessorArrayTypeAndLength","accessor","ArrayType","components","bytesPerComponent","GLTFScenegraph","gltf","extras","extensionName","isExtension","getUsedExtensions","find","getRequiredExtensions","getExtension","extensionsRequired","extensionsUsed","index","getObject","bufferIndex","getBufferView","getAccessor","getBuffer","_getAccessorArrayType","registerUsedExtension","addExtension","registerRequiredExtension","_removeStringFromArray","attributes","indices","mode","accessors","_addAttributes","glTFMesh","primitives","meshes","imageData","glTFImage","addBufferView","images","sourceBuffers","glTFBufferView","glTFAccessor","sourceBuffer","accessorDefaults","round","addAccessor","assign","totalByteLength","targetArray","dstByteOffset","splice","getGLTFAccessors","attribute","getGLTFAccessor","gltfAttributeName","_getAccessorData","attributeName","convertTypedArrays","toTypedArray","getAccessorData","_marked","meshPrimitiveIterator","_decode","gltfData","scenegraph","promises","primitive","decompressMeshes","getObjectExtension","decompressPrimitive","all","removeExtension","mesh","compressMesh","addRequiredExtension","_decompressPrimitive","compressedPrimitive","bufferCopy","decodedData","getTypedArrayForBufferView","checkPrimitive","DracoWriter","DracoLoader","compressedData","encodeSync","fauxAccessors","_addFauxAttributes","gltfScenegraph","lights","nodes","node","nodeExtension","light","removeObjectExtension","addObjectExtension","materials","material","KHR_materials_unlit","unlit","techniques","_ref$programs","programs","_ref$shaders","shaders","_ref$techniques","shader","program","fragmentShader","vertexShader","technique","resolveTechniques","materialExtension","KHR_draco_mesh_compression","KHR_lights_punctual","KHR_techniques_webgl","decodeExtensions","_decodeExtensions","excludes","_args","excludeExtensions","_DEFAULT_SAMPLER","isGLB","_options$magic","magic1","parseGLBChunksSync","glb","header","chunkLength","chunkFormat","parseJSONChunk","parseBINChunk","strict","jsonChunk","jsonText","hasBinChunk","binChunks","GL_SAMPLER","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","REPEAT","LINEAR","NEAREST_MIPMAP_LINEAR","SAMPLER_PARAMETER_GLTF_TO_GL","magFilter","minFilter","wrapS","wrapT","DEFAULT_SAMPLER","TEXTURE_WRAP_","GLTFPostProcessor","_gltf$buffers","_gltf$images","_gltf$baseUri","_resolveTree","bufView","_resolveBufferView","_resolveImage","samplers","sampler","_resolveSampler","textures","texture","_resolveTexture","_resolveAccessor","_resolveMaterial","_resolveMesh","_resolveNode","skins","skin","_resolveSkin","scenes","scene","_resolveScene","_get","getNode","_this3","children","child","getMesh","camera","getCamera","getSkin","inverseBindMatrices","_this4","getMaterial","normalTexture","getTexture","occlusionTexture","occlustionTexture","emissiveTexture","emmisiveTexture","pbrMetallicRoughness","mr","baseColorTexture","metallicRoughnessTexture","bytesPerElement","getSampler","getImage","parameters","glEnum","_enumSamplerParameter","preloadedImage","perspective","orthographic","postProcessGLTF","postProcess","parseGLTF","_parseGLTF","arrayBufferOrString","_promise","parseGLTFContainerSync","loadImages","loadBuffers","GLB_FILE_HEADER_SIZE","parseGLBSync","_glb","_loadBuffers","_loadImages","loadImage","_x10","_x11","_x12","_x13","_loadImage","_callee4","parsedImage","_context4","GLTFLoader","_options$byteOffset","addDeprecatedGLTFOptions","fetchImages","createImages","fetchBuffers","fetchLinkedResources","decompress","loadDecoderPromise","loadLibraryPromises","loadLibrary","_loadLibrary","libraryUrl","moduleName","getLibraryUrl","loadLibraryFromFile","library","modules","_loadLibraryFromFile","_response","scriptSource","loadLibraryFromString","eval","script","appendChild","createTextNode","body","loadDracoDecoderModule","_loadDracoDecoderModule","draco3d","draco","createDecoderModule","loadDracoDecoder","_loadDracoDecoder","DracoDecoderModule","wasmBinary","decoderType","t2","t3","t4","initializeDracoDecoder","onModuleLoaded","GEOMETRY_TYPE","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","POSITION","NORMAL","COLOR","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","1","2","3","4","5","Int32Array","6","9","DracoParser","dracoGeometry","DecoderBuffer","Init","dracoStatus","decoder","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeBufferToMesh","faceCount","num_faces","attributeCount","num_attributes","vertexCount","num_points","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ptr","error_msg","loaderData","extractDRACOGeometry","geometry","getAttributes","positionAttribute","getPositionAttributeMetadata","drawMode","getMeshStripIndices","getMeshFaceIndices","metadata","posTransform","AttributeQuantizationTransform","InitFromAttribute","position","isQuantized","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","numPoints","attributeType","attributeId","GetAttributeId","dracoAttribute","GetAttribute","getAttributeTypedArray","numFaces","dracoArray","DracoInt32Array","GetFaceFromMesh","GetValue","GetTriangleStripsFromMesh","data_type","numComponents","num_components","numValues","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","DracoInt16Array","GetAttributeInt16ForAllPoints","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","WebAssembly","libraryPath","dracoParser","append","getOwnPropertyNames","normalizeName","normalizeValue","oldValue","hasOwnProperty","callback","thisArg","items","iteratorFor","delegateYield","NodeFetchResponse","_url","_ok","_status","_headers","httpResponse","httpHeaders","getHeaders","contentLength","_getContentLength","isDataURL","statSync","_getHeaders","fetchNode","ScenegraphNode","uid","display","rotation","matrix","userData","_setScenegraphNodeProps","setPosition","setRotation","setScale","setMatrix","copyMatrix","setMatrixComponents","updateMatrix","rot","identity","translate","rotateXYZ","getCoordinateUniforms","modelMatrix","worldMatrix","worldInverse","worldInverseTranspose","viewMatrix","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","GroupNode","remove","removeAll","traverse","visitor","accessorToJsArray","slicedArray","helperMatrix","quaternion","interpolate","input","interpolation","animationTime","nextIndex","previousIndex","previousTime","nextTime","stepInterpolate","ratio","path","linearInterpolate","tDiff","p0","outTangent0","inTangent1","p1","m0","m1","cubicsplineInterpolate","GLTFAnimation","startTime","speed","animate","timeMs","gltfNode","rotationMatrix","applyTranslationRotationScale","GLTFAnimator","getAnimations","vs","fs","defines","LIGHTING_FRAGMENT","dependencies","ModelNode","gl","_setModelNodeProps","model","managedResources","resource","draw","setUniforms","setAttributes","updateModuleSettings","GLTFMaterialParser","pbrDebug","imageBasedLightingEnvironment","useTangents","MANUAL_SRGB","SRGB_FAST_APPROXIMATION","hasFeature","FEATURES","USE_TEX_LOD","uniforms","u_Camera","u_MetallicRoughnessValues","generatedTextures","u_DiffuseEnvSampler","u_SpecularEnvSampler","u_brdfLUT","u_ScaleIBLAmbient","u_ScaleDiffBaseMR","u_ScaleFGDSpec","defineIfPresent","parseMaterial","parseTexture","define","gltfTexture","pixelStore","parsePbrMetallicRoughness","u_BaseColorFactor","metallicFactor","roughnessFactor","u_NormalScale","strength","u_OcclusionStrength","u_EmissiveFactor","alphaCutoff","ALPHA_CUTOFF","u_AlphaCutoff","blend","blendEquation","blendFunc","addVersionToShader","isWebGL2","DEFAULT_OPTIONS","modelOptions","GLTFInstantiator","instantiate","createAnimator","createScene","gltfScene","createNode","createMesh","gltfMesh","getVertexCount","createPrimitive","materialParser","createGLTFModel","gltfPrimitive","createAttributes","loadedAttributes","attrName","createAccessor","generated","stride","createSampler","gltfSampler","needsPOT","createGLTFObjects","instantiator","animator","generateUrl","getUrl","urlOptions","asyncDeepMap","_asyncDeepMap","tree","func","mapSubtree","_mapSubtree","mapArray","mapObject","_mapObject","values","_loop","_mapArray","urlArray","_args4","deepLoad","_deepLoad","urlTree","load","shallowLoad","_shallowLoad","imageUrls","getImageUrls","_getImageUrls","mipLevels","_args2","getMipmappedImageUrls","_getMipmappedImageUrls","urls","_getImageSize","mipLevel","lod","getMipLevels","log2","GLTFEnvironment","brdfLutUrl","getTexUrl","specularMipLevels","makeCube","getTextureForFace","pixels","TextureCube","face","mipmaps","getDiffuseEnvSampler","_DiffuseEnvSampler","GL","getSpecularEnvSampler","_SpecularEnvSampler","imageArray","getBrdfTexture","_BrdfTexture","CUBE_FACE_TO_DIRECTION","GLTF_BASE_URL","LIGHT_SOURCES","default","directionalLights","color","direction","intensity","ambient","ambientLight","directional1","directional3","point1far","pointLights","attenuation","point1near","loadGLTF","urlOrPromise","AppAnimationLoop","opts","glOptions","webgl1","webgl2","alpha","modelFile","initialZoom","lastX","lastY","getInfo","initalizeEventHandling","pointerIsDown","pointerDown","pointerMove","dX","dY","ev","_fileLoaded","timeline","onInitialize","setParameters","depthTest","loadOptions","environment","showSelector","lightSelector","iblSelector","_updateLightSettings","_rebuildModel","_deleteScenes","lumaStats","applyLight","lightSources","onRender","aspect","projectionMatrix","clear","depth","pitch","roll","cameraPos","uView","uProjection","fov","radians","near","far","success","u_MVPMatrix","u_ModelMatrix","u_NormalMatrix","AnimationLoop","animationLoop","infoDiv","Example","render","exampleConfig","pageContext","React","Component","atob","_inherits","subClass","superClass","create","writable","cross","bx","by","bz","transformMat3","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","p","r","cos","sin","rotateY","rotateZ","angle","tempA","tempB","cosine","PI","acos","bufferToArrayBuffer","_slicedToArray","_n","_d","_e","_s","_i","setAxisAngle","axis","rad","s","bw","omega","cosom","sinom","scale0","scale1","fromMat3","fRoot","fTrace","k","vec4","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","vec3","IDENTITY_QUATERNION","_MathArray","Quaternion","check","fromAxisRotation","vectorA","vectorB","invDot","l","_arguments$","_arguments$$start","_arguments","vector","lengthSquared","multiplyLeft","multiplyRight","isNativeReflectConstruct","Reflect","construct","sham","Proxy","_construct","Parent","Class","instance","Function","Vector","ELEMENTS","mathArray","distanceSquared","dist","product","magnitude","vectors","_vectors","_i2","_vectors2","distance","subtract","multiply","multiplyScalar","ORIGIN","_Vector","Vector3","debug","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","isRequestURL","readFile","_readFile","_decodeDataUri","queryIndex","readFileAsync","getReadFileOptions","promisify","createReadStream","_createReadStream","responseType","S","mathgl","config","_cache","Wrapper","getPrototypeOf","setPrototypeOf","_Array","MathArray","arrayOrObject","toArray","to","formatString","printTypes","ai","minVector","maxVector","_scale","addScalar","scalar","validate","valid","parseImageNode","getPixelsAsync","ndarray","shape","layers","checkNumber","checkVector","v","callerName","validateVector","deprecated","_getPrototypeOf","o","toIObject","gOPD","createProperty","desc","getDesc","f","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","rt","LN2","Matrix","printRowMajor","row","RANK","col","columnIndex","firstIndex","columnVector","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","fovy","nf","tan","eye","center","up","x0","x1","x2","y0","y1","y2","z0","z1","z2","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","_Matrix","Matrix4","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","xx","yx","yy","zx","zy","zz","wx","wy","wz","left","right","bottom","top","_computeInfinitePerspectiveOffCenter","rl","tb","_eye","_ref2$near","_ref2$far","lr","bt","_ref3$fovy","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","ortho","_ref4","_ref4$fov","_ref4$aspect","_ref4$near","_ref4$far","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","_ref5","_ref6","rx","ry","rz","b12","b20","b21","b22","factor","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","inRange","ToDictionary","isASCIIByte","isASCIICodePoint","Stream","tokens","reverse","endOfStream","pop","prepend","token","unshift","decoderError","fatal","opt_code_point","encoderError","code_point","getEncoding","label","label_to_encoding","encodings","labels","heading","category","shift_jis_index","big5_index_no_hkscs","encoders","decoders","indexCodePointFor","pointer","indexPointerFor","_encoding","_decoder","_ignoreBOM","_BOMseen","_error_mode","_do_not_flush","ignoreBOM","_encoder","_fatal","UTF8Decoder","utf8_code_point","utf8_bytes_seen","utf8_bytes_needed","utf8_lower_boundary","utf8_upper_boundary","handler","bite","UTF8Encoder","SingleByteDecoder","SingleByteEncoder","GB18030Decoder","gb18030_first","gb18030_second","gb18030_third","code_point_offset","idx","entry","indexGB18030RangesCodePointFor","lead","GB18030Encoder","gbk_flag","trail","pointer_offset","indexGB18030RangesPointerFor","byte1","byte2","byte3","Big5Decoder","Big5_lead","Big5Encoder","index_","indexBig5PointerFor","EUCJPDecoder","eucjp_jis0212_flag","eucjp_lead","EUCJPEncoder","ISO2022JPDecoder","states","iso2022jp_decoder_state","iso2022jp_decoder_output_state","iso2022jp_lead","iso2022jp_output_flag","state","output_flag","ISO2022JPEncoder","iso2022jp_state","ShiftJISDecoder","Shift_JIS_lead","lead_offset","ShiftJISEncoder","indexShiftJISPointerFor","EUCKRDecoder","euckr_lead","EUCKREncoder","convertCodeUnitToBytes","code_unit","utf16be","UTF16Decoder","utf16_be","utf16_lead_byte","utf16_lead_surrogate","lead_surrogate","UTF16Encoder","XUserDefinedDecoder","XUserDefinedEncoder","input_stream","item","code_points","cp","codePointsToString","opt_string","u","stringToCodePoints","decodeDataUri","dataIndex","decodeURIComponent","gOPN","gOPS","anObject","it","getSymbols","_possibleConstructorReturn","ReferenceError","nodeVersion","_setPrototypeOf","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","encodeImageNode","imageStream","encodeImageToStreamNode","INITIAL_MODULE_OPTIONS","getUniforms","lightSourceUniforms","convertColor","pointLight","directionalLight","getLightSourceUniforms","lighting_uEnabled","MAX_LIGHTS","component","EPSILON","ARRAY_TYPE","RANDOM","random","DEGREES_TO_RADIANS","formatValue","_ref$precision","precision","toPrecision","degrees","epsilon","oldEpsilon","printDegrees"],"mappings":"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","file":"component---templates-showcase-example-gltf-jsx-2d307633f14c87947518.js","sourcesContent":["export * from '@math.gl/core';","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}","require(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","let channelHandles = 1;\nlet animationHandles = 1;\n\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {delay = 0, duration = Number.POSITIVE_INFINITY, rate = 1, repeat = 1} = props;\n\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n    this._setChannelTime(channel, this.time);\n    this.channels.set(handle, channel);\n\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n\n    const channels = this.channels.values();\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n    for (const animationData of animations) {\n      const {animation, channel} = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n\n    animation.setTime(this.getTime(channelHandle));\n\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n    // Note(Tarek): Don't loop on final repeat.\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n}\n","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function concatenateReadStream(readStream) {\n  var arrayBuffer = new ArrayBuffer();\n  var string = '';\n  return new Promise(function (resolve, reject) {\n    readStream.data(function (chunk) {\n      if (typeof chunk === 'string') {\n        string += chunk;\n      } else {\n        arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n      }\n    });\n    readStream.on('error', function (error) {\n      return reject(error);\n    });\n    readStream.on('end', function () {\n      if (readStream.complete) {\n        resolve(arrayBuffer || string);\n      } else {\n        reject('The connection was terminated while the message was still being sent');\n      }\n    });\n  });\n}\n\nfunction concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nimport assert from './env-utils/assert';\nvar VERSION = typeof \"2.1.0-alpha.4\" !== 'undefined' ? \"2.1.0-alpha.4\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread({}, loader, {\n      options: _objectSpread({}, loader.options, {}, options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}","import \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();","import { ConsoleLog } from './loader-utils/loggers';\nexport var DEFAULT_LOADER_OPTIONS = {\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  dataType: 'arraybuffer'\n};","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { DEFAULT_LOADER_OPTIONS } from '../constants';\nimport { NullLog } from './loggers';\n\nvar isPureObject = function isPureObject(value) {\n  return value && _typeof(value) === 'object' && value.constructor === {}.constructor;\n};\n\nvar globalOptions = _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n\nexport function setGlobalOptions(options) {\n  globalOptions = mergeOptions(globalOptions, options);\n}\nexport function mergeOptions(loader, options, url) {\n  var loaderDefaultOptions = loader && (loader.DEFAULT_LOADER_OPTIONS || loader.defaultOptions || loader.options || {});\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, globalOptions);\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread({}, mergedOptions[key], {}, options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nvar isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\n\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isFetchResponse = function isFetchResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isFileReadable = function isFileReadable(x) {\n  return isFile(x) || isBlob(x);\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.pipeTo) && isFunction(x.getReader);\n};\nexport var isBuffer = function isBuffer(x) {\n  return x && _typeof(x) === 'object' && x.isBuffer;\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue\";\nexport default function _awaitAsyncGenerator(value) {\n  return new AwaitValue(value);\n}","import AwaitValue from \"./AwaitValue\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import AsyncGenerator from \"./AsyncGenerator\";\nexport default function _wrapAsyncGenerator(fn) {\n  return function () {\n    return new AsyncGenerator(fn.apply(this, arguments));\n  };\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nimport { isBrowser, nodeVersion } from '@loaders.gl/loader-utils';\nexport function getStreamIterator(stream) {\n  if (isBrowser || nodeVersion >= 10) {\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return stream;\n    }\n\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\n\nfunction makeBrowserStreamIterator(_x) {\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction _makeBrowserStreamIterator() {\n  _makeBrowserStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(stream) {\n    var reader, _ref, done, value;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            reader = stream.getReader();\n            _context.prev = 1;\n\n          case 2:\n            if (!true) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 5;\n            return _awaitAsyncGenerator(reader.read());\n\n          case 5:\n            _ref = _context.sent;\n            done = _ref.done;\n            value = _ref.value;\n\n            if (!done) {\n              _context.next = 10;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 10:\n            _context.next = 12;\n            return value;\n\n          case 12:\n            _context.next = 2;\n            break;\n\n          case 14:\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](1);\n            reader.releaseLock();\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 16]]);\n  }));\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction makeNodeStreamIterator(_x2) {\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction _makeNodeStreamIterator() {\n  _makeNodeStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee2(stream) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _awaitAsyncGenerator(stream);\n\n          case 2:\n            stream = _context2.sent;\n\n          case 3:\n            if (!true) {\n              _context2.next = 15;\n              break;\n            }\n\n            data = stream.read();\n\n            if (!(data !== null)) {\n              _context2.next = 9;\n              break;\n            }\n\n            _context2.next = 8;\n            return data;\n\n          case 8:\n            return _context2.abrupt(\"continue\", 3);\n\n          case 9:\n            if (!stream._readableState.ended) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 11:\n            _context2.next = 13;\n            return _awaitAsyncGenerator(onceReadable(stream));\n\n          case 13:\n            _context2.next = 3;\n            break;\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction onceReadable(_x3) {\n  return _onceReadable.apply(this, arguments);\n}\n\nfunction _onceReadable() {\n  _onceReadable = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(stream) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              stream.once('readable', resolve);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _onceReadable.apply(this, arguments);\n}","export default function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol !== \"undefined\") {\n    if (Symbol.asyncIterator) {\n      method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      method = iterable[Symbol.iterator];\n      if (method != null) return method.call(iterable);\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import \"core-js/modules/es6.array.index-of\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport { concatenateArrayBuffers } from '../javascript-utils/memory-copy-utils';\nexport function forEach(_x7, _x8) {\n  return _forEach.apply(this, arguments);\n}\n\nfunction _forEach() {\n  _forEach = _asyncToGenerator(_regeneratorRuntime.mark(function _callee5(iterator, visitor) {\n    var _ref, done, value, cancel;\n\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            if (!true) {\n              _context5.next = 14;\n              break;\n            }\n\n            _context5.next = 3;\n            return iterator.next();\n\n          case 3:\n            _ref = _context5.sent;\n            done = _ref.done;\n            value = _ref.value;\n\n            if (!done) {\n              _context5.next = 9;\n              break;\n            }\n\n            iterator[\"return\"]();\n            return _context5.abrupt(\"return\");\n\n          case 9:\n            cancel = visitor(value);\n\n            if (!cancel) {\n              _context5.next = 12;\n              break;\n            }\n\n            return _context5.abrupt(\"return\");\n\n          case 12:\n            _context5.next = 0;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _forEach.apply(this, arguments);\n}\n\nexport function concatenateAsyncIterator(_x9) {\n  return _concatenateAsyncIterator.apply(this, arguments);\n}\n\nfunction _concatenateAsyncIterator() {\n  _concatenateAsyncIterator = _asyncToGenerator(_regeneratorRuntime.mark(function _callee6(asyncIterator) {\n    var arrayBuffer, string, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            arrayBuffer = new ArrayBuffer();\n            string = '';\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context6.prev = 4;\n            _iterator = _asyncIterator(asyncIterator);\n\n          case 6:\n            _context6.next = 8;\n            return _iterator.next();\n\n          case 8:\n            _step = _context6.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context6.next = 12;\n            return _step.value;\n\n          case 12:\n            _value = _context6.sent;\n\n            if (_iteratorNormalCompletion) {\n              _context6.next = 19;\n              break;\n            }\n\n            chunk = _value;\n\n            if (typeof chunk === 'string') {\n              string += chunk;\n            } else {\n              arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n            }\n\n          case 16:\n            _iteratorNormalCompletion = true;\n            _context6.next = 6;\n            break;\n\n          case 19:\n            _context6.next = 25;\n            break;\n\n          case 21:\n            _context6.prev = 21;\n            _context6.t0 = _context6[\"catch\"](4);\n            _didIteratorError = true;\n            _iteratorError = _context6.t0;\n\n          case 25:\n            _context6.prev = 25;\n            _context6.prev = 26;\n\n            if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n              _context6.next = 30;\n              break;\n            }\n\n            _context6.next = 30;\n            return _iterator[\"return\"]();\n\n          case 30:\n            _context6.prev = 30;\n\n            if (!_didIteratorError) {\n              _context6.next = 33;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 33:\n            return _context6.finish(30);\n\n          case 34:\n            return _context6.finish(25);\n\n          case 35:\n            return _context6.abrupt(\"return\", string || arrayBuffer);\n\n          case 36:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, null, [[4, 21, 25, 35], [26,, 30, 34]]);\n  }));\n  return _concatenateAsyncIterator.apply(this, arguments);\n}\n\nexport function textDecoderAsyncIterator(_x, _x2) {\n  return _textDecoderAsyncIterator.apply(this, arguments);\n}\n\nfunction _textDecoderAsyncIterator() {\n  _textDecoderAsyncIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(arrayBufferIterator, options) {\n    var textDecoder, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _value2, arrayBuffer;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            textDecoder = new TextDecoder(options);\n            _iteratorNormalCompletion2 = true;\n            _didIteratorError2 = false;\n            _context.prev = 3;\n            _iterator2 = _asyncIterator(arrayBufferIterator);\n\n          case 5:\n            _context.next = 7;\n            return _awaitAsyncGenerator(_iterator2.next());\n\n          case 7:\n            _step2 = _context.sent;\n            _iteratorNormalCompletion2 = _step2.done;\n            _context.next = 11;\n            return _awaitAsyncGenerator(_step2.value);\n\n          case 11:\n            _value2 = _context.sent;\n\n            if (_iteratorNormalCompletion2) {\n              _context.next = 19;\n              break;\n            }\n\n            arrayBuffer = _value2;\n            _context.next = 16;\n            return typeof arrayBuffer === 'string' ? arrayBuffer : textDecoder.decode(arrayBuffer, {\n              stream: true\n            });\n\n          case 16:\n            _iteratorNormalCompletion2 = true;\n            _context.next = 5;\n            break;\n\n          case 19:\n            _context.next = 25;\n            break;\n\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](3);\n            _didIteratorError2 = true;\n            _iteratorError2 = _context.t0;\n\n          case 25:\n            _context.prev = 25;\n            _context.prev = 26;\n\n            if (!(!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null)) {\n              _context.next = 30;\n              break;\n            }\n\n            _context.next = 30;\n            return _awaitAsyncGenerator(_iterator2[\"return\"]());\n\n          case 30:\n            _context.prev = 30;\n\n            if (!_didIteratorError2) {\n              _context.next = 33;\n              break;\n            }\n\n            throw _iteratorError2;\n\n          case 33:\n            return _context.finish(30);\n\n          case 34:\n            return _context.finish(25);\n\n          case 35:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 21, 25, 35], [26,, 30, 34]]);\n  }));\n  return _textDecoderAsyncIterator.apply(this, arguments);\n}\n\nexport function textEncoderAsyncIterator(_x3, _x4) {\n  return _textEncoderAsyncIterator.apply(this, arguments);\n}\n\nfunction _textEncoderAsyncIterator() {\n  _textEncoderAsyncIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee2(textIterator, options) {\n    var textEncoder, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, _value3, text;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            textEncoder = new TextEncoder();\n            _iteratorNormalCompletion3 = true;\n            _didIteratorError3 = false;\n            _context2.prev = 3;\n            _iterator3 = _asyncIterator(textIterator);\n\n          case 5:\n            _context2.next = 7;\n            return _awaitAsyncGenerator(_iterator3.next());\n\n          case 7:\n            _step3 = _context2.sent;\n            _iteratorNormalCompletion3 = _step3.done;\n            _context2.next = 11;\n            return _awaitAsyncGenerator(_step3.value);\n\n          case 11:\n            _value3 = _context2.sent;\n\n            if (_iteratorNormalCompletion3) {\n              _context2.next = 19;\n              break;\n            }\n\n            text = _value3;\n            _context2.next = 16;\n            return typeof text === 'string' ? textEncoder.encode(text) : text;\n\n          case 16:\n            _iteratorNormalCompletion3 = true;\n            _context2.next = 5;\n            break;\n\n          case 19:\n            _context2.next = 25;\n            break;\n\n          case 21:\n            _context2.prev = 21;\n            _context2.t0 = _context2[\"catch\"](3);\n            _didIteratorError3 = true;\n            _iteratorError3 = _context2.t0;\n\n          case 25:\n            _context2.prev = 25;\n            _context2.prev = 26;\n\n            if (!(!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null)) {\n              _context2.next = 30;\n              break;\n            }\n\n            _context2.next = 30;\n            return _awaitAsyncGenerator(_iterator3[\"return\"]());\n\n          case 30:\n            _context2.prev = 30;\n\n            if (!_didIteratorError3) {\n              _context2.next = 33;\n              break;\n            }\n\n            throw _iteratorError3;\n\n          case 33:\n            return _context2.finish(30);\n\n          case 34:\n            return _context2.finish(25);\n\n          case 35:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[3, 21, 25, 35], [26,, 30, 34]]);\n  }));\n  return _textEncoderAsyncIterator.apply(this, arguments);\n}\n\nexport function lineAsyncIterator(_x5) {\n  return _lineAsyncIterator.apply(this, arguments);\n}\n\nfunction _lineAsyncIterator() {\n  _lineAsyncIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee3(textIterator) {\n    var previous, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, _value4, textChunk, eolIndex, line;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            previous = '';\n            _iteratorNormalCompletion4 = true;\n            _didIteratorError4 = false;\n            _context3.prev = 3;\n            _iterator4 = _asyncIterator(textIterator);\n\n          case 5:\n            _context3.next = 7;\n            return _awaitAsyncGenerator(_iterator4.next());\n\n          case 7:\n            _step4 = _context3.sent;\n            _iteratorNormalCompletion4 = _step4.done;\n            _context3.next = 11;\n            return _awaitAsyncGenerator(_step4.value);\n\n          case 11:\n            _value4 = _context3.sent;\n\n            if (_iteratorNormalCompletion4) {\n              _context3.next = 26;\n              break;\n            }\n\n            textChunk = _value4;\n            previous += textChunk;\n            eolIndex = void 0;\n\n          case 16:\n            if (!((eolIndex = previous.indexOf('\\n')) >= 0)) {\n              _context3.next = 23;\n              break;\n            }\n\n            line = previous.slice(0, eolIndex + 1);\n            previous = previous.slice(eolIndex + 1);\n            _context3.next = 21;\n            return line;\n\n          case 21:\n            _context3.next = 16;\n            break;\n\n          case 23:\n            _iteratorNormalCompletion4 = true;\n            _context3.next = 5;\n            break;\n\n          case 26:\n            _context3.next = 32;\n            break;\n\n          case 28:\n            _context3.prev = 28;\n            _context3.t0 = _context3[\"catch\"](3);\n            _didIteratorError4 = true;\n            _iteratorError4 = _context3.t0;\n\n          case 32:\n            _context3.prev = 32;\n            _context3.prev = 33;\n\n            if (!(!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null)) {\n              _context3.next = 37;\n              break;\n            }\n\n            _context3.next = 37;\n            return _awaitAsyncGenerator(_iterator4[\"return\"]());\n\n          case 37:\n            _context3.prev = 37;\n\n            if (!_didIteratorError4) {\n              _context3.next = 40;\n              break;\n            }\n\n            throw _iteratorError4;\n\n          case 40:\n            return _context3.finish(37);\n\n          case 41:\n            return _context3.finish(32);\n\n          case 42:\n            if (!(previous.length > 0)) {\n              _context3.next = 45;\n              break;\n            }\n\n            _context3.next = 45;\n            return previous;\n\n          case 45:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[3, 28, 32, 42], [33,, 37, 41]]);\n  }));\n  return _lineAsyncIterator.apply(this, arguments);\n}\n\nexport function numberedLineAsyncIterator(_x6) {\n  return _numberedLineAsyncIterator.apply(this, arguments);\n}\n\nfunction _numberedLineAsyncIterator() {\n  _numberedLineAsyncIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee4(lineIterator) {\n    var counter, _iteratorNormalCompletion5, _didIteratorError5, _iteratorError5, _iterator5, _step5, _value5, line;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            counter = 1;\n            _iteratorNormalCompletion5 = true;\n            _didIteratorError5 = false;\n            _context4.prev = 3;\n            _iterator5 = _asyncIterator(lineIterator);\n\n          case 5:\n            _context4.next = 7;\n            return _awaitAsyncGenerator(_iterator5.next());\n\n          case 7:\n            _step5 = _context4.sent;\n            _iteratorNormalCompletion5 = _step5.done;\n            _context4.next = 11;\n            return _awaitAsyncGenerator(_step5.value);\n\n          case 11:\n            _value5 = _context4.sent;\n\n            if (_iteratorNormalCompletion5) {\n              _context4.next = 20;\n              break;\n            }\n\n            line = _value5;\n            _context4.next = 16;\n            return {\n              counter: counter,\n              line: line\n            };\n\n          case 16:\n            counter++;\n\n          case 17:\n            _iteratorNormalCompletion5 = true;\n            _context4.next = 5;\n            break;\n\n          case 20:\n            _context4.next = 26;\n            break;\n\n          case 22:\n            _context4.prev = 22;\n            _context4.t0 = _context4[\"catch\"](3);\n            _didIteratorError5 = true;\n            _iteratorError5 = _context4.t0;\n\n          case 26:\n            _context4.prev = 26;\n            _context4.prev = 27;\n\n            if (!(!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null)) {\n              _context4.next = 31;\n              break;\n            }\n\n            _context4.next = 31;\n            return _awaitAsyncGenerator(_iterator5[\"return\"]());\n\n          case 31:\n            _context4.prev = 31;\n\n            if (!_didIteratorError5) {\n              _context4.next = 34;\n              break;\n            }\n\n            throw _iteratorError5;\n\n          case 34:\n            return _context4.finish(31);\n\n          case 35:\n            return _context4.finish(26);\n\n          case 36:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[3, 22, 26, 36], [27,, 31, 35]]);\n  }));\n  return _numberedLineAsyncIterator.apply(this, arguments);\n}","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar FileReadableResponse = function () {\n  function FileReadableResponse(fileOrBlob) {\n    _classCallCheck(this, FileReadableResponse);\n\n    this._fileOrBlob = fileOrBlob;\n    this.bodyUsed = false;\n  }\n\n  _createClass(FileReadableResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var _this$_getFileReader, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$_getFileReader = this._getFileReader(), reader = _this$_getFileReader.reader, promise = _this$_getFileReader.promise;\n                reader.readAsArrayBuffer(this._fileOrBlob);\n                return _context.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var _this$_getFileReader2, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$_getFileReader2 = this._getFileReader(), reader = _this$_getFileReader2.reader, promise = _this$_getFileReader2.promise;\n                reader.readAsText(this._fileOrBlob);\n                return _context2.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getFileReader\",\n    value: function _getFileReader() {\n      assert(!this.bodyUsed);\n      this.bodyUsed = true;\n      var reader;\n      var promise = new Promise(function (resolve, reject) {\n        try {\n          reader = new FileReader();\n\n          reader.onerror = function (error) {\n            return reject(new Error(error));\n          };\n\n          reader.onabort = function () {\n            return reject(new Error('Read aborted.'));\n          };\n\n          reader.onload = function () {\n            return resolve(reader.result);\n          };\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return {\n        reader: reader,\n        promise: promise\n      };\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return new Headers({\n        'Content-Length': this._fileOrBlob.size,\n        'Content-Type': this._fileOrBlob.type\n      });\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return 200;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._fileOrBlob.name || '';\n    }\n  }]);\n\n  return FileReadableResponse;\n}();\n\nexport default function fetchFileReadable(fileOrBlob, options) {\n  return Promise.resolve(new FileReadableResponse(fileOrBlob, options));\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function checkFetchResponseStatus(_x) {\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nfunction _checkFetchResponseStatus() {\n  _checkFetchResponseStatus = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var errorMessage, text;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (response.ok) {\n              _context.next = 12;\n              break;\n            }\n\n            errorMessage = \"fetch failed \".concat(response.status, \" \");\n            _context.prev = 2;\n            _context.next = 5;\n            return response.text();\n\n          case 5:\n            text = _context.sent;\n            errorMessage += text;\n            _context.next = 11;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 11:\n            throw new Error(errorMessage);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 9]]);\n  }));\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(\"fetch failed \".concat(response.status));\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isFetchResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isFileReadable, isBuffer } from '../../javascript-utils/is-type';\nimport { getStreamIterator } from '../../javascript-utils/stream-utils';\nimport { concatenateAsyncIterator } from '../../javascript-utils/async-iterator-utils';\nimport fetchFileReadable from '../fetch/fetch-file.browser';\nimport { checkFetchResponseStatus, checkFetchResponseStatusSync } from './check-errors';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getUrlFromData(data, url) {\n  if (isFetchResponse(data)) {\n    url = url || data.url;\n  } else if (isFileReadable(url)) {\n    url = url.name;\n  }\n\n  return typeof url === 'string' ? url.replace(/\\?.*/, '') : url;\n}\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    var arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data) || isBuffer(data)) {\n    if (loader.text && !loader.binary) {\n      var _textDecoder = new TextDecoder('utf8');\n\n      return _textDecoder.decode(data);\n    }\n\n    var _arrayBuffer = data.buffer;\n    var byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== _arrayBuffer.byteLength) {\n      _arrayBuffer = _arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return _arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(_x, _x2) {\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nfunction _getArrayBufferOrStringFromData() {\n  _getArrayBufferOrStringFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loader) {\n    var isArrayBuffer, response;\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return data;\n\n          case 2:\n            data = _context2.sent;\n            isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n            if (!(typeof data === 'string' || isArrayBuffer)) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n          case 6:\n            if (!isFileReadable(data)) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 9;\n            return fetchFileReadable(data);\n\n          case 9:\n            data = _context2.sent;\n\n          case 10:\n            if (!isFetchResponse(data)) {\n              _context2.next = 24;\n              break;\n            }\n\n            response = data;\n            _context2.next = 14;\n            return checkFetchResponseStatus(response);\n\n          case 14:\n            if (!loader.binary) {\n              _context2.next = 20;\n              break;\n            }\n\n            _context2.next = 17;\n            return response.arrayBuffer();\n\n          case 17:\n            _context2.t0 = _context2.sent;\n            _context2.next = 23;\n            break;\n\n          case 20:\n            _context2.next = 22;\n            return response.text();\n\n          case 22:\n            _context2.t0 = _context2.sent;\n\n          case 23:\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 24:\n            if (isReadableStream(data)) {\n              data = getStreamIterator(data);\n            }\n\n            if (!(isIterable(data) || isAsyncIterable(data))) {\n              _context2.next = 27;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", concatenateAsyncIterator(data));\n\n          case 27:\n            throw new Error(ERR_DATA);\n\n          case 28:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nexport function getAsyncIteratorFromData(data) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isFetchResponse(data) && data.body) {\n    checkFetchResponseStatusSync(data);\n    return getStreamIterator(data.body);\n  }\n\n  if (isReadableStream(data)) {\n    return getStreamIterator(data);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIteratorFromData(data);\n}\nexport function getIteratorFromData(data) {\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return data.buffer || data;\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.assign\";\nvar pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      return filename.replace(alias, replacement);\n    }\n  }\n\n  filename += pathPrefix;\n  return filename;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { isFileReadable } from '../../javascript-utils/is-type';\nimport fetchFileReadable from './fetch-file.browser';\nexport function fetchFile(_x, _x2) {\n  return _fetchFile.apply(this, arguments);\n}\n\nfunction _fetchFile() {\n  _fetchFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url, options) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isFileReadable(url)) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetchFileReadable(url, options));\n\n          case 2:\n            url = resolvePath(url);\n            return _context.abrupt(\"return\", fetch(url, options));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchFile.apply(this, arguments);\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { fetchFile } from '../fetch/fetch-file';\nexport function getLoaderContext(context, options, previousContext) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: context.fetch || fetchFile\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}","import { assert } from '@loaders.gl/loader-utils';\nimport { toArrayBuffer as bufferToArrayBuffer } from '../node/utils/to-array-buffer.node';\nexport function toArrayBuffer(data) {\n  if (bufferToArrayBuffer) {\n    data = bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport { assert } from '@loaders.gl/loader-utils';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}","import \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 ? arguments[2] : undefined;\n  var transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : null;\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    return _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = getTransferList(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, jobName) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.jobQueue.push({\n                    data: data,\n                    jobName: jobName,\n                    resolve: resolve,\n                    reject: reject\n                  });\n\n                  _this._startQueuedJob();\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x, _x2) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_startQueuedJob\",\n    value: function _startQueuedJob() {\n      var _this2 = this;\n\n      if (!this.jobQueue.length) {\n        return;\n      }\n\n      var worker = this._getAvailableWorker();\n\n      if (!worker) {\n        return;\n      }\n\n      var job = this.jobQueue.shift();\n      this.onDebug({\n        message: 'processing',\n        worker: worker.name,\n        job: job.jobName,\n        backlog: this.jobQueue.length\n      });\n      worker.process(job.data).then(function (result) {\n        return job.resolve(result);\n      })[\"catch\"](function (error) {\n        return job.reject(error);\n      }).then(function () {\n        return _this2._onWorkerDone(worker);\n      });\n    }\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n      } else {\n        this.idleQueue.push(worker);\n\n        this._startQueuedJob();\n      }\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(workerSource, workerName, data) {\n        var workerPool;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerPool = this._getWorkerPool(workerSource, workerName);\n                return _context.abrupt(\"return\", workerPool.process(data));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function process(_x, _x2, _x3) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: this.onMessage,\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };","import \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { toArrayBuffer } from '../../javascript-utils/binary-utils';\nimport WorkerFarm from '../../worker-utils/worker-farm';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nimport { parse } from '../parse';\nvar VERSION = typeof \"2.1.0-alpha.4\" !== 'undefined' ? \"2.1.0-alpha.4\" : 'latest';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  var warning = loader.version !== VERSION ? \"(core version \".concat(VERSION, \")\") : '';\n  return workerFarm.process(workerSource, \"\".concat(workerName, \"-worker@\").concat(loader.version).concat(warning), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(VERSION),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return parse(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, getTransferList(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.is-array\";\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nvar registeredLoaders = [];\nexport function registerLoaders(loaders) {\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!registeredLoaders.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        registeredLoaders.unshift(normalizedLoader);\n      }\n    };\n\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return registeredLoaders;\n}\nexport function _unregisterLoaders() {\n  registeredLoaders = [];\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { getRegisteredLoaders } from './register-loaders';\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nimport { isFetchResponse } from '../javascript-utils/is-type';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nvar DATA_URL_PATTERN = /^data:(.*?)(;|,)/;\nexport function selectLoader(loaders) {\n  var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n      _ref$nothrow = _ref.nothrow,\n      nothrow = _ref$nothrow === void 0 ? false : _ref$nothrow;\n\n  url = url || '';\n\n  if (loaders && !Array.isArray(loaders)) {\n    var _loader = loaders;\n    normalizeLoader(_loader);\n    return _loader;\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n  url = url.replace(/\\?.*/, '');\n  var loader = findLoaderByUrl(loaders, url);\n  loader = loader || findLoaderByContentType(loaders, data);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader) {\n    if (nothrow) {\n      return null;\n    }\n\n    var message = 'No valid loader found';\n\n    if (data) {\n      message += \" for data starting with \\\"\".concat(getFirstCharacters(data), \"\\\"\");\n    }\n\n    if (url) {\n      message += \" for \".concat(url);\n    }\n\n    throw new Error(message);\n  }\n\n  return loader;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url.match(DATA_URL_PATTERN);\n  var mimeType = match && match[1];\n\n  if (mimeType) {\n    return findLoaderByMimeType(loaders, mimeType);\n  }\n\n  match = url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  return extension && findLoaderByExtension(loaders, extension);\n}\n\nfunction findLoaderByMimeType(loaders, mimeType) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = loaders[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var loader = _step2.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = loaders[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var loader = _step3.value;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = loader.extensions[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var loaderExtension = _step4.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n        _iterator3[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, data) {\n  if (!data || !isFetchResponse(data) || !data.headers) {\n    return null;\n  }\n\n  var contentType = data.headers.get('content-type');\n  return findLoaderByMimeType(loaders, contentType);\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = loaders[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n        _iterator5[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testBinary(data, byteOffset, loader) {\n  var type = Array.isArray(loader.test) ? 'array' : _typeof(loader.test);\n\n  switch (type) {\n    case 'function':\n      return loader.test(data, loader);\n\n    case 'string':\n    case 'array':\n      var tests = Array.isArray(loader.test) ? loader.test : [loader.test];\n      return tests.some(function (test) {\n        var magic = getMagicString(data, byteOffset, test.length);\n        return test === magic;\n      });\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from './loader-utils/normalize-loader';\nimport { mergeOptions } from './loader-utils/merge-options';\nimport { getUrlFromData } from './loader-utils/get-data';\nimport { getArrayBufferOrStringFromData } from './loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from './loader-utils/get-loader-context';\nimport parseWithWorker, { canParseWithWorker } from './loader-utils/parse-with-worker';\nimport { selectLoader } from './select-loader';\nexport function parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loaders, options, context) {\n    var url, autoUrl, candidateLoaders, loader;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              context = options;\n              options = loaders;\n              loaders = null;\n            }\n\n            url = '';\n\n            if (typeof context === 'string') {\n              url = context;\n              context = null;\n            }\n\n            options = options || {};\n            autoUrl = getUrlFromData(data, url);\n            candidateLoaders = getLoaders(loaders, context);\n            loader = selectLoader(candidateLoaders, autoUrl, data);\n\n            if (loader) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            options = mergeOptions(loader, options, autoUrl);\n            context = getLoaderContext({\n              url: autoUrl,\n              parse: parse,\n              loaders: candidateLoaders\n            }, options, context);\n            _context.next = 13;\n            return parseWithLoader(loader, data, options, context);\n\n          case 13:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction parseWithLoader(_x5, _x6, _x7, _x8) {\n  return _parseWithLoader.apply(this, arguments);\n}\n\nfunction _parseWithLoader() {\n  _parseWithLoader = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(loader, data, options, context) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            validateLoaderVersion(loader);\n            _context2.next = 3;\n            return getArrayBufferOrStringFromData(data, loader);\n\n          case 3:\n            data = _context2.sent;\n\n            if (!(loader.parseTextSync && typeof data === 'string')) {\n              _context2.next = 7;\n              break;\n            }\n\n            options.dataType = 'text';\n            return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n          case 7:\n            if (!canParseWithWorker(loader, data, options, context)) {\n              _context2.next = 11;\n              break;\n            }\n\n            _context2.next = 10;\n            return parseWithWorker(loader, data, options, context);\n\n          case 10:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 11:\n            if (!loader.parse) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 14;\n            return loader.parse(data, options, context, loader);\n\n          case 14:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 15:\n            assert(!loader.parseSync);\n            return _context2.abrupt(\"return\", assert(false));\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseWithLoader.apply(this, arguments);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}","import { global, isBrowser } from '../utils/globals';\nvar IMAGE_SUPPORTED = typeof Image !== 'undefined';\nvar IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nvar NODE_IMAGE_SUPPORTED = Boolean(global._parseImageNode);\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || NODE_IMAGE_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'html':\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'ndarray':\n    case 'data':\n      return isBrowser ? true : NODE_IMAGE_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (isImageTypeSupported('image')) {\n    return 'image';\n  }\n\n  if (isImageTypeSupported('imagebitmap')) {\n    return 'imagebitmap';\n  }\n\n  if (isImageTypeSupported('data')) {\n    return 'data';\n  }\n\n  throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      var imageData = context.getImageData(0, 0, image.width, image.height);\n      return imageData;\n\n    default:\n      return assert(false);\n  }\n}\nexport { getImageData as getImageSize };\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport default function parseToImage(_x, _x2) {\n  return _parseToImage.apply(this, arguments);\n}\n\nfunction _parseToImage() {\n  _parseToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options) {\n    var mimeType, blob, URL, objectUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            mimeType = 'image/jpeg';\n            blob = new Blob([arrayBuffer], {\n              type: mimeType\n            });\n            URL = self.URL || self.webkitURL;\n            objectUrl = URL.createObjectURL(blob);\n            _context.prev = 4;\n            _context.next = 7;\n            return loadToImage(objectUrl, options);\n\n          case 7:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 8:\n            _context.prev = 8;\n            URL.revokeObjectURL(objectUrl);\n            return _context.finish(8);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4,, 8, 11]]);\n  }));\n  return _parseToImage.apply(this, arguments);\n}\n\nexport function loadToImage(_x3, _x4) {\n  return _loadToImage.apply(this, arguments);\n}\n\nfunction _loadToImage() {\n  _loadToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    var image;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            image = new Image();\n            image.src = url;\n\n            if (!(options.image && options.image.decode && image.decode)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 5;\n            return image.decode();\n\n          case 5:\n            return _context2.abrupt(\"return\", image);\n\n          case 6:\n            _context2.next = 8;\n            return new Promise(function (resolve, reject) {\n              try {\n                image.onload = function () {\n                  return resolve(image);\n                };\n\n                image.onerror = function (err) {\n                  return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n                };\n              } catch (error) {\n                reject(error);\n              }\n            });\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadToImage.apply(this, arguments);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar imagebitmapOptionsSupported = true;\nexport default function parseToImageBitmap(_x, _x2) {\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction _parseToImageBitmap() {\n  _parseToImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options) {\n    var blob, imagebitmapOptions;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            blob = new Blob([new Uint8Array(arrayBuffer)]);\n            imagebitmapOptions = options && options.imagebitmap;\n\n            if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n              imagebitmapOptions = null;\n            }\n\n            if (!imagebitmapOptions) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.prev = 4;\n            _context.next = 7;\n            return createImageBitmap(blob, imagebitmapOptions);\n\n          case 7:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](4);\n            console.warn(_context.t0);\n            imagebitmapOptionsSupported = false;\n\n          case 14:\n            _context.next = 16;\n            return createImageBitmap(blob);\n\n          case 16:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 10]]);\n  }));\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nvar EMPTY_OBJECT = {};\n\nfunction isEmptyObject(object) {\n  for (var key in object || EMPTY_OBJECT) {\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.set\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nvar BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport var mimeTypeMap = new Map([['image/png', {\n  test: isPng,\n  getSize: getPngSize\n}], ['image/jpeg', {\n  test: isJpeg,\n  getSize: getJpegSize\n}], ['image/gif', {\n  test: isGif,\n  getSize: getGifSize\n}], ['image/bmp', {\n  test: isBmp,\n  getSize: getBmpSize\n}]]);\nexport function isPng(dataView) {\n  return dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n}\n\nfunction getPngSize(dataView) {\n  return {\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nexport function isGif(dataView) {\n  return dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n}\n\nfunction getGifSize(dataView) {\n  return {\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function isBmp(dataView) {\n  return dataView.byteLength >= 2 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d;\n}\n\nfunction getBmpSize(dataView) {\n  return {\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nexport function isJpeg(dataView) {\n  return dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2, BIG_ENDIAN) === 0xff;\n}\n\nfunction getJpegSize(dataView) {\n  if (dataView.byteLength < 2 || dataView.getUint16(0, BIG_ENDIAN) !== 0xffd8) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { mimeTypeMap } from './binary-image-parsers';\nvar ERR_INVALID_MIME_TYPE = \"Invalid MIME type. Supported MIME types are: \".concat(Array.from(mimeTypeMap.keys()).join(', '));\nexport function isBinaryImage(arrayBuffer, mimeType) {\n  if (mimeType) {\n    var _getBinaryImageTypeHa = getBinaryImageTypeHandlers(mimeType),\n        test = _getBinaryImageTypeHa.test;\n\n    var dataView = toDataView(arrayBuffer);\n    return test(dataView);\n  }\n\n  return Boolean(getBinaryImageMIMEType(arrayBuffer));\n}\nexport function getBinaryImageMIMEType(arrayBuffer) {\n  var dataView = toDataView(arrayBuffer);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = mimeTypeMap.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          mimeType = _step$value[0],\n          test = _step$value[1].test;\n\n      if (test(dataView)) {\n        return mimeType;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return null;\n}\nexport function getBinaryImageSize(arrayBuffer) {\n  var mimeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  mimeType = mimeType || getBinaryImageMIMEType(arrayBuffer);\n\n  var _getBinaryImageTypeHa2 = getBinaryImageTypeHandlers(mimeType),\n      getSize = _getBinaryImageTypeHa2.getSize;\n\n  var dataView = toDataView(arrayBuffer);\n  var size = getSize(dataView);\n\n  if (!size) {\n    throw new Error(\"invalid image data for type: \".concat(mimeType));\n  }\n\n  return size;\n}\n\nfunction getBinaryImageTypeHandlers(mimeType) {\n  var handlers = mimeTypeMap.get(mimeType);\n\n  if (!handlers) {\n    throw new Error(ERR_INVALID_MIME_TYPE);\n  }\n\n  return handlers;\n}\n\nfunction toDataView(data) {\n  data = data.buffer || data;\n\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer || data);\n  }\n\n  throw new Error('toDataView');\n}","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMIMEType } from '../binary-image-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  assert(global._parseImageNode);\n  var mimeType = getBinaryImageMIMEType(arrayBuffer);\n  return global._parseImageNode(arrayBuffer, mimeType, options);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { loadToImage } from './parse-to-image';\nexport default function parseSVG(_x, _x2) {\n  return _parseSVG.apply(this, arguments);\n}\n\nfunction _parseSVG() {\n  _parseSVG = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options) {\n    var textDecoder, xmlText, src;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            textDecoder = new TextDecoder();\n            xmlText = textDecoder.decode(arrayBuffer);\n            src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n            _context.next = 5;\n            return loadToImage(src, options);\n\n          case 5:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseSVG.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport assert from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../parsed-image-api/image-type';\nimport { getImageData } from '../parsed-image-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nimport parseSVG from './parse-svg';\nvar SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nvar SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport default function parseImage(_x, _x2, _x3) {\n  return _parseImage.apply(this, arguments);\n}\n\nfunction _parseImage() {\n  _parseImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var imageOptions, imageType, _ref, url, loadType, image;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = options || {};\n            imageOptions = options.image || {};\n            imageType = imageOptions.type || 'auto';\n            _ref = context || {}, url = _ref.url;\n\n            if (!(url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url)))) {\n              _context.next = 9;\n              break;\n            }\n\n            console.warn('@loaders.gl/images: SVG parsing is limited, not all options supported');\n            _context.next = 8;\n            return parseSVG(arrayBuffer, options);\n\n          case 8:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 9:\n            loadType = getLoadableImageType(imageType);\n            _context.t0 = loadType;\n            _context.next = _context.t0 === 'imagebitmap' ? 13 : _context.t0 === 'image' ? 16 : _context.t0 === 'data' ? 20 : 24;\n            break;\n\n          case 13:\n            _context.next = 15;\n            return parseToImageBitmap(arrayBuffer, options);\n\n          case 15:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 16:\n            _context.next = 18;\n            return parseToImage(arrayBuffer, options);\n\n          case 18:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 25);\n\n          case 20:\n            _context.next = 22;\n            return parseToNodeImage(arrayBuffer, options);\n\n          case 22:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 25);\n\n          case 24:\n            assert(false);\n\n          case 25:\n            if (imageType === 'data') {\n              image = getImageData(image, false);\n            }\n\n            return _context.abrupt(\"return\", image);\n\n          case 27:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImage.apply(this, arguments);\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}","import \"core-js/modules/es6.typed.data-view\";\nimport parseImage from './lib/parsers/parse-image';\nimport { isPng, isGif, isBmp, isJpeg } from './lib/binary-image-api/binary-image-parsers';\nvar VERSION = typeof \"2.1.0-alpha.4\" !== 'undefined' ? \"2.1.0-alpha.4\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vndmicrosofticon', 'image/svg+xml'];\nvar ImageLoader = {\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  test: function test(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    return isJpeg(dataView) || isBmp(dataView) || isGif(dataView) || isPng(dataView);\n  },\n  options: {\n    image: {\n      format: 'auto',\n      decode: true\n    }\n  }\n};\nexport default ImageLoader;","import \"core-js/modules/es6.typed.data-view\";\nexport function getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\nexport function getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import { getFirstCharacters } from '../binary-utils/get-first-characters';\nexport function parseJSON(string) {\n  try {\n    return JSON.parse(string);\n  } catch (_) {\n    throw new Error(\"Failed to parse JSON from data starting with \\\"\".concat(getFirstCharacters(string), \"\\\"\"));\n  }\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3;\n}\nexport function getZeroOffsetArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  var subArray = byteLength ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  var arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\nexport function copyArrayBuffer(targetBuffer, sourceBuffer, byteOffset) {\n  var byteLength = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : sourceBuffer.byteLength;\n  var targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  var sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\nexport function copyToArray(source, target, targetOffset) {\n  var sourceArray;\n\n  if (source instanceof ArrayBuffer) {\n    sourceArray = new Uint8Array(source);\n  } else {\n    var srcByteOffset = source.byteOffset;\n    var srcByteLength = source.byteLength;\n    sourceArray = new Uint8Array(source.buffer, srcByteOffset, srcByteLength);\n  }\n\n  target.set(sourceArray, targetOffset);\n  return targetOffset + padTo4Bytes(sourceArray.byteLength);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'assert failed: gltf');\n  }\n}","import \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.string.starts-with\";\nexport function resolveUrl(url, options) {\n  var absolute = url.startsWith('data:') || url.startsWith('http:') || url.startsWith('https:');\n\n  if (absolute) {\n    return url;\n  }\n\n  var baseUrl = options.baseUri || options.uri;\n\n  if (!baseUrl) {\n    throw new Error(\"'baseUri' must be provided to resolve relative url \".concat(url));\n  }\n\n  return baseUrl.substr(0, baseUrl.lastIndexOf('/') + 1) + url;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../utils/assert';\nexport function getTypedArrayForBufferView(json, buffers, bufferViewIndex) {\n  var bufferView = json.bufferViews[bufferViewIndex];\n  assert(bufferView);\n  var bufferIndex = bufferView.buffer;\n  var binChunk = buffers[bufferIndex];\n  assert(binChunk);\n  var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n  return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n}\nexport function getTypedArrayForImageData(json, buffers, imageIndex) {\n  var image = json.images[imageIndex];\n  var bufferViewIndex = json.bufferViews[image.bufferView];\n  return getTypedArrayForBufferView(json, buffers, bufferViewIndex);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport assert from '../utils/assert';\nvar TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nvar ARRAY_TO_COMPONENT_TYPE = new Map([[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126]]);\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  var type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  var componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  var bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  var length = accessor.count * components;\n  var byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType: ArrayType,\n    length: length,\n    byteLength: byteLength\n  };\n}","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.find\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getBinaryImageMIMEType } from '@loaders.gl/images';\nimport { padTo4Bytes, copyToArray } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength, getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils/gltf-utils';\n\nvar GLTFScenegraph = function () {\n  function GLTFScenegraph(gltf) {\n    _classCallCheck(this, GLTFScenegraph);\n\n    if (gltf instanceof GLTFScenegraph) {\n      return gltf;\n    }\n\n    if (!gltf) {\n      gltf = {\n        json: {\n          version: 2,\n          buffers: []\n        },\n        buffers: []\n      };\n    }\n\n    this.gltf = gltf;\n    assert(this.gltf.json);\n  }\n\n  _createClass(GLTFScenegraph, [{\n    key: \"getApplicationData\",\n    value: function getApplicationData(key) {\n      var data = this.json[key];\n      return data;\n    }\n  }, {\n    key: \"getExtraData\",\n    value: function getExtraData(key) {\n      var extras = this.json.extras || {};\n      return extras[key];\n    }\n  }, {\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      var isExtension = this.getUsedExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      var extensions = this.json.extensions || {};\n      return isExtension ? extensions[extensionName] || true : null;\n    }\n  }, {\n    key: \"getRequiredExtension\",\n    value: function getRequiredExtension(extensionName) {\n      var isRequired = this.getRequiredExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      return isRequired ? this.getExtension(extensionName) : null;\n    }\n  }, {\n    key: \"getRequiredExtensions\",\n    value: function getRequiredExtensions() {\n      return this.json.extensionsRequired || [];\n    }\n  }, {\n    key: \"getUsedExtensions\",\n    value: function getUsedExtensions() {\n      return this.json.extensionsUsed || [];\n    }\n  }, {\n    key: \"getObjectExtension\",\n    value: function getObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      return extensions[extensionName];\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this.getObject('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this.getObject('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this.getObject('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this.getObject('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this.getObject('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this.getObject('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this.getObject('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this.getObject('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this.getObject('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this.getObject('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this.getObject('buffers', index);\n    }\n  }, {\n    key: \"getObject\",\n    value: function getObject(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        throw new Error(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"getTypedArrayForBufferView\",\n    value: function getTypedArrayForBufferView(bufferView) {\n      bufferView = this.getBufferView(bufferView);\n      var bufferIndex = bufferView.buffer;\n      var binChunk = this.gltf.buffers[bufferIndex];\n      assert(binChunk);\n      var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n      return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"getTypedArrayForAccessor\",\n    value: function getTypedArrayForAccessor(accessor) {\n      accessor = this.getAccessor(accessor);\n      var bufferView = this.getBufferView(accessor.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n\n      var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, bufferView),\n          ArrayType = _getAccessorArrayType.ArrayType,\n          length = _getAccessorArrayType.length;\n\n      var byteOffset = bufferView.byteOffset + accessor.byteOffset;\n      return new ArrayType(arrayBuffer, byteOffset, length);\n    }\n  }, {\n    key: \"getTypedArrayForImageData\",\n    value: function getTypedArrayForImageData(image) {\n      image = this.getAccessor(image);\n      var bufferView = this.getBufferView(image.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n      var byteOffset = bufferView.byteOffset || 0;\n      return new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"addApplicationData\",\n    value: function addApplicationData(key, data) {\n      this.json[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addExtraData\",\n    value: function addExtraData(key, data) {\n      this.json.extras = this.json.extras || {};\n      this.json.extras[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addObjectExtension\",\n    value: function addObjectExtension(object, extensionName, data) {\n      assert(data);\n      object.extensions = object.extensions || {};\n      object.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"removeObjectExtension\",\n    value: function removeObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      delete extensions[extensionName];\n      return this;\n    }\n  }, {\n    key: \"addExtension\",\n    value: function addExtension(extensionName, data) {\n      assert(data);\n      this.json.extensions = this.json.extensions || {};\n      this.json.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"addRequiredExtension\",\n    value: function addRequiredExtension(extensionName, data) {\n      assert(data);\n      this.addExtension(extensionName, data);\n      this.registerRequiredExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"registerUsedExtension\",\n    value: function registerUsedExtension(extensionName) {\n      this.json.extensionsUsed = this.json.extensionsUsed || [];\n\n      if (!this.json.extensionsUsed.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsUsed.push(extensionName);\n      }\n    }\n  }, {\n    key: \"registerRequiredExtension\",\n    value: function registerRequiredExtension(extensionName) {\n      this.registerUsedExtension(extensionName);\n      this.json.extensionsRequired = this.json.extensionsRequired || [];\n\n      if (!this.json.extensionsRequired.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsRequired.push(extensionName);\n      }\n    }\n  }, {\n    key: \"removeExtension\",\n    value: function removeExtension(extensionName) {\n      if (this.json.extensionsRequired) {\n        this._removeStringFromArray(this.json.extensionsRequired, extensionName);\n      }\n\n      if (this.json.extensionsUsed) {\n        this._removeStringFromArray(this.json.extensionsUsed, extensionName);\n      }\n\n      if (this.json.extensions) {\n        delete this.json.extensions[extensionName];\n      }\n    }\n  }, {\n    key: \"setObjectExtension\",\n    value: function setObjectExtension(object, extensionName, data) {\n      var extensions = object.extensions || {};\n      extensions[extensionName] = data;\n    }\n  }, {\n    key: \"addMesh\",\n    value: function addMesh(attributes, indices) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n\n      var accessors = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessors,\n          indices: indices,\n          mode: mode\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addPointCloud\",\n    value: function addPointCloud(attributes) {\n      var accessorIndices = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessorIndices,\n          mode: 0\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(imageData, mimeType) {\n      mimeType = mimeType || getBinaryImageMIMEType(imageData);\n      var bufferViewIndex = this.addBufferView(imageData);\n      var glTFImage = {\n        bufferView: bufferViewIndex,\n        mimeType: mimeType\n      };\n      this.json.images = this.json.images || [];\n      this.json.images.push(glTFImage);\n      return this.json.images.length - 1;\n    }\n  }, {\n    key: \"addBufferView\",\n    value: function addBufferView(buffer) {\n      var byteLength = buffer.byteLength;\n      assert(Number.isFinite(byteLength));\n      this.sourceBuffers = this.sourceBuffers || [];\n      this.sourceBuffers.push(buffer);\n      var glTFBufferView = {\n        buffer: 0,\n        byteOffset: this.byteLength,\n        byteLength: byteLength\n      };\n      this.byteLength += padTo4Bytes(byteLength);\n      this.json.bufferViews = this.json.bufferViews || [];\n      this.json.bufferViews.push(glTFBufferView);\n      return this.json.bufferViews.length - 1;\n    }\n  }, {\n    key: \"addAccessor\",\n    value: function addAccessor(bufferViewIndex, accessor) {\n      var glTFAccessor = {\n        bufferView: bufferViewIndex,\n        type: getAccessorTypeFromSize(accessor.size),\n        componentType: accessor.componentType,\n        count: accessor.count\n      };\n      this.json.accessors = this.json.accessors || [];\n      this.json.accessors.push(glTFAccessor);\n      return this.json.accessors.length - 1;\n    }\n  }, {\n    key: \"addBinaryBuffer\",\n    value: function addBinaryBuffer(sourceBuffer) {\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        size: 3\n      };\n      var bufferViewIndex = this.addBufferView(sourceBuffer);\n      var accessorDefaults = {\n        size: accessor.size,\n        componentType: getComponentTypeFromArray(sourceBuffer),\n        count: Math.round(sourceBuffer.length / accessor.size)\n      };\n      return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n    }\n  }, {\n    key: \"createBinaryChunk\",\n    value: function createBinaryChunk() {\n      if (this.arrayBuffer) {\n        return;\n      }\n\n      var totalByteLength = this.byteLength;\n      var arrayBuffer = new ArrayBuffer(totalByteLength);\n      var targetArray = new Uint8Array(arrayBuffer);\n      var dstByteOffset = 0;\n\n      for (var i = 0; i < this.sourceBuffers.length; i++) {\n        var sourceBuffer = this.sourceBuffers[i];\n        dstByteOffset = copyToArray(sourceBuffer, targetArray, dstByteOffset);\n      }\n\n      this.json.buffers[0].byteLength = totalByteLength;\n      this.arrayBuffer = arrayBuffer;\n      this.sourceBuffers = [];\n    }\n  }, {\n    key: \"_removeStringFromArray\",\n    value: function _removeStringFromArray(array, string) {\n      var found = true;\n\n      while (found) {\n        var index = array.indexOf(string);\n\n        if (index > -1) {\n          array.splice(index, 1);\n        } else {\n          found = false;\n        }\n      }\n    }\n  }, {\n    key: \"json\",\n    get: function get() {\n      return this.gltf.json;\n    }\n  }]);\n\n  return GLTFScenegraph;\n}();\n\nexport { GLTFScenegraph as default };","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport { getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils';\nexport function getGLTFAccessors(attributes) {\n  var accessors = {};\n\n  for (var name in attributes) {\n    var attribute = attributes[name];\n\n    if (name !== 'indices') {\n      var glTFAccessor = getGLTFAccessor(attribute);\n      accessors[name] = glTFAccessor;\n    }\n  }\n\n  return accessors;\n}\nexport function getGLTFAccessor(attribute, gltfAttributeName) {\n  var _getAccessorData = getAccessorData(attribute, gltfAttributeName),\n      buffer = _getAccessorData.buffer,\n      size = _getAccessorData.size,\n      count = _getAccessorData.count;\n\n  var glTFAccessor = {\n    value: buffer,\n    size: size,\n    bufferView: null,\n    byteOffset: 0,\n    count: count,\n    type: getAccessorTypeFromSize(size),\n    componentType: getComponentTypeFromArray(buffer)\n  };\n  return glTFAccessor;\n}\nexport function getGLTFAttribute(data, gltfAttributeName) {\n  return data.attributes[data.glTFAttributeMap[gltfAttributeName]];\n}\n\nfunction getAccessorData(attribute, attributeName) {\n  var buffer = attribute;\n  var size = 1;\n  var count = 0;\n\n  if (attribute && attribute.value) {\n    buffer = attribute.value;\n    size = attribute.size || 1;\n  }\n\n  if (buffer) {\n    if (!ArrayBuffer.isView(buffer)) {\n      buffer = toTypedArray(buffer, Float32Array);\n    }\n\n    count = buffer.length / size;\n  }\n\n  return {\n    buffer: buffer,\n    size: size,\n    count: count\n  };\n}\n\nfunction toTypedArray(array, ArrayType) {\n  var convertTypedArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!array) {\n    return null;\n  }\n\n  if (Array.isArray(array)) {\n    return new ArrayType(array);\n  }\n\n  if (convertTypedArrays && !(array instanceof ArrayType)) {\n    return new ArrayType(array);\n  }\n\n  return array;\n}","import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _marked = _regeneratorRuntime.mark(meshPrimitiveIterator);\n\nimport { getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_DRACO_MESH_COMPRESSION } from '../gltf-constants';\nimport { getGLTFAccessors, getGLTFAccessor } from '../gltf-utils/gltf-attribute-utils';\nexport function decode(_x, _x2, _x3) {\n  return _decode.apply(this, arguments);\n}\n\nfunction _decode() {\n  _decode = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltfData, options, context) {\n    var scenegraph, promises, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, primitive;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (options.gltf.decompressMeshes) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            scenegraph = new GLTFScenegraph(gltfData);\n            promises = [];\n            _iteratorNormalCompletion4 = true;\n            _didIteratorError4 = false;\n            _iteratorError4 = undefined;\n            _context2.prev = 7;\n\n            for (_iterator4 = meshPrimitiveIterator(scenegraph)[Symbol.iterator](); !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n              primitive = _step4.value;\n\n              if (scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION)) {\n                promises.push(decompressPrimitive(primitive, scenegraph, options, context));\n              }\n            }\n\n            _context2.next = 15;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](7);\n            _didIteratorError4 = true;\n            _iteratorError4 = _context2.t0;\n\n          case 15:\n            _context2.prev = 15;\n            _context2.prev = 16;\n\n            if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n              _iterator4[\"return\"]();\n            }\n\n          case 18:\n            _context2.prev = 18;\n\n            if (!_didIteratorError4) {\n              _context2.next = 21;\n              break;\n            }\n\n            throw _iteratorError4;\n\n          case 21:\n            return _context2.finish(18);\n\n          case 22:\n            return _context2.finish(15);\n\n          case 23:\n            _context2.next = 25;\n            return Promise.all(promises);\n\n          case 25:\n            scenegraph.removeExtension(KHR_DRACO_MESH_COMPRESSION);\n\n          case 26:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee, null, [[7, 11, 15, 23], [16,, 18, 22]]);\n  }));\n  return _decode.apply(this, arguments);\n}\n\nexport function encode(gltfData) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scenegraph = new GLTFScenegraph(gltfData);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (scenegraph.json.meshes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var mesh = _step.value;\n      compressMesh(mesh, options);\n      scenegraph.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction decompressPrimitive(_x4, _x5, _x6, _x7) {\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction _decompressPrimitive() {\n  _decompressPrimitive = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(primitive, scenegraph, options, context) {\n    var compressedPrimitive, buffer, bufferCopy, parse, decodedData;\n    return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            compressedPrimitive = scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION);\n            buffer = scenegraph.getTypedArrayForBufferView(compressedPrimitive.bufferView);\n            bufferCopy = getZeroOffsetArrayBuffer(buffer.buffer, buffer.byteOffset);\n            parse = context.parse;\n            _context3.next = 6;\n            return parse(bufferCopy, [], options, context);\n\n          case 6:\n            decodedData = _context3.sent;\n            primitive.attributes = getGLTFAccessors(decodedData.attributes);\n\n            if (decodedData.indices) {\n              primitive.indices = getGLTFAccessor(decodedData.indices);\n            }\n\n            checkPrimitive(primitive);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction compressMesh(attributes, indices) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n  var options = arguments.length > 3 ? arguments[3] : undefined;\n  var context = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (!options.DracoWriter || !options.DracoLoader) {\n    throw new Error('DracoWriter/DracoLoader not available');\n  }\n\n  var compressedData = options.DracoWriter.encodeSync({\n    attributes: attributes\n  });\n  var parseSync = context.parseSync;\n  var decodedData = parseSync({\n    attributes: attributes\n  });\n\n  var fauxAccessors = options._addFauxAttributes(decodedData.attributes);\n\n  var bufferViewIndex = options.addBufferView(compressedData);\n  var glTFMesh = {\n    primitives: [{\n      attributes: fauxAccessors,\n      mode: mode,\n      extensions: _defineProperty({}, KHR_DRACO_MESH_COMPRESSION, {\n        bufferView: bufferViewIndex,\n        attributes: fauxAccessors\n      })\n    }]\n  };\n  return glTFMesh;\n}\n\nfunction checkPrimitive(primitive) {\n  if (!primitive.attributes && Object.keys(primitive.attributes).length > 0) {\n    throw new Error('Empty glTF primitive detected: Draco decompression failure?');\n  }\n}\n\nfunction meshPrimitiveIterator(scenegraph) {\n  var _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, mesh, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, primitive;\n\n  return _regeneratorRuntime.wrap(function meshPrimitiveIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _iteratorNormalCompletion2 = true;\n          _didIteratorError2 = false;\n          _iteratorError2 = undefined;\n          _context.prev = 3;\n          _iterator2 = (scenegraph.json.meshes || [])[Symbol.iterator]();\n\n        case 5:\n          if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n            _context.next = 36;\n            break;\n          }\n\n          mesh = _step2.value;\n          _iteratorNormalCompletion3 = true;\n          _didIteratorError3 = false;\n          _iteratorError3 = undefined;\n          _context.prev = 10;\n          _iterator3 = mesh.primitives[Symbol.iterator]();\n\n        case 12:\n          if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n            _context.next = 19;\n            break;\n          }\n\n          primitive = _step3.value;\n          _context.next = 16;\n          return primitive;\n\n        case 16:\n          _iteratorNormalCompletion3 = true;\n          _context.next = 12;\n          break;\n\n        case 19:\n          _context.next = 25;\n          break;\n\n        case 21:\n          _context.prev = 21;\n          _context.t0 = _context[\"catch\"](10);\n          _didIteratorError3 = true;\n          _iteratorError3 = _context.t0;\n\n        case 25:\n          _context.prev = 25;\n          _context.prev = 26;\n\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n\n        case 28:\n          _context.prev = 28;\n\n          if (!_didIteratorError3) {\n            _context.next = 31;\n            break;\n          }\n\n          throw _iteratorError3;\n\n        case 31:\n          return _context.finish(28);\n\n        case 32:\n          return _context.finish(25);\n\n        case 33:\n          _iteratorNormalCompletion2 = true;\n          _context.next = 5;\n          break;\n\n        case 36:\n          _context.next = 42;\n          break;\n\n        case 38:\n          _context.prev = 38;\n          _context.t1 = _context[\"catch\"](3);\n          _didIteratorError2 = true;\n          _iteratorError2 = _context.t1;\n\n        case 42:\n          _context.prev = 42;\n          _context.prev = 43;\n\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n\n        case 45:\n          _context.prev = 45;\n\n          if (!_didIteratorError2) {\n            _context.next = 48;\n            break;\n          }\n\n          throw _iteratorError2;\n\n        case 48:\n          return _context.finish(45);\n\n        case 49:\n          return _context.finish(42);\n\n        case 50:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[3, 38, 42, 50], [10, 21, 25, 33], [26,, 28, 32], [43,, 45, 49]]);\n}","export var KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nexport var UBER_POINT_CLOUD_EXTENSION = 'UBER_draco_point_cloud_compression';\nexport var KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nexport var KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nexport var KHR_TECHNIQUES_WEBGL = 'KHR_techniques_webgl';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport function getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\nexport function getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\nexport function getGLEnumFromSamplerParameter(parameter) {\n  var GL_TEXTURE_MAG_FILTER = 0x2800;\n  var GL_TEXTURE_MIN_FILTER = 0x2801;\n  var GL_TEXTURE_WRAP_S = 0x2802;\n  var GL_TEXTURE_WRAP_T = 0x2803;\n  var PARAMETER_MAP = {\n    magFilter: GL_TEXTURE_MAG_FILTER,\n    minFilter: GL_TEXTURE_MIN_FILTER,\n    wrapS: GL_TEXTURE_WRAP_S,\n    wrapT: GL_TEXTURE_WRAP_T\n  };\n  return PARAMETER_MAP[parameter];\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport assert from '../utils/assert';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_LIGHTS_PUNCTUAL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_LIGHTS_PUNCTUAL);\n\n  if (extension) {\n    gltfScenegraph.json.lights = extension.lights;\n    gltfScenegraph.removeExtension(KHR_LIGHTS_PUNCTUAL);\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.nodes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var nodeExtension = gltfScenegraph.getObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n\n      if (nodeExtension) {\n        node.light = nodeExtension.light;\n      }\n\n      gltfScenegraph.removeObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (json.lights) {\n    var extension = gltfScenegraph.addExtension(KHR_LIGHTS_PUNCTUAL);\n    assert(!extension.lights);\n    extension.lights = json.lights;\n    delete json.lights;\n  }\n\n  if (gltfScenegraph.json.lights) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = gltfScenegraph.json.lights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var light = _step2.value;\n        var node = light.node;\n        gltfScenegraph.addObjectExtension(node, KHR_LIGHTS_PUNCTUAL, light);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    delete gltfScenegraph.json.lights;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_MATERIALS_UNLIT } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.materials || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var material = _step.value;\n      var extension = material.extensions && material.extensions.KHR_materials_unlit;\n\n      if (extension) {\n        material.unlit = true;\n      }\n\n      gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (gltfScenegraph.materials) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = json.materials[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var material = _step2.value;\n\n        if (material.unlit) {\n          delete material.unlit;\n          gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT);\n          gltfScenegraph.addExtension(KHR_MATERIALS_UNLIT);\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_TECHNIQUES_WEBGL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_TECHNIQUES_WEBGL);\n\n  if (extension) {\n    var techniques = resolveTechniques(extension, gltfScenegraph);\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = (json.materials || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var material = _step.value;\n        var materialExtension = gltfScenegraph.getObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n\n        if (materialExtension) {\n          material.technique = Object.assign({}, materialExtension, techniques[materialExtension.technique]);\n        }\n\n        gltfScenegraph.removeObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    gltfScenegraph.removeExtension(KHR_TECHNIQUES_WEBGL);\n  }\n}\nexport function encode(gltfData, options) {}\n\nfunction resolveTechniques(_ref, gltfScenegraph) {\n  var _ref$programs = _ref.programs,\n      programs = _ref$programs === void 0 ? [] : _ref$programs,\n      _ref$shaders = _ref.shaders,\n      shaders = _ref$shaders === void 0 ? [] : _ref$shaders,\n      _ref$techniques = _ref.techniques,\n      techniques = _ref$techniques === void 0 ? [] : _ref$techniques;\n  var textDecoder = new TextDecoder();\n  shaders.forEach(function (shader) {\n    if (Number.isFinite(shader.bufferView)) {\n      shader.code = textDecoder.decode(gltfScenegraph.getTypedArrayForBufferView(shader.bufferView));\n    } else {\n      throw new Error('KHR_techniques_webgl: no shader code');\n    }\n  });\n  programs.forEach(function (program) {\n    program.fragmentShader = shaders[program.fragmentShader];\n    program.vertexShader = shaders[program.vertexShader];\n  });\n  techniques.forEach(function (technique) {\n    technique.program = programs[technique.program];\n  });\n  return techniques;\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as KHR_draco_mesh_compression from './KHR_draco_mesh_compression';\nimport * as KHR_lights_punctual from './KHR_lights_punctual';\nimport * as KHR_materials_unlit from './KHR_materials_unlit';\nimport * as KHR_techniques_webgl from './KHR_techniques_webgl';\nexport var EXTENSIONS = {\n  KHR_draco_mesh_compression: KHR_draco_mesh_compression,\n  KHR_lights_punctual: KHR_lights_punctual,\n  KHR_materials_unlit: KHR_materials_unlit,\n  KHR_techniques_webgl: KHR_techniques_webgl\n};\nexport function decodeExtensions(_x) {\n  return _decodeExtensions.apply(this, arguments);\n}\n\nfunction _decodeExtensions() {\n  _decodeExtensions = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf) {\n    var options,\n        context,\n        extensionName,\n        excludes,\n        exclude,\n        extension,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options.gltf = options.gltf || {};\n            _context.t0 = _regeneratorRuntime.keys(EXTENSIONS);\n\n          case 4:\n            if ((_context.t1 = _context.t0()).done) {\n              _context.next = 14;\n              break;\n            }\n\n            extensionName = _context.t1.value;\n            excludes = options.gltf.excludeExtensions || {};\n            exclude = extensionName in excludes && !excludes[extensionName];\n\n            if (exclude) {\n              _context.next = 12;\n              break;\n            }\n\n            extension = EXTENSIONS[extensionName];\n            _context.next = 12;\n            return extension.decode(gltf, options, context);\n\n          case 12:\n            _context.next = 4;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _decodeExtensions.apply(this, arguments);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport { padTo4Bytes, assert } from '@loaders.gl/loader-utils';\nvar MAGIC_glTF = 0x676c5446;\nvar GLB_FILE_HEADER_SIZE = 12;\nvar GLB_CHUNK_HEADER_SIZE = 8;\nvar GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nvar GLB_CHUNK_TYPE_BIN = 0x004e4942;\nvar GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED = 0;\nvar GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED = 1;\nvar LE = true;\n\nfunction getMagicString(dataView) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n\nexport function isGLB(arrayBuffer) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var dataView = new DataView(arrayBuffer);\n  var _options$magic = options.magic,\n      magic = _options$magic === void 0 ? MAGIC_glTF : _options$magic;\n  var magic1 = dataView.getUint32(byteOffset, false);\n  return magic1 === magic || magic1 === MAGIC_glTF;\n}\nexport default function parseGLBSync(glb, arrayBuffer) {\n  var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var dataView = new DataView(arrayBuffer);\n  glb.type = getMagicString(dataView, byteOffset + 0);\n  glb.version = dataView.getUint32(byteOffset + 4, LE);\n  var byteLength = dataView.getUint32(byteOffset + 8, LE);\n  glb.header = {\n    byteOffset: byteOffset,\n    byteLength: byteLength\n  };\n  assert(glb.version === 2, \"Invalid GLB version \".concat(glb.version, \". Only supports v2.\"));\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  glb.json = {};\n  glb.binChunks = [];\n  parseGLBChunksSync(glb, dataView, byteOffset + GLB_FILE_HEADER_SIZE, options);\n  return byteOffset + glb.header.byteLength;\n}\n\nfunction parseGLBChunksSync(glb, dataView, byteOffset, options) {\n  while (byteOffset + 8 <= glb.header.byteLength) {\n    var chunkLength = dataView.getUint32(byteOffset + 0, LE);\n    var chunkFormat = dataView.getUint32(byteOffset + 4, LE);\n    byteOffset += GLB_CHUNK_HEADER_SIZE;\n\n    switch (chunkFormat) {\n      case GLB_CHUNK_TYPE_JSON:\n        parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_BIN:\n        parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    byteOffset += padTo4Bytes(chunkLength);\n  }\n\n  return byteOffset;\n}\n\nfunction parseJSONChunk(glb, dataView, byteOffset, chunkLength, options) {\n  var jsonChunk = new Uint8Array(dataView.buffer, byteOffset, chunkLength);\n  var textDecoder = new TextDecoder('utf8');\n  var jsonText = textDecoder.decode(jsonChunk);\n  glb.json = JSON.parse(jsonText);\n}\n\nfunction parseBINChunk(glb, dataView, byteOffset, chunkLength, options) {\n  glb.header.hasBinChunk = true;\n  glb.binChunks.push({\n    byteOffset: byteOffset,\n    byteLength: chunkLength,\n    arrayBuffer: dataView.buffer\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _DEFAULT_SAMPLER;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength } from './gltf-utils/gltf-utils';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nvar GL_SAMPLER = {\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  REPEAT: 0x2901,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_LINEAR: 0x2702\n};\nvar SAMPLER_PARAMETER_GLTF_TO_GL = {\n  magFilter: GL_SAMPLER.TEXTURE_MAG_FILTER,\n  minFilter: GL_SAMPLER.TEXTURE_MIN_FILTER,\n  wrapS: GL_SAMPLER.TEXTURE_WRAP_S,\n  wrapT: GL_SAMPLER.TEXTURE_WRAP_T\n};\nvar DEFAULT_SAMPLER = (_DEFAULT_SAMPLER = {}, _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MAG_FILTER, GL_SAMPLER.LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MIN_FILTER, GL_SAMPLER.NEAREST_MIPMAP_LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_S, GL_SAMPLER.REPEAT), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_, GL_SAMPLER.REPEAT), _DEFAULT_SAMPLER);\n\nfunction getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\n\nfunction getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\n\nvar GLTFPostProcessor = function () {\n  function GLTFPostProcessor() {\n    _classCallCheck(this, GLTFPostProcessor);\n  }\n\n  _createClass(GLTFPostProcessor, [{\n    key: \"postProcess\",\n    value: function postProcess(gltf) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var json = gltf.json,\n          _gltf$buffers = gltf.buffers,\n          buffers = _gltf$buffers === void 0 ? [] : _gltf$buffers,\n          _gltf$images = gltf.images,\n          images = _gltf$images === void 0 ? [] : _gltf$images,\n          _gltf$baseUri = gltf.baseUri,\n          baseUri = _gltf$baseUri === void 0 ? '' : _gltf$baseUri;\n      assert(json);\n      this.baseUri = baseUri;\n      this.json = json;\n      this.buffers = buffers;\n      this.images = images;\n\n      this._resolveTree(this.json, options);\n\n      return this.json;\n    }\n  }, {\n    key: \"_resolveTree\",\n    value: function _resolveTree(json) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (json.bufferViews) {\n        json.bufferViews = json.bufferViews.map(function (bufView, i) {\n          return _this._resolveBufferView(bufView, i);\n        });\n      }\n\n      if (json.images) {\n        json.images = json.images.map(function (image, i) {\n          return _this._resolveImage(image, i, options);\n        });\n      }\n\n      if (json.samplers) {\n        json.samplers = json.samplers.map(function (sampler, i) {\n          return _this._resolveSampler(sampler, i);\n        });\n      }\n\n      if (json.textures) {\n        json.textures = json.textures.map(function (texture, i) {\n          return _this._resolveTexture(texture, i);\n        });\n      }\n\n      if (json.accessors) {\n        json.accessors = json.accessors.map(function (accessor, i) {\n          return _this._resolveAccessor(accessor, i, options);\n        });\n      }\n\n      if (json.materials) {\n        json.materials = json.materials.map(function (material, i) {\n          return _this._resolveMaterial(material, i);\n        });\n      }\n\n      if (json.meshes) {\n        json.meshes = json.meshes.map(function (mesh, i) {\n          return _this._resolveMesh(mesh, i);\n        });\n      }\n\n      if (json.nodes) {\n        json.nodes = json.nodes.map(function (node, i) {\n          return _this._resolveNode(node, i);\n        });\n      }\n\n      if (json.skins) {\n        json.skins = json.skins.map(function (skin, i) {\n          return _this._resolveSkin(skin, i);\n        });\n      }\n\n      if (json.scenes) {\n        json.scenes = json.scenes.map(function (scene, i) {\n          return _this._resolveScene(scene, i);\n        });\n      }\n\n      if (json.scene !== undefined) {\n        json.scene = json.scenes[this.json.scene];\n      }\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this._get('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this._get('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this._get('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this._get('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this._get('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this._get('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this._get('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this._get('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this._get('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this._get('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this._get('buffers', index);\n    }\n  }, {\n    key: \"_get\",\n    value: function _get(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        console.warn(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"_resolveScene\",\n    value: function _resolveScene(scene, index) {\n      var _this2 = this;\n\n      scene.id = scene.id || \"scene-\".concat(index);\n      scene.nodes = (scene.nodes || []).map(function (node) {\n        return _this2.getNode(node);\n      });\n      return scene;\n    }\n  }, {\n    key: \"_resolveNode\",\n    value: function _resolveNode(node, index) {\n      var _this3 = this;\n\n      node.id = node.id || \"node-\".concat(index);\n\n      if (node.children) {\n        node.children = node.children.map(function (child) {\n          return _this3.getNode(child);\n        });\n      }\n\n      if (node.mesh !== undefined) {\n        node.mesh = this.getMesh(node.mesh);\n      }\n\n      if (node.camera !== undefined) {\n        node.camera = this.getCamera(node.camera);\n      }\n\n      if (node.skin !== undefined) {\n        node.skin = this.getSkin(node.skin);\n      }\n\n      return node;\n    }\n  }, {\n    key: \"_resolveSkin\",\n    value: function _resolveSkin(skin, index) {\n      skin.id = skin.id || \"skin-\".concat(index);\n      skin.inverseBindMatrices = this.getAccessor(skin.inverseBindMatrices);\n      return skin;\n    }\n  }, {\n    key: \"_resolveMesh\",\n    value: function _resolveMesh(mesh, index) {\n      var _this4 = this;\n\n      mesh.id = mesh.id || \"mesh-\".concat(index);\n\n      if (mesh.primitives) {\n        mesh.primitives = mesh.primitives.map(function (primitive) {\n          primitive = _objectSpread({}, primitive);\n          var attributes = primitive.attributes;\n          primitive.attributes = {};\n\n          for (var attribute in attributes) {\n            primitive.attributes[attribute] = _this4.getAccessor(attributes[attribute]);\n          }\n\n          if (primitive.indices !== undefined) {\n            primitive.indices = _this4.getAccessor(primitive.indices);\n          }\n\n          if (primitive.material !== undefined) {\n            primitive.material = _this4.getMaterial(primitive.material);\n          }\n\n          return primitive;\n        });\n      }\n\n      return mesh;\n    }\n  }, {\n    key: \"_resolveMaterial\",\n    value: function _resolveMaterial(material, index) {\n      material.id = material.id || \"material-\".concat(index);\n\n      if (material.normalTexture) {\n        material.normalTexture = _objectSpread({}, material.normalTexture);\n        material.normalTexture.texture = this.getTexture(material.normalTexture.index);\n      }\n\n      if (material.occlusionTexture) {\n        material.occlustionTexture = _objectSpread({}, material.occlustionTexture);\n        material.occlusionTexture.texture = this.getTexture(material.occlusionTexture.index);\n      }\n\n      if (material.emissiveTexture) {\n        material.emmisiveTexture = _objectSpread({}, material.emmisiveTexture);\n        material.emissiveTexture.texture = this.getTexture(material.emissiveTexture.index);\n      }\n\n      if (material.pbrMetallicRoughness) {\n        material.pbrMetallicRoughness = _objectSpread({}, material.pbrMetallicRoughness);\n        var mr = material.pbrMetallicRoughness;\n\n        if (mr.baseColorTexture) {\n          mr.baseColorTexture = _objectSpread({}, mr.baseColorTexture);\n          mr.baseColorTexture.texture = this.getTexture(mr.baseColorTexture.index);\n        }\n\n        if (mr.metallicRoughnessTexture) {\n          mr.metallicRoughnessTexture = _objectSpread({}, mr.metallicRoughnessTexture);\n          mr.metallicRoughnessTexture.texture = this.getTexture(mr.metallicRoughnessTexture.index);\n        }\n      }\n\n      return material;\n    }\n  }, {\n    key: \"_resolveAccessor\",\n    value: function _resolveAccessor(accessor, index) {\n      accessor.id = accessor.id || \"accessor-\".concat(index);\n\n      if (accessor.bufferView !== undefined) {\n        accessor.bufferView = this.getBufferView(accessor.bufferView);\n      }\n\n      accessor.bytesPerComponent = getBytesFromComponentType(accessor.componentType);\n      accessor.components = getSizeFromAccessorType(accessor.type);\n      accessor.bytesPerElement = accessor.bytesPerComponent * accessor.components;\n\n      if (accessor.bufferView) {\n        var buffer = accessor.bufferView.buffer;\n\n        var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, accessor.bufferView),\n            ArrayType = _getAccessorArrayType.ArrayType,\n            length = _getAccessorArrayType.length;\n\n        var byteOffset = (accessor.bufferView.byteOffset || 0) + buffer.byteOffset;\n        accessor.value = new ArrayType(buffer.arrayBuffer, byteOffset, length);\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"_resolveTexture\",\n    value: function _resolveTexture(texture, index) {\n      texture.id = texture.id || \"texture-\".concat(index);\n      texture.sampler = 'sampler' in texture ? this.getSampler(texture.sampler) : DEFAULT_SAMPLER;\n      texture.source = this.getImage(texture.source);\n      return texture;\n    }\n  }, {\n    key: \"_resolveSampler\",\n    value: function _resolveSampler(sampler, index) {\n      sampler.id = sampler.id || \"sampler-\".concat(index);\n      sampler.parameters = {};\n\n      for (var key in sampler) {\n        var glEnum = this._enumSamplerParameter(key);\n\n        if (glEnum !== undefined) {\n          sampler.parameters[glEnum] = sampler[key];\n        }\n      }\n\n      return sampler;\n    }\n  }, {\n    key: \"_enumSamplerParameter\",\n    value: function _enumSamplerParameter(key) {\n      return SAMPLER_PARAMETER_GLTF_TO_GL[key];\n    }\n  }, {\n    key: \"_resolveImage\",\n    value: function _resolveImage(image, index) {\n      image.id = image.id || \"image-\".concat(index);\n\n      if (image.bufferView !== undefined) {\n        image.bufferView = this.getBufferView(image.bufferView);\n      }\n\n      var preloadedImage = this.images[index];\n\n      if (preloadedImage) {\n        image.image = preloadedImage;\n      }\n\n      return image;\n    }\n  }, {\n    key: \"_resolveBufferView\",\n    value: function _resolveBufferView(bufferView, index) {\n      bufferView.id = bufferView.id || \"bufferView-\".concat(index);\n      var bufferIndex = bufferView.buffer;\n      bufferView.buffer = this.buffers[bufferIndex];\n      var arrayBuffer = this.buffers[bufferIndex].arrayBuffer;\n      var byteOffset = this.buffers[bufferIndex].byteOffset || 0;\n\n      if ('byteOffset' in bufferView) {\n        byteOffset += bufferView.byteOffset;\n      }\n\n      bufferView.data = new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n      return bufferView;\n    }\n  }, {\n    key: \"_resolveCamera\",\n    value: function _resolveCamera(camera, index) {\n      camera.id = camera.id || \"camera-\".concat(index);\n\n      if (camera.perspective) {}\n\n      if (camera.orthographic) {}\n\n      return camera;\n    }\n  }]);\n\n  return GLTFPostProcessor;\n}();\n\nexport default function postProcessGLTF(gltf, options) {\n  return new GLTFPostProcessor().postProcess(gltf, options);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { ImageLoader } from '@loaders.gl/images';\nimport { parseJSON, getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { resolveUrl } from './gltf-utils/resolve-url';\nimport { getTypedArrayForBufferView } from './gltf-utils/get-typed-array';\nimport { decodeExtensions } from './extensions/gltf-extensions';\nimport parseGLBSync, { isGLB } from './parse-glb';\nimport postProcessGLTF from './post-process-gltf';\nexport function isGLTF(arrayBuffer) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var dataView = new DataView(arrayBuffer);\n  var byteOffset = 0;\n  return isGLB(dataView, byteOffset);\n}\nexport function parseGLTF(_x, _x2) {\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction _parseGLTF() {\n  _parseGLTF = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf, arrayBufferOrString) {\n    var byteOffset,\n        options,\n        context,\n        promises,\n        _promise,\n        promise,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n            options = _args.length > 3 ? _args[3] : undefined;\n            context = _args.length > 4 ? _args[4] : undefined;\n            parseGLTFContainerSync(gltf, arrayBufferOrString, byteOffset, options);\n            promises = [];\n\n            if (options.gltf.loadImages) {\n              _promise = loadImages(gltf, options, context);\n              promises.push(_promise);\n            }\n\n            if (!options.gltf.loadBuffers) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 9;\n            return loadBuffers(gltf, options, context);\n\n          case 9:\n            promise = decodeExtensions(gltf, options, context);\n            promises.push(promise);\n            _context.next = 13;\n            return Promise.all(promises);\n\n          case 13:\n            return _context.abrupt(\"return\", options.gltf.postProcess ? postProcessGLTF(gltf, options) : gltf);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction parseGLTFContainerSync(gltf, data, byteOffset, options) {\n  if (options.uri) {\n    gltf.baseUri = options.uri;\n  }\n\n  if (data instanceof ArrayBuffer && !isGLB(data, byteOffset, options)) {\n    var textDecoder = new TextDecoder();\n    data = textDecoder.decode(data);\n  }\n\n  if (typeof data === 'string') {\n    gltf.json = parseJSON(data);\n  } else if (data instanceof ArrayBuffer) {\n    var glb = {};\n    byteOffset = parseGLBSync(glb, data, byteOffset, options);\n    assert(glb.type === 'glTF', \"Invalid GLB magic string \".concat(glb.type));\n    gltf._glb = glb;\n    gltf.json = glb.json;\n  } else {\n    assert(false, \"GLTF: must be ArrayBuffer or string\");\n  }\n\n  var buffers = gltf.json.buffers || [];\n  gltf.buffers = new Array(buffers.length).fill(null);\n\n  if (gltf._glb && gltf._glb.header.hasBinChunk) {\n    var binChunks = gltf._glb.binChunks;\n    gltf.buffers[0] = {\n      arrayBuffer: binChunks[0].arrayBuffer,\n      byteOffset: binChunks[0].byteOffset,\n      byteLength: binChunks[0].byteLength\n    };\n  }\n\n  var images = gltf.json.images || [];\n  gltf.images = new Array(images.length).fill({});\n}\n\nfunction loadBuffers(_x3, _x4, _x5) {\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction _loadBuffers() {\n  _loadBuffers = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(gltf, options, context) {\n    var i, buffer, fetch, uri, response, arrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            i = 0;\n\n          case 1:\n            if (!(i < gltf.json.buffers.length)) {\n              _context2.next = 18;\n              break;\n            }\n\n            buffer = gltf.json.buffers[i];\n\n            if (!buffer.uri) {\n              _context2.next = 15;\n              break;\n            }\n\n            fetch = context.fetch;\n            assert(fetch);\n            uri = resolveUrl(buffer.uri, options);\n            _context2.next = 9;\n            return fetch(uri);\n\n          case 9:\n            response = _context2.sent;\n            _context2.next = 12;\n            return response.arrayBuffer();\n\n          case 12:\n            arrayBuffer = _context2.sent;\n            gltf.buffers[i] = {\n              arrayBuffer: arrayBuffer,\n              byteOffset: 0,\n              byteLength: arrayBuffer.byteLength\n            };\n            delete buffer.uri;\n\n          case 15:\n            ++i;\n            _context2.next = 1;\n            break;\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction loadImages(_x6, _x7, _x8) {\n  return _loadImages.apply(this, arguments);\n}\n\nfunction _loadImages() {\n  _loadImages = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(gltf, options, context) {\n    var images, promises, i;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            images = gltf.json.images || [];\n            promises = [];\n\n            for (i = 0; i < images.length; ++i) {\n              promises.push(loadImage(gltf, images[i], i, options, context));\n            }\n\n            _context3.next = 5;\n            return Promise.all(promises);\n\n          case 5:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadImages.apply(this, arguments);\n}\n\nfunction loadImage(_x9, _x10, _x11, _x12, _x13) {\n  return _loadImage.apply(this, arguments);\n}\n\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(gltf, image, i, options, context) {\n    var fetch, parse, arrayBuffer, uri, response, array, parsedImage;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            fetch = context.fetch, parse = context.parse;\n\n            if (!image.uri) {\n              _context4.next = 9;\n              break;\n            }\n\n            uri = resolveUrl(image.uri, options);\n            _context4.next = 5;\n            return fetch(uri);\n\n          case 5:\n            response = _context4.sent;\n            _context4.next = 8;\n            return response.arrayBuffer();\n\n          case 8:\n            arrayBuffer = _context4.sent;\n\n          case 9:\n            if (Number.isFinite(image.bufferView)) {\n              array = getTypedArrayForBufferView(gltf.json, gltf.buffers, image.bufferView);\n              arrayBuffer = getZeroOffsetArrayBuffer(array.buffer, array.byteOffset, array.byteLength);\n            }\n\n            assert(arrayBuffer, 'glTF image has no data');\n            _context4.next = 13;\n            return parse(arrayBuffer, ImageLoader, {}, context);\n\n          case 13:\n            parsedImage = _context4.sent;\n            gltf.images[i] = parsedImage;\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadImage.apply(this, arguments);\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { parseGLTF } from './lib/parse-gltf';\nvar VERSION = typeof \"2.1.0-alpha.4\" !== 'undefined' ? \"2.1.0-alpha.4\" : 'latest';\nvar GLTFLoader = {\n  id: 'gltf',\n  name: 'glTF',\n  version: VERSION,\n  extensions: ['gltf', 'glb'],\n  mimeType: 'model/gltf+json',\n  text: true,\n  binary: true,\n  test: 'glTF',\n  parse: parse,\n  options: {\n    gltf: {\n      loadBuffers: true,\n      loadImages: true,\n      decompressMeshes: true,\n      postProcess: true\n    },\n    uri: '',\n    log: console\n  }\n};\nexport default GLTFLoader;\nexport function parse(_x) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer) {\n    var options,\n        context,\n        _options,\n        _options$byteOffset,\n        byteOffset,\n        gltf,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options = _objectSpread({}, GLTFLoader.options, {}, options);\n            options.gltf = _objectSpread({}, GLTFLoader.options.gltf, {}, options.gltf);\n            addDeprecatedGLTFOptions(options);\n            _options = options, _options$byteOffset = _options.byteOffset, byteOffset = _options$byteOffset === void 0 ? 0 : _options$byteOffset;\n            gltf = {};\n            _context.next = 9;\n            return parseGLTF(gltf, arrayBuffer, byteOffset, options, context);\n\n          case 9:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction addDeprecatedGLTFOptions(options) {\n  if ('fetchImages' in options) {\n    options.gltf.loadImages = options.fetchImages;\n  }\n\n  if ('createImages' in options) {\n    options.gltf.loadImages = options.createImages;\n  }\n\n  if ('fetchLinkedResources' in options) {\n    options.gltf.fetchBuffers = options.fetchLinkedResources;\n  }\n\n  if ('decompress' in options) {\n    options.gltf.decompressMeshes = options.decompress;\n  }\n\n  if ('decompress' in options.gltf) {\n    options.gltf.decompressMeshes = options.gltf.decompress;\n  }\n\n  if ('postProcess' in options) {\n    options.gltf.postProcess = options.postProcess;\n  }\n}","import \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { global, isBrowser, isWorker } from '../env-utils/globals';\nimport { requireFromFile, requireFromString } from './require-utils.node';\nimport assert from '../env-utils/assert';\nvar LATEST = 'beta';\nvar VERSION = typeof \"2.1.0-alpha.4\" !== 'undefined' ? \"2.1.0-alpha.4\" : LATEST;\nvar loadLibraryPromises = {};\nexport function loadLibrary(_x) {\n  return _loadLibrary.apply(this, arguments);\n}\n\nfunction _loadLibrary() {\n  _loadLibrary = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(libraryUrl) {\n    var moduleName,\n        options,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            moduleName = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n            if (moduleName) {\n              libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n            }\n\n            loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n            _context.next = 6;\n            return loadLibraryPromises[libraryUrl];\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadLibrary.apply(this, arguments);\n}\n\nexport function getLibraryUrl(library, moduleName, options) {\n  var modules = options.modules || {};\n\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  if (!isBrowser) {\n    return \"modules/\".concat(moduleName, \"/dist/libs/\").concat(library);\n  }\n\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\n\nfunction loadLibraryFromFile(_x2) {\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction _loadLibraryFromFile() {\n  _loadLibraryFromFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(libraryUrl) {\n    var _response, response, scriptSource;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!libraryUrl.endsWith('wasm')) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 3;\n            return fetch(libraryUrl);\n\n          case 3:\n            _response = _context2.sent;\n            _context2.next = 6;\n            return _response.arrayBuffer();\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n            if (isBrowser) {\n              _context2.next = 9;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", requireFromFile(libraryUrl));\n\n          case 9:\n            if (!isWorker) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", importScripts(libraryUrl));\n\n          case 11:\n            _context2.next = 13;\n            return fetch(libraryUrl);\n\n          case 13:\n            response = _context2.sent;\n            _context2.next = 16;\n            return response.text();\n\n          case 16:\n            scriptSource = _context2.sent;\n            return _context2.abrupt(\"return\", loadLibraryFromString(scriptSource, libraryUrl));\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n\n  var script = document.createElement('script');\n  script.id = id;\n\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n\n  document.body.appendChild(script);\n  return null;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadLibrary, global } from '@loaders.gl/loader-utils';\nvar loadDecoderPromise;\nvar loadEncoderPromise;\nexport function loadDracoDecoderModule(_x) {\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoDecoderModule() {\n  _loadDracoDecoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              draco: modules.draco3d.createDecoderModule()\n            });\n\n          case 3:\n            loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n            _context.next = 6;\n            return loadDecoderPromise;\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nexport function loadDracoEncoderModule(_x2) {\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoEncoderModule() {\n  _loadDracoEncoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              draco: modules.draco3d.createEncoderModule()\n            });\n\n          case 3:\n            loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n            _context2.next = 6;\n            return loadEncoderPromise;\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction loadDracoDecoder(_x3) {\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction _loadDracoDecoder() {\n  _loadDracoDecoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(options) {\n    var DracoDecoderModule, wasmBinary, _ref, _ref2;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.t0 = options.draco && options.draco.decoderType;\n            _context3.next = _context3.t0 === 'js' ? 3 : _context3.t0 === 'wasm' ? 7 : 7;\n            break;\n\n          case 3:\n            _context3.next = 5;\n            return loadLibrary('draco_decoder.js', 'draco', options);\n\n          case 5:\n            DracoDecoderModule = _context3.sent;\n            return _context3.abrupt(\"break\", 21);\n\n          case 7:\n            _context3.t1 = Promise;\n            _context3.next = 10;\n            return loadLibrary('draco_wasm_wrapper.js', 'draco', options);\n\n          case 10:\n            _context3.t2 = _context3.sent;\n            _context3.next = 13;\n            return loadLibrary('draco_decoder.wasm', 'draco', options);\n\n          case 13:\n            _context3.t3 = _context3.sent;\n            _context3.t4 = [_context3.t2, _context3.t3];\n            _context3.next = 17;\n            return _context3.t1.all.call(_context3.t1, _context3.t4);\n\n          case 17:\n            _ref = _context3.sent;\n            _ref2 = _slicedToArray(_ref, 2);\n            DracoDecoderModule = _ref2[0];\n            wasmBinary = _ref2[1];\n\n          case 21:\n            DracoDecoderModule = DracoDecoderModule || global.DracoDecoderModule;\n            _context3.next = 24;\n            return initializeDracoDecoder(DracoDecoderModule, wasmBinary);\n\n          case 24:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 25:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  var options = {};\n\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise(function (resolve) {\n    DracoDecoderModule(_objectSpread({}, options, {\n      onModuleLoaded: function onModuleLoaded(draco) {\n        return resolve({\n          draco: draco\n        });\n      }\n    }));\n  });\n}\n\nfunction loadDracoEncoder(_x4) {\n  return _loadDracoEncoder.apply(this, arguments);\n}\n\nfunction _loadDracoEncoder() {\n  _loadDracoEncoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(options) {\n    var DracoEncoderModule;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return loadLibrary('draco_encoder.js', 'draco', options);\n\n          case 2:\n            DracoEncoderModule = _context4.sent;\n            DracoEncoderModule = DracoEncoderModule || global.DracoEncoderModule;\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              DracoEncoderModule({\n                onModuleLoaded: function onModuleLoaded(draco) {\n                  return resolve({\n                    draco: draco\n                  });\n                }\n              });\n            }));\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadDracoEncoder.apply(this, arguments);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\nvar DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\nvar DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\n\nvar DracoParser = function () {\n  function DracoParser(draco) {\n    _classCallCheck(this, DracoParser);\n\n    this.draco = draco;\n  }\n\n  _createClass(DracoParser, [{\n    key: \"destroy\",\n    value: function destroy() {}\n  }, {\n    key: \"destroyGeometry\",\n    value: function destroyGeometry(dracoGeometry) {\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry.dracoGeometry);\n      }\n    }\n  }, {\n    key: \"parseSync\",\n    value: function parseSync(arrayBuffer) {\n      var buffer = new this.draco.DecoderBuffer();\n      buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n      var decoder = new this.draco.Decoder();\n      var data = {};\n      var dracoStatus;\n      var dracoGeometry;\n      var header;\n\n      try {\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n\n        switch (geometryType) {\n          case this.draco.TRIANGULAR_MESH:\n            dracoGeometry = new this.draco.Mesh();\n            dracoStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.TRIANGULAR_MESH,\n              faceCount: dracoGeometry.num_faces(),\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          case this.draco.POINT_CLOUD:\n            dracoGeometry = new this.draco.PointCloud();\n            dracoStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.POINT_CLOUD,\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          default:\n            throw new Error('Unknown DRACO geometry type.');\n        }\n\n        if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n          var message = \"DRACO decompression failed: \".concat(dracoStatus.error_msg());\n\n          if (dracoGeometry) {\n            this.draco.destroy(dracoGeometry);\n          }\n\n          throw new Error(message);\n        }\n\n        data.header = {\n          vertexCount: header.vertexCount\n        };\n        data.loaderData = {\n          header: header\n        };\n        this.extractDRACOGeometry(decoder, dracoGeometry, geometryType, data);\n      } finally {\n        this.draco.destroy(decoder);\n        this.draco.destroy(buffer);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"extractDRACOGeometry\",\n    value: function extractDRACOGeometry(decoder, dracoGeometry, geometryType, geometry) {\n      var attributes = this.getAttributes(decoder, dracoGeometry);\n      var positionAttribute = attributes.POSITION;\n\n      if (!positionAttribute) {\n        throw new Error('DRACO decompressor: No position attribute found.');\n      }\n\n      this.getPositionAttributeMetadata(positionAttribute);\n\n      if (geometryType === this.draco.TRIANGULAR_MESH) {\n        attributes.indices = this.drawMode === 'TRIANGLE_STRIP' ? this.getMeshStripIndices(decoder, dracoGeometry) : this.getMeshFaceIndices(decoder, dracoGeometry);\n        geometry.mode = this.drawMode === 'TRIANGLE_STRIP' ? 5 : 4;\n      } else {\n        geometry.mode = 0;\n      }\n\n      if (attributes.indices) {\n        geometry.indices = {\n          value: attributes.indices,\n          size: 1\n        };\n        delete attributes.indices;\n      }\n\n      geometry.attributes = attributes;\n      return geometry;\n    }\n  }, {\n    key: \"getPositionAttributeMetadata\",\n    value: function getPositionAttributeMetadata(positionAttribute) {\n      this.metadata = this.metadata || {};\n      this.metadata.attributes = this.metadata.attributes || {};\n      var posTransform = new this.draco.AttributeQuantizationTransform();\n\n      if (posTransform.InitFromAttribute(positionAttribute)) {\n        this.metadata.attributes.position.isQuantized = true;\n        this.metadata.attributes.position.maxRange = posTransform.range();\n        this.metadata.attributes.position.numQuantizationBits = posTransform.quantization_bits();\n        this.metadata.attributes.position.minValues = new Float32Array(3);\n\n        for (var i = 0; i < 3; ++i) {\n          this.metadata.attributes.position.minValues[i] = posTransform.min_value(i);\n        }\n      }\n\n      this.draco.destroy(posTransform);\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(decoder, dracoGeometry) {\n      var attributes = {};\n      var numPoints = dracoGeometry.num_points();\n\n      for (var attributeName in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n        var attributeType = this.draco[attributeName];\n        var attributeId = decoder.GetAttributeId(dracoGeometry, attributeType);\n\n        if (attributeId !== -1) {\n          var dracoAttribute = decoder.GetAttribute(dracoGeometry, attributeId);\n\n          var _this$getAttributeTyp = this.getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName),\n              typedArray = _this$getAttributeTyp.typedArray;\n\n          attributes[DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[attributeName]] = {\n            value: typedArray,\n            size: typedArray.length / numPoints\n          };\n        }\n      }\n\n      return attributes;\n    }\n  }, {\n    key: \"getMeshFaceIndices\",\n    value: function getMeshFaceIndices(decoder, dracoGeometry) {\n      var numFaces = dracoGeometry.num_faces();\n      var numIndices = numFaces * 3;\n      var indices = new Uint32Array(numIndices);\n      var dracoArray = new this.draco.DracoInt32Array();\n\n      for (var i = 0; i < numFaces; ++i) {\n        decoder.GetFaceFromMesh(dracoGeometry, i, dracoArray);\n        var index = i * 3;\n        indices[index] = dracoArray.GetValue(0);\n        indices[index + 1] = dracoArray.GetValue(1);\n        indices[index + 2] = dracoArray.GetValue(2);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getMeshStripIndices\",\n    value: function getMeshStripIndices(decoder, dracoGeometry) {\n      var dracoArray = new this.draco.DracoInt32Array();\n      decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      var indices = new Uint32Array(dracoArray.size());\n\n      for (var i = 0; i < dracoArray.size(); ++i) {\n        indices[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getAttributeTypedArray\",\n    value: function getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName) {\n      if (dracoAttribute.ptr === 0) {\n        var message = \"DRACO decode bad attribute \".concat(attributeName);\n        throw new Error(message);\n      }\n\n      var attributeType = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[dracoAttribute.data_type()];\n      var numComponents = dracoAttribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var dracoArray;\n      var typedArray;\n\n      switch (attributeType) {\n        case Float32Array:\n          dracoArray = new this.draco.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Float32Array(numValues);\n          break;\n\n        case Int8Array:\n          dracoArray = new this.draco.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int8Array(numValues);\n          break;\n\n        case Int16Array:\n          dracoArray = new this.draco.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int16Array(numValues);\n          break;\n\n        case Int32Array:\n          dracoArray = new this.draco.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int32Array(numValues);\n          break;\n\n        case Uint8Array:\n          dracoArray = new this.draco.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint8Array(numValues);\n          break;\n\n        case Uint16Array:\n          dracoArray = new this.draco.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint16Array(numValues);\n          break;\n\n        case Uint32Array:\n          dracoArray = new this.draco.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint32Array(numValues);\n          break;\n\n        default:\n          var errorMsg = 'DRACO decoder: unexpected attribute type.';\n          throw new Error(errorMsg);\n      }\n\n      for (var i = 0; i < numValues; i++) {\n        typedArray[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return {\n        typedArray: typedArray,\n        components: numComponents\n      };\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(arrayBuffer, options) {\n      return this.parseSync(arrayBuffer, options);\n    }\n  }]);\n\n  return DracoParser;\n}();\n\nexport { DracoParser as default };","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadDracoDecoderModule } from './lib/draco-module-loader';\nimport DracoParser from './lib/draco-parser';\nvar VERSION = typeof \"2.1.0-alpha.4\" !== 'undefined' ? \"2.1.0-alpha.4\" : 'latest';\nexport var DracoWorkerLoader = {\n  id: 'draco',\n  name: 'Draco',\n  version: VERSION,\n  extensions: ['drc'],\n  mimeType: 'application/octet-stream',\n  binary: true,\n  test: 'DRACO',\n  options: {\n    draco: {\n      decoderType: (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) === 'object' ? 'wasm' : 'js',\n      libraryPath: \"libs/\",\n      workerUrl: \"https://unpkg.com/@loaders.gl/draco@\".concat(VERSION, \"/dist/draco-loader.worker.js\"),\n      localWorkerUrl: \"modules/draco/dist/draco-loader.worker.dev.js\"\n    }\n  }\n};\nexport var DracoLoader = _objectSpread({}, DracoWorkerLoader, {\n  parse: parse\n});\n\nfunction parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context, loader) {\n    var _ref, draco, dracoParser;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return loadDracoDecoderModule(options);\n\n          case 2:\n            _ref = _context.sent;\n            draco = _ref.draco;\n            dracoParser = new DracoParser(draco);\n            _context.prev = 5;\n            return _context.abrupt(\"return\", dracoParser.parseSync(arrayBuffer, options));\n\n          case 7:\n            _context.prev = 7;\n            dracoParser.destroy();\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5,, 7, 10]]);\n  }));\n  return _parse.apply(this, arguments);\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Headers = function () {\n  function Headers(headers) {\n    _classCallCheck(this, Headers);\n\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function (value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function (header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function (name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  _createClass(Headers, [{\n    key: \"append\",\n    value: function append(name, value) {\n      name = normalizeName(name);\n      value = normalizeValue(value);\n      var oldValue = this.map[name];\n      this.map[name] = oldValue ? \"\".concat(oldValue, \", \").concat(value) : value;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      delete this.map[normalizeName(name)];\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      name = normalizeName(name);\n      return this.has(name) ? this.map[name] : null;\n    }\n  }, {\n    key: \"has\",\n    value: function has(name) {\n      return this.map.hasOwnProperty(normalizeName(name));\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.map[normalizeName(name)] = normalizeValue(value);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback, thisArg) {\n      for (var name in this.map) {\n        if (this.map.hasOwnProperty(name)) {\n          callback.call(thisArg, this.map[name], name, this);\n        }\n      }\n    }\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push(name);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      var items = [];\n      this.forEach(function (value) {\n        items.push(value);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"entries\",\n    value: function entries() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push([name, value]);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: Symbol.iterator,\n    value: _regeneratorRuntime.mark(function value() {\n      return _regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.delegateYield(this.entries(), \"t0\", 1);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this);\n    })\n  }]);\n\n  return Headers;\n}();\n\nexport { Headers as default };\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name);\n  }\n\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name');\n  }\n\n  return name.toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value);\n  }\n\n  return value;\n}\n\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function next() {\n      var value = items.shift();\n      return {\n        done: value === undefined,\n        value: value\n      };\n    }\n  };\n\n  iterator[Symbol.iterator] = function () {\n    return iterator;\n  };\n\n  return iterator;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport fs from 'fs';\nimport Headers from './headers.node';\nimport { readFile, createReadStream } from './read-file.node';\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nvar NodeFetchResponse = function () {\n  function NodeFetchResponse(url, options) {\n    _classCallCheck(this, NodeFetchResponse);\n\n    this._url = url;\n    this._ok = true;\n    this._status = 200;\n    this.options = options;\n    this.bodyUsed = false;\n    this._headers = null;\n  }\n\n  _createClass(NodeFetchResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.bodyUsed = true;\n                _context.next = 3;\n                return readFile(this.url, this.options);\n\n              case 3:\n                data = _context.sent;\n                return _context.abrupt(\"return\", data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var arrayBuffer, textDecoder;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.arrayBuffer();\n\n              case 2:\n                arrayBuffer = _context2.sent;\n                textDecoder = new TextDecoder();\n                return _context2.abrupt(\"return\", textDecoder.decode(arrayBuffer));\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getHeaders\",\n    value: function _getHeaders() {\n      var headers = {};\n\n      if (this.httpResponse) {\n        var httpHeaders = this.httpResponse.getHeaders();\n\n        for (var name in httpHeaders) {\n          var header = headers[name];\n          headers[name] = String(header);\n        }\n      } else {\n        var contentLength = this._getContentLength();\n\n        if (Number.isFinite(contentLength)) {\n          headers['Content-Length'] = contentLength;\n        }\n      }\n\n      return new Headers(headers);\n    }\n  }, {\n    key: \"_getContentLength\",\n    value: function _getContentLength() {\n      if (isRequestURL(this.url)) {\n        return null;\n      } else if (isDataURL(this.url)) {\n        return this.url.length - 'data:'.length;\n      }\n\n      var stats = fs.statSync(this.url);\n      return stats.size;\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return this._ok;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this._status;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._url;\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      this._headers = this._headers || this._getHeaders();\n      return this._headers;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      var url = this.url,\n          options = this.options;\n      this.bodyUsed = true;\n      return createReadStream(url, options);\n    }\n  }]);\n\n  return NodeFetchResponse;\n}();\n\nexport { NodeFetchResponse as default };","import NodeFetchResponse from './response.node';\nexport default function fetchNode(url, options) {\n  return new NodeFetchResponse(url, options);\n}","import { isBrowser, global } from './utils/globals';\nimport { TextDecoder, TextEncoder } from './text-encoding/encoding';\nimport * as base64 from './text-encoding/btoa.node';\nimport HeadersNode from './fetch-node/headers.node';\nimport ResponseNode from './fetch-node/response.node';\nimport fetchNode from './fetch-node/fetch.node';\nimport { encodeImageNode } from './images-node/encode-image.node';\nimport { parseImageNode } from './images-node/parse-image.node';\n\nif (!('TextEncoder' in global) && TextEncoder) {\n  global['TextEncoder'] = TextEncoder;\n}\n\nif (!('TextDecoder' in global) && TextDecoder) {\n  global['TextDecoder'] = TextDecoder;\n}\n\nif (!isBrowser && !('atob' in global) && base64.atob) {\n  global['atob'] = base64.atob;\n}\n\nif (!isBrowser && !('btoa' in global) && base64.btoa) {\n  global['btoa'] = base64.btoa;\n}\n\nif (!isBrowser && !('Headers' in global) && HeadersNode) {\n  global['Headers'] = HeadersNode;\n}\n\nif (!isBrowser && !('Response' in global) && ResponseNode) {\n  global['Response'] = ResponseNode;\n}\n\nif (!isBrowser && !('fetch' in global) && fetchNode) {\n  global['fetch'] = fetchNode;\n}\n\nif (!isBrowser && !('_encodeImageNode' in global) && encodeImageNode) {\n  global['_encodeImageNode'] = encodeImageNode;\n}\n\nif (!isBrowser && !('_parseImageNode' in global) && parseImageNode) {\n  global['_parseImageNode'] = parseImageNode;\n}","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '@luma.gl/webgl';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import {Matrix4} from 'math.gl';\nimport {log} from '@luma.gl/webgl';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class GroupNode extends ScenegraphNode {\n  constructor(props = {}) {\n    props = Array.isArray(props) ? {children: props} : props;\n    const {children = []} = props;\n    log.assert(\n      children.every(child => child instanceof ScenegraphNode),\n      'every child must an instance of ScenegraphNode'\n    );\n    super(props);\n    this.children = children;\n  }\n\n  // Unpacks arrays and nested arrays of children\n  add(...children) {\n    for (const child of children) {\n      if (Array.isArray(child)) {\n        this.add(...child);\n      } else {\n        this.children.push(child);\n      }\n    }\n    return this;\n  }\n\n  remove(child) {\n    const children = this.children;\n    const indexOf = children.indexOf(child);\n    if (indexOf > -1) {\n      children.splice(indexOf, 1);\n    }\n    return this;\n  }\n\n  removeAll() {\n    this.children = [];\n    return this;\n  }\n\n  delete() {\n    this.children.forEach(child => child.delete());\n    this.removeAll();\n    super.delete();\n  }\n\n  traverse(visitor, {worldMatrix = new Matrix4()} = {}) {\n    const modelMatrix = new Matrix4(worldMatrix).multiplyRight(this.matrix);\n\n    for (const child of this.children) {\n      if (child instanceof GroupNode) {\n        child.traverse(visitor, {worldMatrix: modelMatrix});\n      } else {\n        visitor(child, {worldMatrix: modelMatrix});\n      }\n    }\n  }\n}\n","import {assert, log} from '@luma.gl/webgl';\nimport {Matrix4, Quaternion} from 'math.gl';\n\n// TODO: import from loaders.gl?\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\n//\n\nfunction accessorToJsArray(accessor) {\n  if (!accessor._animation) {\n    const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n    const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n    const length = components * accessor.count;\n    const {buffer, byteOffset} = accessor.bufferView.data;\n\n    const array = new ArrayType(buffer, byteOffset + (accessor.byteOffset || 0), length);\n\n    if (components === 1) {\n      accessor._animation = Array.from(array);\n    } else {\n      // Slice array\n      const slicedArray = [];\n      for (let i = 0; i < array.length; i += components) {\n        slicedArray.push(Array.from(array.slice(i, i + components)));\n      }\n      accessor._animation = slicedArray;\n    }\n  }\n\n  return accessor._animation;\n}\n\n// TODO: share with GLTFInstantiator\nconst helperMatrix = new Matrix4();\nfunction applyTranslationRotationScale(gltfNode, node) {\n  node.matrix.identity();\n\n  if (gltfNode.translation) {\n    node.matrix.translate(gltfNode.translation);\n  }\n\n  if (gltfNode.rotation) {\n    const rotationMatrix = helperMatrix.fromQuaternion(gltfNode.rotation);\n    node.matrix.multiplyRight(rotationMatrix);\n  }\n\n  if (gltfNode.scale) {\n    node.matrix.scale(gltfNode.scale);\n  }\n}\n\nconst quaternion = new Quaternion();\nfunction linearInterpolate(target, path, start, stop, ratio) {\n  if (path === 'rotation') {\n    // SLERP when path is rotation\n    quaternion.slerp({start, target: stop, ratio});\n    for (let i = 0; i < quaternion.length; i++) {\n      target[path][i] = quaternion[i];\n    }\n  } else {\n    // regular interpolation\n    for (let i = 0; i < start.length; i++) {\n      target[path][i] = ratio * stop[i] + (1 - ratio) * start[i];\n    }\n  }\n}\n\nfunction cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio: t}) {\n  // TODO: Quaternion might need normalization\n  for (let i = 0; i < target[path].length; i++) {\n    const m0 = outTangent0[i] * tDiff;\n    const m1 = inTangent1[i] * tDiff;\n    target[path][i] =\n      (2 * Math.pow(t, 3) - 3 * Math.pow(t, 2) + 1) * p0[i] +\n      (Math.pow(t, 3) - 2 * Math.pow(t, 2) + t) * m0 +\n      (-2 * Math.pow(t, 3) + 3 * Math.pow(t, 2)) * p1[i] +\n      (Math.pow(t, 3) - Math.pow(t, 2)) * m1;\n  }\n}\n\nfunction stepInterpolate(target, path, value) {\n  for (let i = 0; i < value.length; i++) {\n    target[path][i] = value[i];\n  }\n}\n\nfunction interpolate(time, {input, interpolation, output}, target, path) {\n  const maxTime = input[input.length - 1];\n  const animationTime = time % maxTime;\n\n  const nextIndex = input.findIndex(t => t >= animationTime);\n  const previousIndex = Math.max(0, nextIndex - 1);\n\n  if (!Array.isArray(target[path])) {\n    switch (path) {\n      case 'translation':\n        target[path] = [0, 0, 0];\n        break;\n\n      case 'rotation':\n        target[path] = [0, 0, 0, 1];\n        break;\n\n      case 'scale':\n        target[path] = [1, 1, 1];\n        break;\n\n      default:\n        log.warn(`Bad animation path ${path}`)();\n    }\n  }\n\n  assert(target[path].length === output[previousIndex].length);\n  const previousTime = input[previousIndex];\n  const nextTime = input[nextIndex];\n\n  switch (interpolation) {\n    case 'STEP':\n      stepInterpolate(target, path, output[previousIndex]);\n      break;\n\n    case 'LINEAR':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        linearInterpolate(target, path, output[previousIndex], output[nextIndex], ratio);\n      }\n      break;\n\n    case 'CUBICSPLINE':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        const tDiff = nextTime - previousTime;\n\n        const p0 = output[3 * previousIndex + 1];\n        const outTangent0 = output[3 * previousIndex + 2];\n        const inTangent1 = output[3 * nextIndex + 0];\n        const p1 = output[3 * nextIndex + 1];\n\n        cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio});\n      }\n      break;\n\n    default:\n      log.warn(`Interpolation ${interpolation} not supported`)();\n      break;\n  }\n}\n\nclass GLTFAnimation {\n  constructor(props) {\n    this.startTime = 0;\n    this.playing = true;\n    this.speed = 1;\n\n    Object.assign(this, props);\n  }\n\n  animate(timeMs) {\n    if (!this.playing) {\n      return;\n    }\n\n    const absTime = timeMs / 1000;\n    const time = (absTime - this.startTime) * this.speed;\n\n    this.channels.forEach(({sampler, target, path}) => {\n      interpolate(time, sampler, target, path);\n      applyTranslationRotationScale(target, target._node);\n    });\n  }\n}\n\nexport default class GLTFAnimator {\n  constructor(gltf) {\n    this.animations = gltf.animations.map((animation, index) => {\n      const name = animation.name || `Animation-${index}`;\n      const samplers = animation.samplers.map(({input, interpolation = 'LINEAR', output}) => ({\n        input: accessorToJsArray(gltf.accessors[input]),\n        interpolation,\n        output: accessorToJsArray(gltf.accessors[output])\n      }));\n      const channels = animation.channels.map(({sampler, target}) => ({\n        sampler: samplers[sampler],\n        target: gltf.nodes[target.node],\n        path: target.path\n      }));\n      return new GLTFAnimation({name, channels});\n    });\n  }\n\n  // TODO(Tarek): This should be removed? (deck.gl is using this)\n  animate(time) {\n    this.setTime(time);\n  }\n\n  setTime(time) {\n    this.animations.forEach(animation => animation.animate(time));\n  }\n\n  getAnimations() {\n    return this.animations;\n  }\n}\n","import lights from '../lights/lights';\n\nimport vs from './pbr-vertex.glsl';\nimport fs from './pbr-fragment.glsl';\n\nexport default {\n  name: 'pbr',\n  vs,\n  fs,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  dependencies: [lights]\n};\n","export default `\\\nuniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else // HAS_TANGENTS != 1\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n`;\n","// This fragment shader defines a reference implementation for Physically Based Shading of\n// a microfacet surface material defined by a glTF model.\n//\n// Attribution:\n// MIT license, Copyright (c) 2016-2017 Mohamad Moneimne and Contributors\n\nexport default `\\\n#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n// WebGL 1.0 does not support non-constant in for loops\n// This provides an easy way to handle these cases\n// and still take advantage of WebGL 2.0\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n\n// debugging flags used for shader output of intermediate PBR variables\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n  float NdotL;                  // cos angle between normal and light direction\n  float NdotV;                  // cos angle between normal and view direction\n  float NdotH;                  // cos angle between normal and half vector\n  float LdotH;                  // cos angle between light direction and half vector\n  float VdotH;                  // cos angle between view direction and half vector\n  float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n  float metalness;              // metallic value at the surface\n  vec3 reflectance0;            // full reflectance color (normal incidence angle)\n  vec3 reflectance90;           // reflectance color at grazing angle\n  float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n  vec3 diffuseColor;            // color contribution from diffuse lighting\n  vec3 specularColor;           // color contribution from specular lighting\n  vec3 n;                       // normal at surface point\n  vec3 v;                       // vector from surface point to camera\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else //SRGB_FAST_APPROXIMATION\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif //SRGB_FAST_APPROXIMATION\n  return vec4(linOut,srgbIn.w);;\n#else //MANUAL_SRGB\n  return srgbIn;\n#endif //MANUAL_SRGB\n}\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\nvec3 getNormal()\n{\n  // Retrieve the tangent space matrix\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else // HAS_TANGENTS\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  // The tbn matrix is linearly interpolated, so we need to re-normalize\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0; // resolution of 512x512\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  // retrieve a scale and bias to F0. See [1], Figure 3\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n  // For presentation, this allows us to disable IBL terms\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across\n// the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface\n// for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes\n// from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);             // Vector from surface point to light\n  vec3 h = normalize(l+v);                        // Half vector between both l and v\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  // Calculate the shading terms for the microfacet specular shading model\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n\n  // Calculation of analytical lighting contribution\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n  // Metallic and Roughness material properties are packed together\n  // In glTF, these factors can be specified by fixed scalar values\n  // or from a metallic-roughness map\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n  // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n  // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n  // Roughness is authored as perceptual roughness; as is convention,\n  // convert to material roughness by squaring the perceptual roughness [2].\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n  // The albedo may be defined from a base texture or a flat color\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n  // Compute reflectance.\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n  // For typical incident reflectance range (between 4% to 100%) set the grazing\n  // reflectance to 100% for typical fresnel effect.\n  // For very low reflectance range on highly diffuse objects (below 4%),\n  // incrementally reduce grazing reflecance to 0%.\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();                          // normal at surface point\n  vec3 v = normalize(u_Camera - pbr_vPosition);  // Vector from surface point to camera\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0, // NdotL\n    NdotV,\n    0.0, // NdotH\n    0.0, // LdotH\n    0.0, // VdotH\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  // Apply ambient light\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n\n  // Apply directional light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n\n  // Apply point light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n\n  // Calculate lighting contribution from image based lighting source (IBL)\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n  // Apply optional PBR terms for additional (optional) shading\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n  // This section uses mix to override final color for reference app visualization\n  // of various parameters in the lighting equation.\n#ifdef PBR_DEBUG\n  // TODO: Figure out how to debug multiple lights\n\n  // color = mix(color, F, u_ScaleFGDSpec.x);\n  // color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n  // color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n  // color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n  // color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n`;\n","import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","import {Texture2D, hasFeature, FEATURES, log} from '@luma.gl/webgl';\n\nexport default class GLTFMaterialParser {\n  constructor(\n    gl,\n    {attributes, material, pbrDebug, imageBasedLightingEnvironment, lights, useTangents}\n  ) {\n    this.gl = gl;\n\n    this.defines = {\n      // TODO: Use EXT_sRGB if available (Standard in WebGL 2.0)\n      MANUAL_SRGB: 1,\n      SRGB_FAST_APPROXIMATION: 1\n    };\n\n    if (hasFeature(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n      this.defines.USE_TEX_LOD = 1;\n    }\n\n    this.uniforms = {\n      // TODO: find better values?\n      u_Camera: [0, 0, 0], // Model should override\n\n      u_MetallicRoughnessValues: [1, 1] // Default is 1 and 1\n    };\n\n    this.parameters = {};\n    this.generatedTextures = [];\n\n    if (imageBasedLightingEnvironment) {\n      this.uniforms.u_DiffuseEnvSampler = imageBasedLightingEnvironment.getDiffuseEnvSampler();\n      this.uniforms.u_SpecularEnvSampler = imageBasedLightingEnvironment.getSpecularEnvSampler();\n      this.uniforms.u_brdfLUT = imageBasedLightingEnvironment.getBrdfTexture();\n      this.uniforms.u_ScaleIBLAmbient = [1, 1];\n    }\n\n    if (pbrDebug) {\n      // Override final color for reference app visualization\n      // of various parameters in the lighting equation.\n      this.uniforms.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n      this.uniforms.u_ScaleFGDSpec = [0, 0, 0, 0];\n    }\n\n    this.defineIfPresent(attributes.NORMAL, 'HAS_NORMALS');\n    this.defineIfPresent(attributes.TANGENT && useTangents, 'HAS_TANGENTS');\n    this.defineIfPresent(attributes.TEXCOORD_0, 'HAS_UV');\n\n    this.defineIfPresent(imageBasedLightingEnvironment, 'USE_IBL');\n    this.defineIfPresent(lights, 'USE_LIGHTS');\n    this.defineIfPresent(pbrDebug, 'PBR_DEBUG');\n\n    if (material) {\n      this.parseMaterial(material);\n    }\n  }\n\n  defineIfPresent(value, name) {\n    if (value) {\n      this.defines[name] = 1;\n    }\n  }\n\n  parseTexture(gltfTexture, name, define = null) {\n    const parameters =\n      (gltfTexture.texture &&\n        gltfTexture.texture.sampler &&\n        gltfTexture.texture.sampler.parameters) ||\n      {};\n\n    const texture = new Texture2D(this.gl, {\n      id: gltfTexture.name || gltfTexture.id,\n      parameters,\n      pixelStore: {\n        [this.gl.UNPACK_FLIP_Y_WEBGL]: false\n      },\n      // Texture2D accepts a promise that returns an image as data (Async Textures)\n      data: gltfTexture.texture.source.image\n    });\n    this.uniforms[name] = texture;\n    this.defineIfPresent(define, define);\n    this.generatedTextures.push(texture);\n  }\n\n  parsePbrMetallicRoughness(pbrMetallicRoughness) {\n    if (pbrMetallicRoughness.baseColorTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.baseColorTexture,\n        'u_BaseColorSampler',\n        'HAS_BASECOLORMAP'\n      );\n    }\n    this.uniforms.u_BaseColorFactor = pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1];\n\n    if (pbrMetallicRoughness.metallicRoughnessTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.metallicRoughnessTexture,\n        'u_MetallicRoughnessSampler',\n        'HAS_METALROUGHNESSMAP'\n      );\n    }\n    const {metallicFactor = 1, roughnessFactor = 1} = pbrMetallicRoughness;\n    this.uniforms.u_MetallicRoughnessValues = [metallicFactor, roughnessFactor];\n  }\n\n  parseMaterial(material) {\n    if (material.pbrMetallicRoughness) {\n      this.parsePbrMetallicRoughness(material.pbrMetallicRoughness);\n    }\n    if (material.normalTexture) {\n      this.parseTexture(material.normalTexture, 'u_NormalSampler', 'HAS_NORMALMAP');\n\n      const {scale = 1} = material.normalTexture;\n      this.uniforms.u_NormalScale = scale;\n    }\n    if (material.occlusionTexture) {\n      this.parseTexture(material.occlusionTexture, 'u_OcclusionSampler', 'HAS_OCCLUSIONMAP');\n\n      const {strength = 1} = material.occlusionTexture;\n      this.uniforms.u_OcclusionStrength = strength;\n    }\n    if (material.emissiveTexture) {\n      this.parseTexture(material.emissiveTexture, 'u_EmissiveSampler', 'HAS_EMISSIVEMAP');\n      this.uniforms.u_EmissiveFactor = material.emissiveFactor || [0, 0, 0];\n    }\n    if (material.alphaMode === 'MASK') {\n      const {alphaCutoff = 0.5} = material;\n      this.defines.ALPHA_CUTOFF = 1;\n      this.uniforms.u_AlphaCutoff = alphaCutoff;\n    } else if (material.alphaMode === 'BLEND') {\n      log.warn('BLEND alphaMode might not work well because it requires mesh sorting')();\n      Object.assign(this.parameters, {\n        blend: true,\n        blendEquation: this.gl.FUNC_ADD,\n        blendFunc: [\n          this.gl.SRC_ALPHA,\n          this.gl.ONE_MINUS_SRC_ALPHA,\n          this.gl.ONE,\n          this.gl.ONE_MINUS_SRC_ALPHA\n        ]\n      });\n    }\n  }\n}\n","import {isWebGL2} from '@luma.gl/gltools';\nimport {log} from '@luma.gl/webgl';\nimport {pbr} from '@luma.gl/shadertools';\nimport {ModelNode} from '../scenegraph';\nimport GLTFMaterialParser from './gltf-material-parser';\n\nconst vs = `\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n`;\n\nconst fs = `\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n`;\n\nfunction addVersionToShader(gl, source) {\n  if (isWebGL2(gl)) {\n    return `#version 300 es\\n${source}`;\n  }\n\n  return source;\n}\n\nexport default function createGLTFModel(gl, options) {\n  const {id, drawMode, vertexCount, attributes, modelOptions} = options;\n  const materialParser = new GLTFMaterialParser(gl, options);\n\n  log.info(4, 'createGLTFModel defines: ', materialParser.defines)();\n\n  // Calculate managedResources\n  // TODO: Implement resource management logic that will\n  // not deallocate resources/textures/buffers that are shared\n  const managedResources = [];\n  managedResources.push(...materialParser.generatedTextures);\n  managedResources.push(...Object.values(attributes).map(attribute => attribute.buffer));\n\n  const model = new ModelNode(\n    gl,\n    Object.assign(\n      {\n        id,\n        drawMode,\n        vertexCount,\n        modules: [pbr],\n        defines: materialParser.defines,\n        parameters: materialParser.parameters,\n        vs: addVersionToShader(gl, vs),\n        fs: addVersionToShader(gl, fs),\n        managedResources\n      },\n      modelOptions\n    )\n  );\n\n  model.setProps({attributes});\n  model.setUniforms(materialParser.uniforms);\n\n  return model;\n}\n","import {Matrix4} from 'math.gl';\nimport {Buffer, Accessor, log} from '@luma.gl/webgl';\nimport {GroupNode} from '../scenegraph/';\n\nimport GLTFAnimator from './gltf-animator';\nimport createGLTFModel from './create-gltf-model';\n\n// TODO: import {ATTRIBUTE_TYPE_TO_COMPONENTS} from '@loaders.gl/gltf';\nconst ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nconst DEFAULT_OPTIONS = {\n  modelOptions: {},\n  pbrDebug: false,\n  imageBasedLightingEnvironment: null,\n  lights: true,\n  useTangents: false\n};\n\n// GLTF instantiator for luma.gl\n// Walks the parsed and resolved glTF structure and builds a luma.gl scenegraph\nexport default class GLTFInstantiator {\n  constructor(gl, options = {}) {\n    this.gl = gl;\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  instantiate(gltf) {\n    this.gltf = gltf;\n    const scenes = (gltf.scenes || []).map(scene => this.createScene(scene));\n    return scenes;\n  }\n\n  createAnimator() {\n    if (Array.isArray(this.gltf.animations)) {\n      return new GLTFAnimator(this.gltf);\n    }\n\n    return null;\n  }\n\n  createScene(gltfScene) {\n    const gltfNodes = gltfScene.nodes || [];\n    const nodes = gltfNodes.map(node => this.createNode(node));\n    const scene = new GroupNode({\n      id: gltfScene.name || gltfScene.id,\n      children: nodes\n    });\n    return scene;\n  }\n\n  createNode(gltfNode) {\n    if (!gltfNode._node) {\n      const gltfChildren = gltfNode.children || [];\n      const children = gltfChildren.map(child => this.createNode(child));\n\n      // Node can have children nodes and meshes at the same time\n      if (gltfNode.mesh) {\n        children.push(this.createMesh(gltfNode.mesh));\n      }\n\n      const node = new GroupNode({\n        id: gltfNode.name || gltfNode.id,\n        children\n      });\n\n      if (gltfNode.matrix) {\n        node.setMatrix(gltfNode.matrix);\n      } else {\n        node.matrix.identity();\n\n        if (gltfNode.translation) {\n          node.matrix.translate(gltfNode.translation);\n        }\n\n        if (gltfNode.rotation) {\n          const rotationMatrix = new Matrix4().fromQuaternion(gltfNode.rotation);\n          node.matrix.multiplyRight(rotationMatrix);\n        }\n\n        if (gltfNode.scale) {\n          node.matrix.scale(gltfNode.scale);\n        }\n      }\n      gltfNode._node = node;\n    }\n\n    return gltfNode._node;\n  }\n\n  createMesh(gltfMesh) {\n    // TODO: avoid changing the gltf\n    if (!gltfMesh._mesh) {\n      const gltfPrimitives = gltfMesh.primitives || [];\n      const primitives = gltfPrimitives.map((gltfPrimitive, i) =>\n        this.createPrimitive(gltfPrimitive, i, gltfMesh)\n      );\n      const mesh = new GroupNode({\n        id: gltfMesh.name || gltfMesh.id,\n        children: primitives\n      });\n      gltfMesh._mesh = mesh;\n    }\n\n    return gltfMesh._mesh;\n  }\n\n  getVertexCount(attributes) {\n    // TODO: implement this\n    log.warn('getVertexCount() not found')();\n  }\n\n  createPrimitive(gltfPrimitive, i, gltfMesh) {\n    return createGLTFModel(\n      this.gl,\n      Object.assign(\n        {\n          id: gltfPrimitive.name || `${gltfMesh.name || gltfMesh.id}-primitive-${i}`,\n          drawMode: gltfPrimitive.mode || 4,\n          vertexCount: gltfPrimitive.indices\n            ? gltfPrimitive.indices.count\n            : this.getVertexCount(gltfPrimitive.attributes),\n          attributes: this.createAttributes(gltfPrimitive.attributes, gltfPrimitive.indices),\n          material: gltfPrimitive.material\n        },\n        this.options\n      )\n    );\n  }\n\n  createAttributes(attributes, indices) {\n    const loadedAttributes = {};\n\n    Object.keys(attributes).forEach(attrName => {\n      loadedAttributes[attrName] = this.createAccessor(\n        attributes[attrName],\n        this.createBuffer(attributes[attrName], this.gl.ARRAY_BUFFER)\n      );\n    });\n\n    if (indices) {\n      loadedAttributes.indices = this.createAccessor(\n        indices,\n        this.createBuffer(indices, this.gl.ELEMENT_ARRAY_BUFFER)\n      );\n    }\n\n    log.info(4, 'glTF Attributes', {attributes, indices, generated: loadedAttributes})();\n\n    return loadedAttributes;\n  }\n\n  createBuffer(attribute, target) {\n    if (!attribute.bufferView) {\n      // Draco decoded files do not have a bufferView\n      attribute.bufferView = {};\n    }\n\n    const {bufferView} = attribute;\n    if (!bufferView.lumaBuffers) {\n      bufferView.lumaBuffers = {};\n    }\n\n    if (!bufferView.lumaBuffers[target]) {\n      bufferView.lumaBuffers[target] = new Buffer(this.gl, {\n        id: `from-${bufferView.id}`,\n        // Draco decoded files have attribute.value\n        data: bufferView.data || attribute.value,\n        target\n      });\n    }\n\n    return bufferView.lumaBuffers[target];\n  }\n\n  createAccessor(accessor, buffer) {\n    return new Accessor({\n      buffer,\n      offset: accessor.byteOffset || 0,\n      stride: accessor.bufferView.byteStride || 0,\n      type: accessor.componentType,\n      size: ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type]\n    });\n  }\n\n  // TODO - create sampler in WebGL2\n  createSampler(gltfSampler) {\n    return gltfSampler;\n  }\n\n  // Helper methods (move to GLTFLoader.resolve...?)\n\n  needsPOT() {\n    // Has a wrapping mode (either wrapS or wrapT) equal to REPEAT or MIRRORED_REPEAT, or\n    // Has a minification filter (minFilter) that uses mipmapping\n    // (NEAREST_MIPMAP_NEAREST, NEAREST_MIPMAP_LINEAR,\n    // LINEAR_MIPMAP_NEAREST, or LINEAR_MIPMAP_LINEAR).\n    return false;\n  }\n}\n","import GLTFInstantiator from './gltf-instantiator';\n\nexport default function createGLTFObjects(gl, gltf, options) {\n  const instantiator = new GLTFInstantiator(gl, options);\n  const scenes = instantiator.instantiate(gltf);\n  const animator = instantiator.createAnimator();\n\n  return {scenes, animator};\n}\n","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport assert from '../utils/assert';\nexport function generateUrl(getUrl, options, urlOptions) {\n  var url = getUrl;\n\n  if (typeof getUrl === 'function') {\n    url = getUrl(_objectSpread({}, options, {}, urlOptions));\n  }\n\n  assert(typeof url === 'string');\n  var baseUrl = options.baseUrl;\n\n  if (baseUrl) {\n    url = baseUrl[baseUrl.length - 1] === '/' ? \"\".concat(baseUrl).concat(url) : \"\".concat(baseUrl, \"/\").concat(url);\n  }\n\n  return resolvePath(url);\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isObject = function isObject(value) {\n  return value && _typeof(value) === 'object';\n};\n\nexport function asyncDeepMap(_x, _x2) {\n  return _asyncDeepMap.apply(this, arguments);\n}\n\nfunction _asyncDeepMap() {\n  _asyncDeepMap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tree, func) {\n    var options,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n            _context.next = 3;\n            return mapSubtree(tree, func, options);\n\n          case 3:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _asyncDeepMap.apply(this, arguments);\n}\n\nexport function mapSubtree(_x3, _x4, _x5) {\n  return _mapSubtree.apply(this, arguments);\n}\n\nfunction _mapSubtree() {\n  _mapSubtree = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(object, func, options) {\n    var url;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!Array.isArray(object)) {\n              _context2.next = 4;\n              break;\n            }\n\n            _context2.next = 3;\n            return mapArray(object, func, options);\n\n          case 3:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 4:\n            if (!isObject(object)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 7;\n            return mapObject(object, func, options);\n\n          case 7:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 8:\n            url = object;\n            _context2.next = 11;\n            return func(url, options);\n\n          case 11:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _mapSubtree.apply(this, arguments);\n}\n\nfunction mapObject(_x6, _x7, _x8) {\n  return _mapObject.apply(this, arguments);\n}\n\nfunction _mapObject() {\n  _mapObject = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(object, func, options) {\n    var promises, values, _loop, key;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            promises = [];\n            values = {};\n\n            _loop = function _loop(key) {\n              var url = object[key];\n              var promise = mapSubtree(url, func, options).then(function (value) {\n                values[key] = value;\n              });\n              promises.push(promise);\n            };\n\n            for (key in object) {\n              _loop(key);\n            }\n\n            _context3.next = 6;\n            return Promise.all(promises);\n\n          case 6:\n            return _context3.abrupt(\"return\", values);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _mapObject.apply(this, arguments);\n}\n\nfunction mapArray(_x9, _x10) {\n  return _mapArray.apply(this, arguments);\n}\n\nfunction _mapArray() {\n  _mapArray = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(urlArray, func) {\n    var options,\n        promises,\n        _args4 = arguments;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            options = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n            promises = urlArray.map(function (url) {\n              return mapSubtree(url, func, options);\n            });\n            _context4.next = 4;\n            return Promise.all(promises);\n\n          case 4:\n            return _context4.abrupt(\"return\", _context4.sent);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _mapArray.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { asyncDeepMap } from './async-deep-map';\nexport function deepLoad(_x, _x2, _x3) {\n  return _deepLoad.apply(this, arguments);\n}\n\nfunction _deepLoad() {\n  _deepLoad = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(urlTree, load, options) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return asyncDeepMap(urlTree, function (url) {\n              return shallowLoad(url, load, options);\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _deepLoad.apply(this, arguments);\n}\n\nexport function shallowLoad(_x4, _x5, _x6) {\n  return _shallowLoad.apply(this, arguments);\n}\n\nfunction _shallowLoad() {\n  _shallowLoad = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, load, options) {\n    var response, arrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(url, options.fetch);\n\n          case 2:\n            response = _context2.sent;\n            _context2.next = 5;\n            return response.arrayBuffer();\n\n          case 5:\n            arrayBuffer = _context2.sent;\n            _context2.next = 8;\n            return load(arrayBuffer, options);\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _shallowLoad.apply(this, arguments);\n}","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport parseImage from '../parsers/parse-image';\nimport { getImageSize } from '../parsed-image-api/parsed-image-api';\nimport { generateUrl } from './generate-url';\nimport { deepLoad, shallowLoad } from './deep-load';\nexport function loadImage(_x) {\n  return _loadImage.apply(this, arguments);\n}\n\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(getUrl) {\n    var options,\n        imageUrls,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            _context.next = 3;\n            return getImageUrls(getUrl, options);\n\n          case 3:\n            imageUrls = _context.sent;\n            _context.next = 6;\n            return deepLoad(imageUrls, parseImage, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadImage.apply(this, arguments);\n}\n\nexport function getImageUrls(_x2, _x3) {\n  return _getImageUrls.apply(this, arguments);\n}\n\nfunction _getImageUrls() {\n  _getImageUrls = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(getUrl, options) {\n    var urlOptions,\n        mipLevels,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            urlOptions = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n            mipLevels = options && options.image && options.image.mipLevels || 0;\n\n            if (!(mipLevels !== 0)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 5;\n            return getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions);\n\n          case 5:\n            _context2.t0 = _context2.sent;\n            _context2.next = 9;\n            break;\n\n          case 8:\n            _context2.t0 = generateUrl(getUrl, options, urlOptions);\n\n          case 9:\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getImageUrls.apply(this, arguments);\n}\n\nfunction getMipmappedImageUrls(_x4, _x5, _x6, _x7) {\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\n\nfunction _getMipmappedImageUrls() {\n  _getMipmappedImageUrls = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(getUrl, mipLevels, options, urlOptions) {\n    var urls, url, image, _getImageSize, width, height, mipLevel, _url;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            urls = [];\n\n            if (!(mipLevels === 'auto')) {\n              _context3.next = 9;\n              break;\n            }\n\n            url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n              lod: 0\n            }));\n            _context3.next = 5;\n            return shallowLoad(url, parseImage, options);\n\n          case 5:\n            image = _context3.sent;\n            _getImageSize = getImageSize(image), width = _getImageSize.width, height = _getImageSize.height;\n            mipLevels = getMipLevels({\n              width: width,\n              height: height\n            });\n            urls.push(url);\n\n          case 9:\n            assert(mipLevels > 0);\n\n            for (mipLevel = urls.length; mipLevel < mipLevels; ++mipLevel) {\n              _url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n                lod: mipLevel\n              }));\n              urls.push(_url);\n            }\n\n            return _context3.abrupt(\"return\", urls);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\n\nexport function getMipLevels(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n  return 1 + Math.floor(Math.log2(Math.max(width, height)));\n}","import GL from '@luma.gl/constants';\nimport {Texture2D, TextureCube} from '@luma.gl/webgl';\nimport {loadImage} from '@loaders.gl/images';\n\nexport default class GLTFEnvironment {\n  constructor(gl, {brdfLutUrl, getTexUrl, specularMipLevels = 10}) {\n    this.gl = gl;\n    this.brdfLutUrl = brdfLutUrl;\n    this.getTexUrl = getTexUrl;\n    this.specularMipLevels = specularMipLevels;\n  }\n\n  makeCube({id, getTextureForFace, parameters}) {\n    const pixels = {};\n    TextureCube.FACES.forEach(face => {\n      pixels[face] = getTextureForFace(face);\n    });\n    return new TextureCube(this.gl, {\n      id,\n      mipmaps: false,\n      parameters,\n      pixels\n    });\n  }\n\n  getDiffuseEnvSampler() {\n    if (!this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler = this.makeCube({\n        id: 'DiffuseEnvSampler',\n        getTextureForFace: dir => loadImage(this.getTexUrl('diffuse', dir, 0)),\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._DiffuseEnvSampler;\n  }\n\n  getSpecularEnvSampler() {\n    if (!this._SpecularEnvSampler) {\n      this._SpecularEnvSampler = this.makeCube({\n        id: 'SpecularEnvSampler',\n        getTextureForFace: dir => {\n          const imageArray = [];\n          for (let lod = 0; lod <= this.specularMipLevels - 1; lod++) {\n            imageArray.push(loadImage(this.getTexUrl('specular', dir, lod)));\n          }\n          return imageArray;\n        },\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR_MIPMAP_LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._SpecularEnvSampler;\n  }\n\n  getBrdfTexture() {\n    if (!this._BrdfTexture) {\n      this._BrdfTexture = new Texture2D(this.gl, {\n        id: 'brdfLUT',\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        },\n        // Texture2D accepts a promise that returns an image as data (Async Textures)\n        data: loadImage(this.brdfLutUrl)\n      });\n    }\n\n    return this._BrdfTexture;\n  }\n\n  delete() {\n    if (this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler.delete();\n      this._DiffuseEnvSampler = null;\n    }\n\n    if (this._SpecularEnvSampler) {\n      this._SpecularEnvSampler.delete();\n      this._SpecularEnvSampler = null;\n    }\n\n    if (this._BrdfTexture) {\n      this._BrdfTexture.delete();\n      this._BrdfTexture = null;\n    }\n  }\n}\n","/* eslint-disable camelcase */\n/* global document, window */\nimport {parse} from '@loaders.gl/core';\n// eslint-disable-next-line import/no-unresolved\nimport {GLTFLoader} from '@loaders.gl/gltf';\nimport {DracoLoader} from '@loaders.gl/draco';\nimport '@loaders.gl/polyfills'; // text-encoding polyfill for older MS browsers\nimport GL from '@luma.gl/constants';\nimport {AnimationLoop, Timeline} from '@luma.gl/engine';\nimport {clear, log, lumaStats} from '@luma.gl/webgl';\nimport {setParameters} from '@luma.gl/gltools';\nimport {createGLTFObjects, GLTFEnvironment, VRDisplay} from '@luma.gl/experimental';\nimport {Matrix4, radians} from 'math.gl';\n\nconst CUBE_FACE_TO_DIRECTION = {\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_X]: 'right',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_X]: 'left',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Y]: 'top',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Y]: 'bottom',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Z]: 'front',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Z]: 'back'\n};\n\n// Damaged helmet model used under creative commons: https://github.com/KhronosGroup/glTF-Sample-Models/tree/1ba47770292486e66ca1e1161857a6e5695c2631/2.0/DamagedHelmet\n// Papermill textures used under Apache 2.0: https://github.com/KhronosGroup/glTF-Sample-Viewer/blob/e2d487693fa2e6148bd29d05bc82586f5a002a45/LICENSE.md\n\nconst GLTF_BASE_URL =\n  'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/';\nconst GLTF_DEFAULT_MODEL = 'DamagedHelmet.glb';\n\n// URL for animated model\n// 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/InterpolationTest/glTF-Binary/InterpolationTest.glb';\n\nconst INFO_HTML = `\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Show\n  <select id=\"showSelector\">\n    <option value=\"0 0 0 0 0 0 0 0\">Final Result</option>\n\n    <option value=\"0 1 0 0 0 0 0 0\">Base Color</option>\n    <option value=\"0 0 1 0 0 0 0 0\">Metallic</option>\n    <option value=\"0 0 0 1 0 0 0 0\">Roughness</option>\n    <option value=\"1 0 0 0 0 0 0 0\">Diffuse</option>\n\n    <option value=\"0 0 0 0 1 0 0 0\">Specular Reflection</option>\n    <option value=\"0 0 0 0 0 1 0 0\">Geometric Occlusion</option>\n    <option value=\"0 0 0 0 0 0 1 0\">Microfacet Distribution</option>\n    <option value=\"0 0 0 0 0 0 0 1\">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights\n  <select id=\"lightSelector\">\n    <option value=\"default\">Default</option>\n    <option value=\"ambient\">Ambient Only</option>\n    <option value=\"directional1\">1x Directional (Red) + Ambient</option>\n    <option value=\"directional3\">3x Directional (RGB)</option>\n    <option value=\"point1far\">1x Point Light Far (Red) + Ambient</option>\n    <option value=\"point1near\">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light\n  <select id=\"iblSelector\">\n    <option value=\"exclusive\">On (Exclusive)</option>\n    <option value=\"addition\">On (Addition to Regular)</option>\n    <option value=\"off\">Off (Only Regular)</option>\n  </select>\n  <br>\n</div>\n<p><img src=\"https://img.shields.io/badge/WebVR-Supported-orange.svg\" /></p>\n`;\n\nconst LIGHT_SOURCES = {\n  default: {\n    directionalLights: [\n      {\n        color: [255, 255, 255],\n        direction: [0.0, 0.5, 0.5],\n        intensity: 1.0\n      }\n    ]\n  },\n  ambient: {\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional1: {\n    directionalLights: [\n      {\n        color: [255, 0, 0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional3: {\n    directionalLights: [\n      {\n        color: [255, 0.0, 0.0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 0.0, 255],\n        direction: [0.0, 0.0, 1.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 255, 0.0],\n        direction: [0.0, 1.0, 0.0],\n        intensity: 1.0\n      }\n    ]\n  },\n  point1far: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [200.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  point1near: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [10.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  }\n};\n\nconst DEFAULT_OPTIONS = {\n  pbrDebug: true,\n  imageBasedLightingEnvironment: null,\n  lights: false\n};\n\nasync function loadGLTF(urlOrPromise, gl, options) {\n  const data = typeof urlOrPromise === 'string' ? window.fetch(urlOrPromise) : urlOrPromise;\n  const gltf = await parse(data, GLTFLoader, {\n    ...options,\n    gl,\n    DracoLoader\n  });\n  const {scenes, animator} = createGLTFObjects(gl, gltf, options);\n\n  scenes[0].traverse((node, {worldMatrix}) => log.info(4, 'Using model: ', node)());\n  return {scenes, animator, gltf};\n}\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n  constructor(opts = {}) {\n    super({\n      ...opts,\n      glOptions: {\n        // Use to test gltf with webgl 1.0 and 2.0\n        webgl1: true,\n        webgl2: true,\n        // alpha causes issues with some glTF demos\n        alpha: false\n      }\n    });\n\n    const {modelFile = null, initialZoom = 2} = opts;\n    this.scenes = [];\n    this.animator = null;\n    this.gl = null;\n    this.modelFile = modelFile;\n\n    this.mouse = {\n      lastX: 0,\n      lastY: 0\n    };\n\n    this.translate = initialZoom;\n    this.rotation = [0, 0];\n    this.rotationStart = [0, 0];\n\n    this.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n    this.u_ScaleFGDSpec = [0, 0, 0, 0];\n\n    this.attachTimeline(new Timeline());\n    this.timeline.play();\n    this.timelineChannel = this.timeline.addChannel({\n      rate: 0.5\n    });\n    this.animationHandle = null;\n\n    this.onInitialize = this.onInitialize.bind(this);\n    this.onRender = this.onRender.bind(this);\n    this._setDisplay(new VRDisplay());\n  }\n\n  initalizeEventHandling(canvas) {\n    let pointerIsDown = false;\n\n    const pointerDown = (x, y) => {\n      this.mouse.lastX = x;\n      this.mouse.lastY = y;\n\n      this.rotationStart[0] = this.rotation[0];\n      this.rotationStart[1] = this.rotation[1];\n\n      pointerIsDown = true;\n    };\n\n    const pointerMove = (x, y) => {\n      if (!pointerIsDown) {\n        return;\n      }\n\n      const dX = x - this.mouse.lastX;\n      const dY = y - this.mouse.lastY;\n\n      this.rotation[0] = this.rotationStart[0] + dY / 100;\n      this.rotation[1] = this.rotationStart[1] + dX / 100;\n    };\n\n    canvas.addEventListener('wheel', e => {\n      this.translate += e.deltaY / 10;\n      if (this.translate < 0.5) {\n        this.translate = 0.5;\n      }\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mousedown', e => {\n      pointerDown(e.clientX, e.clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mouseup', e => {\n      pointerIsDown = false;\n    });\n\n    canvas.addEventListener('mousemove', e => {\n      pointerMove(e.clientX, e.clientY);\n    });\n\n    canvas.addEventListener('touchstart', e => {\n      pointerDown(e.touches[0].clientX, e.touches[0].clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('touchmove', e => {\n      pointerMove(e.touches[0].clientX, e.touches[0].clientY);\n    });\n\n    canvas.addEventListener('touchend', e => {\n      if (e.touches.length === 0) {\n        pointerIsDown = false;\n      }\n    });\n\n    canvas.addEventListener('dragover', e => {\n      e.dataTransfer.dropEffect = 'link';\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('drop', e => {\n      e.preventDefault();\n      if (e.dataTransfer.files && e.dataTransfer.files.length === 1) {\n        this._deleteScenes();\n        const readPromise = new Promise(resolve => {\n          const reader = new window.FileReader();\n          reader.onload = ev => resolve(ev.target.result);\n          reader.readAsArrayBuffer(e.dataTransfer.files[0]);\n        });\n\n        loadGLTF(readPromise, this.gl, this.loadOptions).then(result => this._fileLoaded(result));\n      }\n    });\n  }\n\n  _fileLoaded(loadResult) {\n    if (this.animationHandle !== null) {\n      this.timeline.detachAnimation(this.animationHandle);\n      this.animationHandle = null;\n    }\n    this.animator = null;\n\n    Object.assign(this, loadResult);\n    if (this.animator) {\n      this.animationHandle = this.timeline.attachAnimation(this.animator, this.timelineChannel);\n    }\n  }\n\n  onInitialize({gl, canvas}) {\n    setParameters(gl, {\n      depthTest: true,\n      blend: false\n    });\n\n    this.loadOptions = DEFAULT_OPTIONS;\n    this.environment = new GLTFEnvironment(gl, {\n      brdfLutUrl: `${GLTF_BASE_URL}/brdfLUT.png`,\n      getTexUrl: (type, dir, mipLevel) =>\n        `${GLTF_BASE_URL}/papermill/${type}/${type}_${CUBE_FACE_TO_DIRECTION[dir]}_${mipLevel}.jpg`\n    });\n    this.loadOptions.imageBasedLightingEnvironment = this.environment;\n\n    this.gl = gl;\n    if (this.modelFile) {\n      // options for unit testing\n      const options = {\n        pbrDebug: false,\n        imageBasedLightingEnvironment: null,\n        lights: true\n      };\n      loadGLTF(this.modelFile, this.gl, options).then(result => this._fileLoaded(result));\n    } else {\n      const modelUrl = GLTF_DEFAULT_MODEL;\n      loadGLTF(GLTF_BASE_URL + modelUrl, this.gl, this.loadOptions).then(result =>\n        this._fileLoaded(result)\n      );\n    }\n\n    const showSelector = document.getElementById('showSelector');\n    if (showSelector) {\n      showSelector.onchange = event => {\n        const value = showSelector.value.split(' ').map(x => parseFloat(x));\n        this.u_ScaleDiffBaseMR = value.slice(0, 4);\n        this.u_ScaleFGDSpec = value.slice(4);\n      };\n    }\n\n    const lightSelector = document.getElementById('lightSelector');\n    if (lightSelector) {\n      lightSelector.onchange = event => {\n        this.light = lightSelector.value;\n      };\n    }\n\n    const iblSelector = document.getElementById('iblSelector');\n    if (iblSelector) {\n      iblSelector.onchange = event => {\n        this._updateLightSettings(iblSelector.value);\n        this._rebuildModel();\n      };\n    }\n\n    this.initalizeEventHandling(canvas);\n  }\n\n  _updateLightSettings(value) {\n    switch (value) {\n      case 'exclusive':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: false\n        });\n        break;\n\n      case 'addition':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: true\n        });\n        break;\n\n      case 'off':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: null,\n          lights: true\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _rebuildModel() {\n    // Clean and regenerate model so we have new \"#defines\"\n    // TODO: Find better way to do this\n    (this.gltf.meshes || []).forEach(mesh => delete mesh._mesh);\n    (this.gltf.nodes || []).forEach(node => delete node._node);\n    (this.gltf.bufferViews || []).forEach(bufferView => delete bufferView.lumaBuffers);\n\n    this._deleteScenes();\n    Object.assign(this, createGLTFObjects(this.gl, this.gltf, this.loadOptions));\n  }\n\n  _deleteScenes() {\n    this.scenes.forEach(scene => scene.delete());\n    this.scenes = [];\n\n    lumaStats.get('Resource Counts').forEach(({name, count}) => {\n      log.info(3, `${name}: ${count}`)();\n    });\n  }\n\n  applyLight(model) {\n    // TODO: only do this when light changes\n    model.updateModuleSettings({\n      lightSources: LIGHT_SOURCES[this.light || 'default']\n    });\n  }\n\n  onRender({gl, time, aspect, viewMatrix, projectionMatrix}) {\n    clear(gl, {color: [0.2, 0.2, 0.2, 1.0], depth: true});\n\n    const [pitch, roll] = this.rotation;\n    const cameraPos = [\n      -this.translate * Math.sin(roll) * Math.cos(-pitch),\n      -this.translate * Math.sin(-pitch),\n      this.translate * Math.cos(roll) * Math.cos(-pitch)\n    ];\n\n    // TODO: find how to avoid using Array.from() to convert TypedArray to regular array\n    const uView = new Matrix4(viewMatrix ? Array.from(viewMatrix) : null)\n      .translate([0, 0, -this.translate])\n      .rotateX(pitch)\n      .rotateY(roll);\n\n    const uProjection = projectionMatrix\n      ? new Matrix4(Array.from(projectionMatrix))\n      : new Matrix4().perspective({fov: radians(40), aspect, near: 0.1, far: 9000});\n\n    if (!this.scenes.length) return false;\n\n    let success = true;\n\n    this.scenes[0].traverse((model, {worldMatrix}) => {\n      // In glTF, meshes and primitives do no have their own matrix.\n      const u_MVPMatrix = new Matrix4(uProjection).multiplyRight(uView).multiplyRight(worldMatrix);\n      this.applyLight(model);\n      success =\n        success &&\n        model.draw({\n          uniforms: {\n            u_Camera: cameraPos,\n            u_MVPMatrix,\n            u_ModelMatrix: worldMatrix,\n            u_NormalMatrix: new Matrix4(worldMatrix).invert().transpose(),\n\n            u_ScaleDiffBaseMR: this.u_ScaleDiffBaseMR,\n            u_ScaleFGDSpec: this.u_ScaleFGDSpec\n          },\n          parameters: model.props.parameters\n        });\n    });\n\n    return success;\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n\n  const infoDiv = document.createElement('div');\n  infoDiv.innerHTML = AppAnimationLoop.getInfo();\n  document.body.appendChild(infoDiv);\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/showcase/gltf/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function atob(string) {\n  return Buffer.from(string).toString('base64');\n}\nexport function btoa(base64) {\n  return Buffer.from(base64, 'base64').toString('ascii');\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.typed.uint8-array\";\nexport function bufferToArrayBuffer(buffer) {\n  if (Buffer.isBuffer(buffer)) {\n    var typedArray = new Uint8Array(buffer);\n    return typedArray.buffer;\n  }\n\n  return buffer;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './base/math-array';\nimport { checkNumber, checkVector } from '../lib/validators';\nimport assert from '../lib/assert';\nimport * as quat from 'gl-matrix/quat';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY_QUATERNION = [0, 0, 0, 1];\n\nvar Quaternion = function (_MathArray) {\n  _inherits(Quaternion, _MathArray);\n\n  function Quaternion() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Quaternion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Quaternion).call(this, -0, -0, -0, -0));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z, w);\n    }\n\n    return _this;\n  }\n\n  _createClass(Quaternion, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      this[3] = w;\n      return this.check();\n    }\n  }, {\n    key: \"fromMatrix3\",\n    value: function fromMatrix3(m) {\n      quat.fromMat3(this, m);\n      return this.check();\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      quat.identity(this);\n      return this.check();\n    }\n  }, {\n    key: \"fromAxisRotation\",\n    value: function fromAxisRotation(axis, rad) {\n      quat.setAxisAngle(this, axis, rad);\n      return this.check();\n    }\n  }, {\n    key: \"setAxisAngle\",\n    value: function setAxisAngle(axis, rad) {\n      return this.fromAxisRotation(axis, rad);\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return quat.length(this);\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared(a) {\n      return quat.squaredLength(this);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.dot only takes one argument');\n      }\n\n      return quat.dot(this, a);\n    }\n  }, {\n    key: \"rotationTo\",\n    value: function rotationTo(vectorA, vectorB) {\n      quat.rotationTo(this, vectorA, vectorB);\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.add only takes one argument');\n      }\n\n      quat.add(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"calculateW\",\n    value: function calculateW() {\n      quat.calculateW(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"conjugate\",\n    value: function conjugate() {\n      quat.conjugate(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      quat.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      quat.lerp(this, a, b, t);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a, b) {\n      assert(!b);\n      quat.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a, b) {\n      assert(!b);\n      quat.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.len();\n      var l = length > 0 ? 1 / length : 0;\n      this[0] = this[0] * l;\n      this[1] = this[1] * l;\n      this[2] = this[2] * l;\n      this[3] = this[3] * l;\n\n      if (length === 0) {\n        this[3] = 1;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(rad) {\n      quat.rotateX(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(rad) {\n      quat.rotateY(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(rad) {\n      quat.rotateZ(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(b) {\n      quat.scale(this, this, b);\n      return this.check();\n    }\n  }, {\n    key: \"slerp\",\n    value: function slerp(start, target, ratio) {\n      switch (arguments.length) {\n        case 1:\n          var _arguments$ = arguments[0];\n          var _arguments$$start = _arguments$.start;\n          start = _arguments$$start === void 0 ? IDENTITY_QUATERNION : _arguments$$start;\n          target = _arguments$.target;\n          ratio = _arguments$.ratio;\n          break;\n\n        case 2:\n          var _arguments = Array.prototype.slice.call(arguments);\n\n          target = _arguments[0];\n          ratio = _arguments[1];\n          start = this;\n          break;\n\n        default:\n      }\n\n      quat.slerp(this, start, target, ratio);\n      return this.check();\n    }\n  }, {\n    key: \"transformVector4\",\n    value: function transformVector4(vector) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : vector;\n      vec4.transformQuat(result, vector, this);\n      return checkVector(result, 4);\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"setFromAxisAngle\",\n    value: function setFromAxisAngle(axis, rad) {\n      return this.setAxisAngle(axis, rad);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(a, b) {\n      return this.multiplyLeft(a, b);\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      return this.multiplyRight(a, b);\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 4;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(value) {\n      return this[3] = checkNumber(value);\n    }\n  }]);\n\n  return Quaternion;\n}(MathArray);\n\nexport { Quaternion as default };","import setPrototypeOf from \"./setPrototypeOf\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport fs from 'fs';\nimport http from 'http';\nimport https from 'https';\nimport util from 'util';\nimport { toArrayBuffer } from './utils/to-array-buffer.node';\nimport decodeDataUri from './utils/decode-data-uri.node';\nimport { concatenateReadStream } from './utils/stream-utils.node';\nvar DEFAULT_OPTIONS = {\n  dataType: 'arraybuffer'\n};\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nexport function readFile(_x) {\n  return _readFile.apply(this, arguments);\n}\n\nfunction _readFile() {\n  _readFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url) {\n    var options,\n        _decodeDataUri,\n        arrayBuffer,\n        queryIndex,\n        readFileAsync,\n        buffer,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            options = getReadFileOptions(options);\n\n            if (!isDataURL(url)) {\n              _context.next = 5;\n              break;\n            }\n\n            _decodeDataUri = decodeDataUri(url), arrayBuffer = _decodeDataUri.arrayBuffer;\n            return _context.abrupt(\"return\", Promise.resolve(arrayBuffer));\n\n          case 5:\n            if (!isRequestURL(url)) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              options = _objectSpread({}, new URL(url), {}, options);\n              var request = url.startsWith('https:') ? https.request : http.request;\n              request(url, function (response) {\n                return concatenateReadStream(response).then(resolve, reject);\n              });\n            }));\n\n          case 7:\n            queryIndex = url && url.lastIndexOf('?');\n            url = queryIndex >= 0 ? url.substr(0, queryIndex) : url;\n            readFileAsync = util.promisify(fs.readFile);\n            _context.next = 12;\n            return readFileAsync(url, options);\n\n          case 12:\n            buffer = _context.sent;\n            return _context.abrupt(\"return\", buffer instanceof Buffer ? toArrayBuffer(buffer) : buffer);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _readFile.apply(this, arguments);\n}\n\nexport function createReadStream(_x2, _x3) {\n  return _createReadStream.apply(this, arguments);\n}\n\nfunction _createReadStream() {\n  _createReadStream = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!isDataURL(url)) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", decodeDataUri(url));\n\n          case 2:\n            if (isRequestURL(url)) {\n              _context2.next = 4;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", fs.createReadStream(url, options));\n\n          case 4:\n            return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n              options = _objectSpread({}, new URL(url), {}, options);\n              var request = url.startsWith('https:') ? https.request : http.request;\n              request(url, function (response) {\n                return resolve(response);\n              });\n            }));\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _createReadStream.apply(this, arguments);\n}\n\nfunction getReadFileOptions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  options = Object.assign({}, DEFAULT_OPTIONS, options);\n  options.responseType = options.responseType || options.dataType;\n\n  if (fs) {\n    options.encoding = options.encoding || (options.dataType === 'text' ? 'utf8' : null);\n  }\n\n  return options;\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nexport { isBrowser, global_ as global };","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","import { config } from 'math.gl';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon as _withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\nexport { default as _Polygon } from './addons/polygon';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate(this)) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport getPixels from 'get-pixels';\nimport util from 'util';\nexport function parseImageNode(_x, _x2, _x3) {\n  return _parseImageNode.apply(this, arguments);\n}\n\nfunction _parseImageNode() {\n  _parseImageNode = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, mimeType, options) {\n    var getPixelsAsync, buffer, ndarray, shape, layers;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            getPixelsAsync = util.promisify(getPixels);\n            buffer = arrayBuffer instanceof Buffer ? arrayBuffer : Buffer.from(arrayBuffer);\n            _context.next = 4;\n            return getPixelsAsync(buffer, mimeType);\n\n          case 4:\n            ndarray = _context.sent;\n            shape = _toConsumableArray(ndarray.shape);\n            layers = ndarray.shape.length === 4 ? ndarray.shape.shift() : 1;\n            return _context.abrupt(\"return\", {\n              shape: shape,\n              data: ndarray.data,\n              width: ndarray.shape[0],\n              height: ndarray.shape[1],\n              components: ndarray.shape[2],\n              layers: layers\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImageNode.apply(this, arguments);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName) {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName | '', \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Matrix).apply(this, arguments));\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0));\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          fovy = _ref4.fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nglobal['encoding-indexes'] = {};\n\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nvar floor = Math.floor;\n\nfunction ToDictionary(o) {\n  if (o === undefined) return {};\n  if (o === Object(o)) return o;\n  throw TypeError('Could not convert argument to dictionary');\n}\n\nfunction stringToCodePoints(string) {\n  var s = String(string);\n  var n = s.length;\n  var i = 0;\n  var u = [];\n\n  while (i < n) {\n    var c = s.charCodeAt(i);\n\n    if (c < 0xd800 || c > 0xdfff) {\n      u.push(c);\n    } else if (0xdc00 <= c && c <= 0xdfff) {\n      u.push(0xfffd);\n    } else if (0xd800 <= c && c <= 0xdbff) {\n      if (i === n - 1) {\n        u.push(0xfffd);\n      } else {\n        var d = s.charCodeAt(i + 1);\n\n        if (0xdc00 <= d && d <= 0xdfff) {\n          var a = c & 0x3ff;\n          var b = d & 0x3ff;\n          u.push(0x10000 + (a << 10) + b);\n          i += 1;\n        } else {\n          u.push(0xfffd);\n        }\n      }\n    }\n\n    i += 1;\n  }\n\n  return u;\n}\n\nfunction codePointsToString(code_points) {\n  var s = '';\n\n  for (var i = 0; i < code_points.length; ++i) {\n    var cp = code_points[i];\n\n    if (cp <= 0xffff) {\n      s += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      s += String.fromCharCode((cp >> 10) + 0xd800, (cp & 0x3ff) + 0xdc00);\n    }\n  }\n\n  return s;\n}\n\nfunction isASCIIByte(a) {\n  return 0x00 <= a && a <= 0x7f;\n}\n\nvar isASCIICodePoint = isASCIIByte;\nvar end_of_stream = -1;\n\nfunction Stream(tokens) {\n  this.tokens = [].slice.call(tokens);\n  this.tokens.reverse();\n}\n\nStream.prototype = {\n  endOfStream: function endOfStream() {\n    return !this.tokens.length;\n  },\n  read: function read() {\n    if (!this.tokens.length) return end_of_stream;\n    return this.tokens.pop();\n  },\n  prepend: function prepend(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.push(tokens.pop());\n      }\n    } else {\n      this.tokens.push(token);\n    }\n  },\n  push: function push(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.unshift(tokens.shift());\n      }\n    } else {\n      this.tokens.unshift(token);\n    }\n  }\n};\nvar finished = -1;\n\nfunction decoderError(fatal, opt_code_point) {\n  if (fatal) throw TypeError('Decoder error');\n  return opt_code_point || 0xfffd;\n}\n\nfunction encoderError(code_point) {\n  throw TypeError('The code point ' + code_point + ' could not be encoded.');\n}\n\nfunction Decoder() {}\n\nDecoder.prototype = {\n  handler: function handler(stream, bite) {}\n};\n\nfunction Encoder() {}\n\nEncoder.prototype = {\n  handler: function handler(stream, code_point) {}\n};\n\nfunction getEncoding(label) {\n  label = String(label).trim().toLowerCase();\n\n  if (Object.prototype.hasOwnProperty.call(label_to_encoding, label)) {\n    return label_to_encoding[label];\n  }\n\n  return null;\n}\n\nvar encodings = [{\n  encodings: [{\n    labels: ['unicode-1-1-utf-8', 'utf-8', 'utf8'],\n    name: 'UTF-8'\n  }],\n  heading: 'The Encoding'\n}, {\n  encodings: [{\n    labels: ['866', 'cp866', 'csibm866', 'ibm866'],\n    name: 'IBM866'\n  }, {\n    labels: ['csisolatin2', 'iso-8859-2', 'iso-ir-101', 'iso8859-2', 'iso88592', 'iso_8859-2', 'iso_8859-2:1987', 'l2', 'latin2'],\n    name: 'ISO-8859-2'\n  }, {\n    labels: ['csisolatin3', 'iso-8859-3', 'iso-ir-109', 'iso8859-3', 'iso88593', 'iso_8859-3', 'iso_8859-3:1988', 'l3', 'latin3'],\n    name: 'ISO-8859-3'\n  }, {\n    labels: ['csisolatin4', 'iso-8859-4', 'iso-ir-110', 'iso8859-4', 'iso88594', 'iso_8859-4', 'iso_8859-4:1988', 'l4', 'latin4'],\n    name: 'ISO-8859-4'\n  }, {\n    labels: ['csisolatincyrillic', 'cyrillic', 'iso-8859-5', 'iso-ir-144', 'iso8859-5', 'iso88595', 'iso_8859-5', 'iso_8859-5:1988'],\n    name: 'ISO-8859-5'\n  }, {\n    labels: ['arabic', 'asmo-708', 'csiso88596e', 'csiso88596i', 'csisolatinarabic', 'ecma-114', 'iso-8859-6', 'iso-8859-6-e', 'iso-8859-6-i', 'iso-ir-127', 'iso8859-6', 'iso88596', 'iso_8859-6', 'iso_8859-6:1987'],\n    name: 'ISO-8859-6'\n  }, {\n    labels: ['csisolatingreek', 'ecma-118', 'elot_928', 'greek', 'greek8', 'iso-8859-7', 'iso-ir-126', 'iso8859-7', 'iso88597', 'iso_8859-7', 'iso_8859-7:1987', 'sun_eu_greek'],\n    name: 'ISO-8859-7'\n  }, {\n    labels: ['csiso88598e', 'csisolatinhebrew', 'hebrew', 'iso-8859-8', 'iso-8859-8-e', 'iso-ir-138', 'iso8859-8', 'iso88598', 'iso_8859-8', 'iso_8859-8:1988', 'visual'],\n    name: 'ISO-8859-8'\n  }, {\n    labels: ['csiso88598i', 'iso-8859-8-i', 'logical'],\n    name: 'ISO-8859-8-I'\n  }, {\n    labels: ['csisolatin6', 'iso-8859-10', 'iso-ir-157', 'iso8859-10', 'iso885910', 'l6', 'latin6'],\n    name: 'ISO-8859-10'\n  }, {\n    labels: ['iso-8859-13', 'iso8859-13', 'iso885913'],\n    name: 'ISO-8859-13'\n  }, {\n    labels: ['iso-8859-14', 'iso8859-14', 'iso885914'],\n    name: 'ISO-8859-14'\n  }, {\n    labels: ['csisolatin9', 'iso-8859-15', 'iso8859-15', 'iso885915', 'iso_8859-15', 'l9'],\n    name: 'ISO-8859-15'\n  }, {\n    labels: ['iso-8859-16'],\n    name: 'ISO-8859-16'\n  }, {\n    labels: ['cskoi8r', 'koi', 'koi8', 'koi8-r', 'koi8_r'],\n    name: 'KOI8-R'\n  }, {\n    labels: ['koi8-ru', 'koi8-u'],\n    name: 'KOI8-U'\n  }, {\n    labels: ['csmacintosh', 'mac', 'macintosh', 'x-mac-roman'],\n    name: 'macintosh'\n  }, {\n    labels: ['dos-874', 'iso-8859-11', 'iso8859-11', 'iso885911', 'tis-620', 'windows-874'],\n    name: 'windows-874'\n  }, {\n    labels: ['cp1250', 'windows-1250', 'x-cp1250'],\n    name: 'windows-1250'\n  }, {\n    labels: ['cp1251', 'windows-1251', 'x-cp1251'],\n    name: 'windows-1251'\n  }, {\n    labels: ['ansi_x3.4-1968', 'ascii', 'cp1252', 'cp819', 'csisolatin1', 'ibm819', 'iso-8859-1', 'iso-ir-100', 'iso8859-1', 'iso88591', 'iso_8859-1', 'iso_8859-1:1987', 'l1', 'latin1', 'us-ascii', 'windows-1252', 'x-cp1252'],\n    name: 'windows-1252'\n  }, {\n    labels: ['cp1253', 'windows-1253', 'x-cp1253'],\n    name: 'windows-1253'\n  }, {\n    labels: ['cp1254', 'csisolatin5', 'iso-8859-9', 'iso-ir-148', 'iso8859-9', 'iso88599', 'iso_8859-9', 'iso_8859-9:1989', 'l5', 'latin5', 'windows-1254', 'x-cp1254'],\n    name: 'windows-1254'\n  }, {\n    labels: ['cp1255', 'windows-1255', 'x-cp1255'],\n    name: 'windows-1255'\n  }, {\n    labels: ['cp1256', 'windows-1256', 'x-cp1256'],\n    name: 'windows-1256'\n  }, {\n    labels: ['cp1257', 'windows-1257', 'x-cp1257'],\n    name: 'windows-1257'\n  }, {\n    labels: ['cp1258', 'windows-1258', 'x-cp1258'],\n    name: 'windows-1258'\n  }, {\n    labels: ['x-mac-cyrillic', 'x-mac-ukrainian'],\n    name: 'x-mac-cyrillic'\n  }],\n  heading: 'Legacy single-byte encodings'\n}, {\n  encodings: [{\n    labels: ['chinese', 'csgb2312', 'csiso58gb231280', 'gb2312', 'gb_2312', 'gb_2312-80', 'gbk', 'iso-ir-58', 'x-gbk'],\n    name: 'GBK'\n  }, {\n    labels: ['gb18030'],\n    name: 'gb18030'\n  }],\n  heading: 'Legacy multi-byte Chinese (simplified) encodings'\n}, {\n  encodings: [{\n    labels: ['big5', 'big5-hkscs', 'cn-big5', 'csbig5', 'x-x-big5'],\n    name: 'Big5'\n  }],\n  heading: 'Legacy multi-byte Chinese (traditional) encodings'\n}, {\n  encodings: [{\n    labels: ['cseucpkdfmtjapanese', 'euc-jp', 'x-euc-jp'],\n    name: 'EUC-JP'\n  }, {\n    labels: ['csiso2022jp', 'iso-2022-jp'],\n    name: 'ISO-2022-JP'\n  }, {\n    labels: ['csshiftjis', 'ms932', 'ms_kanji', 'shift-jis', 'shift_jis', 'sjis', 'windows-31j', 'x-sjis'],\n    name: 'Shift_JIS'\n  }],\n  heading: 'Legacy multi-byte Japanese encodings'\n}, {\n  encodings: [{\n    labels: ['cseuckr', 'csksc56011987', 'euc-kr', 'iso-ir-149', 'korean', 'ks_c_5601-1987', 'ks_c_5601-1989', 'ksc5601', 'ksc_5601', 'windows-949'],\n    name: 'EUC-KR'\n  }],\n  heading: 'Legacy multi-byte Korean encodings'\n}, {\n  encodings: [{\n    labels: ['csiso2022kr', 'hz-gb-2312', 'iso-2022-cn', 'iso-2022-cn-ext', 'iso-2022-kr'],\n    name: 'replacement'\n  }, {\n    labels: ['utf-16be'],\n    name: 'UTF-16BE'\n  }, {\n    labels: ['utf-16', 'utf-16le'],\n    name: 'UTF-16LE'\n  }, {\n    labels: ['x-user-defined'],\n    name: 'x-user-defined'\n  }],\n  heading: 'Legacy miscellaneous encodings'\n}];\nvar label_to_encoding = {};\nencodings.forEach(function (category) {\n  category.encodings.forEach(function (encoding) {\n    encoding.labels.forEach(function (label) {\n      label_to_encoding[label] = encoding;\n    });\n  });\n});\nvar encoders = {};\nvar decoders = {};\n\nfunction indexCodePointFor(pointer, index) {\n  if (!index) return null;\n  return index[pointer] || null;\n}\n\nfunction indexPointerFor(code_point, index) {\n  var pointer = index.indexOf(code_point);\n  return pointer === -1 ? null : pointer;\n}\n\nfunction index(name) {\n  if (!('encoding-indexes' in global)) {\n    throw Error('Indexes missing.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  return global['encoding-indexes'][name];\n}\n\nfunction indexGB18030RangesCodePointFor(pointer) {\n  if (pointer > 39419 && pointer < 189000 || pointer > 1237575) return null;\n  if (pointer === 7457) return 0xe7c7;\n  var offset = 0;\n  var code_point_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[0] <= pointer) {\n      offset = entry[0];\n      code_point_offset = entry[1];\n    } else {\n      break;\n    }\n  }\n\n  return code_point_offset + pointer - offset;\n}\n\nfunction indexGB18030RangesPointerFor(code_point) {\n  if (code_point === 0xe7c7) return 7457;\n  var offset = 0;\n  var pointer_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[1] <= code_point) {\n      offset = entry[1];\n      pointer_offset = entry[0];\n    } else {\n      break;\n    }\n  }\n\n  return pointer_offset + code_point - offset;\n}\n\nfunction indexShiftJISPointerFor(code_point) {\n  shift_jis_index = shift_jis_index || index('jis0208').map(function (code_point, pointer) {\n    return inRange(pointer, 8272, 8835) ? null : code_point;\n  });\n  var index_ = shift_jis_index;\n  return index_.indexOf(code_point);\n}\n\nvar shift_jis_index;\n\nfunction indexBig5PointerFor(code_point) {\n  big5_index_no_hkscs = big5_index_no_hkscs || index('big5').map(function (code_point, pointer) {\n    return pointer < (0xa1 - 0x81) * 157 ? null : code_point;\n  });\n  var index_ = big5_index_no_hkscs;\n\n  if (code_point === 0x2550 || code_point === 0x255e || code_point === 0x2561 || code_point === 0x256a || code_point === 0x5341 || code_point === 0x5345) {\n    return index_.lastIndexOf(code_point);\n  }\n\n  return indexPointerFor(code_point, index_);\n}\n\nvar big5_index_no_hkscs;\nvar DEFAULT_ENCODING = 'utf-8';\n\nfunction TextDecoder(label, options) {\n  if (!(this instanceof TextDecoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._decoder = null;\n  this._ignoreBOM = false;\n  this._BOMseen = false;\n  this._error_mode = 'replacement';\n  this._do_not_flush = false;\n  var encoding = getEncoding(label);\n  if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n  if (!decoders[encoding.name]) {\n    throw Error('Decoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  var dec = this;\n  dec._encoding = encoding;\n  if (Boolean(options['fatal'])) dec._error_mode = 'fatal';\n  if (Boolean(options['ignoreBOM'])) dec._ignoreBOM = true;\n\n  if (!Object.defineProperty) {\n    this.encoding = dec._encoding.name.toLowerCase();\n    this.fatal = dec._error_mode === 'fatal';\n    this.ignoreBOM = dec._ignoreBOM;\n  }\n\n  return dec;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextDecoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'fatal', {\n    get: function get() {\n      return this._error_mode === 'fatal';\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'ignoreBOM', {\n    get: function get() {\n      return this._ignoreBOM;\n    }\n  });\n}\n\nTextDecoder.prototype.decode = function decode(input, options) {\n  var bytes;\n\n  if (_typeof(input) === 'object' && input instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input);\n  } else if (_typeof(input) === 'object' && 'buffer' in input && input.buffer instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input.buffer, input.byteOffset, input.byteLength);\n  } else {\n    bytes = new Uint8Array(0);\n  }\n\n  options = ToDictionary(options);\n\n  if (!this._do_not_flush) {\n    this._decoder = decoders[this._encoding.name]({\n      fatal: this._error_mode === 'fatal'\n    });\n    this._BOMseen = false;\n  }\n\n  this._do_not_flush = Boolean(options['stream']);\n  var input_stream = new Stream(bytes);\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input_stream.read();\n    if (token === end_of_stream) break;\n    result = this._decoder.handler(input_stream, token);\n    if (result === finished) break;\n\n    if (result !== null) {\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n  }\n\n  if (!this._do_not_flush) {\n    do {\n      result = this._decoder.handler(input_stream, input_stream.read());\n      if (result === finished) break;\n      if (result === null) continue;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    } while (!input_stream.endOfStream());\n\n    this._decoder = null;\n  }\n\n  function serializeStream(stream) {\n    if (includes(['UTF-8', 'UTF-16LE', 'UTF-16BE'], this._encoding.name) && !this._ignoreBOM && !this._BOMseen) {\n      if (stream.length > 0 && stream[0] === 0xfeff) {\n        this._BOMseen = true;\n        stream.shift();\n      } else if (stream.length > 0) {\n        this._BOMseen = true;\n      } else {}\n    }\n\n    return codePointsToString(stream);\n  }\n\n  return serializeStream.call(this, output);\n};\n\nfunction TextEncoder(label, options) {\n  if (!(this instanceof TextEncoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._encoder = null;\n  this._do_not_flush = false;\n  this._fatal = Boolean(options['fatal']) ? 'fatal' : 'replacement';\n  var enc = this;\n\n  if (Boolean(options['NONSTANDARD_allowLegacyEncoding'])) {\n    label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n    var encoding = getEncoding(label);\n    if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n    if (!encoders[encoding.name]) {\n      throw Error('Encoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n    }\n\n    enc._encoding = encoding;\n  } else {\n    enc._encoding = getEncoding('utf-8');\n\n    if (label !== undefined && 'console' in global) {\n      console.warn('TextEncoder constructor called with encoding label, ' + 'which is ignored.');\n    }\n  }\n\n  if (!Object.defineProperty) this.encoding = enc._encoding.name.toLowerCase();\n  return enc;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextEncoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n}\n\nTextEncoder.prototype.encode = function encode(opt_string, options) {\n  opt_string = opt_string === undefined ? '' : String(opt_string);\n  options = ToDictionary(options);\n  if (!this._do_not_flush) this._encoder = encoders[this._encoding.name]({\n    fatal: this._fatal === 'fatal'\n  });\n  this._do_not_flush = Boolean(options['stream']);\n  var input = new Stream(stringToCodePoints(opt_string));\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input.read();\n    if (token === end_of_stream) break;\n    result = this._encoder.handler(input, token);\n    if (result === finished) break;\n    if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n  }\n\n  if (!this._do_not_flush) {\n    while (true) {\n      result = this._encoder.handler(input, input.read());\n      if (result === finished) break;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n\n    this._encoder = null;\n  }\n\n  return new Uint8Array(output);\n};\n\nfunction UTF8Decoder(options) {\n  var fatal = options.fatal;\n  var utf8_code_point = 0,\n      utf8_bytes_seen = 0,\n      utf8_bytes_needed = 0,\n      utf8_lower_boundary = 0x80,\n      utf8_upper_boundary = 0xbf;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && utf8_bytes_needed !== 0) {\n      utf8_bytes_needed = 0;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream) return finished;\n\n    if (utf8_bytes_needed === 0) {\n      if (inRange(bite, 0x00, 0x7f)) {\n        return bite;\n      } else if (inRange(bite, 0xc2, 0xdf)) {\n        utf8_bytes_needed = 1;\n        utf8_code_point = bite & 0x1f;\n      } else if (inRange(bite, 0xe0, 0xef)) {\n        if (bite === 0xe0) utf8_lower_boundary = 0xa0;\n        if (bite === 0xed) utf8_upper_boundary = 0x9f;\n        utf8_bytes_needed = 2;\n        utf8_code_point = bite & 0xf;\n      } else if (inRange(bite, 0xf0, 0xf4)) {\n        if (bite === 0xf0) utf8_lower_boundary = 0x90;\n        if (bite === 0xf4) utf8_upper_boundary = 0x8f;\n        utf8_bytes_needed = 3;\n        utf8_code_point = bite & 0x7;\n      } else {\n        return decoderError(fatal);\n      }\n\n      return null;\n    }\n\n    if (!inRange(bite, utf8_lower_boundary, utf8_upper_boundary)) {\n      utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n      utf8_lower_boundary = 0x80;\n      utf8_upper_boundary = 0xbf;\n      stream.prepend(bite);\n      return decoderError(fatal);\n    }\n\n    utf8_lower_boundary = 0x80;\n    utf8_upper_boundary = 0xbf;\n    utf8_code_point = utf8_code_point << 6 | bite & 0x3f;\n    utf8_bytes_seen += 1;\n    if (utf8_bytes_seen !== utf8_bytes_needed) return null;\n    var code_point = utf8_code_point;\n    utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n    return code_point;\n  };\n}\n\nfunction UTF8Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var count, offset;\n\n    if (inRange(code_point, 0x0080, 0x07ff)) {\n      count = 1;\n      offset = 0xc0;\n    } else if (inRange(code_point, 0x0800, 0xffff)) {\n      count = 2;\n      offset = 0xe0;\n    } else if (inRange(code_point, 0x10000, 0x10ffff)) {\n      count = 3;\n      offset = 0xf0;\n    }\n\n    var bytes = [(code_point >> 6 * count) + offset];\n\n    while (count > 0) {\n      var temp = code_point >> 6 * (count - 1);\n      bytes.push(0x80 | temp & 0x3f);\n      count -= 1;\n    }\n\n    return bytes;\n  };\n}\n\nencoders['UTF-8'] = function (options) {\n  return new UTF8Encoder(options);\n};\n\ndecoders['UTF-8'] = function (options) {\n  return new UTF8Decoder(options);\n};\n\nfunction SingleByteDecoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    var code_point = index[bite - 0x80];\n    if (code_point === null) return decoderError(fatal);\n    return code_point;\n  };\n}\n\nfunction SingleByteEncoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index);\n    if (pointer === null) encoderError(code_point);\n    return pointer + 0x80;\n  };\n}\n\n(function () {\n  if (!('encoding-indexes' in global)) return;\n  encodings.forEach(function (category) {\n    if (category.heading !== 'Legacy single-byte encodings') return;\n    category.encodings.forEach(function (encoding) {\n      var name = encoding.name;\n      var idx = index(name.toLowerCase());\n\n      decoders[name] = function (options) {\n        return new SingleByteDecoder(idx, options);\n      };\n\n      encoders[name] = function (options) {\n        return new SingleByteEncoder(idx, options);\n      };\n    });\n  });\n})();\n\ndecoders['GBK'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nencoders['GBK'] = function (options) {\n  return new GB18030Encoder(options, true);\n};\n\nfunction GB18030Decoder(options) {\n  var fatal = options.fatal;\n  var gb18030_first = 0x00,\n      gb18030_second = 0x00,\n      gb18030_third = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && gb18030_first === 0x00 && gb18030_second === 0x00 && gb18030_third === 0x00) {\n      return finished;\n    }\n\n    if (bite === end_of_stream && (gb18030_first !== 0x00 || gb18030_second !== 0x00 || gb18030_third !== 0x00)) {\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n      decoderError(fatal);\n    }\n\n    var code_point;\n\n    if (gb18030_third !== 0x00) {\n      code_point = null;\n\n      if (inRange(bite, 0x30, 0x39)) {\n        code_point = indexGB18030RangesCodePointFor((((gb18030_first - 0x81) * 10 + gb18030_second - 0x30) * 126 + gb18030_third - 0x81) * 10 + bite - 0x30);\n      }\n\n      var buffer = [gb18030_second, gb18030_third, bite];\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n\n      if (code_point === null) {\n        stream.prepend(buffer);\n        return decoderError(fatal);\n      }\n\n      return code_point;\n    }\n\n    if (gb18030_second !== 0x00) {\n      if (inRange(bite, 0x81, 0xfe)) {\n        gb18030_third = bite;\n        return null;\n      }\n\n      stream.prepend([gb18030_second, bite]);\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (gb18030_first !== 0x00) {\n      if (inRange(bite, 0x30, 0x39)) {\n        gb18030_second = bite;\n        return null;\n      }\n\n      var lead = gb18030_first;\n      var pointer = null;\n      gb18030_first = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - offset);\n      code_point = pointer === null ? null : indexCodePointFor(pointer, index('gb18030'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n    if (bite === 0x80) return 0x20ac;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      gb18030_first = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction GB18030Encoder(options, gbk_flag) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0xe5e5) return encoderError(code_point);\n    if (gbk_flag && code_point === 0x20ac) return 0x80;\n    var pointer = indexPointerFor(code_point, index('gb18030'));\n\n    if (pointer !== null) {\n      var lead = floor(pointer / 190) + 0x81;\n      var trail = pointer % 190;\n      var offset = trail < 0x3f ? 0x40 : 0x41;\n      return [lead, trail + offset];\n    }\n\n    if (gbk_flag) return encoderError(code_point);\n    pointer = indexGB18030RangesPointerFor(code_point);\n    var byte1 = floor(pointer / 10 / 126 / 10);\n    pointer = pointer - byte1 * 10 * 126 * 10;\n    var byte2 = floor(pointer / 10 / 126);\n    pointer = pointer - byte2 * 10 * 126;\n    var byte3 = floor(pointer / 10);\n    var byte4 = pointer - byte3 * 10;\n    return [byte1 + 0x81, byte2 + 0x30, byte3 + 0x81, byte4 + 0x30];\n  };\n}\n\nencoders['gb18030'] = function (options) {\n  return new GB18030Encoder(options);\n};\n\ndecoders['gb18030'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nfunction Big5Decoder(options) {\n  var fatal = options.fatal;\n  var Big5_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Big5_lead !== 0x00) {\n      Big5_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Big5_lead === 0x00) return finished;\n\n    if (Big5_lead !== 0x00) {\n      var lead = Big5_lead;\n      var pointer = null;\n      Big5_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x62;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0xa1, 0xfe)) pointer = (lead - 0x81) * 157 + (bite - offset);\n\n      switch (pointer) {\n        case 1133:\n          return [0x00ca, 0x0304];\n\n        case 1135:\n          return [0x00ca, 0x030c];\n\n        case 1164:\n          return [0x00ea, 0x0304];\n\n        case 1166:\n          return [0x00ea, 0x030c];\n      }\n\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('big5'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      Big5_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction Big5Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexBig5PointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 157) + 0x81;\n    if (lead < 0xa1) return encoderError(code_point);\n    var trail = pointer % 157;\n    var offset = trail < 0x3f ? 0x40 : 0x62;\n    return [lead, trail + offset];\n  };\n}\n\nencoders['Big5'] = function (options) {\n  return new Big5Encoder(options);\n};\n\ndecoders['Big5'] = function (options) {\n  return new Big5Decoder(options);\n};\n\nfunction EUCJPDecoder(options) {\n  var fatal = options.fatal;\n  var eucjp_jis0212_flag = false,\n      eucjp_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && eucjp_lead !== 0x00) {\n      eucjp_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && eucjp_lead === 0x00) return finished;\n\n    if (eucjp_lead === 0x8e && inRange(bite, 0xa1, 0xdf)) {\n      eucjp_lead = 0x00;\n      return 0xff61 - 0xa1 + bite;\n    }\n\n    if (eucjp_lead === 0x8f && inRange(bite, 0xa1, 0xfe)) {\n      eucjp_jis0212_flag = true;\n      eucjp_lead = bite;\n      return null;\n    }\n\n    if (eucjp_lead !== 0x00) {\n      var lead = eucjp_lead;\n      eucjp_lead = 0x00;\n      var code_point = null;\n\n      if (inRange(lead, 0xa1, 0xfe) && inRange(bite, 0xa1, 0xfe)) {\n        code_point = indexCodePointFor((lead - 0xa1) * 94 + (bite - 0xa1), index(!eucjp_jis0212_flag ? 'jis0208' : 'jis0212'));\n      }\n\n      eucjp_jis0212_flag = false;\n      if (!inRange(bite, 0xa1, 0xfe)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (bite === 0x8e || bite === 0x8f || inRange(bite, 0xa1, 0xfe)) {\n      eucjp_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCJPEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return [0x8e, code_point - 0xff61 + 0xa1];\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 94) + 0xa1;\n    var trail = pointer % 94 + 0xa1;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-JP'] = function (options) {\n  return new EUCJPEncoder(options);\n};\n\ndecoders['EUC-JP'] = function (options) {\n  return new EUCJPDecoder(options);\n};\n\nfunction ISO2022JPDecoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    Katakana: 2,\n    LeadByte: 3,\n    TrailByte: 4,\n    EscapeStart: 5,\n    Escape: 6\n  };\n  var iso2022jp_decoder_state = states.ASCII,\n      iso2022jp_decoder_output_state = states.ASCII,\n      iso2022jp_lead = 0x00,\n      iso2022jp_output_flag = false;\n\n  this.handler = function (stream, bite) {\n    switch (iso2022jp_decoder_state) {\n      default:\n      case states.ASCII:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Roman:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (bite === 0x5c) {\n          iso2022jp_output_flag = false;\n          return 0x00a5;\n        }\n\n        if (bite === 0x7e) {\n          iso2022jp_output_flag = false;\n          return 0x203e;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b && bite !== 0x5c && bite !== 0x7e) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Katakana:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x5f)) {\n          iso2022jp_output_flag = false;\n          return 0xff61 - 0x21 + bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.LeadByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_output_flag = false;\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.TrailByte;\n          return null;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.TrailByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return decoderError(fatal);\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_decoder_state = states.LeadByte;\n          var pointer = (iso2022jp_lead - 0x21) * 94 + bite - 0x21;\n          var code_point = indexCodePointFor(pointer, index('jis0208'));\n          if (code_point === null) return decoderError(fatal);\n          return code_point;\n        }\n\n        if (bite === end_of_stream) {\n          iso2022jp_decoder_state = states.LeadByte;\n          stream.prepend(bite);\n          return decoderError(fatal);\n        }\n\n        iso2022jp_decoder_state = states.LeadByte;\n        return decoderError(fatal);\n\n      case states.EscapeStart:\n        if (bite === 0x24 || bite === 0x28) {\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.Escape;\n          return null;\n        }\n\n        stream.prepend(bite);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n\n      case states.Escape:\n        var lead = iso2022jp_lead;\n        iso2022jp_lead = 0x00;\n        var state = null;\n        if (lead === 0x28 && bite === 0x42) state = states.ASCII;\n        if (lead === 0x28 && bite === 0x4a) state = states.Roman;\n        if (lead === 0x28 && bite === 0x49) state = states.Katakana;\n        if (lead === 0x24 && (bite === 0x40 || bite === 0x42)) state = states.LeadByte;\n\n        if (state !== null) {\n          iso2022jp_decoder_state = iso2022jp_decoder_state = state;\n          var output_flag = iso2022jp_output_flag;\n          iso2022jp_output_flag = true;\n          return !output_flag ? null : decoderError(fatal);\n        }\n\n        stream.prepend([lead, bite]);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n    }\n  };\n}\n\nfunction ISO2022JPEncoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    jis0208: 2\n  };\n  var iso2022jp_state = states.ASCII;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if (code_point === end_of_stream && iso2022jp_state === states.ASCII) return finished;\n\n    if ((iso2022jp_state === states.ASCII || iso2022jp_state === states.Roman) && (code_point === 0x000e || code_point === 0x000f || code_point === 0x001b)) {\n      return encoderError(0xfffd);\n    }\n\n    if (iso2022jp_state === states.ASCII && isASCIICodePoint(code_point)) return code_point;\n\n    if (iso2022jp_state === states.Roman && (isASCIICodePoint(code_point) && code_point !== 0x005c && code_point !== 0x007e || code_point == 0x00a5 || code_point == 0x203e)) {\n      if (isASCIICodePoint(code_point)) return code_point;\n      if (code_point === 0x00a5) return 0x5c;\n      if (code_point === 0x203e) return 0x7e;\n    }\n\n    if (isASCIICodePoint(code_point) && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if ((code_point === 0x00a5 || code_point === 0x203e) && iso2022jp_state !== states.Roman) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.Roman;\n      return [0x1b, 0x28, 0x4a];\n    }\n\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n\n    if (iso2022jp_state !== states.jis0208) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.jis0208;\n      return [0x1b, 0x24, 0x42];\n    }\n\n    var lead = floor(pointer / 94) + 0x21;\n    var trail = pointer % 94 + 0x21;\n    return [lead, trail];\n  };\n}\n\nencoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPEncoder(options);\n};\n\ndecoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPDecoder(options);\n};\n\nfunction ShiftJISDecoder(options) {\n  var fatal = options.fatal;\n  var Shift_JIS_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Shift_JIS_lead !== 0x00) {\n      Shift_JIS_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Shift_JIS_lead === 0x00) return finished;\n\n    if (Shift_JIS_lead !== 0x00) {\n      var lead = Shift_JIS_lead;\n      var pointer = null;\n      Shift_JIS_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      var lead_offset = lead < 0xa0 ? 0x81 : 0xc1;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfc)) pointer = (lead - lead_offset) * 188 + bite - offset;\n      if (inRange(pointer, 8836, 10715)) return 0xe000 - 8836 + pointer;\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('jis0208'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite) || bite === 0x80) return bite;\n    if (inRange(bite, 0xa1, 0xdf)) return 0xff61 - 0xa1 + bite;\n\n    if (inRange(bite, 0x81, 0x9f) || inRange(bite, 0xe0, 0xfc)) {\n      Shift_JIS_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction ShiftJISEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point) || code_point === 0x0080) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return code_point - 0xff61 + 0xa1;\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexShiftJISPointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 188);\n    var lead_offset = lead < 0x1f ? 0x81 : 0xc1;\n    var trail = pointer % 188;\n    var offset = trail < 0x3f ? 0x40 : 0x41;\n    return [lead + lead_offset, trail + offset];\n  };\n}\n\nencoders['Shift_JIS'] = function (options) {\n  return new ShiftJISEncoder(options);\n};\n\ndecoders['Shift_JIS'] = function (options) {\n  return new ShiftJISDecoder(options);\n};\n\nfunction EUCKRDecoder(options) {\n  var fatal = options.fatal;\n  var euckr_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && euckr_lead !== 0) {\n      euckr_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && euckr_lead === 0) return finished;\n\n    if (euckr_lead !== 0x00) {\n      var lead = euckr_lead;\n      var pointer = null;\n      euckr_lead = 0x00;\n      if (inRange(bite, 0x41, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - 0x41);\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('euc-kr'));\n      if (pointer === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      euckr_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCKREncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index('euc-kr'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 190) + 0x81;\n    var trail = pointer % 190 + 0x41;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-KR'] = function (options) {\n  return new EUCKREncoder(options);\n};\n\ndecoders['EUC-KR'] = function (options) {\n  return new EUCKRDecoder(options);\n};\n\nfunction convertCodeUnitToBytes(code_unit, utf16be) {\n  var byte1 = code_unit >> 8;\n  var byte2 = code_unit & 0x00ff;\n  if (utf16be) return [byte1, byte2];\n  return [byte2, byte1];\n}\n\nfunction UTF16Decoder(utf16_be, options) {\n  var fatal = options.fatal;\n  var utf16_lead_byte = null,\n      utf16_lead_surrogate = null;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && (utf16_lead_byte !== null || utf16_lead_surrogate !== null)) {\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && utf16_lead_byte === null && utf16_lead_surrogate === null) {\n      return finished;\n    }\n\n    if (utf16_lead_byte === null) {\n      utf16_lead_byte = bite;\n      return null;\n    }\n\n    var code_unit;\n\n    if (utf16_be) {\n      code_unit = (utf16_lead_byte << 8) + bite;\n    } else {\n      code_unit = (bite << 8) + utf16_lead_byte;\n    }\n\n    utf16_lead_byte = null;\n\n    if (utf16_lead_surrogate !== null) {\n      var lead_surrogate = utf16_lead_surrogate;\n      utf16_lead_surrogate = null;\n\n      if (inRange(code_unit, 0xdc00, 0xdfff)) {\n        return 0x10000 + (lead_surrogate - 0xd800) * 0x400 + (code_unit - 0xdc00);\n      }\n\n      stream.prepend(convertCodeUnitToBytes(code_unit, utf16_be));\n      return decoderError(fatal);\n    }\n\n    if (inRange(code_unit, 0xd800, 0xdbff)) {\n      utf16_lead_surrogate = code_unit;\n      return null;\n    }\n\n    if (inRange(code_unit, 0xdc00, 0xdfff)) return decoderError(fatal);\n    return code_unit;\n  };\n}\n\nfunction UTF16Encoder(utf16_be, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (inRange(code_point, 0x0000, 0xffff)) return convertCodeUnitToBytes(code_point, utf16_be);\n    var lead = convertCodeUnitToBytes((code_point - 0x10000 >> 10) + 0xd800, utf16_be);\n    var trail = convertCodeUnitToBytes((code_point - 0x10000 & 0x3ff) + 0xdc00, utf16_be);\n    return lead.concat(trail);\n  };\n}\n\nencoders['UTF-16BE'] = function (options) {\n  return new UTF16Encoder(true, options);\n};\n\ndecoders['UTF-16BE'] = function (options) {\n  return new UTF16Decoder(true, options);\n};\n\nencoders['UTF-16LE'] = function (options) {\n  return new UTF16Encoder(false, options);\n};\n\ndecoders['UTF-16LE'] = function (options) {\n  return new UTF16Decoder(false, options);\n};\n\nfunction XUserDefinedDecoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    return 0xf780 + bite - 0x80;\n  };\n}\n\nfunction XUserDefinedEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (inRange(code_point, 0xf780, 0xf7ff)) return code_point - 0xf780 + 0x80;\n    return encoderError(code_point);\n  };\n}\n\nencoders['x-user-defined'] = function (options) {\n  return new XUserDefinedEncoder(options);\n};\n\ndecoders['x-user-defined'] = function (options) {\n  return new XUserDefinedDecoder(options);\n};\n\nexport { TextEncoder, TextDecoder };","import \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.index-of\";\nimport { toArrayBuffer } from './to-array-buffer.node';\nexport default function decodeDataUri(uri) {\n  var dataIndex = uri.indexOf(',');\n  var buffer;\n  var mimeType;\n\n  if (uri.slice(dataIndex - 7, dataIndex) === ';base64') {\n    buffer = new Buffer(uri.slice(dataIndex + 1), 'base64');\n    mimeType = uri.slice(5, dataIndex - 7).trim();\n  } else {\n    buffer = new Buffer(decodeURIComponent(uri.slice(dataIndex + 1)));\n    mimeType = uri.slice(5, dataIndex).trim();\n  }\n\n  if (!mimeType) {\n    mimeType = 'text/plain;charset=US-ASCII';\n  } else if (mimeType[0] === ';') {\n    mimeType = \"text/plain\".concat(mimeType);\n  }\n\n  return {\n    arrayBuffer: toArrayBuffer(buffer),\n    mimeType: mimeType\n  };\n}","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../../utils/assert';\n\nvar isArrayBuffer = function isArrayBuffer(x) {\n  return x && x instanceof ArrayBuffer;\n};\n\nvar isBuffer = function isBuffer(x) {\n  return x && x instanceof Buffer;\n};\n\nexport function toArrayBuffer(data) {\n  if (isArrayBuffer(data)) {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    var typedArray = new Uint8Array(data);\n    return typedArray.buffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport savePixels from 'save-pixels';\nimport ndarray from 'ndarray';\nimport { bufferToArrayBuffer } from '../utils/to-array-buffer.node';\nexport function encodeImageToStreamNode(image, options) {\n  var type = options.type ? options.type.replace('image/', '') : 'jpeg';\n  var pixels = ndarray(image.data, [image.width, image.height, 4], [4, image.width * 4, 1], 0);\n  return savePixels(pixels, type, options);\n}\nexport function encodeImageNode(image, options) {\n  var imageStream = encodeImageToStreamNode(image, options);\n  return new Promise(function (resolve) {\n    var buffers = [];\n    imageStream.on('data', function (buffer) {\n      return buffers.push(buffer);\n    });\n    imageStream.on('end', function () {\n      var buffer = Buffer.concat(buffers);\n      resolve(bufferToArrayBuffer(buffer));\n    });\n  });\n}","export default `\\\n#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n\n // Constant-Linear-Exponential\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n`;\n","import lightingShader from './lights.glsl';\n\nexport default {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\n\nconst INITIAL_MODULE_OPTIONS = {};\n\n// Take color 0-255 and intensity as input and output 0.0-1.0 range\nfunction convertColor({color = [0, 0, 0], intensity = 1.0} = {}) {\n  return color.map(component => (component * intensity) / 255.0);\n}\n\nfunction getLightSourceUniforms({ambientLight, pointLights = [], directionalLights = []}) {\n  const lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach((pointLight, index) => {\n    lightSourceUniforms[`lighting_uPointLight[${index}].color`] = convertColor(pointLight);\n    lightSourceUniforms[`lighting_uPointLight[${index}].position`] = pointLight.position;\n    lightSourceUniforms[`lighting_uPointLight[${index}].attenuation`] = pointLight.attenuation || [\n      1,\n      0,\n      0\n    ];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n\n  directionalLights.forEach((directionalLight, index) => {\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].color`] = convertColor(\n      directionalLight\n    );\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].direction`] =\n      directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n\n  return lightSourceUniforms;\n}\n\n// eslint-disable-next-line complexity\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  // Specify lights separately\n  if ('lightSources' in opts) {\n    const {ambientLight, pointLights, directionalLights} = opts.lightSources || {};\n    const hasLights =\n      ambientLight ||\n      (pointLights && pointLights.length > 0) ||\n      (directionalLights && directionalLights.length > 0);\n\n    if (!hasLights) {\n      return {lighting_uEnabled: false};\n    }\n\n    return Object.assign(\n      {},\n      getLightSourceUniforms({ambientLight, pointLights, directionalLights}),\n      {\n        lighting_uEnabled: true\n      }\n    );\n  }\n\n  // Support for array of lights. Type of light is detected by type field\n  if ('lights' in opts) {\n    const lightSources = {pointLights: [], directionalLights: []};\n    for (const light of opts.lights || []) {\n      switch (light.type) {\n        case 'ambient':\n          // Note: Only uses last ambient light\n          // TODO - add ambient light sources on CPU?\n          lightSources.ambientLight = light;\n          break;\n        case 'directional':\n          lightSources.directionalLights.push(light);\n          break;\n        case 'point':\n          lightSources.pointLights.push(light);\n          break;\n        default:\n        // eslint-disable-next-line\n        // console.warn(light.type);\n      }\n    }\n\n    // Call the `opts.lightSources`` version\n    return getUniforms({lightSources});\n  }\n\n  return {};\n}\n","import \"core-js/modules/es6.typed.float32-array\";\n\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && value.length !== undefined;\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}"],"sourceRoot":""}