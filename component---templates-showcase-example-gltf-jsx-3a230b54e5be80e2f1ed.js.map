{"version":3,"sources":["webpack:///../node_modules/math.gl/dist/esm/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/isarray/index.js","webpack:///../modules/engine/src/animation/timeline.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/stream-utils.node.js","webpack:///../node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/core-js/modules/es6.date.to-json.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/validate-loader-version.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/constants.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/merge-options.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.browser.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/check-errors.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/file-aliases.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-loader-context.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/binary-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-worker-url.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-transfer-list.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-thread.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-pool.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-farm.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/register-loaders.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/select-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/parse.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/image-type.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/get-image-output-format.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-parsers.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-html-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-svg.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/get-first-characters.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/parser-utils/parse-json.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/memory-copy-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/resolve-url.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/get-typed-array.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-scenegraph.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-constants.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-attribute-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_draco_mesh_compression.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_lights_punctual.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_materials_unlit.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/gltf-extensions.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-glb.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/post-process-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/library-utils/library-utils.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-module-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-parser.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/draco-loader.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/headers.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/response.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/fetch.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/index.js","webpack:///../modules/experimental/src/scenegraph/nodes/scenegraph-node.js","webpack:///../modules/experimental/src/scenegraph/nodes/group-node.js","webpack:///../modules/experimental/src/gltf/gltf-animator.js","webpack:///../modules/shadertools/src/modules/pbr/pbr.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-vertex.glsl.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-fragment.glsl.js","webpack:///../modules/experimental/src/scenegraph/nodes/model-node.js","webpack:///../modules/experimental/src/gltf/gltf-material-parser.js","webpack:///../modules/experimental/src/gltf/create-gltf-model.js","webpack:///../modules/experimental/src/gltf/gltf-instantiator.js","webpack:///../modules/experimental/src/gltf/create-gltf-objects.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/parsed-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/generate-url.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/async-deep-map.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/deep-load.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/load-image.js","webpack:///../modules/experimental/src/gltf/gltf-environment.js","webpack:///../examples/showcase/gltf/app.js","webpack:///./templates/showcase/example-gltf.jsx","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/btoa.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/to-array-buffer.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../node_modules/gl-matrix/esm/mat3.js","webpack:///../node_modules/gl-matrix/esm/quat.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/quaternion.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/read-file.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/globals.js","webpack:///./node_modules/core-js/modules/es6.object.define-properties.js","webpack:///../node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/parse-image.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./node_modules/ieee754/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/vec2.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/encoding.js","webpack:///./node_modules/core-js/modules/es6.array.last-index-of.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/decode-data-uri.node.js","webpack:///./node_modules/core-js/modules/_own-keys.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/to-array-buffer.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/encode-image.node.js","webpack:///../modules/shadertools/src/modules/lights/lights.glsl.js","webpack:///../modules/shadertools/src/modules/lights/lights.js","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/common.js"],"names":["assert","condition","message","Error","concat","toString","module","exports","Array","isArray","arr","call","channelHandles","animationHandles","Timeline","this","time","channels","animations","playing","lastEngineTime","addChannel","props","delay","duration","Number","rate","handle","channel","repeat","_setChannelTime","set","removeChannel","delete","animationHandle","animation","detachAnimation","isFinished","get","getTime","setTime","Math","animationData","play","pause","reset","attachAnimation","channelHandle","update","engineTime","offsetTime","concatenateReadStream","readStream","arrayBuffer","ArrayBuffer","string","Promise","resolve","reject","data","chunk","source1","source2","sourceArray1","sourceArray2","temp","Uint8Array","byteLength","on","error","complete","clone","a","out","fromValues","x","y","z","w","copy","add","b","scale","length","sqrt","squaredLength","normalize","len","dot","lerp","t","ax","ay","az","aw","transformMat4","m","transformQuat","q","qx","qy","qz","qw","ix","iy","iz","iw","exactEquals","equals","a0","a1","a2","a3","b0","b1","b2","b3","abs","max","vec","Float32Array","$export","toObject","toPrimitive","P","F","Date","NaN","toJSON","prototype","toISOString","key","O","pv","isFinite","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","Arr","_byteLength","curByte","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","parts","len2","push","encodeChunk","lookup","join","code","indexOf","start","end","num","output","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","value","TypeError","array","byteOffset","undefined","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","checked","buffer","val","type","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","e","typedArraySupport","poolSize","_augment","Symbol","species","Object","defineProperty","configurable","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","arguments","inspect","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","trim","replace","stringtrim","base64clean","src","dst","globals","self","window","document","global_","isBrowser","process","browser","isWorker","importScripts","matches","version","parseFloat","asyncGeneratorStep","gen","_next","_throw","info","done","then","_asyncToGenerator","fn","args","err","VERSION","validateLoaderVersion","loader","coreVersion","loaderVersion","parseVersion","split","map","major","minor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","source","forEach","getOwnPropertyDescriptors","defineProperties","isLoaderObject","hasParser","parseTextSync","parseSync","parse","parseStream","parseInBatches","loaderOptions","options","id","workerUrl","normalizeLoader","extension","extensions","text","binary","NullLog","_","DEFAULT_LOADER_OPTIONS","CDN","worker","log","ConsoleLog","console","_this$console$log","_len","_key","bind","_this$console$info","_len2","_key2","_this$console$warn","_len3","_key3","warn","_this$console$error","_len4","_key4","dataType","constructor","globalOptions","mergeOptions","url","mergedOptions","defaultOptions","baseUri","addUrlOptions","mergeNestedFields","isFetchResponse","Response","json","isFileReadable","File","isFile","Blob","isBlob","_AwaitValue","wrapped","AsyncGenerator","front","back","resume","result","wrappedAwait","settle","next","_invoke","request","asyncIterator","FileReadableResponse","fileOrBlob","_fileOrBlob","bodyUsed","_json","_text","_arrayBuffer","mark","_callee","_this$_getFileReader","reader","promise","wrap","_context","prev","_getFileReader","readAsArrayBuffer","abrupt","stop","_callee2","_this$_getFileReader2","_context2","readAsText","_callee3","_context3","sent","JSON","FileReader","onerror","onabort","onload","Headers","name","fetchFileReadable","checkFetchResponseStatus","_x","_checkFetchResponseStatus","response","errorMessage","ok","status","t0","ERR_DATA","getUrlFromData","getArrayBufferOrStringFromDataSync","TextDecoder","decode","getArrayBufferOrStringFromData","_x2","_getArrayBufferOrStringFromData","isArrayBuffer","pathPrefix","fileAliases","resolvePath","filename","alias","startsWith","replacement","fetchFile","_fetchFile","fetch","getLoaderContext","context","previousContext","loaders","getLoaders","candidateLoaders","contextLoaders","toArrayBuffer","TextEncoder","encode","workerURLCache","Map","isTransferable","MessagePort","ImageBitmap","OffscreenCanvas","getTransferList","recursive","transfers","defaultOnMessage","_ref","WorkerThread","_ref2","_ref2$name","onMessage","workerSource","endsWith","buildScript","workerURL","blob","URL","createObjectURL","getWorkerURL","Worker","_process","_this","onmessage","event","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","jobQueue","idleQueue","count","isDestroyed","destroy","jobName","_startQueuedJob","_this2","_getAvailableWorker","job","shift","backlog","_onWorkerDone","DEFAULT_MAX_CONCURRENCY","WorkerFarm","workerPools","workerPool","workerName","_getWorkerPool","_x3","canParseWithWorker","isSupported","localWorkerUrl","useWorker","parseWithWorker","workerFarm","_workerFarm","onWorkerMessage","setProps","getWorkerFarm","stringify","arraybuffer","_onWorkerMessage","t1","registeredLoaders","EXT_PATTERN","DATA_URL_PATTERN","selectLoader","_ref$nothrow","nothrow","_loader","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","normalizeLoaders","mimeType","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","mimeTypes","findLoaderByMimeType","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","findLoaderByExtension","findLoaderByUrl","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","testText","testBinary","findLoaderByExamingInitialData","getMagicString","getFirstCharacters","test","some","dataView","DataView","magic","getUint8","_x4","_parse","autoUrl","parseWithLoader","_x5","_x6","_x7","_x8","_parseWithLoader","IMAGE_BITMAP_SUPPORTED","HTML_IMAGE_SUPPORTED","Image","NODE_IMAGE_SUPPORTED","Boolean","_parseImageNode","isImageTypeSupported","getImageOutputFormat","image","getSupportedImageType","BIG_ENDIAN","LITTLE_ENDIAN","mimeTypeMap","isPng","getSize","width","getUint32","height","isJpeg","getUint16","_getJpegMarkers","tableMarkers","Set","sofMarkers","getJpegMarkers","marker","has","isGif","isBmp","getBinaryImageMIMEType","toDataView","entries","_step$value","parseToNodeImage","parseToHTMLImage","_parseToHTMLImage","objectUrl","webkitURL","loadToHTMLImage","revokeObjectURL","finish","_loadToHTMLImage","parseToImageBitmap","imagebitmapOptions","imagebitmap","createImageBitmap","parseSVG","_parseSVG","textDecoder","xmlText","btoa","parseImage","_parseImage","format","images","decodeHTML","parseJSON","padTo4Bytes","getZeroOffsetArrayBuffer","subArray","copyToArray","targetOffset","sourceArray","srcByteOffset","srcByteLength","resolveUrl","baseUrl","uri","buffers","bufferViewIndex","bufferView","bufferViews","binChunk","TYPES","ARRAY_TO_COMPONENT_TYPE","Int8Array","Int16Array","Uint16Array","Uint32Array","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5120","5121","5122","5123","5125","5126","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","getAccessorTypeFromSize","getComponentTypeFromArray","typedArray","componentType","getAccessorArrayTypeAndLength","accessor","ArrayType","components","bytesPerComponent","GLTFScenegraph","gltf","extras","extensionName","isExtension","getUsedExtensions","find","getRequiredExtensions","getExtension","extensionsRequired","extensionsUsed","index","getObject","bufferIndex","getBufferView","getAccessor","getBuffer","_getAccessorArrayType","registerUsedExtension","addExtension","registerRequiredExtension","_removeStringFromArray","attributes","indices","mode","accessors","_addAttributes","glTFMesh","primitives","meshes","imageData","glTFImage","addBufferView","sourceBuffers","glTFBufferView","glTFAccessor","sourceBuffer","accessorDefaults","round","addAccessor","assign","totalByteLength","targetArray","dstByteOffset","splice","KHR_DRACO_MESH_COMPRESSION","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_UNLIT","getGLTFAccessors","attribute","getGLTFAccessor","gltfAttributeName","_getAccessorData","attributeName","convertTypedArrays","toTypedArray","getAccessorData","_marked","meshPrimitiveIterator","_decode","gltfData","scenegraph","promises","primitive","decompressMeshes","getObjectExtension","decompressPrimitive","all","removeExtension","compressMesh","addRequiredExtension","_decompressPrimitive","compressedPrimitive","bufferCopy","decodedData","getTypedArrayForBufferView","checkPrimitive","DracoWriter","DracoLoader","compressedData","encodeSync","fauxAccessors","_addFauxAttributes","mesh","gltfScenegraph","lights","nodes","node","nodeExtension","light","removeObjectExtension","addExtensions","addObjectExtension","materials","material","KHR_materials_unlit","unlit","KHR_draco_mesh_compression","KHR_lights_punctual","decodeExtensions","_decodeExtensions","excludes","_args","excludeExtensions","_DEFAULT_SAMPLER","MAGIC_glTF","GLB_FILE_HEADER_SIZE","GLB_CHUNK_HEADER_SIZE","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED","GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED","LE","isGLB","_options$magic","magic1","parseGLBSync","glb","header","binChunks","chunkLength","chunkFormat","parseJSONChunk","parseBINChunk","strict","parseGLBChunksSync","jsonChunk","jsonText","hasBinChunk","GL_SAMPLER","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","REPEAT","LINEAR","NEAREST_MIPMAP_LINEAR","SAMPLER_PARAMETER_GLTF_TO_GL","magFilter","minFilter","wrapS","wrapT","DEFAULT_SAMPLER","TEXTURE_WRAP_","GLTFPostProcessor","_gltf$buffers","_gltf$images","_gltf$baseUri","_resolveTree","bufView","_resolveBufferView","_resolveImage","samplers","sampler","_resolveSampler","textures","texture","_resolveTexture","_resolveAccessor","_resolveMaterial","_resolveMesh","_resolveNode","skins","skin","_resolveSkin","scenes","scene","_resolveScene","_get","getNode","_this3","children","child","getMesh","camera","getCamera","getSkin","inverseBindMatrices","_this4","getMaterial","normalTexture","getTexture","occlusionTexture","occlustionTexture","emissiveTexture","emmisiveTexture","pbrMetallicRoughness","mr","baseColorTexture","metallicRoughnessTexture","bytesPerElement","getSampler","getImage","parameters","glEnum","_enumSamplerParameter","preloadedImage","getImageAsync","perspective","orthographic","postProcessGLTF","postProcess","parseGLTF","_parseGLTF","arrayBufferOrString","_promise","parseGLTFContainerSync","loadImages","loadBuffers","_glb","_loadBuffers","_loadImages","loadImage","_x9","_x10","_x11","_x12","_x13","_loadImage","_callee4","parsedImage","_context4","GLTFLoader","_options$byteOffset","addDeprecatedGLTFOptions","fetchImages","createImages","fetchBuffers","fetchLinkedResources","decompress","loadDecoderPromise","loadLibraryPromises","loadLibrary","libraryUrl","moduleName","async","getLibraryUrl","loadLibraryFromFile","awrap","library","modules","_response","scriptSource","loadLibraryFromString","eval","script","createElement","appendChild","createTextNode","body","loadDracoDecoderModule","draco3d","draco","createDecoderModule","loadDracoDecoder","DracoDecoderModule","wasmBinary","decoderType","t2","t3","t4","t5","t6","initializeDracoDecoder","onModuleLoaded","GEOMETRY_TYPE","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","POSITION","NORMAL","COLOR","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","1","2","3","4","5","Int32Array","6","9","DracoParser","dracoGeometry","DecoderBuffer","Init","dracoStatus","decoder","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeBufferToMesh","faceCount","num_faces","attributeCount","num_attributes","vertexCount","num_points","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ptr","error_msg","loaderData","extractDRACOGeometry","geometry","getAttributes","positionAttribute","getPositionAttributeMetadata","drawMode","getMeshStripIndices","getMeshFaceIndices","metadata","posTransform","AttributeQuantizationTransform","InitFromAttribute","position","isQuantized","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","numPoints","attributeType","attributeId","GetAttributeId","dracoAttribute","GetAttribute","getAttributeTypedArray","numFaces","dracoArray","DracoInt32Array","GetFaceFromMesh","GetValue","GetTriangleStripsFromMesh","data_type","numComponents","num_components","numValues","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","DracoInt16Array","GetAttributeInt16ForAllPoints","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","WebAssembly","libraryPath","dracoParser","headers","append","getOwnPropertyNames","normalizeName","normalizeValue","oldValue","hasOwnProperty","callback","thisArg","items","iteratorFor","delegateYield","NodeFetchResponse","_url","_ok","_status","_headers","httpResponse","httpHeaders","getHeaders","contentLength","_getContentLength","isDataURL","statSync","_getHeaders","fetchNode","ScenegraphNode","uid","display","rotation","matrix","userData","_setScenegraphNodeProps","setPosition","setRotation","setScale","setMatrix","copyMatrix","setMatrixComponents","updateMatrix","rot","identity","translate","rotateXYZ","getCoordinateUniforms","modelMatrix","worldMatrix","worldInverse","worldInverseTranspose","viewMatrix","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","GroupNode","remove","removeAll","traverse","visitor","accessorToJsArray","slicedArray","helperMatrix","quaternion","interpolate","input","interpolation","animationTime","nextIndex","previousIndex","previousTime","nextTime","stepInterpolate","ratio","path","linearInterpolate","tDiff","p0","outTangent0","inTangent1","p1","m0","m1","cubicsplineInterpolate","GLTFAnimation","startTime","speed","animate","timeMs","gltfNode","rotationMatrix","applyTranslationRotationScale","GLTFAnimator","getAnimations","vs","fs","defines","LIGHTING_FRAGMENT","dependencies","ModelNode","gl","_setModelNodeProps","model","managedResources","resource","draw","setUniforms","setAttributes","updateModuleSettings","GLTFMaterialParser","pbrDebug","imageBasedLightingEnvironment","useTangents","USE_TEX_LOD","MANUAL_SRGB","SRGB_FAST_APPROXIMATION","uniforms","u_Camera","u_MetallicRoughnessValues","generatedTextures","u_DiffuseEnvSampler","u_SpecularEnvSampler","u_brdfLUT","u_ScaleIBLAmbient","u_ScaleDiffBaseMR","u_ScaleFGDSpec","defineIfPresent","parseMaterial","parseTexture","define","gltfTexture","pixelStore","parsePbrMetallicRoughness","u_BaseColorFactor","metallicFactor","roughnessFactor","u_NormalScale","strength","u_OcclusionStrength","u_EmissiveFactor","alphaCutoff","ALPHA_CUTOFF","u_AlphaCutoff","blend","blendEquation","blendFunc","addVersionToShader","isWebGL2","DEFAULT_OPTIONS","modelOptions","GLTFInstantiator","instantiate","createAnimator","createScene","gltfScene","createNode","createMesh","gltfMesh","getVertexCount","createPrimitive","materialParser","createGLTFModel","gltfPrimitive","createAttributes","loadedAttributes","attrName","createAccessor","generated","stride","createSampler","gltfSampler","needsPOT","createGLTFObjects","instantiator","animator","getImageType","getImageTypeOrNull","getImageSize","naturalWidth","naturalHeight","generateUrl","getUrl","urlOptions","asyncDeepMap","_asyncDeepMap","tree","func","mapSubtree","_mapSubtree","mapArray","mapObject","_mapObject","values","_loop","_mapArray","urlArray","_args4","deepLoad","_deepLoad","urlTree","load","shallowLoad","_shallowLoad","imageUrls","getImageUrls","_getImageUrls","mipLevels","_args2","getMipmappedImageUrls","_getMipmappedImageUrls","urls","_getImageSize","mipLevel","lod","getMipLevels","log2","GLTFEnvironment","brdfLutUrl","getTexUrl","specularMipLevels","makeCube","getTextureForFace","pixels","TextureCube","face","mipmaps","getDiffuseEnvSampler","_DiffuseEnvSampler","GL","getSpecularEnvSampler","_SpecularEnvSampler","imageArray","getBrdfTexture","_BrdfTexture","CUBE_FACE_TO_DIRECTION","GLTF_BASE_URL","LIGHT_SOURCES","default","directionalLights","color","direction","intensity","ambient","ambientLight","directional1","directional3","point1far","pointLights","attenuation","point1near","urlOrPromise","AppAnimationLoop","opts","glOptions","webgl1","webgl2","alpha","modelFile","initialZoom","lastX","lastY","getInfo","initalizeEventHandling","pointerIsDown","pointerDown","pointerMove","dX","dY","canvas","loadGLTF","ev","_fileLoaded","timeline","onInitialize","setParameters","depthTest","loadOptions","environment","showSelector","lightSelector","iblSelector","_updateLightSettings","_rebuildModel","_deleteScenes","lumaStats","applyLight","lightSources","onRender","aspect","projectionMatrix","clear","depth","pitch","roll","cameraPos","uView","uProjection","fov","radians","near","far","success","u_MVPMatrix","u_ModelMatrix","u_NormalMatrix","AnimationLoop","animationLoop","infoDiv","Example","render","exampleConfig","pageContext","React","Component","atob","_inherits","subClass","superClass","create","writable","cross","bx","by","bz","transformMat3","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","p","r","cos","sin","rotateY","rotateZ","angle","tempA","tempB","cosine","PI","acos","bufferToArrayBuffer","_slicedToArray","_n","_d","_e","_s","_i","setAxisAngle","axis","rad","s","bw","omega","cosom","sinom","scale0","scale1","fromMat3","fRoot","fTrace","k","vec4","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","vec3","IDENTITY_QUATERNION","_MathArray","Quaternion","check","fromAxisRotation","vectorA","vectorB","invDot","l","_arguments$","_arguments$$start","_arguments","vector","lengthSquared","multiplyLeft","multiplyRight","_construct","Parent","Class","Reflect","construct","sham","Proxy","isNativeReflectConstruct","instance","Function","Vector","ELEMENTS","mathArray","distanceSquared","dist","product","magnitude","vectors","_vectors","_i2","_vectors2","distance","subtract","multiply","multiplyScalar","ORIGIN","_Vector","Vector3","debug","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","isRequestURL","readFile","_decodeDataUri","queryIndex","readFileAsync","getReadFileOptions","promisify","createReadStream","responseType","S","mathgl","config","_cache","Wrapper","getPrototypeOf","setPrototypeOf","_Array","MathArray","arrayOrObject","toArray","to","formatString","printTypes","ai","minVector","maxVector","_scale","addScalar","scalar","validate","valid","parseImageNode","getPixelsAsync","ndarray","shape","layers","checkNumber","checkVector","v","callerName","validateVector","deprecated","method","_getPrototypeOf","o","toIObject","gOPD","createProperty","desc","getDesc","f","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","rt","LN2","Matrix","printRowMajor","row","RANK","col","columnIndex","firstIndex","columnVector","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","fovy","nf","tan","eye","center","up","x0","x1","x2","y0","y1","y2","z0","z1","z2","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","_Matrix","Matrix4","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","xx","yx","yy","zx","zy","zz","wx","wy","wz","left","right","bottom","top","_computeInfinitePerspectiveOffCenter","rl","tb","_eye","_ref2$near","_ref2$far","lr","bt","_ref3$fovy","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","ortho","_ref4","_ref4$fov","_ref4$aspect","_ref4$near","_ref4$far","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","_ref5","_ref6","rx","ry","rz","b12","b20","b21","b22","factor","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","inRange","ToDictionary","isASCIIByte","isASCIICodePoint","end_of_stream","Stream","tokens","reverse","endOfStream","pop","prepend","token","unshift","finished","decoderError","fatal","opt_code_point","encoderError","code_point","getEncoding","label","label_to_encoding","encodings","labels","heading","category","shift_jis_index","big5_index_no_hkscs","encoders","decoders","indexCodePointFor","pointer","indexPointerFor","DEFAULT_ENCODING","_encoding","_decoder","_ignoreBOM","_BOMseen","_error_mode","_do_not_flush","ignoreBOM","_encoder","_fatal","UTF8Decoder","utf8_code_point","utf8_bytes_seen","utf8_bytes_needed","utf8_lower_boundary","utf8_upper_boundary","handler","stream","bite","UTF8Encoder","SingleByteDecoder","SingleByteEncoder","GB18030Decoder","gb18030_first","gb18030_second","gb18030_third","code_point_offset","idx","entry","indexGB18030RangesCodePointFor","lead","GB18030Encoder","gbk_flag","trail","pointer_offset","indexGB18030RangesPointerFor","byte1","byte2","byte3","Big5Decoder","Big5_lead","Big5Encoder","index_","indexBig5PointerFor","EUCJPDecoder","eucjp_jis0212_flag","eucjp_lead","EUCJPEncoder","ISO2022JPDecoder","states","iso2022jp_decoder_state","iso2022jp_decoder_output_state","iso2022jp_lead","iso2022jp_output_flag","state","output_flag","ISO2022JPEncoder","iso2022jp_state","ShiftJISDecoder","Shift_JIS_lead","lead_offset","ShiftJISEncoder","indexShiftJISPointerFor","EUCKRDecoder","euckr_lead","EUCKREncoder","convertCodeUnitToBytes","code_unit","utf16be","UTF16Decoder","utf16_be","utf16_lead_byte","utf16_lead_surrogate","lead_surrogate","UTF16Encoder","XUserDefinedDecoder","XUserDefinedEncoder","input_stream","item","code_points","cp","codePointsToString","opt_string","u","stringToCodePoints","toInteger","toLength","$native","NEGATIVE_ZERO","searchElement","decodeDataUri","dataIndex","decodeURIComponent","gOPN","gOPS","anObject","it","getSymbols","_possibleConstructorReturn","ReferenceError","nodeVersion","_setPrototypeOf","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","encodeImageNode","imageStream","encodeImageToStreamNode","INITIAL_MODULE_OPTIONS","getUniforms","lightSourceUniforms","convertColor","pointLight","directionalLight","getLightSourceUniforms","lighting_uEnabled","MAX_LIGHTS","component","EPSILON","ARRAY_TYPE","RANDOM","random","DEGREES_TO_RADIANS","formatValue","_ref$precision","precision","toPrecision","degrees","epsilon","oldEpsilon","printDegrees"],"mappings":"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","file":"component---templates-showcase-example-gltf-jsx-3a230b54e5be80e2f1ed.js","sourcesContent":["export * from '@math.gl/core';","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}","require(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","let channelHandles = 1;\nlet animationHandles = 1;\n\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {delay = 0, duration = Number.POSITIVE_INFINITY, rate = 1, repeat = 1} = props;\n\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n    this._setChannelTime(channel, this.time);\n    this.channels.set(handle, channel);\n\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n\n    const channels = this.channels.values();\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n    for (const animationData of animations) {\n      const {animation, channel} = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n\n    animation.setTime(this.getTime(channelHandle));\n\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n    // Note(Tarek): Don't loop on final repeat.\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n}\n","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function concatenateReadStream(readStream) {\n  var arrayBuffer = new ArrayBuffer();\n  var string = '';\n  return new Promise(function (resolve, reject) {\n    readStream.data(function (chunk) {\n      if (typeof chunk === 'string') {\n        string += chunk;\n      } else {\n        arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n      }\n    });\n    readStream.on('error', function (error) {\n      return reject(error);\n    });\n    readStream.on('end', function () {\n      if (readStream.complete) {\n        resolve(arrayBuffer || string);\n      } else {\n        reject('The connection was terminated while the message was still being sent');\n      }\n    });\n  });\n}\n\nfunction concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nimport assert from './env-utils/assert';\nvar VERSION = typeof \"2.0.0-beta.2\" !== 'undefined' ? \"2.0.0-beta.2\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread({}, loader, {\n      options: _objectSpread({}, loader.options, {}, options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}","import \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();","import { ConsoleLog } from './loader-utils/loggers';\nexport var DEFAULT_LOADER_OPTIONS = {\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  dataType: 'arraybuffer'\n};","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { DEFAULT_LOADER_OPTIONS } from '../constants';\nimport { NullLog } from './loggers';\n\nvar isPureObject = function isPureObject(value) {\n  return value && _typeof(value) === 'object' && value.constructor === {}.constructor;\n};\n\nvar globalOptions = _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n\nexport function setGlobalOptions(options) {\n  globalOptions = mergeOptions(globalOptions, options);\n}\nexport function mergeOptions(loader, options, url) {\n  var loaderDefaultOptions = loader && (loader.DEFAULT_LOADER_OPTIONS || loader.defaultOptions || loader.options || {});\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, globalOptions);\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread({}, mergedOptions[key], {}, options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nvar isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\n\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isFetchResponse = function isFetchResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isFileReadable = function isFileReadable(x) {\n  return isFile(x) || isBlob(x);\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.pipeTo) && isFunction(x.getReader);\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar FileReadableResponse = function () {\n  function FileReadableResponse(fileOrBlob) {\n    _classCallCheck(this, FileReadableResponse);\n\n    this._fileOrBlob = fileOrBlob;\n    this.bodyUsed = false;\n  }\n\n  _createClass(FileReadableResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var _this$_getFileReader, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$_getFileReader = this._getFileReader(), reader = _this$_getFileReader.reader, promise = _this$_getFileReader.promise;\n                reader.readAsArrayBuffer(this._fileOrBlob);\n                return _context.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var _this$_getFileReader2, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$_getFileReader2 = this._getFileReader(), reader = _this$_getFileReader2.reader, promise = _this$_getFileReader2.promise;\n                reader.readAsText(this._fileOrBlob);\n                return _context2.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getFileReader\",\n    value: function _getFileReader() {\n      assert(!this.bodyUsed);\n      this.bodyUsed = true;\n      var reader;\n      var promise = new Promise(function (resolve, reject) {\n        try {\n          reader = new FileReader();\n\n          reader.onerror = function (error) {\n            return reject(new Error(error));\n          };\n\n          reader.onabort = function () {\n            return reject(new Error('Read aborted.'));\n          };\n\n          reader.onload = function () {\n            return resolve(reader.result);\n          };\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return {\n        reader: reader,\n        promise: promise\n      };\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return new Headers({\n        'Content-Length': this._fileOrBlob.size,\n        'Content-Type': this._fileOrBlob.type\n      });\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return 200;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._fileOrBlob.name || '';\n    }\n  }]);\n\n  return FileReadableResponse;\n}();\n\nexport default function fetchFileReadable(fileOrBlob, options) {\n  return Promise.resolve(new FileReadableResponse(fileOrBlob, options));\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function checkFetchResponseStatus(_x) {\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nfunction _checkFetchResponseStatus() {\n  _checkFetchResponseStatus = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var errorMessage, text;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (response.ok) {\n              _context.next = 12;\n              break;\n            }\n\n            errorMessage = \"fetch failed \".concat(response.status, \" \");\n            _context.prev = 2;\n            _context.next = 5;\n            return response.text();\n\n          case 5:\n            text = _context.sent;\n            errorMessage += text;\n            _context.next = 11;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 11:\n            throw new Error(errorMessage);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 9]]);\n  }));\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(\"fetch failed \".concat(response.status));\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isFetchResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isFileReadable } from '../../javascript-utils/is-type';\nimport { getStreamIterator } from '../../javascript-utils/stream-utils';\nimport fetchFileReadable from '../fetch/fetch-file.browser';\nimport { checkFetchResponseStatus, checkFetchResponseStatusSync } from './check-errors';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getUrlFromData(data, url) {\n  if (isFetchResponse(data)) {\n    url = url || data.url;\n  } else if (isFileReadable(url)) {\n    url = url.name;\n  }\n\n  return typeof url === 'string' ? url.replace(/\\?.*/, '') : url;\n}\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    var arrayBuffer = data.buffer || data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(_x, _x2) {\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nfunction _getArrayBufferOrStringFromData() {\n  _getArrayBufferOrStringFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loader) {\n    var isArrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return data;\n\n          case 2:\n            data = _context2.sent;\n            isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n            if (!(typeof data === 'string' || isArrayBuffer)) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n          case 6:\n            if (!isFileReadable(data)) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 9;\n            return fetchFileReadable(data);\n\n          case 9:\n            data = _context2.sent;\n\n          case 10:\n            if (!isFetchResponse(data)) {\n              _context2.next = 23;\n              break;\n            }\n\n            _context2.next = 13;\n            return checkFetchResponseStatus(data);\n\n          case 13:\n            if (!loader.binary) {\n              _context2.next = 19;\n              break;\n            }\n\n            _context2.next = 16;\n            return data.arrayBuffer();\n\n          case 16:\n            _context2.t0 = _context2.sent;\n            _context2.next = 22;\n            break;\n\n          case 19:\n            _context2.next = 21;\n            return data.text();\n\n          case 21:\n            _context2.t0 = _context2.sent;\n\n          case 22:\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 23:\n            throw new Error(ERR_DATA);\n\n          case 24:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nexport function getAsyncIteratorFromData(data) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isFetchResponse(data) && data.body) {\n    checkFetchResponseStatusSync(data);\n    return getStreamIterator(data.body);\n  }\n\n  if (isReadableStream(data)) {\n    return getStreamIterator(data);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIteratorFromData(data);\n}\nexport function getIteratorFromData(data) {\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return data.buffer || data;\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.assign\";\nvar pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      return filename.replace(alias, replacement);\n    }\n  }\n\n  filename += pathPrefix;\n  return filename;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isFileReadable } from '../../javascript-utils/is-type';\nimport { resolvePath } from './file-aliases';\nimport fetchFileReadable from './fetch-file.browser';\nexport function fetchFile(_x, _x2) {\n  return _fetchFile.apply(this, arguments);\n}\n\nfunction _fetchFile() {\n  _fetchFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url, options) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isFileReadable(url)) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetchFileReadable(url, options));\n\n          case 2:\n            url = resolvePath(url);\n            return _context.abrupt(\"return\", fetch(url, options));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchFile.apply(this, arguments);\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { fetchFile } from '../fetch/fetch-file';\nexport function getLoaderContext(context, options, previousContext) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: context.fetch || fetchFile\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}","import { assert } from '@loaders.gl/loader-utils';\nimport { toArrayBuffer as bufferToArrayBuffer } from '../node/utils/to-array-buffer.node';\nexport function toArrayBuffer(data) {\n  if (bufferToArrayBuffer) {\n    data = bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport { assert } from '@loaders.gl/loader-utils';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer || object.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== \"undefined\" && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== \"undefined\" && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfers.push(object);\n  } else if (isTransferable(object.buffer)) {\n    transfers.push(object.buffer);\n  } else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfers);\n    }\n  }\n\n  return transfers;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from './get-transfer-list';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    return _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = getTransferList(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, jobName) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.jobQueue.push({\n                    data: data,\n                    jobName: jobName,\n                    resolve: resolve,\n                    reject: reject\n                  });\n\n                  _this._startQueuedJob();\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x, _x2) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_startQueuedJob\",\n    value: function _startQueuedJob() {\n      var _this2 = this;\n\n      if (!this.jobQueue.length) {\n        return;\n      }\n\n      var worker = this._getAvailableWorker();\n\n      if (!worker) {\n        return;\n      }\n\n      var job = this.jobQueue.shift();\n      this.onDebug({\n        message: 'processing',\n        worker: worker.name,\n        job: job.jobName,\n        backlog: this.jobQueue.length\n      });\n      worker.process(job.data).then(function (result) {\n        return job.resolve(result);\n      })[\"catch\"](function (error) {\n        return job.reject(error);\n      }).then(function () {\n        return _this2._onWorkerDone(worker);\n      });\n    }\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n      } else {\n        this.idleQueue.push(worker);\n\n        this._startQueuedJob();\n      }\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \"-worker-\").concat(this.count, \"-of-\").concat(this.maxConcurrency);\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(workerSource, workerName, data) {\n        var workerPool;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerPool = this._getWorkerPool(workerSource, workerName);\n                return _context.abrupt(\"return\", workerPool.process(data));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function process(_x, _x2, _x3) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: this.onMessage,\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };","import \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { toArrayBuffer } from '../../javascript-utils/binary-utils';\nimport WorkerFarm from '../../worker-utils/worker-farm';\nimport { getTransferList } from '../../worker-utils/get-transfer-list';\nimport { parse } from '../parse';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  return workerFarm.process(workerSource, \"loaders.gl-\".concat(workerName), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(\"2.0.0-beta.2\"),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return parse(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, getTransferList(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.is-array\";\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nvar registeredLoaders = [];\nexport function registerLoaders(loaders) {\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!registeredLoaders.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        registeredLoaders.unshift(normalizedLoader);\n      }\n    };\n\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return registeredLoaders;\n}\nexport function _unregisterLoaders() {\n  registeredLoaders = [];\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { getRegisteredLoaders } from './register-loaders';\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nvar DATA_URL_PATTERN = /^data:(.*?)(;|,)/;\nexport function selectLoader(loaders) {\n  var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n      _ref$nothrow = _ref.nothrow,\n      nothrow = _ref$nothrow === void 0 ? false : _ref$nothrow;\n\n  url = url || '';\n\n  if (loaders && !Array.isArray(loaders)) {\n    var _loader = loaders;\n    normalizeLoader(_loader);\n    return _loader;\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n  url = url.replace(/\\?.*/, '');\n  var loader = null;\n  loader = loader || findLoaderByUrl(loaders, url);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader) {\n    if (nothrow) {\n      return null;\n    }\n\n    var message = 'No valid loader found';\n\n    if (data) {\n      message += \" for data starting with \\\"\".concat(getFirstCharacters(data), \"\\\"\");\n    }\n\n    if (url) {\n      message += \" for \".concat(url);\n    }\n\n    throw new Error(message);\n  }\n\n  return loader;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url.match(DATA_URL_PATTERN);\n  var mimeType = match && match[1];\n\n  if (mimeType) {\n    return findLoaderByMimeType(loaders, mimeType);\n  }\n\n  match = url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  var loader = extension && findLoaderByExtension(loaders, extension);\n  return loader;\n}\n\nfunction findLoaderByMimeType(loaders, mimeType) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = loaders[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var loader = _step2.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = loaders[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var loader = _step3.value;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = loader.extensions[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var loaderExtension = _step4.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n        _iterator3[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = loaders[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n        _iterator5[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testBinary(data, byteOffset, loader) {\n  var type = Array.isArray(loader.test) ? 'array' : _typeof(loader.test);\n\n  switch (type) {\n    case 'function':\n      return loader.test(data, loader);\n\n    case 'string':\n    case 'array':\n      var tests = Array.isArray(loader.test) ? loader.test : [loader.test];\n      return tests.some(function (test) {\n        var magic = getMagicString(data, byteOffset, test.length);\n        return test === magic;\n      });\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from './loader-utils/normalize-loader';\nimport { mergeOptions } from './loader-utils/merge-options';\nimport { getUrlFromData } from './loader-utils/get-data';\nimport { getArrayBufferOrStringFromData } from './loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from './loader-utils/get-loader-context';\nimport parseWithWorker, { canParseWithWorker } from './loader-utils/parse-with-worker';\nimport { selectLoader } from './select-loader';\nexport function parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loaders, options, context) {\n    var url, autoUrl, candidateLoaders, loader;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              context = options;\n              options = loaders;\n              loaders = null;\n            }\n\n            url = '';\n\n            if (typeof context === 'string') {\n              url = context;\n              context = null;\n            }\n\n            options = options || {};\n            autoUrl = getUrlFromData(data, url);\n            candidateLoaders = getLoaders(loaders, context);\n            loader = selectLoader(candidateLoaders, autoUrl, data);\n\n            if (loader) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            options = mergeOptions(loader, options, autoUrl);\n            context = getLoaderContext({\n              url: autoUrl,\n              parse: parse,\n              loaders: candidateLoaders\n            }, options, context);\n            _context.next = 13;\n            return parseWithLoader(loader, data, options, context);\n\n          case 13:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction parseWithLoader(_x5, _x6, _x7, _x8) {\n  return _parseWithLoader.apply(this, arguments);\n}\n\nfunction _parseWithLoader() {\n  _parseWithLoader = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(loader, data, options, context) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            validateLoaderVersion(loader);\n            _context2.next = 3;\n            return getArrayBufferOrStringFromData(data, loader);\n\n          case 3:\n            data = _context2.sent;\n\n            if (!(loader.parseTextSync && typeof data === 'string')) {\n              _context2.next = 7;\n              break;\n            }\n\n            options.dataType = 'text';\n            return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n          case 7:\n            if (!canParseWithWorker(loader, data, options, context)) {\n              _context2.next = 11;\n              break;\n            }\n\n            _context2.next = 10;\n            return parseWithWorker(loader, data, options, context);\n\n          case 10:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 11:\n            if (!loader.parse) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 14;\n            return loader.parse(data, options, context, loader);\n\n          case 14:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 15:\n            assert(!loader.parseSync);\n            return _context2.abrupt(\"return\", assert(false));\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseWithLoader.apply(this, arguments);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { global, isBrowser } from '../utils/globals';\nimport assert from '../utils/assert';\nexport var IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nexport var HTML_IMAGE_SUPPORTED = (typeof Image === \"undefined\" ? \"undefined\" : _typeof(Image)) !== undefined;\nexport var NODE_IMAGE_SUPPORTED = Boolean(global._parseImageNode);\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'html':\n      return HTML_IMAGE_SUPPORTED;\n\n    case 'ndarray':\n      return NODE_IMAGE_SUPPORTED;\n\n    default:\n      throw new Error(\"Unknown image format \".concat(type));\n  }\n}\nexport function getSupportedImageType() {\n  if (isImageTypeSupported('ndarray')) {\n    return 'ndarray';\n  }\n\n  if (isImageTypeSupported('html')) {\n    return 'html';\n  }\n\n  if (isImageTypeSupported('imagebitmap')) {\n    return 'imagebitmap';\n  }\n\n  if (!isBrowser) {\n    throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n  }\n\n  return assert(false);\n}","import { isImageTypeSupported, getSupportedImageType } from '../parsed-image-api/image-type';\nexport default function getImageOutputFormat() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var imageOptions = options.image || {};\n  var type = imageOptions.type || 'auto';\n\n  switch (type) {\n    case 'imagebitmap':\n    case 'html':\n    case 'ndarray':\n      if (!isImageTypeSupported(type)) {\n        throw new Error(\"Requested image type \".concat(type, \" not available in current environment\"));\n      }\n\n      return type;\n\n    case 'auto':\n      return getSupportedImageType();\n\n    default:\n      throw new Error(\"Unknown image format \".concat(type));\n  }\n}","import \"core-js/modules/es6.set\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nvar BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport var mimeTypeMap = new Map([['image/png', {\n  test: isPng,\n  getSize: getPngSize\n}], ['image/jpeg', {\n  test: isJpeg,\n  getSize: getJpegSize\n}], ['image/gif', {\n  test: isGif,\n  getSize: getGifSize\n}], ['image/bmp', {\n  test: isBmp,\n  getSize: getBmpSize\n}]]);\nexport function isPng(dataView) {\n  return dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n}\n\nfunction getPngSize(dataView) {\n  return {\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nexport function isGif(dataView) {\n  return dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n}\n\nfunction getGifSize(dataView) {\n  return {\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function isBmp(dataView) {\n  return dataView.byteLength >= 2 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d;\n}\n\nfunction getBmpSize(dataView) {\n  return {\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nexport function isJpeg(dataView) {\n  return dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2, BIG_ENDIAN) === 0xff;\n}\n\nfunction getJpegSize(dataView) {\n  if (dataView.byteLength < 2 || dataView.getUint16(0, BIG_ENDIAN) !== 0xffd8) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { mimeTypeMap } from './binary-image-parsers';\nvar ERR_INVALID_MIME_TYPE = \"Invalid MIME type. Supported MIME types are: \".concat(Array.from(mimeTypeMap.keys()).join(', '));\nexport function isBinaryImage(arrayBuffer, mimeType) {\n  if (mimeType) {\n    var _getBinaryImageTypeHa = getBinaryImageTypeHandlers(mimeType),\n        test = _getBinaryImageTypeHa.test;\n\n    var dataView = toDataView(arrayBuffer);\n    return test(dataView);\n  }\n\n  return Boolean(getBinaryImageMIMEType(arrayBuffer));\n}\nexport function getBinaryImageMIMEType(arrayBuffer) {\n  var dataView = toDataView(arrayBuffer);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = mimeTypeMap.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          mimeType = _step$value[0],\n          test = _step$value[1].test;\n\n      if (test(dataView)) {\n        return mimeType;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return null;\n}\nexport function getBinaryImageSize(arrayBuffer) {\n  var mimeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  mimeType = mimeType || getBinaryImageMIMEType(arrayBuffer);\n\n  var _getBinaryImageTypeHa2 = getBinaryImageTypeHandlers(mimeType),\n      getSize = _getBinaryImageTypeHa2.getSize;\n\n  var dataView = toDataView(arrayBuffer);\n  var size = getSize(dataView);\n\n  if (!size) {\n    throw new Error(\"invalid image data for type: \".concat(mimeType));\n  }\n\n  return size;\n}\n\nfunction getBinaryImageTypeHandlers(mimeType) {\n  var handlers = mimeTypeMap.get(mimeType);\n\n  if (!handlers) {\n    throw new Error(ERR_INVALID_MIME_TYPE);\n  }\n\n  return handlers;\n}\n\nfunction toDataView(data) {\n  data = data.buffer || data;\n\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer || data);\n  }\n\n  throw new Error('toDataView');\n}","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMIMEType } from '../binary-image-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  assert(global._parseImageNode);\n  var mimeType = getBinaryImageMIMEType(arrayBuffer);\n  return global._parseImageNode(arrayBuffer, mimeType, options);\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport default function parseToHTMLImage(_x, _x2) {\n  return _parseToHTMLImage.apply(this, arguments);\n}\n\nfunction _parseToHTMLImage() {\n  _parseToHTMLImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options) {\n    var mimeType, blob, URL, objectUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            mimeType = 'image/jpeg';\n            blob = new Blob([arrayBuffer], {\n              type: mimeType\n            });\n            URL = self.URL || self.webkitURL;\n            objectUrl = URL.createObjectURL(blob);\n            _context.prev = 4;\n            _context.next = 7;\n            return loadToHTMLImage(objectUrl, options);\n\n          case 7:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 8:\n            _context.prev = 8;\n            URL.revokeObjectURL(objectUrl);\n            return _context.finish(8);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4,, 8, 11]]);\n  }));\n  return _parseToHTMLImage.apply(this, arguments);\n}\n\nexport function loadToHTMLImage(_x3, _x4) {\n  return _loadToHTMLImage.apply(this, arguments);\n}\n\nfunction _loadToHTMLImage() {\n  _loadToHTMLImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    var image;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            image = new Image();\n            image.src = url;\n\n            if (!(options.image && options.image.decode && image.decode)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 5;\n            return image.decode();\n\n          case 5:\n            return _context2.abrupt(\"return\", image);\n\n          case 6:\n            _context2.next = 8;\n            return new Promise(function (resolve, reject) {\n              try {\n                image.onload = function () {\n                  return resolve(image);\n                };\n\n                image.onerror = function (err) {\n                  return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n                };\n              } catch (error) {\n                reject(error);\n              }\n            });\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadToHTMLImage.apply(this, arguments);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport default function parseToImageBitmap(arrayBuffer, options) {\n  var blob = new Blob([new Uint8Array(arrayBuffer)]);\n  var imagebitmapOptions = options && options.imagebitmap;\n  return imagebitmapOptions ? createImageBitmap(blob) : createImageBitmap(blob, imagebitmapOptions);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { loadToHTMLImage } from './parse-to-html-image';\nexport default function parseSVG(_x, _x2) {\n  return _parseSVG.apply(this, arguments);\n}\n\nfunction _parseSVG() {\n  _parseSVG = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options) {\n    var textDecoder, xmlText, src;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            textDecoder = new TextDecoder();\n            xmlText = textDecoder.decode(arrayBuffer);\n            src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n            _context.next = 5;\n            return loadToHTMLImage(src, options);\n\n          case 5:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseSVG.apply(this, arguments);\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport getImageOutputFormat from './get-image-output-format';\nimport parseToNodeImage from './parse-to-node-image';\nimport parseToHTMLImage from './parse-to-html-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseSVG from './parse-svg';\nexport default function parseImage(_x, _x2, _x3) {\n  return _parseImage.apply(this, arguments);\n}\n\nfunction _parseImage() {\n  _parseImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var _ref, url, format;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if ('image' in options) {\n              options = _objectSpread({}, options, {\n                image: {}\n              });\n            }\n\n            _ref = context || {}, url = _ref.url;\n\n            if (!(url && /\\.svg((\\?|#).*)?$/.test(url))) {\n              _context.next = 7;\n              break;\n            }\n\n            console.warn('@loaders.gl/images: SVG parsing needs to be fixed for 2.0');\n            _context.next = 6;\n            return parseSVG(arrayBuffer, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n            format = getImageOutputFormat(options);\n            _context.t0 = format;\n            _context.next = _context.t0 === 'imagebitmap' ? 11 : _context.t0 === 'html' ? 14 : _context.t0 === 'ndarray' ? 17 : 20;\n            break;\n\n          case 11:\n            _context.next = 13;\n            return parseToImageBitmap(arrayBuffer, options);\n\n          case 13:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 14:\n            _context.next = 16;\n            return parseToHTMLImage(arrayBuffer, options);\n\n          case 16:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 17:\n            _context.next = 19;\n            return parseToNodeImage(arrayBuffer, options);\n\n          case 19:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 20:\n            return _context.abrupt(\"return\", assert(false));\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImage.apply(this, arguments);\n}","import \"core-js/modules/es6.typed.data-view\";\nimport parseImage from './lib/parsers/parse-image';\nimport { isPng, isGif, isBmp, isJpeg } from './lib/binary-image-api/binary-image-parsers';\nvar VERSION = typeof \"2.0.0-beta.2\" !== 'undefined' ? \"2.0.0-beta.2\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vndmicrosofticon', 'image/svg+xml'];\nvar ImageLoader = {\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  test: function test(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    return isJpeg(dataView) || isBmp(dataView) || isGif(dataView) || isPng(dataView);\n  },\n  options: {\n    images: {\n      format: 'auto',\n      decodeHTML: true\n    }\n  }\n};\nexport default ImageLoader;","import \"core-js/modules/es6.typed.data-view\";\nexport function getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\nexport function getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import { getFirstCharacters } from '../binary-utils/get-first-characters';\nexport function parseJSON(string) {\n  try {\n    return JSON.parse(string);\n  } catch (_) {\n    throw new Error(\"Failed to parse JSON from data starting with \\\"\".concat(getFirstCharacters(string), \"\\\"\"));\n  }\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3;\n}\nexport function getZeroOffsetArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  var subArray = byteLength ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  var arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\nexport function copyArrayBuffer(targetBuffer, sourceBuffer, byteOffset) {\n  var byteLength = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : sourceBuffer.byteLength;\n  var targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  var sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\nexport function copyToArray(source, target, targetOffset) {\n  var sourceArray;\n\n  if (source instanceof ArrayBuffer) {\n    sourceArray = new Uint8Array(source);\n  } else {\n    var srcByteOffset = source.byteOffset;\n    var srcByteLength = source.byteLength;\n    sourceArray = new Uint8Array(source.buffer, srcByteOffset, srcByteLength);\n  }\n\n  target.set(sourceArray, targetOffset);\n  return targetOffset + padTo4Bytes(sourceArray.byteLength);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'assert failed: gltf');\n  }\n}","import \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.string.starts-with\";\nexport function resolveUrl(url, options) {\n  var absolute = url.startsWith('data:') || url.startsWith('http:') || url.startsWith('https:');\n\n  if (absolute) {\n    return url;\n  }\n\n  var baseUrl = options.baseUri || options.uri;\n\n  if (!baseUrl) {\n    throw new Error(\"'baseUri' must be provided to resolve relative url \".concat(url));\n  }\n\n  return baseUrl.substr(0, baseUrl.lastIndexOf('/') + 1) + url;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../utils/assert';\nexport function getTypedArrayForBufferView(json, buffers, bufferViewIndex) {\n  var bufferView = json.bufferViews[bufferViewIndex];\n  assert(bufferView);\n  var bufferIndex = bufferView.buffer;\n  var binChunk = buffers[bufferIndex];\n  assert(binChunk);\n  var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n  return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n}\nexport function getTypedArrayForImageData(json, buffers, imageIndex) {\n  var image = json.images[imageIndex];\n  var bufferViewIndex = json.bufferViews[image.bufferView];\n  return getTypedArrayForBufferView(json, buffers, bufferViewIndex);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport assert from '../utils/assert';\nvar TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nvar ARRAY_TO_COMPONENT_TYPE = new Map([[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126]]);\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  var type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  var componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  var bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  var length = accessor.count * components;\n  var byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType: ArrayType,\n    length: length,\n    byteLength: byteLength\n  };\n}","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.find\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getBinaryImageMIMEType } from '@loaders.gl/images';\nimport { padTo4Bytes, copyToArray } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength, getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils/gltf-utils';\n\nvar GLTFScenegraph = function () {\n  function GLTFScenegraph(gltf) {\n    _classCallCheck(this, GLTFScenegraph);\n\n    if (gltf instanceof GLTFScenegraph) {\n      return gltf;\n    }\n\n    if (!gltf) {\n      gltf = {\n        json: {\n          version: 2,\n          buffers: []\n        },\n        buffers: []\n      };\n    }\n\n    this.gltf = gltf;\n    assert(this.gltf.json);\n  }\n\n  _createClass(GLTFScenegraph, [{\n    key: \"getApplicationData\",\n    value: function getApplicationData(key) {\n      var data = this.json[key];\n      return data;\n    }\n  }, {\n    key: \"getExtraData\",\n    value: function getExtraData(key) {\n      var extras = this.json.extras || {};\n      return extras[key];\n    }\n  }, {\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      var isExtension = this.getUsedExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      var extensions = this.json.extensions || {};\n      return isExtension ? extensions[extensionName] || true : null;\n    }\n  }, {\n    key: \"getRequiredExtension\",\n    value: function getRequiredExtension(extensionName) {\n      var isRequired = this.getRequiredExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      return isRequired ? this.getExtension(extensionName) : null;\n    }\n  }, {\n    key: \"getRequiredExtensions\",\n    value: function getRequiredExtensions() {\n      return this.json.extensionsRequired || [];\n    }\n  }, {\n    key: \"getUsedExtensions\",\n    value: function getUsedExtensions() {\n      return this.json.extensionsUsed || [];\n    }\n  }, {\n    key: \"getObjectExtension\",\n    value: function getObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      return extensions[extensionName];\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this.getObject('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this.getObject('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this.getObject('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this.getObject('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this.getObject('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this.getObject('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this.getObject('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this.getObject('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this.getObject('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this.getObject('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this.getObject('buffers', index);\n    }\n  }, {\n    key: \"getObject\",\n    value: function getObject(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        throw new Error(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"getTypedArrayForBufferView\",\n    value: function getTypedArrayForBufferView(bufferView) {\n      bufferView = this.getBufferView(bufferView);\n      var bufferIndex = bufferView.buffer;\n      var binChunk = this.gltf.buffers[bufferIndex];\n      assert(binChunk);\n      var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n      return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"getTypedArrayForAccessor\",\n    value: function getTypedArrayForAccessor(accessor) {\n      accessor = this.getAccessor(accessor);\n      var bufferView = this.getBufferView(accessor.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n\n      var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, bufferView),\n          ArrayType = _getAccessorArrayType.ArrayType,\n          length = _getAccessorArrayType.length;\n\n      var byteOffset = bufferView.byteOffset + accessor.byteOffset;\n      return new ArrayType(arrayBuffer, byteOffset, length);\n    }\n  }, {\n    key: \"getTypedArrayForImageData\",\n    value: function getTypedArrayForImageData(image) {\n      image = this.getAccessor(image);\n      var bufferView = this.getBufferView(image.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n      var byteOffset = bufferView.byteOffset || 0;\n      return new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"addApplicationData\",\n    value: function addApplicationData(key, data) {\n      this.json[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addExtraData\",\n    value: function addExtraData(key, data) {\n      this.json.extras = this.json.extras || {};\n      this.json.extras[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addObjectExtension\",\n    value: function addObjectExtension(object, extensionName, data) {\n      assert(data);\n      object.extensions = object.extensions || {};\n      object.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"removeObjectExtension\",\n    value: function removeObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      delete extensions[extensionName];\n      return this;\n    }\n  }, {\n    key: \"addExtension\",\n    value: function addExtension(extensionName, data) {\n      assert(data);\n      this.json.extensions = this.json.extensions || {};\n      this.json.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"addRequiredExtension\",\n    value: function addRequiredExtension(extensionName, data) {\n      assert(data);\n      this.addExtension(extensionName, data);\n      this.registerRequiredExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"registerUsedExtension\",\n    value: function registerUsedExtension(extensionName) {\n      this.json.extensionsUsed = this.json.extensionsUsed || [];\n\n      if (!this.json.extensionsUsed.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsUsed.push(extensionName);\n      }\n    }\n  }, {\n    key: \"registerRequiredExtension\",\n    value: function registerRequiredExtension(extensionName) {\n      this.registerUsedExtension(extensionName);\n      this.json.extensionsRequired = this.json.extensionsRequired || [];\n\n      if (!this.json.extensionsRequired.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsRequired.push(extensionName);\n      }\n    }\n  }, {\n    key: \"removeExtension\",\n    value: function removeExtension(extensionName) {\n      if (this.json.extensionsRequired) {\n        this._removeStringFromArray(this.json.extensionsRequired, extensionName);\n      }\n\n      if (this.json.extensionsUsed) {\n        this._removeStringFromArray(this.json.extensionsUsed, extensionName);\n      }\n\n      if (this.json.extensions) {\n        delete this.json.extensions[extensionName];\n      }\n    }\n  }, {\n    key: \"setObjectExtension\",\n    value: function setObjectExtension(object, extensionName, data) {\n      var extensions = object.extensions || {};\n      extensions[extensionName] = data;\n    }\n  }, {\n    key: \"addMesh\",\n    value: function addMesh(attributes, indices) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n\n      var accessors = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessors,\n          indices: indices,\n          mode: mode\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addPointCloud\",\n    value: function addPointCloud(attributes) {\n      var accessorIndices = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessorIndices,\n          mode: 0\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(imageData, mimeType) {\n      mimeType = mimeType || getBinaryImageMIMEType(imageData);\n      var bufferViewIndex = this.addBufferView(imageData);\n      var glTFImage = {\n        bufferView: bufferViewIndex,\n        mimeType: mimeType\n      };\n      this.json.images = this.json.images || [];\n      this.json.images.push(glTFImage);\n      return this.json.images.length - 1;\n    }\n  }, {\n    key: \"addBufferView\",\n    value: function addBufferView(buffer) {\n      var byteLength = buffer.byteLength;\n      assert(Number.isFinite(byteLength));\n      this.sourceBuffers = this.sourceBuffers || [];\n      this.sourceBuffers.push(buffer);\n      var glTFBufferView = {\n        buffer: 0,\n        byteOffset: this.byteLength,\n        byteLength: byteLength\n      };\n      this.byteLength += padTo4Bytes(byteLength);\n      this.json.bufferViews = this.json.bufferViews || [];\n      this.json.bufferViews.push(glTFBufferView);\n      return this.json.bufferViews.length - 1;\n    }\n  }, {\n    key: \"addAccessor\",\n    value: function addAccessor(bufferViewIndex, accessor) {\n      var glTFAccessor = {\n        bufferView: bufferViewIndex,\n        type: getAccessorTypeFromSize(accessor.size),\n        componentType: accessor.componentType,\n        count: accessor.count\n      };\n      this.json.accessors = this.json.accessors || [];\n      this.json.accessors.push(glTFAccessor);\n      return this.json.accessors.length - 1;\n    }\n  }, {\n    key: \"addBinaryBuffer\",\n    value: function addBinaryBuffer(sourceBuffer) {\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        size: 3\n      };\n      var bufferViewIndex = this.addBufferView(sourceBuffer);\n      var accessorDefaults = {\n        size: accessor.size,\n        componentType: getComponentTypeFromArray(sourceBuffer),\n        count: Math.round(sourceBuffer.length / accessor.size)\n      };\n      return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n    }\n  }, {\n    key: \"createBinaryChunk\",\n    value: function createBinaryChunk() {\n      if (this.arrayBuffer) {\n        return;\n      }\n\n      var totalByteLength = this.byteLength;\n      var arrayBuffer = new ArrayBuffer(totalByteLength);\n      var targetArray = new Uint8Array(arrayBuffer);\n      var dstByteOffset = 0;\n\n      for (var i = 0; i < this.sourceBuffers.length; i++) {\n        var sourceBuffer = this.sourceBuffers[i];\n        dstByteOffset = copyToArray(sourceBuffer, targetArray, dstByteOffset);\n      }\n\n      this.json.buffers[0].byteLength = totalByteLength;\n      this.arrayBuffer = arrayBuffer;\n      this.sourceBuffers = [];\n    }\n  }, {\n    key: \"_removeStringFromArray\",\n    value: function _removeStringFromArray(array, string) {\n      var found = true;\n\n      while (found) {\n        var index = array.indexOf(string);\n\n        if (index > -1) {\n          array.splice(index, 1);\n        } else {\n          found = false;\n        }\n      }\n    }\n  }, {\n    key: \"json\",\n    get: function get() {\n      return this.gltf.json;\n    }\n  }]);\n\n  return GLTFScenegraph;\n}();\n\nexport { GLTFScenegraph as default };","export var KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nexport var UBER_POINT_CLOUD_EXTENSION = 'UBER_draco_point_cloud_compression';\nexport var KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nexport var KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport function getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\nexport function getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\nexport function getGLEnumFromSamplerParameter(parameter) {\n  var GL_TEXTURE_MAG_FILTER = 0x2800;\n  var GL_TEXTURE_MIN_FILTER = 0x2801;\n  var GL_TEXTURE_WRAP_S = 0x2802;\n  var GL_TEXTURE_WRAP_T = 0x2803;\n  var PARAMETER_MAP = {\n    magFilter: GL_TEXTURE_MAG_FILTER,\n    minFilter: GL_TEXTURE_MIN_FILTER,\n    wrapS: GL_TEXTURE_WRAP_S,\n    wrapT: GL_TEXTURE_WRAP_T\n  };\n  return PARAMETER_MAP[parameter];\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport { getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils';\nexport function getGLTFAccessors(attributes) {\n  var accessors = {};\n\n  for (var name in attributes) {\n    var attribute = attributes[name];\n\n    if (name !== 'indices') {\n      var glTFAccessor = getGLTFAccessor(attribute);\n      accessors[name] = glTFAccessor;\n    }\n  }\n\n  return accessors;\n}\nexport function getGLTFAccessor(attribute, gltfAttributeName) {\n  var _getAccessorData = getAccessorData(attribute, gltfAttributeName),\n      buffer = _getAccessorData.buffer,\n      size = _getAccessorData.size,\n      count = _getAccessorData.count;\n\n  var glTFAccessor = {\n    value: buffer,\n    size: size,\n    bufferView: null,\n    byteOffset: 0,\n    count: count,\n    type: getAccessorTypeFromSize(size),\n    componentType: getComponentTypeFromArray(buffer)\n  };\n  return glTFAccessor;\n}\nexport function getGLTFAttribute(data, gltfAttributeName) {\n  return data.attributes[data.glTFAttributeMap[gltfAttributeName]];\n}\n\nfunction getAccessorData(attribute, attributeName) {\n  var buffer = attribute;\n  var size = 1;\n  var count = 0;\n\n  if (attribute && attribute.value) {\n    buffer = attribute.value;\n    size = attribute.size || 1;\n  }\n\n  if (buffer) {\n    if (!ArrayBuffer.isView(buffer)) {\n      buffer = toTypedArray(buffer, Float32Array);\n    }\n\n    count = buffer.length / size;\n  }\n\n  return {\n    buffer: buffer,\n    size: size,\n    count: count\n  };\n}\n\nfunction toTypedArray(array, ArrayType) {\n  var convertTypedArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!array) {\n    return null;\n  }\n\n  if (Array.isArray(array)) {\n    return new ArrayType(array);\n  }\n\n  if (convertTypedArrays && !(array instanceof ArrayType)) {\n    return new ArrayType(array);\n  }\n\n  return array;\n}","import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _marked = _regeneratorRuntime.mark(meshPrimitiveIterator);\n\nimport { getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_DRACO_MESH_COMPRESSION } from '../gltf-constants';\nimport { getGLTFAccessors, getGLTFAccessor } from '../gltf-utils/gltf-attribute-utils';\nexport function decode(_x, _x2, _x3) {\n  return _decode.apply(this, arguments);\n}\n\nfunction _decode() {\n  _decode = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltfData, options, context) {\n    var scenegraph, promises, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, primitive;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (options.gltf.decompressMeshes) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            scenegraph = new GLTFScenegraph(gltfData);\n            promises = [];\n            _iteratorNormalCompletion4 = true;\n            _didIteratorError4 = false;\n            _iteratorError4 = undefined;\n            _context2.prev = 7;\n\n            for (_iterator4 = meshPrimitiveIterator(scenegraph)[Symbol.iterator](); !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n              primitive = _step4.value;\n\n              if (scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION)) {\n                promises.push(decompressPrimitive(primitive, scenegraph, options, context));\n              }\n            }\n\n            _context2.next = 15;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](7);\n            _didIteratorError4 = true;\n            _iteratorError4 = _context2.t0;\n\n          case 15:\n            _context2.prev = 15;\n            _context2.prev = 16;\n\n            if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n              _iterator4[\"return\"]();\n            }\n\n          case 18:\n            _context2.prev = 18;\n\n            if (!_didIteratorError4) {\n              _context2.next = 21;\n              break;\n            }\n\n            throw _iteratorError4;\n\n          case 21:\n            return _context2.finish(18);\n\n          case 22:\n            return _context2.finish(15);\n\n          case 23:\n            _context2.next = 25;\n            return Promise.all(promises);\n\n          case 25:\n            scenegraph.removeExtension(KHR_DRACO_MESH_COMPRESSION);\n\n          case 26:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee, null, [[7, 11, 15, 23], [16,, 18, 22]]);\n  }));\n  return _decode.apply(this, arguments);\n}\n\nexport function encode(gltfData) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scenegraph = new GLTFScenegraph(gltfData);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (scenegraph.json.meshes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var mesh = _step.value;\n      compressMesh(mesh, options);\n      scenegraph.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction decompressPrimitive(_x4, _x5, _x6, _x7) {\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction _decompressPrimitive() {\n  _decompressPrimitive = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(primitive, scenegraph, options, context) {\n    var compressedPrimitive, buffer, bufferCopy, parse, decodedData;\n    return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            compressedPrimitive = scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION);\n            buffer = scenegraph.getTypedArrayForBufferView(compressedPrimitive.bufferView);\n            bufferCopy = getZeroOffsetArrayBuffer(buffer.buffer, buffer.byteOffset);\n            parse = context.parse;\n            _context3.next = 6;\n            return parse(bufferCopy, [], options, context);\n\n          case 6:\n            decodedData = _context3.sent;\n            primitive.attributes = getGLTFAccessors(decodedData.attributes);\n\n            if (decodedData.indices) {\n              primitive.indices = getGLTFAccessor(decodedData.indices);\n            }\n\n            checkPrimitive(primitive);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction compressMesh(attributes, indices) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n  var options = arguments.length > 3 ? arguments[3] : undefined;\n  var context = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (!options.DracoWriter || !options.DracoLoader) {\n    throw new Error('DracoWriter/DracoLoader not available');\n  }\n\n  var compressedData = options.DracoWriter.encodeSync({\n    attributes: attributes\n  });\n  var parseSync = context.parseSync;\n  var decodedData = parseSync({\n    attributes: attributes\n  });\n\n  var fauxAccessors = options._addFauxAttributes(decodedData.attributes);\n\n  var bufferViewIndex = options.addBufferView(compressedData);\n  var glTFMesh = {\n    primitives: [{\n      attributes: fauxAccessors,\n      mode: mode,\n      extensions: _defineProperty({}, KHR_DRACO_MESH_COMPRESSION, {\n        bufferView: bufferViewIndex,\n        attributes: fauxAccessors\n      })\n    }]\n  };\n  return glTFMesh;\n}\n\nfunction checkPrimitive(primitive) {\n  if (!primitive.attributes && Object.keys(primitive.attributes).length > 0) {\n    throw new Error('Empty glTF primitive detected: Draco decompression failure?');\n  }\n}\n\nfunction meshPrimitiveIterator(scenegraph) {\n  var _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, mesh, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, primitive;\n\n  return _regeneratorRuntime.wrap(function meshPrimitiveIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _iteratorNormalCompletion2 = true;\n          _didIteratorError2 = false;\n          _iteratorError2 = undefined;\n          _context.prev = 3;\n          _iterator2 = (scenegraph.json.meshes || [])[Symbol.iterator]();\n\n        case 5:\n          if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n            _context.next = 36;\n            break;\n          }\n\n          mesh = _step2.value;\n          _iteratorNormalCompletion3 = true;\n          _didIteratorError3 = false;\n          _iteratorError3 = undefined;\n          _context.prev = 10;\n          _iterator3 = mesh.primitives[Symbol.iterator]();\n\n        case 12:\n          if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n            _context.next = 19;\n            break;\n          }\n\n          primitive = _step3.value;\n          _context.next = 16;\n          return primitive;\n\n        case 16:\n          _iteratorNormalCompletion3 = true;\n          _context.next = 12;\n          break;\n\n        case 19:\n          _context.next = 25;\n          break;\n\n        case 21:\n          _context.prev = 21;\n          _context.t0 = _context[\"catch\"](10);\n          _didIteratorError3 = true;\n          _iteratorError3 = _context.t0;\n\n        case 25:\n          _context.prev = 25;\n          _context.prev = 26;\n\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n\n        case 28:\n          _context.prev = 28;\n\n          if (!_didIteratorError3) {\n            _context.next = 31;\n            break;\n          }\n\n          throw _iteratorError3;\n\n        case 31:\n          return _context.finish(28);\n\n        case 32:\n          return _context.finish(25);\n\n        case 33:\n          _iteratorNormalCompletion2 = true;\n          _context.next = 5;\n          break;\n\n        case 36:\n          _context.next = 42;\n          break;\n\n        case 38:\n          _context.prev = 38;\n          _context.t1 = _context[\"catch\"](3);\n          _didIteratorError2 = true;\n          _iteratorError2 = _context.t1;\n\n        case 42:\n          _context.prev = 42;\n          _context.prev = 43;\n\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n\n        case 45:\n          _context.prev = 45;\n\n          if (!_didIteratorError2) {\n            _context.next = 48;\n            break;\n          }\n\n          throw _iteratorError2;\n\n        case 48:\n          return _context.finish(45);\n\n        case 49:\n          return _context.finish(42);\n\n        case 50:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[3, 38, 42, 50], [10, 21, 25, 33], [26,, 28, 32], [43,, 45, 49]]);\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport assert from '../utils/assert';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_LIGHTS_PUNCTUAL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_LIGHTS_PUNCTUAL);\n\n  if (extension) {\n    gltfScenegraph.json.lights = extension.lights;\n    gltfScenegraph.removeExtension(KHR_LIGHTS_PUNCTUAL);\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.nodes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var nodeExtension = gltfScenegraph.getObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n\n      if (nodeExtension) {\n        node.light = nodeExtension.light;\n      }\n\n      gltfScenegraph.removeObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (json.lights) {\n    var extension = gltfScenegraph.addExtensions(KHR_LIGHTS_PUNCTUAL);\n    assert(!extension.lights);\n    extension.lights = json.lights;\n    delete json.lights;\n  }\n\n  if (gltfScenegraph.json.lights) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = gltfScenegraph.json.lights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var light = _step2.value;\n        var node = light.node;\n        gltfScenegraph.addObjectExtension(node, KHR_LIGHTS_PUNCTUAL, light);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    delete gltfScenegraph.json.lights;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_MATERIALS_UNLIT } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.materials || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var material = _step.value;\n      var extension = material.extensions && material.extensions.KHR_materials_unlit;\n\n      if (extension) {\n        material.unlit = true;\n      }\n\n      gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (gltfScenegraph.materials) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = json.materials[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var material = _step2.value;\n\n        if (material.unlit) {\n          delete material.unlit;\n          gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT);\n          gltfScenegraph.addExtensions(KHR_MATERIALS_UNLIT);\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as KHR_draco_mesh_compression from './KHR_draco_mesh_compression';\nimport * as KHR_lights_punctual from './KHR_lights_punctual';\nimport * as KHR_materials_unlit from './KHR_materials_unlit';\nexport var EXTENSIONS = {\n  KHR_draco_mesh_compression: KHR_draco_mesh_compression,\n  KHR_lights_punctual: KHR_lights_punctual,\n  KHR_materials_unlit: KHR_materials_unlit\n};\nexport function decodeExtensions(_x) {\n  return _decodeExtensions.apply(this, arguments);\n}\n\nfunction _decodeExtensions() {\n  _decodeExtensions = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf) {\n    var options,\n        context,\n        extensionName,\n        excludes,\n        exclude,\n        extension,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options.gltf = options.gltf || {};\n            _context.t0 = _regeneratorRuntime.keys(EXTENSIONS);\n\n          case 4:\n            if ((_context.t1 = _context.t0()).done) {\n              _context.next = 14;\n              break;\n            }\n\n            extensionName = _context.t1.value;\n            excludes = options.gltf.excludeExtensions || {};\n            exclude = extensionName in excludes && !excludes[extensionName];\n\n            if (exclude) {\n              _context.next = 12;\n              break;\n            }\n\n            extension = EXTENSIONS[extensionName];\n            _context.next = 12;\n            return extension.decode(gltf, options, context);\n\n          case 12:\n            _context.next = 4;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _decodeExtensions.apply(this, arguments);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport { padTo4Bytes, assert } from '@loaders.gl/loader-utils';\nvar MAGIC_glTF = 0x676c5446;\nvar GLB_FILE_HEADER_SIZE = 12;\nvar GLB_CHUNK_HEADER_SIZE = 8;\nvar GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nvar GLB_CHUNK_TYPE_BIN = 0x004e4942;\nvar GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED = 0;\nvar GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED = 1;\nvar LE = true;\n\nfunction getMagicString(dataView) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n\nexport function isGLB(arrayBuffer) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var dataView = new DataView(arrayBuffer);\n  var _options$magic = options.magic,\n      magic = _options$magic === void 0 ? MAGIC_glTF : _options$magic;\n  var magic1 = dataView.getUint32(byteOffset, false);\n  return magic1 === magic || magic1 === MAGIC_glTF;\n}\nexport default function parseGLBSync(glb, arrayBuffer) {\n  var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var dataView = new DataView(arrayBuffer);\n  glb.type = getMagicString(dataView, byteOffset + 0);\n  glb.version = dataView.getUint32(byteOffset + 4, LE);\n  var byteLength = dataView.getUint32(byteOffset + 8, LE);\n  glb.header = {\n    byteOffset: byteOffset,\n    byteLength: byteLength\n  };\n  assert(glb.version === 2, \"Invalid GLB version \".concat(glb.version, \". Only supports v2.\"));\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  glb.json = {};\n  glb.binChunks = [];\n  parseGLBChunksSync(glb, dataView, byteOffset + GLB_FILE_HEADER_SIZE, options);\n  return byteOffset + glb.header.byteLength;\n}\n\nfunction parseGLBChunksSync(glb, dataView, byteOffset, options) {\n  while (byteOffset + 8 <= glb.header.byteLength) {\n    var chunkLength = dataView.getUint32(byteOffset + 0, LE);\n    var chunkFormat = dataView.getUint32(byteOffset + 4, LE);\n    byteOffset += GLB_CHUNK_HEADER_SIZE;\n\n    switch (chunkFormat) {\n      case GLB_CHUNK_TYPE_JSON:\n        parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_BIN:\n        parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    byteOffset += padTo4Bytes(chunkLength);\n  }\n\n  return byteOffset;\n}\n\nfunction parseJSONChunk(glb, dataView, byteOffset, chunkLength, options) {\n  var jsonChunk = new Uint8Array(dataView.buffer, byteOffset, chunkLength);\n  var textDecoder = new TextDecoder('utf8');\n  var jsonText = textDecoder.decode(jsonChunk);\n  glb.json = JSON.parse(jsonText);\n}\n\nfunction parseBINChunk(glb, dataView, byteOffset, chunkLength, options) {\n  glb.header.hasBinChunk = true;\n  glb.binChunks.push({\n    byteOffset: byteOffset,\n    byteLength: chunkLength,\n    arrayBuffer: dataView.buffer\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _DEFAULT_SAMPLER;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength } from './gltf-utils/gltf-utils';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nvar GL_SAMPLER = {\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  REPEAT: 0x2901,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_LINEAR: 0x2702\n};\nvar SAMPLER_PARAMETER_GLTF_TO_GL = {\n  magFilter: GL_SAMPLER.TEXTURE_MAG_FILTER,\n  minFilter: GL_SAMPLER.TEXTURE_MIN_FILTER,\n  wrapS: GL_SAMPLER.TEXTURE_WRAP_S,\n  wrapT: GL_SAMPLER.TEXTURE_WRAP_T\n};\nvar DEFAULT_SAMPLER = (_DEFAULT_SAMPLER = {}, _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MAG_FILTER, GL_SAMPLER.LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MIN_FILTER, GL_SAMPLER.NEAREST_MIPMAP_LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_S, GL_SAMPLER.REPEAT), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_, GL_SAMPLER.REPEAT), _DEFAULT_SAMPLER);\n\nfunction getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\n\nfunction getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\n\nvar GLTFPostProcessor = function () {\n  function GLTFPostProcessor() {\n    _classCallCheck(this, GLTFPostProcessor);\n  }\n\n  _createClass(GLTFPostProcessor, [{\n    key: \"postProcess\",\n    value: function postProcess(gltf) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var json = gltf.json,\n          _gltf$buffers = gltf.buffers,\n          buffers = _gltf$buffers === void 0 ? [] : _gltf$buffers,\n          _gltf$images = gltf.images,\n          images = _gltf$images === void 0 ? [] : _gltf$images,\n          _gltf$baseUri = gltf.baseUri,\n          baseUri = _gltf$baseUri === void 0 ? '' : _gltf$baseUri;\n      assert(json);\n      this.baseUri = baseUri;\n      this.json = json;\n      this.buffers = buffers;\n      this.images = images;\n\n      this._resolveTree(this.json, options);\n\n      return this.json;\n    }\n  }, {\n    key: \"_resolveTree\",\n    value: function _resolveTree(json) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (json.bufferViews) {\n        json.bufferViews = json.bufferViews.map(function (bufView, i) {\n          return _this._resolveBufferView(bufView, i);\n        });\n      }\n\n      if (json.images) {\n        json.images = json.images.map(function (image, i) {\n          return _this._resolveImage(image, i, options);\n        });\n      }\n\n      if (json.samplers) {\n        json.samplers = json.samplers.map(function (sampler, i) {\n          return _this._resolveSampler(sampler, i);\n        });\n      }\n\n      if (json.textures) {\n        json.textures = json.textures.map(function (texture, i) {\n          return _this._resolveTexture(texture, i);\n        });\n      }\n\n      if (json.accessors) {\n        json.accessors = json.accessors.map(function (accessor, i) {\n          return _this._resolveAccessor(accessor, i, options);\n        });\n      }\n\n      if (json.materials) {\n        json.materials = json.materials.map(function (material, i) {\n          return _this._resolveMaterial(material, i);\n        });\n      }\n\n      if (json.meshes) {\n        json.meshes = json.meshes.map(function (mesh, i) {\n          return _this._resolveMesh(mesh, i);\n        });\n      }\n\n      if (json.nodes) {\n        json.nodes = json.nodes.map(function (node, i) {\n          return _this._resolveNode(node, i);\n        });\n      }\n\n      if (json.skins) {\n        json.skins = json.skins.map(function (skin, i) {\n          return _this._resolveSkin(skin, i);\n        });\n      }\n\n      if (json.scenes) {\n        json.scenes = json.scenes.map(function (scene, i) {\n          return _this._resolveScene(scene, i);\n        });\n      }\n\n      if (json.scene !== undefined) {\n        json.scene = json.scenes[this.json.scene];\n      }\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this._get('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this._get('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this._get('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this._get('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this._get('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this._get('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this._get('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this._get('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this._get('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this._get('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this._get('buffers', index);\n    }\n  }, {\n    key: \"_get\",\n    value: function _get(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        console.warn(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"_resolveScene\",\n    value: function _resolveScene(scene, index) {\n      var _this2 = this;\n\n      scene.id = scene.id || \"scene-\".concat(index);\n      scene.nodes = (scene.nodes || []).map(function (node) {\n        return _this2.getNode(node);\n      });\n      return scene;\n    }\n  }, {\n    key: \"_resolveNode\",\n    value: function _resolveNode(node, index) {\n      var _this3 = this;\n\n      node.id = node.id || \"node-\".concat(index);\n\n      if (node.children) {\n        node.children = node.children.map(function (child) {\n          return _this3.getNode(child);\n        });\n      }\n\n      if (node.mesh !== undefined) {\n        node.mesh = this.getMesh(node.mesh);\n      }\n\n      if (node.camera !== undefined) {\n        node.camera = this.getCamera(node.camera);\n      }\n\n      if (node.skin !== undefined) {\n        node.skin = this.getSkin(node.skin);\n      }\n\n      return node;\n    }\n  }, {\n    key: \"_resolveSkin\",\n    value: function _resolveSkin(skin, index) {\n      skin.id = skin.id || \"skin-\".concat(index);\n      skin.inverseBindMatrices = this.getAccessor(skin.inverseBindMatrices);\n      return skin;\n    }\n  }, {\n    key: \"_resolveMesh\",\n    value: function _resolveMesh(mesh, index) {\n      var _this4 = this;\n\n      mesh.id = mesh.id || \"mesh-\".concat(index);\n\n      if (mesh.primitives) {\n        mesh.primitives = mesh.primitives.map(function (primitive) {\n          primitive = _objectSpread({}, primitive);\n          var attributes = primitive.attributes;\n          primitive.attributes = {};\n\n          for (var attribute in attributes) {\n            primitive.attributes[attribute] = _this4.getAccessor(attributes[attribute]);\n          }\n\n          if (primitive.indices !== undefined) {\n            primitive.indices = _this4.getAccessor(primitive.indices);\n          }\n\n          if (primitive.material !== undefined) {\n            primitive.material = _this4.getMaterial(primitive.material);\n          }\n\n          return primitive;\n        });\n      }\n\n      return mesh;\n    }\n  }, {\n    key: \"_resolveMaterial\",\n    value: function _resolveMaterial(material, index) {\n      material.id = material.id || \"material-\".concat(index);\n\n      if (material.normalTexture) {\n        material.normalTexture = _objectSpread({}, material.normalTexture);\n        material.normalTexture.texture = this.getTexture(material.normalTexture.index);\n      }\n\n      if (material.occlusionTexture) {\n        material.occlustionTexture = _objectSpread({}, material.occlustionTexture);\n        material.occlusionTexture.texture = this.getTexture(material.occlusionTexture.index);\n      }\n\n      if (material.emissiveTexture) {\n        material.emmisiveTexture = _objectSpread({}, material.emmisiveTexture);\n        material.emissiveTexture.texture = this.getTexture(material.emissiveTexture.index);\n      }\n\n      if (material.pbrMetallicRoughness) {\n        material.pbrMetallicRoughness = _objectSpread({}, material.pbrMetallicRoughness);\n        var mr = material.pbrMetallicRoughness;\n\n        if (mr.baseColorTexture) {\n          mr.baseColorTexture = _objectSpread({}, mr.baseColorTexture);\n          mr.baseColorTexture.texture = this.getTexture(mr.baseColorTexture.index);\n        }\n\n        if (mr.metallicRoughnessTexture) {\n          mr.metallicRoughnessTexture = _objectSpread({}, mr.metallicRoughnessTexture);\n          mr.metallicRoughnessTexture.texture = this.getTexture(mr.metallicRoughnessTexture.index);\n        }\n      }\n\n      return material;\n    }\n  }, {\n    key: \"_resolveAccessor\",\n    value: function _resolveAccessor(accessor, index) {\n      accessor.id = accessor.id || \"accessor-\".concat(index);\n\n      if (accessor.bufferView !== undefined) {\n        accessor.bufferView = this.getBufferView(accessor.bufferView);\n      }\n\n      accessor.bytesPerComponent = getBytesFromComponentType(accessor.componentType);\n      accessor.components = getSizeFromAccessorType(accessor.type);\n      accessor.bytesPerElement = accessor.bytesPerComponent * accessor.components;\n\n      if (accessor.bufferView) {\n        var buffer = accessor.bufferView.buffer;\n\n        var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, accessor.bufferView),\n            ArrayType = _getAccessorArrayType.ArrayType,\n            length = _getAccessorArrayType.length;\n\n        var byteOffset = (accessor.bufferView.byteOffset || 0) + buffer.byteOffset;\n        accessor.value = new ArrayType(buffer.arrayBuffer, byteOffset, length);\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"_resolveTexture\",\n    value: function _resolveTexture(texture, index) {\n      texture.id = texture.id || \"texture-\".concat(index);\n      texture.sampler = 'sampler' in texture ? this.getSampler(texture.sampler) : DEFAULT_SAMPLER;\n      texture.source = this.getImage(texture.source);\n      return texture;\n    }\n  }, {\n    key: \"_resolveSampler\",\n    value: function _resolveSampler(sampler, index) {\n      sampler.id = sampler.id || \"sampler-\".concat(index);\n      sampler.parameters = {};\n\n      for (var key in sampler) {\n        var glEnum = this._enumSamplerParameter(key);\n\n        if (glEnum !== undefined) {\n          sampler.parameters[glEnum] = sampler[key];\n        }\n      }\n\n      return sampler;\n    }\n  }, {\n    key: \"_enumSamplerParameter\",\n    value: function _enumSamplerParameter(key) {\n      return SAMPLER_PARAMETER_GLTF_TO_GL[key];\n    }\n  }, {\n    key: \"_resolveImage\",\n    value: function _resolveImage(image, index) {\n      image.id = image.id || \"image-\".concat(index);\n\n      if (image.bufferView !== undefined) {\n        image.bufferView = this.getBufferView(image.bufferView);\n      }\n\n      var preloadedImage = this.images[index];\n\n      if (preloadedImage) {\n        image.image = preloadedImage;\n      }\n\n      image.getImageAsync = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.warn('loaders.gl/gltf: image.getImageAsync is deprecated, use image.image');\n                return _context.abrupt(\"return\", image.image);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return image;\n    }\n  }, {\n    key: \"_resolveBufferView\",\n    value: function _resolveBufferView(bufferView, index) {\n      bufferView.id = bufferView.id || \"bufferView-\".concat(index);\n      var bufferIndex = bufferView.buffer;\n      bufferView.buffer = this.buffers[bufferIndex];\n      var arrayBuffer = this.buffers[bufferIndex].arrayBuffer;\n      var byteOffset = this.buffers[bufferIndex].byteOffset || 0;\n\n      if ('byteOffset' in bufferView) {\n        byteOffset += bufferView.byteOffset;\n      }\n\n      bufferView.data = new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n      return bufferView;\n    }\n  }, {\n    key: \"_resolveCamera\",\n    value: function _resolveCamera(camera, index) {\n      camera.id = camera.id || \"camera-\".concat(index);\n\n      if (camera.perspective) {}\n\n      if (camera.orthographic) {}\n\n      return camera;\n    }\n  }]);\n\n  return GLTFPostProcessor;\n}();\n\nexport default function postProcessGLTF(gltf, options) {\n  return new GLTFPostProcessor().postProcess(gltf, options);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { ImageLoader } from '@loaders.gl/images';\nimport { parseJSON, getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { resolveUrl } from './gltf-utils/resolve-url';\nimport { getTypedArrayForBufferView } from './gltf-utils/get-typed-array';\nimport { decodeExtensions } from './extensions/gltf-extensions';\nimport parseGLBSync, { isGLB } from './parse-glb';\nimport postProcessGLTF from './post-process-gltf';\nexport function isGLTF(arrayBuffer) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var dataView = new DataView(arrayBuffer);\n  var byteOffset = 0;\n  return isGLB(dataView, byteOffset);\n}\nexport function parseGLTF(_x, _x2) {\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction _parseGLTF() {\n  _parseGLTF = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf, arrayBufferOrString) {\n    var byteOffset,\n        options,\n        context,\n        promises,\n        _promise,\n        promise,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n            options = _args.length > 3 ? _args[3] : undefined;\n            context = _args.length > 4 ? _args[4] : undefined;\n            parseGLTFContainerSync(gltf, arrayBufferOrString, byteOffset, options);\n            promises = [];\n\n            if (options.gltf.loadImages) {\n              _promise = loadImages(gltf, options, context);\n              promises.push(_promise);\n            }\n\n            if (!options.gltf.loadBuffers) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 9;\n            return loadBuffers(gltf, options, context);\n\n          case 9:\n            promise = decodeExtensions(gltf, options, context);\n            promises.push(promise);\n            _context.next = 13;\n            return Promise.all(promises);\n\n          case 13:\n            return _context.abrupt(\"return\", options.gltf.postProcess ? postProcessGLTF(gltf, options) : gltf);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction parseGLTFContainerSync(gltf, data, byteOffset, options) {\n  if (options.uri) {\n    gltf.baseUri = options.uri;\n  }\n\n  if (data instanceof ArrayBuffer && !isGLB(data, byteOffset, options)) {\n    var textDecoder = new TextDecoder();\n    data = textDecoder.decode(data);\n  }\n\n  if (typeof data === 'string') {\n    gltf.json = parseJSON(data);\n  } else if (data instanceof ArrayBuffer) {\n    var glb = {};\n    byteOffset = parseGLBSync(glb, data, byteOffset, options);\n    assert(glb.type === 'glTF', \"Invalid GLB magic string \".concat(glb.type));\n    gltf._glb = glb;\n    gltf.json = glb.json;\n  } else {\n    assert(false, \"GLTF: must be ArrayBuffer or string\");\n  }\n\n  var buffers = gltf.json.buffers || [];\n  gltf.buffers = new Array(buffers.length).fill(null);\n\n  if (gltf._glb && gltf._glb.header.hasBinChunk) {\n    var binChunks = gltf._glb.binChunks;\n    gltf.buffers[0] = {\n      arrayBuffer: binChunks[0].arrayBuffer,\n      byteOffset: binChunks[0].byteOffset,\n      byteLength: binChunks[0].byteLength\n    };\n  }\n\n  var images = gltf.json.images || [];\n  gltf.images = new Array(images.length).fill({});\n}\n\nfunction loadBuffers(_x3, _x4, _x5) {\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction _loadBuffers() {\n  _loadBuffers = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(gltf, options, context) {\n    var i, buffer, fetch, uri, response, arrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            i = 0;\n\n          case 1:\n            if (!(i < gltf.json.buffers.length)) {\n              _context2.next = 18;\n              break;\n            }\n\n            buffer = gltf.json.buffers[i];\n\n            if (!buffer.uri) {\n              _context2.next = 15;\n              break;\n            }\n\n            fetch = context.fetch;\n            assert(fetch);\n            uri = resolveUrl(buffer.uri, options);\n            _context2.next = 9;\n            return fetch(uri);\n\n          case 9:\n            response = _context2.sent;\n            _context2.next = 12;\n            return response.arrayBuffer();\n\n          case 12:\n            arrayBuffer = _context2.sent;\n            gltf.buffers[i] = {\n              arrayBuffer: arrayBuffer,\n              byteOffset: 0,\n              byteLength: arrayBuffer.byteLength\n            };\n            delete buffer.uri;\n\n          case 15:\n            ++i;\n            _context2.next = 1;\n            break;\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction loadImages(_x6, _x7, _x8) {\n  return _loadImages.apply(this, arguments);\n}\n\nfunction _loadImages() {\n  _loadImages = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(gltf, options, context) {\n    var images, promises, i;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            images = gltf.json.images || [];\n            promises = [];\n\n            for (i = 0; i < images.length; ++i) {\n              promises.push(loadImage(gltf, images[i], i, options, context));\n            }\n\n            _context3.next = 5;\n            return Promise.all(promises);\n\n          case 5:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadImages.apply(this, arguments);\n}\n\nfunction loadImage(_x9, _x10, _x11, _x12, _x13) {\n  return _loadImage.apply(this, arguments);\n}\n\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(gltf, image, i, options, context) {\n    var fetch, parse, arrayBuffer, uri, response, array, parsedImage;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            fetch = context.fetch, parse = context.parse;\n\n            if (!image.uri) {\n              _context4.next = 9;\n              break;\n            }\n\n            uri = resolveUrl(image.uri, options);\n            _context4.next = 5;\n            return fetch(uri);\n\n          case 5:\n            response = _context4.sent;\n            _context4.next = 8;\n            return response.arrayBuffer();\n\n          case 8:\n            arrayBuffer = _context4.sent;\n\n          case 9:\n            if (Number.isFinite(image.bufferView)) {\n              array = getTypedArrayForBufferView(gltf.json, gltf.buffers, image.bufferView);\n              arrayBuffer = getZeroOffsetArrayBuffer(array.buffer, array.byteOffset, array.byteLength);\n            }\n\n            assert(arrayBuffer, 'glTF image has no data');\n            _context4.next = 13;\n            return parse(arrayBuffer, ImageLoader, {}, context);\n\n          case 13:\n            parsedImage = _context4.sent;\n            gltf.images[i] = parsedImage;\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadImage.apply(this, arguments);\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { parseGLTF } from './lib/parse-gltf';\nvar VERSION = typeof \"2.0.0-beta.2\" !== 'undefined' ? \"2.0.0-beta.2\" : 'latest';\nvar GLTFLoader = {\n  id: 'gltf',\n  name: 'glTF',\n  version: VERSION,\n  extensions: ['gltf', 'glb'],\n  mimeType: 'model/gltf+json',\n  text: true,\n  binary: true,\n  test: 'glTF',\n  parse: parse,\n  options: {\n    gltf: {\n      loadBuffers: true,\n      loadImages: true,\n      decompressMeshes: true,\n      postProcess: true\n    },\n    uri: '',\n    log: console\n  }\n};\nexport default GLTFLoader;\nexport function parse(_x) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer) {\n    var options,\n        context,\n        _options,\n        _options$byteOffset,\n        byteOffset,\n        gltf,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options = _objectSpread({}, GLTFLoader.options, {}, options);\n            options.gltf = _objectSpread({}, GLTFLoader.options.gltf, {}, options.gltf);\n            addDeprecatedGLTFOptions(options);\n            _options = options, _options$byteOffset = _options.byteOffset, byteOffset = _options$byteOffset === void 0 ? 0 : _options$byteOffset;\n            gltf = {};\n            _context.next = 9;\n            return parseGLTF(gltf, arrayBuffer, byteOffset, options, context);\n\n          case 9:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction addDeprecatedGLTFOptions(options) {\n  if ('fetchImages' in options) {\n    options.gltf.loadImages = options.fetchImages;\n  }\n\n  if ('createImages' in options) {\n    options.gltf.loadImages = options.createImages;\n  }\n\n  if ('fetchLinkedResources' in options) {\n    options.gltf.fetchBuffers = options.fetchLinkedResources;\n  }\n\n  if ('decompress' in options) {\n    options.gltf.decompressMeshes = options.decompress;\n  }\n\n  if ('decompress' in options.gltf) {\n    options.gltf.decompressMeshes = options.gltf.decompress;\n  }\n\n  if ('postProcess' in options) {\n    options.gltf.postProcess = options.postProcess;\n  }\n}","import \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { global, isBrowser, isWorker } from '../env-utils/globals';\nimport { requireFromFile, requireFromString } from './require-utils.node';\nimport assert from '../env-utils/assert';\nvar LATEST = 'beta';\nvar VERSION = typeof \"2.0.0-beta.6\" !== 'undefined' ? \"2.0.0-beta.6\" : LATEST;\nvar loadLibraryPromises = {};\nexport function loadLibrary(libraryUrl) {\n  var moduleName,\n      options,\n      _args = arguments;\n  return _regeneratorRuntime.async(function loadLibrary$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          moduleName = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n          options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n          if (moduleName) {\n            libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n          }\n\n          loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(loadLibraryPromises[libraryUrl]);\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function getLibraryUrl(library, moduleName, options) {\n  var modules = options.modules || {};\n\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\n\nfunction loadLibraryFromFile(libraryUrl) {\n  var _response, response, scriptSource;\n\n  return _regeneratorRuntime.async(function loadLibraryFromFile$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!libraryUrl.endsWith('wasm')) {\n            _context2.next = 7;\n            break;\n          }\n\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(fetch(libraryUrl));\n\n        case 3:\n          _response = _context2.sent;\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(_response.arrayBuffer());\n\n        case 6:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 7:\n          if (isBrowser) {\n            _context2.next = 9;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", requireFromFile(libraryUrl));\n\n        case 9:\n          if (!isWorker) {\n            _context2.next = 11;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", importScripts(libraryUrl));\n\n        case 11:\n          _context2.next = 13;\n          return _regeneratorRuntime.awrap(fetch(libraryUrl));\n\n        case 13:\n          response = _context2.sent;\n          _context2.next = 16;\n          return _regeneratorRuntime.awrap(response.text());\n\n        case 16:\n          scriptSource = _context2.sent;\n          return _context2.abrupt(\"return\", loadLibraryFromString(scriptSource, libraryUrl));\n\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n\n  var script = document.createElement('script');\n  script.id = id;\n\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n\n  document.body.appendChild(script);\n  return null;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadLibrary, global } from '@loaders.gl/loader-utils';\nvar loadDecoderPromise;\nvar loadEncoderPromise;\nexport function loadDracoDecoderModule(options) {\n  var modules;\n  return _regeneratorRuntime.async(function loadDracoDecoderModule$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          modules = options.modules || {};\n\n          if (!modules.draco3d) {\n            _context.next = 3;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            draco: modules.draco3d.createDecoderModule()\n          });\n\n        case 3:\n          loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(loadDecoderPromise);\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function loadDracoEncoderModule(options) {\n  var modules;\n  return _regeneratorRuntime.async(function loadDracoEncoderModule$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          modules = options.modules || {};\n\n          if (!modules.draco3d) {\n            _context2.next = 3;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            draco: modules.draco3d.createEncoderModule()\n          });\n\n        case 3:\n          loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(loadEncoderPromise);\n\n        case 6:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction loadDracoDecoder(options) {\n  var DracoDecoderModule, wasmBinary, _ref, _ref2;\n\n  return _regeneratorRuntime.async(function loadDracoDecoder$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.t0 = options.draco && options.draco.decoderType;\n          _context3.next = _context3.t0 === 'js' ? 3 : _context3.t0 === 'wasm' ? 7 : 7;\n          break;\n\n        case 3:\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_decoder.js', 'draco', options));\n\n        case 5:\n          DracoDecoderModule = _context3.sent;\n          return _context3.abrupt(\"break\", 23);\n\n        case 7:\n          _context3.t1 = _regeneratorRuntime;\n          _context3.t2 = Promise;\n          _context3.next = 11;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_wasm_wrapper.js', 'draco', options));\n\n        case 11:\n          _context3.t3 = _context3.sent;\n          _context3.next = 14;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_decoder.wasm', 'draco', options));\n\n        case 14:\n          _context3.t4 = _context3.sent;\n          _context3.t5 = [_context3.t3, _context3.t4];\n          _context3.t6 = _context3.t2.all.call(_context3.t2, _context3.t5);\n          _context3.next = 19;\n          return _context3.t1.awrap.call(_context3.t1, _context3.t6);\n\n        case 19:\n          _ref = _context3.sent;\n          _ref2 = _slicedToArray(_ref, 2);\n          DracoDecoderModule = _ref2[0];\n          wasmBinary = _ref2[1];\n\n        case 23:\n          DracoDecoderModule = DracoDecoderModule || global.DracoDecoderModule;\n          _context3.next = 26;\n          return _regeneratorRuntime.awrap(initializeDracoDecoder(DracoDecoderModule, wasmBinary));\n\n        case 26:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 27:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  var options = {};\n\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise(function (resolve) {\n    DracoDecoderModule(_objectSpread({}, options, {\n      onModuleLoaded: function onModuleLoaded(draco) {\n        return resolve({\n          draco: draco\n        });\n      }\n    }));\n  });\n}\n\nfunction loadDracoEncoder(options) {\n  var DracoEncoderModule;\n  return _regeneratorRuntime.async(function loadDracoEncoder$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_encoder.js', 'draco', options));\n\n        case 2:\n          DracoEncoderModule = _context4.sent;\n          DracoEncoderModule = DracoEncoderModule || global.DracoEncoderModule;\n          return _context4.abrupt(\"return\", new Promise(function (resolve) {\n            DracoEncoderModule({\n              onModuleLoaded: function onModuleLoaded(draco) {\n                return resolve({\n                  draco: draco\n                });\n              }\n            });\n          }));\n\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\nvar DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\nvar DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\n\nvar DracoParser = function () {\n  function DracoParser(draco) {\n    _classCallCheck(this, DracoParser);\n\n    this.draco = draco;\n  }\n\n  _createClass(DracoParser, [{\n    key: \"destroy\",\n    value: function destroy() {}\n  }, {\n    key: \"destroyGeometry\",\n    value: function destroyGeometry(dracoGeometry) {\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry.dracoGeometry);\n      }\n    }\n  }, {\n    key: \"parseSync\",\n    value: function parseSync(arrayBuffer) {\n      var buffer = new this.draco.DecoderBuffer();\n      buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n      var decoder = new this.draco.Decoder();\n      var data = {};\n      var dracoStatus;\n      var dracoGeometry;\n      var header;\n\n      try {\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n\n        switch (geometryType) {\n          case this.draco.TRIANGULAR_MESH:\n            dracoGeometry = new this.draco.Mesh();\n            dracoStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.TRIANGULAR_MESH,\n              faceCount: dracoGeometry.num_faces(),\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          case this.draco.POINT_CLOUD:\n            dracoGeometry = new this.draco.PointCloud();\n            dracoStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.POINT_CLOUD,\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          default:\n            throw new Error('Unknown DRACO geometry type.');\n        }\n\n        if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n          var message = \"DRACO decompression failed: \".concat(dracoStatus.error_msg());\n\n          if (dracoGeometry) {\n            this.draco.destroy(dracoGeometry);\n          }\n\n          throw new Error(message);\n        }\n\n        data.header = {\n          vertexCount: header.vertexCount\n        };\n        data.loaderData = {\n          header: header\n        };\n        this.extractDRACOGeometry(decoder, dracoGeometry, geometryType, data);\n      } finally {\n        this.draco.destroy(decoder);\n        this.draco.destroy(buffer);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"extractDRACOGeometry\",\n    value: function extractDRACOGeometry(decoder, dracoGeometry, geometryType, geometry) {\n      var attributes = this.getAttributes(decoder, dracoGeometry);\n      var positionAttribute = attributes.POSITION;\n\n      if (!positionAttribute) {\n        throw new Error('DRACO decompressor: No position attribute found.');\n      }\n\n      this.getPositionAttributeMetadata(positionAttribute);\n\n      if (geometryType === this.draco.TRIANGULAR_MESH) {\n        attributes.indices = this.drawMode === 'TRIANGLE_STRIP' ? this.getMeshStripIndices(decoder, dracoGeometry) : this.getMeshFaceIndices(decoder, dracoGeometry);\n        geometry.mode = this.drawMode === 'TRIANGLE_STRIP' ? 5 : 4;\n      } else {\n        geometry.mode = 0;\n      }\n\n      if (attributes.indices) {\n        geometry.indices = {\n          value: attributes.indices,\n          size: 1\n        };\n        delete attributes.indices;\n      }\n\n      geometry.attributes = attributes;\n      return geometry;\n    }\n  }, {\n    key: \"getPositionAttributeMetadata\",\n    value: function getPositionAttributeMetadata(positionAttribute) {\n      this.metadata = this.metadata || {};\n      this.metadata.attributes = this.metadata.attributes || {};\n      var posTransform = new this.draco.AttributeQuantizationTransform();\n\n      if (posTransform.InitFromAttribute(positionAttribute)) {\n        this.metadata.attributes.position.isQuantized = true;\n        this.metadata.attributes.position.maxRange = posTransform.range();\n        this.metadata.attributes.position.numQuantizationBits = posTransform.quantization_bits();\n        this.metadata.attributes.position.minValues = new Float32Array(3);\n\n        for (var i = 0; i < 3; ++i) {\n          this.metadata.attributes.position.minValues[i] = posTransform.min_value(i);\n        }\n      }\n\n      this.draco.destroy(posTransform);\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(decoder, dracoGeometry) {\n      var attributes = {};\n      var numPoints = dracoGeometry.num_points();\n\n      for (var attributeName in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n        var attributeType = this.draco[attributeName];\n        var attributeId = decoder.GetAttributeId(dracoGeometry, attributeType);\n\n        if (attributeId !== -1) {\n          var dracoAttribute = decoder.GetAttribute(dracoGeometry, attributeId);\n\n          var _this$getAttributeTyp = this.getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName),\n              typedArray = _this$getAttributeTyp.typedArray;\n\n          attributes[DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[attributeName]] = {\n            value: typedArray,\n            size: typedArray.length / numPoints\n          };\n        }\n      }\n\n      return attributes;\n    }\n  }, {\n    key: \"getMeshFaceIndices\",\n    value: function getMeshFaceIndices(decoder, dracoGeometry) {\n      var numFaces = dracoGeometry.num_faces();\n      var numIndices = numFaces * 3;\n      var indices = new Uint32Array(numIndices);\n      var dracoArray = new this.draco.DracoInt32Array();\n\n      for (var i = 0; i < numFaces; ++i) {\n        decoder.GetFaceFromMesh(dracoGeometry, i, dracoArray);\n        var index = i * 3;\n        indices[index] = dracoArray.GetValue(0);\n        indices[index + 1] = dracoArray.GetValue(1);\n        indices[index + 2] = dracoArray.GetValue(2);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getMeshStripIndices\",\n    value: function getMeshStripIndices(decoder, dracoGeometry) {\n      var dracoArray = new this.draco.DracoInt32Array();\n      decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      var indices = new Uint32Array(dracoArray.size());\n\n      for (var i = 0; i < dracoArray.size(); ++i) {\n        indices[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getAttributeTypedArray\",\n    value: function getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName) {\n      if (dracoAttribute.ptr === 0) {\n        var message = \"DRACO decode bad attribute \".concat(attributeName);\n        throw new Error(message);\n      }\n\n      var attributeType = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[dracoAttribute.data_type()];\n      var numComponents = dracoAttribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var dracoArray;\n      var typedArray;\n\n      switch (attributeType) {\n        case Float32Array:\n          dracoArray = new this.draco.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Float32Array(numValues);\n          break;\n\n        case Int8Array:\n          dracoArray = new this.draco.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int8Array(numValues);\n          break;\n\n        case Int16Array:\n          dracoArray = new this.draco.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int16Array(numValues);\n          break;\n\n        case Int32Array:\n          dracoArray = new this.draco.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int32Array(numValues);\n          break;\n\n        case Uint8Array:\n          dracoArray = new this.draco.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint8Array(numValues);\n          break;\n\n        case Uint16Array:\n          dracoArray = new this.draco.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint16Array(numValues);\n          break;\n\n        case Uint32Array:\n          dracoArray = new this.draco.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint32Array(numValues);\n          break;\n\n        default:\n          var errorMsg = 'DRACO decoder: unexpected attribute type.';\n          throw new Error(errorMsg);\n      }\n\n      for (var i = 0; i < numValues; i++) {\n        typedArray[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return {\n        typedArray: typedArray,\n        components: numComponents\n      };\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(arrayBuffer, options) {\n      return this.parseSync(arrayBuffer, options);\n    }\n  }]);\n\n  return DracoParser;\n}();\n\nexport { DracoParser as default };","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadDracoDecoderModule } from './lib/draco-module-loader';\nimport DracoParser from './lib/draco-parser';\nvar VERSION = typeof \"2.0.0-beta.6\" !== 'undefined' ? \"2.0.0-beta.6\" : 'latest';\nexport var DracoWorkerLoader = {\n  id: 'draco',\n  name: 'Draco',\n  version: VERSION,\n  extensions: ['drc'],\n  mimeType: 'application/octet-stream',\n  binary: true,\n  test: 'DRACO',\n  options: {\n    draco: {\n      decoderType: (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) === 'object' ? 'wasm' : 'js',\n      libraryPath: \"libs/\",\n      workerUrl: \"https://unpkg.com/@loaders.gl/draco@\".concat(VERSION, \"/dist/draco-loader.worker.js\"),\n      localWorkerUrl: \"modules/draco/dist/draco-loader.worker.dev.js\"\n    }\n  }\n};\nexport var DracoLoader = _objectSpread({}, DracoWorkerLoader, {\n  parse: parse\n});\n\nfunction parse(arrayBuffer, options, context, loader) {\n  var _ref, draco, dracoParser;\n\n  return _regeneratorRuntime.async(function parse$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(loadDracoDecoderModule(options));\n\n        case 2:\n          _ref = _context.sent;\n          draco = _ref.draco;\n          dracoParser = new DracoParser(draco);\n          _context.prev = 5;\n          return _context.abrupt(\"return\", dracoParser.parseSync(arrayBuffer, options));\n\n        case 7:\n          _context.prev = 7;\n          dracoParser.destroy();\n          return _context.finish(7);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[5,, 7, 10]]);\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Headers = function () {\n  function Headers(headers) {\n    _classCallCheck(this, Headers);\n\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function (value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function (header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function (name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  _createClass(Headers, [{\n    key: \"append\",\n    value: function append(name, value) {\n      name = normalizeName(name);\n      value = normalizeValue(value);\n      var oldValue = this.map[name];\n      this.map[name] = oldValue ? \"\".concat(oldValue, \", \").concat(value) : value;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      delete this.map[normalizeName(name)];\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      name = normalizeName(name);\n      return this.has(name) ? this.map[name] : null;\n    }\n  }, {\n    key: \"has\",\n    value: function has(name) {\n      return this.map.hasOwnProperty(normalizeName(name));\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.map[normalizeName(name)] = normalizeValue(value);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback, thisArg) {\n      for (var name in this.map) {\n        if (this.map.hasOwnProperty(name)) {\n          callback.call(thisArg, this.map[name], name, this);\n        }\n      }\n    }\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push(name);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      var items = [];\n      this.forEach(function (value) {\n        items.push(value);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"entries\",\n    value: function entries() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push([name, value]);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: Symbol.iterator,\n    value: _regeneratorRuntime.mark(function value() {\n      return _regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.delegateYield(this.entries(), \"t0\", 1);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this);\n    })\n  }]);\n\n  return Headers;\n}();\n\nexport { Headers as default };\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name);\n  }\n\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name');\n  }\n\n  return name.toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value);\n  }\n\n  return value;\n}\n\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function next() {\n      var value = items.shift();\n      return {\n        done: value === undefined,\n        value: value\n      };\n    }\n  };\n\n  iterator[Symbol.iterator] = function () {\n    return iterator;\n  };\n\n  return iterator;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport fs from 'fs';\nimport Headers from './headers.node';\nimport { readFile, createReadStream } from './read-file.node';\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nvar NodeFetchResponse = function () {\n  function NodeFetchResponse(url, options) {\n    _classCallCheck(this, NodeFetchResponse);\n\n    this._url = url;\n    this._ok = true;\n    this._status = 200;\n    this.options = options;\n    this.bodyUsed = false;\n    this._headers = null;\n  }\n\n  _createClass(NodeFetchResponse, [{\n    key: \"arrayBuffer\",\n    value: function arrayBuffer() {\n      var data;\n      return _regeneratorRuntime.async(function arrayBuffer$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.bodyUsed = true;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(readFile(this.url, this.options));\n\n            case 3:\n              data = _context.sent;\n              return _context.abrupt(\"return\", data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"text\",\n    value: function text() {\n      var arrayBuffer, textDecoder;\n      return _regeneratorRuntime.async(function text$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.arrayBuffer());\n\n            case 2:\n              arrayBuffer = _context2.sent;\n              textDecoder = new TextDecoder();\n              return _context2.abrupt(\"return\", textDecoder.decode(arrayBuffer));\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"json\",\n    value: function json() {\n      var text;\n      return _regeneratorRuntime.async(function json$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(this.text());\n\n            case 2:\n              text = _context3.sent;\n              return _context3.abrupt(\"return\", JSON.parse(text));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_getHeaders\",\n    value: function _getHeaders() {\n      var headers = {};\n\n      if (this.httpResponse) {\n        var httpHeaders = this.httpResponse.getHeaders();\n\n        for (var name in httpHeaders) {\n          var header = headers[name];\n          headers[name] = String(header);\n        }\n      } else {\n        var contentLength = this._getContentLength();\n\n        if (Number.isFinite(contentLength)) {\n          headers['Content-Length'] = contentLength;\n        }\n      }\n\n      return new Headers(headers);\n    }\n  }, {\n    key: \"_getContentLength\",\n    value: function _getContentLength() {\n      if (isRequestURL(this.url)) {\n        return null;\n      } else if (isDataURL(this.url)) {\n        return this.url.length - 'data:'.length;\n      }\n\n      var stats = fs.statSync(this.url);\n      return stats.size;\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return this._ok;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this._status;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._url;\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      this._headers = this._headers || this._getHeaders();\n      return this._headers;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      var url = this.url,\n          options = this.options;\n      this.bodyUsed = true;\n      return createReadStream(url, options);\n    }\n  }]);\n\n  return NodeFetchResponse;\n}();\n\nexport { NodeFetchResponse as default };","import NodeFetchResponse from './response.node';\nexport default function fetchNode(url, options) {\n  return new NodeFetchResponse(url, options);\n}","import { isBrowser, global } from './utils/globals';\nimport { TextDecoder, TextEncoder } from './text-encoding/encoding';\nimport * as base64 from './text-encoding/btoa.node';\nimport HeadersNode from './fetch-node/headers.node';\nimport ResponseNode from './fetch-node/response.node';\nimport fetchNode from './fetch-node/fetch.node';\nimport { encodeImageNode } from './images-node/encode-image.node';\nimport { parseImageNode } from './images-node/parse-image.node';\n\nif (!('TextEncoder' in global) && TextEncoder) {\n  global['TextEncoder'] = TextEncoder;\n}\n\nif (!('TextDecoder' in global) && TextDecoder) {\n  global['TextDecoder'] = TextDecoder;\n}\n\nif (!isBrowser && !('atob' in global) && base64.atob) {\n  global['atob'] = base64.atob;\n}\n\nif (!isBrowser && !('btoa' in global) && base64.btoa) {\n  global['btoa'] = base64.btoa;\n}\n\nif (!isBrowser && !('Headers' in global) && HeadersNode) {\n  global['Headers'] = HeadersNode;\n}\n\nif (!isBrowser && !('Response' in global) && ResponseNode) {\n  global['Respone'] = ResponseNode;\n}\n\nif (!isBrowser && !('fetch' in global) && fetchNode) {\n  global['fetch'] = fetchNode;\n}\n\nif (!isBrowser && !('_encodeImageNode' in global) && encodeImageNode) {\n  global['_encodeImageNode'] = encodeImageNode;\n}\n\nif (!isBrowser && !('_parseImageNode' in global) && parseImageNode) {\n  global['_parseImageNode'] = parseImageNode;\n}","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '@luma.gl/webgl';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import {Matrix4} from 'math.gl';\nimport {log} from '@luma.gl/webgl';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class GroupNode extends ScenegraphNode {\n  constructor(props = {}) {\n    props = Array.isArray(props) ? {children: props} : props;\n    const {children = []} = props;\n    log.assert(\n      children.every(child => child instanceof ScenegraphNode),\n      'every child must an instance of ScenegraphNode'\n    );\n    super(props);\n    this.children = children;\n  }\n\n  // Unpacks arrays and nested arrays of children\n  add(...children) {\n    for (const child of children) {\n      if (Array.isArray(child)) {\n        this.add(...child);\n      } else {\n        this.children.push(child);\n      }\n    }\n    return this;\n  }\n\n  remove(child) {\n    const children = this.children;\n    const indexOf = children.indexOf(child);\n    if (indexOf > -1) {\n      children.splice(indexOf, 1);\n    }\n    return this;\n  }\n\n  removeAll() {\n    this.children = [];\n    return this;\n  }\n\n  delete() {\n    this.children.forEach(child => child.delete());\n    this.removeAll();\n    super.delete();\n  }\n\n  traverse(visitor, {worldMatrix = new Matrix4()} = {}) {\n    const modelMatrix = new Matrix4(worldMatrix).multiplyRight(this.matrix);\n\n    for (const child of this.children) {\n      if (child instanceof GroupNode) {\n        child.traverse(visitor, {worldMatrix: modelMatrix});\n      } else {\n        visitor(child, {worldMatrix: modelMatrix});\n      }\n    }\n  }\n}\n","import {assert, log} from '@luma.gl/webgl';\nimport {Matrix4, Quaternion} from 'math.gl';\n\n// TODO: import from loaders.gl?\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\n//\n\nfunction accessorToJsArray(accessor) {\n  if (!accessor._animation) {\n    const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n    const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n    const length = components * accessor.count;\n    const {buffer, byteOffset} = accessor.bufferView.data;\n\n    const array = new ArrayType(buffer, byteOffset + (accessor.byteOffset || 0), length);\n\n    if (components === 1) {\n      accessor._animation = Array.from(array);\n    } else {\n      // Slice array\n      const slicedArray = [];\n      for (let i = 0; i < array.length; i += components) {\n        slicedArray.push(Array.from(array.slice(i, i + components)));\n      }\n      accessor._animation = slicedArray;\n    }\n  }\n\n  return accessor._animation;\n}\n\n// TODO: share with GLTFInstantiator\nconst helperMatrix = new Matrix4();\nfunction applyTranslationRotationScale(gltfNode, node) {\n  node.matrix.identity();\n\n  if (gltfNode.translation) {\n    node.matrix.translate(gltfNode.translation);\n  }\n\n  if (gltfNode.rotation) {\n    const rotationMatrix = helperMatrix.fromQuaternion(gltfNode.rotation);\n    node.matrix.multiplyRight(rotationMatrix);\n  }\n\n  if (gltfNode.scale) {\n    node.matrix.scale(gltfNode.scale);\n  }\n}\n\nconst quaternion = new Quaternion();\nfunction linearInterpolate(target, path, start, stop, ratio) {\n  if (path === 'rotation') {\n    // SLERP when path is rotation\n    quaternion.slerp({start, target: stop, ratio});\n    for (let i = 0; i < quaternion.length; i++) {\n      target[path][i] = quaternion[i];\n    }\n  } else {\n    // regular interpolation\n    for (let i = 0; i < start.length; i++) {\n      target[path][i] = ratio * stop[i] + (1 - ratio) * start[i];\n    }\n  }\n}\n\nfunction cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio: t}) {\n  // TODO: Quaternion might need normalization\n  for (let i = 0; i < target[path].length; i++) {\n    const m0 = outTangent0[i] * tDiff;\n    const m1 = inTangent1[i] * tDiff;\n    target[path][i] =\n      (2 * Math.pow(t, 3) - 3 * Math.pow(t, 2) + 1) * p0[i] +\n      (Math.pow(t, 3) - 2 * Math.pow(t, 2) + t) * m0 +\n      (-2 * Math.pow(t, 3) + 3 * Math.pow(t, 2)) * p1[i] +\n      (Math.pow(t, 3) - Math.pow(t, 2)) * m1;\n  }\n}\n\nfunction stepInterpolate(target, path, value) {\n  for (let i = 0; i < value.length; i++) {\n    target[path][i] = value[i];\n  }\n}\n\nfunction interpolate(time, {input, interpolation, output}, target, path) {\n  const maxTime = input[input.length - 1];\n  const animationTime = time % maxTime;\n\n  const nextIndex = input.findIndex(t => t >= animationTime);\n  const previousIndex = Math.max(0, nextIndex - 1);\n\n  if (!Array.isArray(target[path])) {\n    switch (path) {\n      case 'translation':\n        target[path] = [0, 0, 0];\n        break;\n\n      case 'rotation':\n        target[path] = [0, 0, 0, 1];\n        break;\n\n      case 'scale':\n        target[path] = [1, 1, 1];\n        break;\n\n      default:\n        log.warn(`Bad animation path ${path}`)();\n    }\n  }\n\n  assert(target[path].length === output[previousIndex].length);\n  const previousTime = input[previousIndex];\n  const nextTime = input[nextIndex];\n\n  switch (interpolation) {\n    case 'STEP':\n      stepInterpolate(target, path, output[previousIndex]);\n      break;\n\n    case 'LINEAR':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        linearInterpolate(target, path, output[previousIndex], output[nextIndex], ratio);\n      }\n      break;\n\n    case 'CUBICSPLINE':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        const tDiff = nextTime - previousTime;\n\n        const p0 = output[3 * previousIndex + 1];\n        const outTangent0 = output[3 * previousIndex + 2];\n        const inTangent1 = output[3 * nextIndex + 0];\n        const p1 = output[3 * nextIndex + 1];\n\n        cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio});\n      }\n      break;\n\n    default:\n      log.warn(`Interpolation ${interpolation} not supported`)();\n      break;\n  }\n}\n\nclass GLTFAnimation {\n  constructor(props) {\n    this.startTime = 0;\n    this.playing = true;\n    this.speed = 1;\n\n    Object.assign(this, props);\n  }\n\n  animate(timeMs) {\n    if (!this.playing) {\n      return;\n    }\n\n    const absTime = timeMs / 1000;\n    const time = (absTime - this.startTime) * this.speed;\n\n    this.channels.forEach(({sampler, target, path}) => {\n      interpolate(time, sampler, target, path);\n      applyTranslationRotationScale(target, target._node);\n    });\n  }\n}\n\nexport default class GLTFAnimator {\n  constructor(gltf) {\n    this.animations = gltf.animations.map((animation, index) => {\n      const name = animation.name || `Animation-${index}`;\n      const samplers = animation.samplers.map(({input, interpolation = 'LINEAR', output}) => ({\n        input: accessorToJsArray(gltf.accessors[input]),\n        interpolation,\n        output: accessorToJsArray(gltf.accessors[output])\n      }));\n      const channels = animation.channels.map(({sampler, target}) => ({\n        sampler: samplers[sampler],\n        target: gltf.nodes[target.node],\n        path: target.path\n      }));\n      return new GLTFAnimation({name, channels});\n    });\n  }\n\n  // TODO(Tarek): This should be removed? (deck.gl is using this)\n  animate(time) {\n    this.setTime(time);\n  }\n\n  setTime(time) {\n    this.animations.forEach(animation => animation.animate(time));\n  }\n\n  getAnimations() {\n    return this.animations;\n  }\n}\n","import lights from '../lights/lights';\n\nimport vs from './pbr-vertex.glsl';\nimport fs from './pbr-fragment.glsl';\n\nexport default {\n  name: 'pbr',\n  vs,\n  fs,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  dependencies: [lights]\n};\n","export default `\\\nuniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else // HAS_TANGENTS != 1\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n`;\n","// This fragment shader defines a reference implementation for Physically Based Shading of\n// a microfacet surface material defined by a glTF model.\n//\n// Attribution:\n// MIT license, Copyright (c) 2016-2017 Mohamad Moneimne and Contributors\n\nexport default `\\\n#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n// WebGL 1.0 does not support non-constant in for loops\n// This provides an easy way to handle these cases\n// and still take advantage of WebGL 2.0\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n\n// debugging flags used for shader output of intermediate PBR variables\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n  float NdotL;                  // cos angle between normal and light direction\n  float NdotV;                  // cos angle between normal and view direction\n  float NdotH;                  // cos angle between normal and half vector\n  float LdotH;                  // cos angle between light direction and half vector\n  float VdotH;                  // cos angle between view direction and half vector\n  float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n  float metalness;              // metallic value at the surface\n  vec3 reflectance0;            // full reflectance color (normal incidence angle)\n  vec3 reflectance90;           // reflectance color at grazing angle\n  float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n  vec3 diffuseColor;            // color contribution from diffuse lighting\n  vec3 specularColor;           // color contribution from specular lighting\n  vec3 n;                       // normal at surface point\n  vec3 v;                       // vector from surface point to camera\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else //SRGB_FAST_APPROXIMATION\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif //SRGB_FAST_APPROXIMATION\n  return vec4(linOut,srgbIn.w);;\n#else //MANUAL_SRGB\n  return srgbIn;\n#endif //MANUAL_SRGB\n}\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\nvec3 getNormal()\n{\n  // Retrieve the tangent space matrix\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else // HAS_TANGENTS\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  // The tbn matrix is linearly interpolated, so we need to re-normalize\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0; // resolution of 512x512\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  // retrieve a scale and bias to F0. See [1], Figure 3\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n  // For presentation, this allows us to disable IBL terms\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across\n// the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface\n// for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes\n// from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);             // Vector from surface point to light\n  vec3 h = normalize(l+v);                        // Half vector between both l and v\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  // Calculate the shading terms for the microfacet specular shading model\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n\n  // Calculation of analytical lighting contribution\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n  // Metallic and Roughness material properties are packed together\n  // In glTF, these factors can be specified by fixed scalar values\n  // or from a metallic-roughness map\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n  // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n  // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n  // Roughness is authored as perceptual roughness; as is convention,\n  // convert to material roughness by squaring the perceptual roughness [2].\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n  // The albedo may be defined from a base texture or a flat color\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n  // Compute reflectance.\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n  // For typical incident reflectance range (between 4% to 100%) set the grazing\n  // reflectance to 100% for typical fresnel effect.\n  // For very low reflectance range on highly diffuse objects (below 4%),\n  // incrementally reduce grazing reflecance to 0%.\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();                          // normal at surface point\n  vec3 v = normalize(u_Camera - pbr_vPosition);  // Vector from surface point to camera\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0, // NdotL\n    NdotV,\n    0.0, // NdotH\n    0.0, // LdotH\n    0.0, // VdotH\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  // Apply ambient light\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n\n  // Apply directional light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n\n  // Apply point light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n\n  // Calculate lighting contribution from image based lighting source (IBL)\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n  // Apply optional PBR terms for additional (optional) shading\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n  // This section uses mix to override final color for reference app visualization\n  // of various parameters in the lighting equation.\n#ifdef PBR_DEBUG\n  // TODO: Figure out how to debug multiple lights\n\n  // color = mix(color, F, u_ScaleFGDSpec.x);\n  // color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n  // color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n  // color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n  // color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n`;\n","import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","import {Texture2D, log} from '@luma.gl/webgl';\n\nexport default class GLTFMaterialParser {\n  constructor(\n    gl,\n    {attributes, material, pbrDebug, imageBasedLightingEnvironment, lights, useTangents}\n  ) {\n    this.gl = gl;\n\n    this.defines = {\n      USE_TEX_LOD: 1,\n\n      // TODO: Use EXT_sRGB if available (Standard in WebGL 2.0)\n      MANUAL_SRGB: 1,\n      SRGB_FAST_APPROXIMATION: 1\n    };\n\n    this.uniforms = {\n      // TODO: find better values?\n      u_Camera: [0, 0, 0], // Model should override\n\n      u_MetallicRoughnessValues: [1, 1] // Default is 1 and 1\n    };\n\n    this.parameters = {};\n    this.generatedTextures = [];\n\n    if (imageBasedLightingEnvironment) {\n      this.uniforms.u_DiffuseEnvSampler = imageBasedLightingEnvironment.getDiffuseEnvSampler();\n      this.uniforms.u_SpecularEnvSampler = imageBasedLightingEnvironment.getSpecularEnvSampler();\n      this.uniforms.u_brdfLUT = imageBasedLightingEnvironment.getBrdfTexture();\n      this.uniforms.u_ScaleIBLAmbient = [1, 1];\n    }\n\n    if (pbrDebug) {\n      // Override final color for reference app visualization\n      // of various parameters in the lighting equation.\n      this.uniforms.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n      this.uniforms.u_ScaleFGDSpec = [0, 0, 0, 0];\n    }\n\n    this.defineIfPresent(attributes.NORMAL, 'HAS_NORMALS');\n    this.defineIfPresent(attributes.TANGENT && useTangents, 'HAS_TANGENTS');\n    this.defineIfPresent(attributes.TEXCOORD_0, 'HAS_UV');\n\n    this.defineIfPresent(imageBasedLightingEnvironment, 'USE_IBL');\n    this.defineIfPresent(lights, 'USE_LIGHTS');\n    this.defineIfPresent(pbrDebug, 'PBR_DEBUG');\n\n    if (material) {\n      this.parseMaterial(material);\n    }\n  }\n\n  defineIfPresent(value, name) {\n    if (value) {\n      this.defines[name] = 1;\n    }\n  }\n\n  parseTexture(gltfTexture, name, define = null) {\n    const parameters =\n      (gltfTexture.texture &&\n        gltfTexture.texture.sampler &&\n        gltfTexture.texture.sampler.parameters) ||\n      {};\n\n    const texture = new Texture2D(this.gl, {\n      id: gltfTexture.name || gltfTexture.id,\n      parameters,\n      pixelStore: {\n        [this.gl.UNPACK_FLIP_Y_WEBGL]: false\n      },\n      // Texture2D accepts a promise that returns an image as data (Async Textures)\n      data: gltfTexture.texture.source.image\n    });\n    this.uniforms[name] = texture;\n    this.defineIfPresent(define, define);\n    this.generatedTextures.push(texture);\n  }\n\n  parsePbrMetallicRoughness(pbrMetallicRoughness) {\n    if (pbrMetallicRoughness.baseColorTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.baseColorTexture,\n        'u_BaseColorSampler',\n        'HAS_BASECOLORMAP'\n      );\n    }\n    this.uniforms.u_BaseColorFactor = pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1];\n\n    if (pbrMetallicRoughness.metallicRoughnessTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.metallicRoughnessTexture,\n        'u_MetallicRoughnessSampler',\n        'HAS_METALROUGHNESSMAP'\n      );\n    }\n    const {metallicFactor = 1, roughnessFactor = 1} = pbrMetallicRoughness;\n    this.uniforms.u_MetallicRoughnessValues = [metallicFactor, roughnessFactor];\n  }\n\n  parseMaterial(material) {\n    if (material.pbrMetallicRoughness) {\n      this.parsePbrMetallicRoughness(material.pbrMetallicRoughness);\n    }\n    if (material.normalTexture) {\n      this.parseTexture(material.normalTexture, 'u_NormalSampler', 'HAS_NORMALMAP');\n\n      const {scale = 1} = material.normalTexture;\n      this.uniforms.u_NormalScale = scale;\n    }\n    if (material.occlusionTexture) {\n      this.parseTexture(material.occlusionTexture, 'u_OcclusionSampler', 'HAS_OCCLUSIONMAP');\n\n      const {strength = 1} = material.occlusionTexture;\n      this.uniforms.u_OcclusionStrength = strength;\n    }\n    if (material.emissiveTexture) {\n      this.parseTexture(material.emissiveTexture, 'u_EmissiveSampler', 'HAS_EMISSIVEMAP');\n      this.uniforms.u_EmissiveFactor = material.emissiveFactor || [0, 0, 0];\n    }\n    if (material.alphaMode === 'MASK') {\n      const {alphaCutoff = 0.5} = material;\n      this.defines.ALPHA_CUTOFF = 1;\n      this.uniforms.u_AlphaCutoff = alphaCutoff;\n    } else if (material.alphaMode === 'BLEND') {\n      log.warn('BLEND alphaMode might not work well because it requires mesh sorting')();\n      Object.assign(this.parameters, {\n        blend: true,\n        blendEquation: this.gl.FUNC_ADD,\n        blendFunc: [\n          this.gl.SRC_ALPHA,\n          this.gl.ONE_MINUS_SRC_ALPHA,\n          this.gl.ONE,\n          this.gl.ONE_MINUS_SRC_ALPHA\n        ]\n      });\n    }\n  }\n}\n","import {isWebGL2} from '@luma.gl/gltools';\nimport {log} from '@luma.gl/webgl';\nimport {pbr} from '@luma.gl/shadertools';\nimport {ModelNode} from '../scenegraph';\nimport GLTFMaterialParser from './gltf-material-parser';\n\nconst vs = `\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n`;\n\nconst fs = `\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n`;\n\nfunction addVersionToShader(gl, source) {\n  if (isWebGL2(gl)) {\n    return `#version 300 es\\n${source}`;\n  }\n\n  return source;\n}\n\nexport default function createGLTFModel(gl, options) {\n  const {id, drawMode, vertexCount, attributes, modelOptions} = options;\n  const materialParser = new GLTFMaterialParser(gl, options);\n\n  log.info(4, 'createGLTFModel defines: ', materialParser.defines)();\n\n  // Calculate managedResources\n  // TODO: Implement resource management logic that will\n  // not deallocate resources/textures/buffers that are shared\n  const managedResources = [];\n  managedResources.push(...materialParser.generatedTextures);\n  managedResources.push(...Object.values(attributes).map(attribute => attribute.buffer));\n\n  const model = new ModelNode(\n    gl,\n    Object.assign(\n      {\n        id,\n        drawMode,\n        vertexCount,\n        modules: [pbr],\n        defines: materialParser.defines,\n        parameters: materialParser.parameters,\n        vs: addVersionToShader(gl, vs),\n        fs: addVersionToShader(gl, fs),\n        managedResources\n      },\n      modelOptions\n    )\n  );\n\n  model.setProps({attributes});\n  model.setUniforms(materialParser.uniforms);\n\n  return model;\n}\n","import {Matrix4} from 'math.gl';\nimport {Buffer, Accessor, log} from '@luma.gl/webgl';\nimport {GroupNode} from '../scenegraph/';\n\nimport GLTFAnimator from './gltf-animator';\nimport createGLTFModel from './create-gltf-model';\n\n// TODO: import {ATTRIBUTE_TYPE_TO_COMPONENTS} from '@loaders.gl/gltf';\nconst ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nconst DEFAULT_OPTIONS = {\n  modelOptions: {},\n  pbrDebug: false,\n  imageBasedLightingEnvironment: null,\n  lights: true,\n  useTangents: false\n};\n\n// GLTF instantiator for luma.gl\n// Walks the parsed and resolved glTF structure and builds a luma.gl scenegraph\nexport default class GLTFInstantiator {\n  constructor(gl, options = {}) {\n    this.gl = gl;\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  instantiate(gltf) {\n    this.gltf = gltf;\n    const scenes = (gltf.scenes || []).map(scene => this.createScene(scene));\n    return scenes;\n  }\n\n  createAnimator() {\n    if (Array.isArray(this.gltf.animations)) {\n      return new GLTFAnimator(this.gltf);\n    }\n\n    return null;\n  }\n\n  createScene(gltfScene) {\n    const gltfNodes = gltfScene.nodes || [];\n    const nodes = gltfNodes.map(node => this.createNode(node));\n    const scene = new GroupNode({\n      id: gltfScene.name || gltfScene.id,\n      children: nodes\n    });\n    return scene;\n  }\n\n  createNode(gltfNode) {\n    if (!gltfNode._node) {\n      const gltfChildren = gltfNode.children || [];\n      const children = gltfChildren.map(child => this.createNode(child));\n\n      // Node can have children nodes and meshes at the same time\n      if (gltfNode.mesh) {\n        children.push(this.createMesh(gltfNode.mesh));\n      }\n\n      const node = new GroupNode({\n        id: gltfNode.name || gltfNode.id,\n        children\n      });\n\n      if (gltfNode.matrix) {\n        node.setMatrix(gltfNode.matrix);\n      } else {\n        node.matrix.identity();\n\n        if (gltfNode.translation) {\n          node.matrix.translate(gltfNode.translation);\n        }\n\n        if (gltfNode.rotation) {\n          const rotationMatrix = new Matrix4().fromQuaternion(gltfNode.rotation);\n          node.matrix.multiplyRight(rotationMatrix);\n        }\n\n        if (gltfNode.scale) {\n          node.matrix.scale(gltfNode.scale);\n        }\n      }\n      gltfNode._node = node;\n    }\n\n    return gltfNode._node;\n  }\n\n  createMesh(gltfMesh) {\n    // TODO: avoid changing the gltf\n    if (!gltfMesh._mesh) {\n      const gltfPrimitives = gltfMesh.primitives || [];\n      const primitives = gltfPrimitives.map((gltfPrimitive, i) =>\n        this.createPrimitive(gltfPrimitive, i, gltfMesh)\n      );\n      const mesh = new GroupNode({\n        id: gltfMesh.name || gltfMesh.id,\n        children: primitives\n      });\n      gltfMesh._mesh = mesh;\n    }\n\n    return gltfMesh._mesh;\n  }\n\n  getVertexCount(attributes) {\n    // TODO: implement this\n    log.warn('getVertexCount() not found')();\n  }\n\n  createPrimitive(gltfPrimitive, i, gltfMesh) {\n    return createGLTFModel(\n      this.gl,\n      Object.assign(\n        {\n          id: gltfPrimitive.name || `${gltfMesh.name || gltfMesh.id}-primitive-${i}`,\n          drawMode: gltfPrimitive.mode || 4,\n          vertexCount: gltfPrimitive.indices\n            ? gltfPrimitive.indices.count\n            : this.getVertexCount(gltfPrimitive.attributes),\n          attributes: this.createAttributes(gltfPrimitive.attributes, gltfPrimitive.indices),\n          material: gltfPrimitive.material\n        },\n        this.options\n      )\n    );\n  }\n\n  createAttributes(attributes, indices) {\n    const loadedAttributes = {};\n\n    Object.keys(attributes).forEach(attrName => {\n      loadedAttributes[attrName] = this.createAccessor(\n        attributes[attrName],\n        this.createBuffer(attributes[attrName], this.gl.ARRAY_BUFFER)\n      );\n    });\n\n    if (indices) {\n      loadedAttributes.indices = this.createAccessor(\n        indices,\n        this.createBuffer(indices, this.gl.ELEMENT_ARRAY_BUFFER)\n      );\n    }\n\n    log.info(4, 'glTF Attributes', {attributes, indices, generated: loadedAttributes})();\n\n    return loadedAttributes;\n  }\n\n  createBuffer(attribute, target) {\n    if (!attribute.bufferView) {\n      // Draco decoded files do not have a bufferView\n      attribute.bufferView = {};\n    }\n\n    const {bufferView} = attribute;\n    if (!bufferView.lumaBuffers) {\n      bufferView.lumaBuffers = {};\n    }\n\n    if (!bufferView.lumaBuffers[target]) {\n      bufferView.lumaBuffers[target] = new Buffer(this.gl, {\n        id: `from-${bufferView.id}`,\n        // Draco decoded files have attribute.value\n        data: bufferView.data || attribute.value,\n        target\n      });\n    }\n\n    return bufferView.lumaBuffers[target];\n  }\n\n  createAccessor(accessor, buffer) {\n    return new Accessor({\n      buffer,\n      offset: accessor.byteOffset || 0,\n      stride: accessor.bufferView.byteStride || 0,\n      type: accessor.componentType,\n      size: ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type]\n    });\n  }\n\n  // TODO - create sampler in WebGL2\n  createSampler(gltfSampler) {\n    return gltfSampler;\n  }\n\n  // Helper methods (move to GLTFLoader.resolve...?)\n\n  needsPOT() {\n    // Has a wrapping mode (either wrapS or wrapT) equal to REPEAT or MIRRORED_REPEAT, or\n    // Has a minification filter (minFilter) that uses mipmapping\n    // (NEAREST_MIPMAP_NEAREST, NEAREST_MIPMAP_LINEAR,\n    // LINEAR_MIPMAP_NEAREST, or LINEAR_MIPMAP_LINEAR).\n    return false;\n  }\n}\n","import GLTFInstantiator from './gltf-instantiator';\n\nexport default function createGLTFObjects(gl, gltf, options) {\n  const instantiator = new GLTFInstantiator(gl, options);\n  const scenes = instantiator.instantiate(gltf);\n  const animator = instantiator.createAnimator();\n\n  return {scenes, animator};\n}\n","import \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n    case 'ndarray':\n      return {\n        width: image.width,\n        height: image.height\n      };\n\n    case 'html':\n      return {\n        width: image.naturalWidth,\n        height: image.naturalHeight\n      };\n\n    default:\n      return assert(false);\n  }\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n    case 'html':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      var imageData = context.getImageData(0, 0, image.width, image.height);\n      return imageData.data;\n\n    case 'ndarray':\n      return image.data;\n\n    default:\n      return assert(false);\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'html';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'ndarray';\n  }\n\n  if (Array.isArray(image)) {\n    return 'ndarray';\n  }\n\n  return null;\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nexport function generateUrl(getUrl, options, urlOptions) {\n  var url = getUrl;\n\n  if (typeof getUrl === 'function') {\n    url = getUrl(_objectSpread({}, options, {}, urlOptions));\n  }\n\n  assert(typeof url === 'string');\n  var baseUrl = options.baseUrl;\n\n  if (baseUrl) {\n    url = baseUrl[baseUrl.length - 1] === '/' ? \"\".concat(baseUrl).concat(url) : \"\".concat(baseUrl, \"/\").concat(url);\n  }\n\n  return url;\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isObject = function isObject(value) {\n  return value && _typeof(value) === 'object';\n};\n\nexport function asyncDeepMap(_x, _x2) {\n  return _asyncDeepMap.apply(this, arguments);\n}\n\nfunction _asyncDeepMap() {\n  _asyncDeepMap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tree, func) {\n    var options,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n            _context.next = 3;\n            return mapSubtree(tree, func, options);\n\n          case 3:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _asyncDeepMap.apply(this, arguments);\n}\n\nexport function mapSubtree(_x3, _x4, _x5) {\n  return _mapSubtree.apply(this, arguments);\n}\n\nfunction _mapSubtree() {\n  _mapSubtree = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(object, func, options) {\n    var url;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!Array.isArray(object)) {\n              _context2.next = 4;\n              break;\n            }\n\n            _context2.next = 3;\n            return mapArray(object, func, options);\n\n          case 3:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 4:\n            if (!isObject(object)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 7;\n            return mapObject(object, func, options);\n\n          case 7:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 8:\n            url = object;\n            _context2.next = 11;\n            return func(url, options);\n\n          case 11:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _mapSubtree.apply(this, arguments);\n}\n\nfunction mapObject(_x6, _x7, _x8) {\n  return _mapObject.apply(this, arguments);\n}\n\nfunction _mapObject() {\n  _mapObject = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(object, func, options) {\n    var promises, values, _loop, key;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            promises = [];\n            values = {};\n\n            _loop = function _loop(key) {\n              var url = object[key];\n              var promise = mapSubtree(url, func, options).then(function (value) {\n                values[key] = value;\n              });\n              promises.push(promise);\n            };\n\n            for (key in object) {\n              _loop(key);\n            }\n\n            _context3.next = 6;\n            return Promise.all(promises);\n\n          case 6:\n            return _context3.abrupt(\"return\", values);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _mapObject.apply(this, arguments);\n}\n\nfunction mapArray(_x9, _x10) {\n  return _mapArray.apply(this, arguments);\n}\n\nfunction _mapArray() {\n  _mapArray = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(urlArray, func) {\n    var options,\n        promises,\n        _args4 = arguments;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            options = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n            promises = urlArray.map(function (url) {\n              return mapSubtree(url, func, options);\n            });\n            _context4.next = 4;\n            return Promise.all(promises);\n\n          case 4:\n            return _context4.abrupt(\"return\", _context4.sent);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _mapArray.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { asyncDeepMap } from './async-deep-map';\nexport function deepLoad(_x, _x2, _x3) {\n  return _deepLoad.apply(this, arguments);\n}\n\nfunction _deepLoad() {\n  _deepLoad = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(urlTree, load, options) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return asyncDeepMap(urlTree, function (url) {\n              return shallowLoad(url, load, options);\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _deepLoad.apply(this, arguments);\n}\n\nexport function shallowLoad(_x4, _x5, _x6) {\n  return _shallowLoad.apply(this, arguments);\n}\n\nfunction _shallowLoad() {\n  _shallowLoad = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, load, options) {\n    var response, arrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(url, options.fetch);\n\n          case 2:\n            response = _context2.sent;\n            _context2.next = 5;\n            return response.arrayBuffer();\n\n          case 5:\n            arrayBuffer = _context2.sent;\n            _context2.next = 8;\n            return load(arrayBuffer, options);\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _shallowLoad.apply(this, arguments);\n}","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport parseImage from '../parsers/parse-image';\nimport { getImageSize } from '../parsed-image-api/parsed-image-api';\nimport { generateUrl } from './generate-url';\nimport { deepLoad, shallowLoad } from './deep-load';\nexport function loadImage(_x) {\n  return _loadImage.apply(this, arguments);\n}\n\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(getUrl) {\n    var options,\n        imageUrls,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            _context.next = 3;\n            return getImageUrls(getUrl, options);\n\n          case 3:\n            imageUrls = _context.sent;\n            _context.next = 6;\n            return deepLoad(imageUrls, parseImage, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadImage.apply(this, arguments);\n}\n\nexport function getImageUrls(_x2, _x3) {\n  return _getImageUrls.apply(this, arguments);\n}\n\nfunction _getImageUrls() {\n  _getImageUrls = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(getUrl, options) {\n    var urlOptions,\n        mipLevels,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            urlOptions = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n            mipLevels = options && options.image && options.image.mipLevels || 0;\n\n            if (!(mipLevels !== 0)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 5;\n            return getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions);\n\n          case 5:\n            _context2.t0 = _context2.sent;\n            _context2.next = 9;\n            break;\n\n          case 8:\n            _context2.t0 = generateUrl(getUrl, options, urlOptions);\n\n          case 9:\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getImageUrls.apply(this, arguments);\n}\n\nfunction getMipmappedImageUrls(_x4, _x5, _x6, _x7) {\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\n\nfunction _getMipmappedImageUrls() {\n  _getMipmappedImageUrls = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(getUrl, mipLevels, options, urlOptions) {\n    var urls, url, image, _getImageSize, width, height, mipLevel, _url;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            urls = [];\n\n            if (!(mipLevels === 'auto')) {\n              _context3.next = 9;\n              break;\n            }\n\n            url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n              lod: 0\n            }));\n            _context3.next = 5;\n            return shallowLoad(url, parseImage, options);\n\n          case 5:\n            image = _context3.sent;\n            _getImageSize = getImageSize(image), width = _getImageSize.width, height = _getImageSize.height;\n            mipLevels = getMipLevels({\n              width: width,\n              height: height\n            });\n            urls.push(url);\n\n          case 9:\n            assert(mipLevels > 0);\n\n            for (mipLevel = urls.length; mipLevel < mipLevels; ++mipLevel) {\n              _url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n                lod: mipLevel\n              }));\n              urls.push(_url);\n            }\n\n            return _context3.abrupt(\"return\", urls);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\n\nexport function getMipLevels(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n  return 1 + Math.floor(Math.log2(Math.max(width, height)));\n}","import GL from '@luma.gl/constants';\nimport {Texture2D, TextureCube} from '@luma.gl/webgl';\nimport {loadImage} from '@loaders.gl/images';\n\nexport default class GLTFEnvironment {\n  constructor(gl, {brdfLutUrl, getTexUrl, specularMipLevels = 10}) {\n    this.gl = gl;\n    this.brdfLutUrl = brdfLutUrl;\n    this.getTexUrl = getTexUrl;\n    this.specularMipLevels = specularMipLevels;\n  }\n\n  makeCube({id, getTextureForFace, parameters}) {\n    const pixels = {};\n    TextureCube.FACES.forEach(face => {\n      pixels[face] = getTextureForFace(face);\n    });\n    return new TextureCube(this.gl, {\n      id,\n      mipmaps: false,\n      parameters,\n      pixels\n    });\n  }\n\n  getDiffuseEnvSampler() {\n    if (!this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler = this.makeCube({\n        id: 'DiffuseEnvSampler',\n        getTextureForFace: dir => loadImage(this.getTexUrl('diffuse', dir, 0)),\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._DiffuseEnvSampler;\n  }\n\n  getSpecularEnvSampler() {\n    if (!this._SpecularEnvSampler) {\n      this._SpecularEnvSampler = this.makeCube({\n        id: 'SpecularEnvSampler',\n        getTextureForFace: dir => {\n          const imageArray = [];\n          for (let lod = 0; lod <= this.specularMipLevels - 1; lod++) {\n            imageArray.push(loadImage(this.getTexUrl('specular', dir, lod)));\n          }\n          return imageArray;\n        },\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR_MIPMAP_LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._SpecularEnvSampler;\n  }\n\n  getBrdfTexture() {\n    if (!this._BrdfTexture) {\n      this._BrdfTexture = new Texture2D(this.gl, {\n        id: 'brdfLUT',\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        },\n        // Texture2D accepts a promise that returns an image as data (Async Textures)\n        data: loadImage(this.brdfLutUrl)\n      });\n    }\n\n    return this._BrdfTexture;\n  }\n\n  delete() {\n    if (this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler.delete();\n      this._DiffuseEnvSampler = null;\n    }\n\n    if (this._SpecularEnvSampler) {\n      this._SpecularEnvSampler.delete();\n      this._SpecularEnvSampler = null;\n    }\n\n    if (this._BrdfTexture) {\n      this._BrdfTexture.delete();\n      this._BrdfTexture = null;\n    }\n  }\n}\n","/* eslint-disable camelcase */\n/* global document, window */\nimport {parse} from '@loaders.gl/core';\n// eslint-disable-next-line import/no-unresolved\nimport {GLTFLoader} from '@loaders.gl/gltf';\nimport {DracoLoader} from '@loaders.gl/draco';\nimport '@loaders.gl/polyfills'; // text-encoding polyfill for older MS browsers\nimport GL from '@luma.gl/constants';\nimport {AnimationLoop, Timeline} from '@luma.gl/engine';\nimport {clear, log, lumaStats} from '@luma.gl/webgl';\nimport {setParameters} from '@luma.gl/gltools';\nimport {createGLTFObjects, GLTFEnvironment, VRDisplay} from '@luma.gl/experimental';\nimport {Matrix4, radians} from 'math.gl';\n\nconst CUBE_FACE_TO_DIRECTION = {\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_X]: 'right',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_X]: 'left',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Y]: 'top',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Y]: 'bottom',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Z]: 'front',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Z]: 'back'\n};\n\n// Damaged helmet model used under creative commons: https://github.com/KhronosGroup/glTF-Sample-Models/tree/1ba47770292486e66ca1e1161857a6e5695c2631/2.0/DamagedHelmet\n// Papermill textures used under Apache 2.0: https://github.com/KhronosGroup/glTF-Sample-Viewer/blob/e2d487693fa2e6148bd29d05bc82586f5a002a45/LICENSE.md\n\nconst GLTF_BASE_URL =\n  'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/';\nconst GLTF_DEFAULT_MODEL = 'DamagedHelmet.glb';\n\n// URL for animated model\n// 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/InterpolationTest/glTF-Binary/InterpolationTest.glb';\n\nconst INFO_HTML = `\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Show\n  <select id=\"showSelector\">\n    <option value=\"0 0 0 0 0 0 0 0\">Final Result</option>\n\n    <option value=\"0 1 0 0 0 0 0 0\">Base Color</option>\n    <option value=\"0 0 1 0 0 0 0 0\">Metallic</option>\n    <option value=\"0 0 0 1 0 0 0 0\">Roughness</option>\n    <option value=\"1 0 0 0 0 0 0 0\">Diffuse</option>\n\n    <option value=\"0 0 0 0 1 0 0 0\">Specular Reflection</option>\n    <option value=\"0 0 0 0 0 1 0 0\">Geometric Occlusion</option>\n    <option value=\"0 0 0 0 0 0 1 0\">Microfacet Distribution</option>\n    <option value=\"0 0 0 0 0 0 0 1\">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights\n  <select id=\"lightSelector\">\n    <option value=\"default\">Default</option>\n    <option value=\"ambient\">Ambient Only</option>\n    <option value=\"directional1\">1x Directional (Red) + Ambient</option>\n    <option value=\"directional3\">3x Directional (RGB)</option>\n    <option value=\"point1far\">1x Point Light Far (Red) + Ambient</option>\n    <option value=\"point1near\">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light\n  <select id=\"iblSelector\">\n    <option value=\"exclusive\">On (Exclusive)</option>\n    <option value=\"addition\">On (Addition to Regular)</option>\n    <option value=\"off\">Off (Only Regular)</option>\n  </select>\n  <br>\n</div>\n<p><img src=\"https://img.shields.io/badge/WebVR-Supported-orange.svg\" /></p>\n`;\n\nconst LIGHT_SOURCES = {\n  default: {\n    directionalLights: [\n      {\n        color: [255, 255, 255],\n        direction: [0.0, 0.5, 0.5],\n        intensity: 1.0\n      }\n    ]\n  },\n  ambient: {\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional1: {\n    directionalLights: [\n      {\n        color: [255, 0, 0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional3: {\n    directionalLights: [\n      {\n        color: [255, 0.0, 0.0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 0.0, 255],\n        direction: [0.0, 0.0, 1.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 255, 0.0],\n        direction: [0.0, 1.0, 0.0],\n        intensity: 1.0\n      }\n    ]\n  },\n  point1far: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [200.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  point1near: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [10.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  }\n};\n\nconst DEFAULT_OPTIONS = {\n  pbrDebug: true,\n  imageBasedLightingEnvironment: null,\n  lights: false\n};\n\nasync function loadGLTF(urlOrPromise, gl, options) {\n  const data = typeof urlOrPromise === 'string' ? window.fetch(urlOrPromise) : urlOrPromise;\n  const gltf = await parse(data, GLTFLoader, {\n    ...options,\n    gl,\n    DracoLoader\n  });\n  const {scenes, animator} = createGLTFObjects(gl, gltf, options);\n\n  scenes[0].traverse((node, {worldMatrix}) => log.info(4, 'Using model: ', node)());\n  return {scenes, animator, gltf};\n}\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n  constructor(opts = {}) {\n    super({\n      ...opts,\n      glOptions: {\n        // Use to test gltf with webgl 1.0 and 2.0\n        webgl1: true,\n        webgl2: true,\n        // alpha causes issues with some glTF demos\n        alpha: false\n      }\n    });\n\n    const {modelFile = null, initialZoom = 2} = opts;\n    this.scenes = [];\n    this.animator = null;\n    this.gl = null;\n    this.modelFile = modelFile;\n\n    this.mouse = {\n      lastX: 0,\n      lastY: 0\n    };\n\n    this.translate = initialZoom;\n    this.rotation = [0, 0];\n    this.rotationStart = [0, 0];\n\n    this.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n    this.u_ScaleFGDSpec = [0, 0, 0, 0];\n\n    this.attachTimeline(new Timeline());\n    this.timeline.play();\n    this.timelineChannel = this.timeline.addChannel({\n      rate: 0.5\n    });\n    this.animationHandle = null;\n\n    this.onInitialize = this.onInitialize.bind(this);\n    this.onRender = this.onRender.bind(this);\n    this._setDisplay(new VRDisplay());\n  }\n\n  initalizeEventHandling(canvas) {\n    let pointerIsDown = false;\n\n    const pointerDown = (x, y) => {\n      this.mouse.lastX = x;\n      this.mouse.lastY = y;\n\n      this.rotationStart[0] = this.rotation[0];\n      this.rotationStart[1] = this.rotation[1];\n\n      pointerIsDown = true;\n    };\n\n    const pointerMove = (x, y) => {\n      if (!pointerIsDown) {\n        return;\n      }\n\n      const dX = x - this.mouse.lastX;\n      const dY = y - this.mouse.lastY;\n\n      this.rotation[0] = this.rotationStart[0] + dY / 100;\n      this.rotation[1] = this.rotationStart[1] + dX / 100;\n    };\n\n    canvas.addEventListener('wheel', e => {\n      this.translate += e.deltaY / 10;\n      if (this.translate < 0.5) {\n        this.translate = 0.5;\n      }\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mousedown', e => {\n      pointerDown(e.clientX, e.clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mouseup', e => {\n      pointerIsDown = false;\n    });\n\n    canvas.addEventListener('mousemove', e => {\n      pointerMove(e.clientX, e.clientY);\n    });\n\n    canvas.addEventListener('touchstart', e => {\n      pointerDown(e.touches[0].clientX, e.touches[0].clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('touchmove', e => {\n      pointerMove(e.touches[0].clientX, e.touches[0].clientY);\n    });\n\n    canvas.addEventListener('touchend', e => {\n      if (e.touches.length === 0) {\n        pointerIsDown = false;\n      }\n    });\n\n    canvas.addEventListener('dragover', e => {\n      e.dataTransfer.dropEffect = 'link';\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('drop', e => {\n      e.preventDefault();\n      if (e.dataTransfer.files && e.dataTransfer.files.length === 1) {\n        this._deleteScenes();\n        const readPromise = new Promise(resolve => {\n          const reader = new window.FileReader();\n          reader.onload = ev => resolve(ev.target.result);\n          reader.readAsArrayBuffer(e.dataTransfer.files[0]);\n        });\n\n        loadGLTF(readPromise, this.gl, this.loadOptions).then(result => this._fileLoaded(result));\n      }\n    });\n  }\n\n  _fileLoaded(loadResult) {\n    if (this.animationHandle !== null) {\n      this.timeline.detachAnimation(this.animationHandle);\n      this.animationHandle = null;\n    }\n    this.animator = null;\n\n    Object.assign(this, loadResult);\n    if (this.animator) {\n      this.animationHandle = this.timeline.attachAnimation(this.animator, this.timelineChannel);\n    }\n  }\n\n  onInitialize({gl, canvas}) {\n    setParameters(gl, {\n      depthTest: true,\n      blend: false\n    });\n\n    this.loadOptions = DEFAULT_OPTIONS;\n    this.environment = new GLTFEnvironment(gl, {\n      brdfLutUrl: `${GLTF_BASE_URL}/brdfLUT.png`,\n      getTexUrl: (type, dir, mipLevel) =>\n        `${GLTF_BASE_URL}/papermill/${type}/${type}_${CUBE_FACE_TO_DIRECTION[dir]}_${mipLevel}.jpg`\n    });\n    this.loadOptions.imageBasedLightingEnvironment = this.environment;\n\n    this.gl = gl;\n    if (this.modelFile) {\n      // options for unit testing\n      const options = {\n        pbrDebug: false,\n        imageBasedLightingEnvironment: null,\n        lights: true\n      };\n      loadGLTF(this.modelFile, this.gl, options).then(result => this._fileLoaded(result));\n    } else {\n      const modelUrl = GLTF_DEFAULT_MODEL;\n      loadGLTF(GLTF_BASE_URL + modelUrl, this.gl, this.loadOptions).then(result =>\n        this._fileLoaded(result)\n      );\n    }\n\n    const showSelector = document.getElementById('showSelector');\n    if (showSelector) {\n      showSelector.onchange = event => {\n        const value = showSelector.value.split(' ').map(x => parseFloat(x));\n        this.u_ScaleDiffBaseMR = value.slice(0, 4);\n        this.u_ScaleFGDSpec = value.slice(4);\n      };\n    }\n\n    const lightSelector = document.getElementById('lightSelector');\n    if (lightSelector) {\n      lightSelector.onchange = event => {\n        this.light = lightSelector.value;\n      };\n    }\n\n    const iblSelector = document.getElementById('iblSelector');\n    if (iblSelector) {\n      iblSelector.onchange = event => {\n        this._updateLightSettings(iblSelector.value);\n        this._rebuildModel();\n      };\n    }\n\n    this.initalizeEventHandling(canvas);\n  }\n\n  _updateLightSettings(value) {\n    switch (value) {\n      case 'exclusive':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: false\n        });\n        break;\n\n      case 'addition':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: true\n        });\n        break;\n\n      case 'off':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: null,\n          lights: true\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _rebuildModel() {\n    // Clean and regenerate model so we have new \"#defines\"\n    // TODO: Find better way to do this\n    (this.gltf.meshes || []).forEach(mesh => delete mesh._mesh);\n    (this.gltf.nodes || []).forEach(node => delete node._node);\n    (this.gltf.bufferViews || []).forEach(bufferView => delete bufferView.lumaBuffers);\n\n    this._deleteScenes();\n    Object.assign(this, createGLTFObjects(this.gl, this.gltf, this.loadOptions));\n  }\n\n  _deleteScenes() {\n    this.scenes.forEach(scene => scene.delete());\n    this.scenes = [];\n\n    lumaStats.get('Resource Counts').forEach(({name, count}) => {\n      log.info(3, `${name}: ${count}`)();\n    });\n  }\n\n  applyLight(model) {\n    // TODO: only do this when light changes\n    model.updateModuleSettings({\n      lightSources: LIGHT_SOURCES[this.light || 'default']\n    });\n  }\n\n  onRender({gl, time, aspect, viewMatrix, projectionMatrix}) {\n    clear(gl, {color: [0.2, 0.2, 0.2, 1.0], depth: true});\n\n    const [pitch, roll] = this.rotation;\n    const cameraPos = [\n      -this.translate * Math.sin(roll) * Math.cos(-pitch),\n      -this.translate * Math.sin(-pitch),\n      this.translate * Math.cos(roll) * Math.cos(-pitch)\n    ];\n\n    // TODO: find how to avoid using Array.from() to convert TypedArray to regular array\n    const uView = new Matrix4(viewMatrix ? Array.from(viewMatrix) : null)\n      .translate([0, 0, -this.translate])\n      .rotateX(pitch)\n      .rotateY(roll);\n\n    const uProjection = projectionMatrix\n      ? new Matrix4(Array.from(projectionMatrix))\n      : new Matrix4().perspective({fov: radians(40), aspect, near: 0.1, far: 9000});\n\n    if (!this.scenes.length) return false;\n\n    let success = true;\n\n    this.scenes[0].traverse((model, {worldMatrix}) => {\n      // In glTF, meshes and primitives do no have their own matrix.\n      const u_MVPMatrix = new Matrix4(uProjection).multiplyRight(uView).multiplyRight(worldMatrix);\n      this.applyLight(model);\n      success =\n        success &&\n        model.draw({\n          uniforms: {\n            u_Camera: cameraPos,\n            u_MVPMatrix,\n            u_ModelMatrix: worldMatrix,\n            u_NormalMatrix: new Matrix4(worldMatrix).invert().transpose(),\n\n            u_ScaleDiffBaseMR: this.u_ScaleDiffBaseMR,\n            u_ScaleFGDSpec: this.u_ScaleFGDSpec\n          },\n          parameters: model.props.parameters\n        });\n    });\n\n    return success;\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n\n  const infoDiv = document.createElement('div');\n  infoDiv.innerHTML = AppAnimationLoop.getInfo();\n  document.body.appendChild(infoDiv);\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/showcase/gltf/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function atob(string) {\n  return Buffer.from(string).toString('base64');\n}\nexport function btoa(base64) {\n  return Buffer.from(base64, 'base64').toString('ascii');\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.typed.uint8-array\";\nexport function bufferToArrayBuffer(buffer) {\n  if (Buffer.isBuffer(buffer)) {\n    var typedArray = new Uint8Array(buffer);\n    return typedArray.buffer;\n  }\n\n  return buffer;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './base/math-array';\nimport { checkNumber, checkVector } from '../lib/validators';\nimport assert from '../lib/assert';\nimport * as quat from 'gl-matrix/quat';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY_QUATERNION = [0, 0, 0, 1];\n\nvar Quaternion = function (_MathArray) {\n  _inherits(Quaternion, _MathArray);\n\n  function Quaternion() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Quaternion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Quaternion).call(this, -0, -0, -0, -0));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z, w);\n    }\n\n    return _this;\n  }\n\n  _createClass(Quaternion, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      this[3] = w;\n      return this.check();\n    }\n  }, {\n    key: \"fromMatrix3\",\n    value: function fromMatrix3(m) {\n      quat.fromMat3(this, m);\n      return this.check();\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      quat.identity(this);\n      return this.check();\n    }\n  }, {\n    key: \"fromAxisRotation\",\n    value: function fromAxisRotation(axis, rad) {\n      quat.setAxisAngle(this, axis, rad);\n      return this.check();\n    }\n  }, {\n    key: \"setAxisAngle\",\n    value: function setAxisAngle(axis, rad) {\n      return this.fromAxisRotation(axis, rad);\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return quat.length(this);\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared(a) {\n      return quat.squaredLength(this);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.dot only takes one argument');\n      }\n\n      return quat.dot(this, a);\n    }\n  }, {\n    key: \"rotationTo\",\n    value: function rotationTo(vectorA, vectorB) {\n      quat.rotationTo(this, vectorA, vectorB);\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.add only takes one argument');\n      }\n\n      quat.add(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"calculateW\",\n    value: function calculateW() {\n      quat.calculateW(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"conjugate\",\n    value: function conjugate() {\n      quat.conjugate(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      quat.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      quat.lerp(this, a, b, t);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a, b) {\n      assert(!b);\n      quat.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a, b) {\n      assert(!b);\n      quat.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.len();\n      var l = length > 0 ? 1 / length : 0;\n      this[0] = this[0] * l;\n      this[1] = this[1] * l;\n      this[2] = this[2] * l;\n      this[3] = this[3] * l;\n\n      if (length === 0) {\n        this[3] = 1;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(rad) {\n      quat.rotateX(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(rad) {\n      quat.rotateY(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(rad) {\n      quat.rotateZ(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(b) {\n      quat.scale(this, this, b);\n      return this.check();\n    }\n  }, {\n    key: \"slerp\",\n    value: function slerp(start, target, ratio) {\n      switch (arguments.length) {\n        case 1:\n          var _arguments$ = arguments[0];\n          var _arguments$$start = _arguments$.start;\n          start = _arguments$$start === void 0 ? IDENTITY_QUATERNION : _arguments$$start;\n          target = _arguments$.target;\n          ratio = _arguments$.ratio;\n          break;\n\n        case 2:\n          var _arguments = Array.prototype.slice.call(arguments);\n\n          target = _arguments[0];\n          ratio = _arguments[1];\n          start = this;\n          break;\n\n        default:\n      }\n\n      quat.slerp(this, start, target, ratio);\n      return this.check();\n    }\n  }, {\n    key: \"transformVector4\",\n    value: function transformVector4(vector) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : vector;\n      vec4.transformQuat(result, vector, this);\n      return checkVector(result, 4);\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"setFromAxisAngle\",\n    value: function setFromAxisAngle(axis, rad) {\n      return this.setAxisAngle(axis, rad);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(a, b) {\n      return this.multiplyLeft(a, b);\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      return this.multiplyRight(a, b);\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 4;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(value) {\n      return this[3] = checkNumber(value);\n    }\n  }]);\n\n  return Quaternion;\n}(MathArray);\n\nexport { Quaternion as default };","import setPrototypeOf from \"./setPrototypeOf\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport fs from 'fs';\nimport http from 'http';\nimport https from 'https';\nimport util from 'util';\nimport { toArrayBuffer } from './utils/to-array-buffer.node';\nimport decodeDataUri from './utils/decode-data-uri.node';\nimport { concatenateReadStream } from './utils/stream-utils.node';\nvar DEFAULT_OPTIONS = {\n  dataType: 'arraybuffer'\n};\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nexport function readFile(url) {\n  var options,\n      _decodeDataUri,\n      arrayBuffer,\n      queryIndex,\n      readFileAsync,\n      buffer,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function readFile$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          options = getReadFileOptions(options);\n\n          if (!isDataURL(url)) {\n            _context.next = 5;\n            break;\n          }\n\n          _decodeDataUri = decodeDataUri(url), arrayBuffer = _decodeDataUri.arrayBuffer;\n          return _context.abrupt(\"return\", Promise.resolve(arrayBuffer));\n\n        case 5:\n          if (!isRequestURL(url)) {\n            _context.next = 7;\n            break;\n          }\n\n          return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n            options = _objectSpread({}, new URL(url), {}, options);\n            var request = url.startsWith('https:') ? https.request : http.request;\n            request(url, function (response) {\n              return concatenateReadStream(response).then(resolve, reject);\n            });\n          }));\n\n        case 7:\n          queryIndex = url && url.lastIndexOf('?');\n          url = queryIndex >= 0 ? url.substr(0, queryIndex) : url;\n          readFileAsync = util.promisify(fs.readFile);\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(readFileAsync(url, options));\n\n        case 12:\n          buffer = _context.sent;\n          return _context.abrupt(\"return\", buffer instanceof Buffer ? toArrayBuffer(buffer) : buffer);\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function createReadStream(url, options) {\n  return _regeneratorRuntime.async(function createReadStream$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!isDataURL(url)) {\n            _context2.next = 2;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", decodeDataUri(url));\n\n        case 2:\n          if (isRequestURL(url)) {\n            _context2.next = 4;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", fs.createReadStream(url, options));\n\n        case 4:\n          return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n            options = _objectSpread({}, new URL(url), {}, options);\n            var request = url.startsWith('https:') ? https.request : http.request;\n            request(url, function (response) {\n              return resolve(response);\n            });\n          }));\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction getReadFileOptions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  options = Object.assign({}, DEFAULT_OPTIONS, options);\n  options.responseType = options.responseType || options.dataType;\n\n  if (fs) {\n    options.encoding = options.encoding || (options.dataType === 'text' ? 'utf8' : null);\n  }\n\n  return options;\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nexport { isBrowser, global_ as global };","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","import { config } from 'math.gl';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon as _withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\nexport { default as _Polygon } from './addons/polygon';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate(this)) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport getPixels from 'get-pixels';\nimport util from 'util';\nexport function parseImageNode(arrayBuffer, mimeType, options) {\n  var getPixelsAsync, buffer, ndarray, shape, layers;\n  return _regeneratorRuntime.async(function parseImageNode$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          getPixelsAsync = util.promisify(getPixels);\n          buffer = arrayBuffer instanceof Buffer ? arrayBuffer : Buffer.from(arrayBuffer);\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(getPixelsAsync(buffer, mimeType));\n\n        case 4:\n          ndarray = _context.sent;\n          shape = _toConsumableArray(ndarray.shape);\n          layers = ndarray.shape.length === 4 ? ndarray.shape.shift() : 1;\n          return _context.abrupt(\"return\", {\n            shape: shape,\n            data: ndarray.data,\n            width: ndarray.shape[0],\n            height: ndarray.shape[1],\n            components: ndarray.shape[2],\n            layers: layers\n          });\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName) {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName | '', \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Matrix).apply(this, arguments));\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0));\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          fovy = _ref4.fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nglobal['encoding-indexes'] = {};\n\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nvar floor = Math.floor;\n\nfunction ToDictionary(o) {\n  if (o === undefined) return {};\n  if (o === Object(o)) return o;\n  throw TypeError('Could not convert argument to dictionary');\n}\n\nfunction stringToCodePoints(string) {\n  var s = String(string);\n  var n = s.length;\n  var i = 0;\n  var u = [];\n\n  while (i < n) {\n    var c = s.charCodeAt(i);\n\n    if (c < 0xd800 || c > 0xdfff) {\n      u.push(c);\n    } else if (0xdc00 <= c && c <= 0xdfff) {\n      u.push(0xfffd);\n    } else if (0xd800 <= c && c <= 0xdbff) {\n      if (i === n - 1) {\n        u.push(0xfffd);\n      } else {\n        var d = s.charCodeAt(i + 1);\n\n        if (0xdc00 <= d && d <= 0xdfff) {\n          var a = c & 0x3ff;\n          var b = d & 0x3ff;\n          u.push(0x10000 + (a << 10) + b);\n          i += 1;\n        } else {\n          u.push(0xfffd);\n        }\n      }\n    }\n\n    i += 1;\n  }\n\n  return u;\n}\n\nfunction codePointsToString(code_points) {\n  var s = '';\n\n  for (var i = 0; i < code_points.length; ++i) {\n    var cp = code_points[i];\n\n    if (cp <= 0xffff) {\n      s += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      s += String.fromCharCode((cp >> 10) + 0xd800, (cp & 0x3ff) + 0xdc00);\n    }\n  }\n\n  return s;\n}\n\nfunction isASCIIByte(a) {\n  return 0x00 <= a && a <= 0x7f;\n}\n\nvar isASCIICodePoint = isASCIIByte;\nvar end_of_stream = -1;\n\nfunction Stream(tokens) {\n  this.tokens = [].slice.call(tokens);\n  this.tokens.reverse();\n}\n\nStream.prototype = {\n  endOfStream: function endOfStream() {\n    return !this.tokens.length;\n  },\n  read: function read() {\n    if (!this.tokens.length) return end_of_stream;\n    return this.tokens.pop();\n  },\n  prepend: function prepend(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.push(tokens.pop());\n      }\n    } else {\n      this.tokens.push(token);\n    }\n  },\n  push: function push(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.unshift(tokens.shift());\n      }\n    } else {\n      this.tokens.unshift(token);\n    }\n  }\n};\nvar finished = -1;\n\nfunction decoderError(fatal, opt_code_point) {\n  if (fatal) throw TypeError('Decoder error');\n  return opt_code_point || 0xfffd;\n}\n\nfunction encoderError(code_point) {\n  throw TypeError('The code point ' + code_point + ' could not be encoded.');\n}\n\nfunction Decoder() {}\n\nDecoder.prototype = {\n  handler: function handler(stream, bite) {}\n};\n\nfunction Encoder() {}\n\nEncoder.prototype = {\n  handler: function handler(stream, code_point) {}\n};\n\nfunction getEncoding(label) {\n  label = String(label).trim().toLowerCase();\n\n  if (Object.prototype.hasOwnProperty.call(label_to_encoding, label)) {\n    return label_to_encoding[label];\n  }\n\n  return null;\n}\n\nvar encodings = [{\n  encodings: [{\n    labels: ['unicode-1-1-utf-8', 'utf-8', 'utf8'],\n    name: 'UTF-8'\n  }],\n  heading: 'The Encoding'\n}, {\n  encodings: [{\n    labels: ['866', 'cp866', 'csibm866', 'ibm866'],\n    name: 'IBM866'\n  }, {\n    labels: ['csisolatin2', 'iso-8859-2', 'iso-ir-101', 'iso8859-2', 'iso88592', 'iso_8859-2', 'iso_8859-2:1987', 'l2', 'latin2'],\n    name: 'ISO-8859-2'\n  }, {\n    labels: ['csisolatin3', 'iso-8859-3', 'iso-ir-109', 'iso8859-3', 'iso88593', 'iso_8859-3', 'iso_8859-3:1988', 'l3', 'latin3'],\n    name: 'ISO-8859-3'\n  }, {\n    labels: ['csisolatin4', 'iso-8859-4', 'iso-ir-110', 'iso8859-4', 'iso88594', 'iso_8859-4', 'iso_8859-4:1988', 'l4', 'latin4'],\n    name: 'ISO-8859-4'\n  }, {\n    labels: ['csisolatincyrillic', 'cyrillic', 'iso-8859-5', 'iso-ir-144', 'iso8859-5', 'iso88595', 'iso_8859-5', 'iso_8859-5:1988'],\n    name: 'ISO-8859-5'\n  }, {\n    labels: ['arabic', 'asmo-708', 'csiso88596e', 'csiso88596i', 'csisolatinarabic', 'ecma-114', 'iso-8859-6', 'iso-8859-6-e', 'iso-8859-6-i', 'iso-ir-127', 'iso8859-6', 'iso88596', 'iso_8859-6', 'iso_8859-6:1987'],\n    name: 'ISO-8859-6'\n  }, {\n    labels: ['csisolatingreek', 'ecma-118', 'elot_928', 'greek', 'greek8', 'iso-8859-7', 'iso-ir-126', 'iso8859-7', 'iso88597', 'iso_8859-7', 'iso_8859-7:1987', 'sun_eu_greek'],\n    name: 'ISO-8859-7'\n  }, {\n    labels: ['csiso88598e', 'csisolatinhebrew', 'hebrew', 'iso-8859-8', 'iso-8859-8-e', 'iso-ir-138', 'iso8859-8', 'iso88598', 'iso_8859-8', 'iso_8859-8:1988', 'visual'],\n    name: 'ISO-8859-8'\n  }, {\n    labels: ['csiso88598i', 'iso-8859-8-i', 'logical'],\n    name: 'ISO-8859-8-I'\n  }, {\n    labels: ['csisolatin6', 'iso-8859-10', 'iso-ir-157', 'iso8859-10', 'iso885910', 'l6', 'latin6'],\n    name: 'ISO-8859-10'\n  }, {\n    labels: ['iso-8859-13', 'iso8859-13', 'iso885913'],\n    name: 'ISO-8859-13'\n  }, {\n    labels: ['iso-8859-14', 'iso8859-14', 'iso885914'],\n    name: 'ISO-8859-14'\n  }, {\n    labels: ['csisolatin9', 'iso-8859-15', 'iso8859-15', 'iso885915', 'iso_8859-15', 'l9'],\n    name: 'ISO-8859-15'\n  }, {\n    labels: ['iso-8859-16'],\n    name: 'ISO-8859-16'\n  }, {\n    labels: ['cskoi8r', 'koi', 'koi8', 'koi8-r', 'koi8_r'],\n    name: 'KOI8-R'\n  }, {\n    labels: ['koi8-ru', 'koi8-u'],\n    name: 'KOI8-U'\n  }, {\n    labels: ['csmacintosh', 'mac', 'macintosh', 'x-mac-roman'],\n    name: 'macintosh'\n  }, {\n    labels: ['dos-874', 'iso-8859-11', 'iso8859-11', 'iso885911', 'tis-620', 'windows-874'],\n    name: 'windows-874'\n  }, {\n    labels: ['cp1250', 'windows-1250', 'x-cp1250'],\n    name: 'windows-1250'\n  }, {\n    labels: ['cp1251', 'windows-1251', 'x-cp1251'],\n    name: 'windows-1251'\n  }, {\n    labels: ['ansi_x3.4-1968', 'ascii', 'cp1252', 'cp819', 'csisolatin1', 'ibm819', 'iso-8859-1', 'iso-ir-100', 'iso8859-1', 'iso88591', 'iso_8859-1', 'iso_8859-1:1987', 'l1', 'latin1', 'us-ascii', 'windows-1252', 'x-cp1252'],\n    name: 'windows-1252'\n  }, {\n    labels: ['cp1253', 'windows-1253', 'x-cp1253'],\n    name: 'windows-1253'\n  }, {\n    labels: ['cp1254', 'csisolatin5', 'iso-8859-9', 'iso-ir-148', 'iso8859-9', 'iso88599', 'iso_8859-9', 'iso_8859-9:1989', 'l5', 'latin5', 'windows-1254', 'x-cp1254'],\n    name: 'windows-1254'\n  }, {\n    labels: ['cp1255', 'windows-1255', 'x-cp1255'],\n    name: 'windows-1255'\n  }, {\n    labels: ['cp1256', 'windows-1256', 'x-cp1256'],\n    name: 'windows-1256'\n  }, {\n    labels: ['cp1257', 'windows-1257', 'x-cp1257'],\n    name: 'windows-1257'\n  }, {\n    labels: ['cp1258', 'windows-1258', 'x-cp1258'],\n    name: 'windows-1258'\n  }, {\n    labels: ['x-mac-cyrillic', 'x-mac-ukrainian'],\n    name: 'x-mac-cyrillic'\n  }],\n  heading: 'Legacy single-byte encodings'\n}, {\n  encodings: [{\n    labels: ['chinese', 'csgb2312', 'csiso58gb231280', 'gb2312', 'gb_2312', 'gb_2312-80', 'gbk', 'iso-ir-58', 'x-gbk'],\n    name: 'GBK'\n  }, {\n    labels: ['gb18030'],\n    name: 'gb18030'\n  }],\n  heading: 'Legacy multi-byte Chinese (simplified) encodings'\n}, {\n  encodings: [{\n    labels: ['big5', 'big5-hkscs', 'cn-big5', 'csbig5', 'x-x-big5'],\n    name: 'Big5'\n  }],\n  heading: 'Legacy multi-byte Chinese (traditional) encodings'\n}, {\n  encodings: [{\n    labels: ['cseucpkdfmtjapanese', 'euc-jp', 'x-euc-jp'],\n    name: 'EUC-JP'\n  }, {\n    labels: ['csiso2022jp', 'iso-2022-jp'],\n    name: 'ISO-2022-JP'\n  }, {\n    labels: ['csshiftjis', 'ms932', 'ms_kanji', 'shift-jis', 'shift_jis', 'sjis', 'windows-31j', 'x-sjis'],\n    name: 'Shift_JIS'\n  }],\n  heading: 'Legacy multi-byte Japanese encodings'\n}, {\n  encodings: [{\n    labels: ['cseuckr', 'csksc56011987', 'euc-kr', 'iso-ir-149', 'korean', 'ks_c_5601-1987', 'ks_c_5601-1989', 'ksc5601', 'ksc_5601', 'windows-949'],\n    name: 'EUC-KR'\n  }],\n  heading: 'Legacy multi-byte Korean encodings'\n}, {\n  encodings: [{\n    labels: ['csiso2022kr', 'hz-gb-2312', 'iso-2022-cn', 'iso-2022-cn-ext', 'iso-2022-kr'],\n    name: 'replacement'\n  }, {\n    labels: ['utf-16be'],\n    name: 'UTF-16BE'\n  }, {\n    labels: ['utf-16', 'utf-16le'],\n    name: 'UTF-16LE'\n  }, {\n    labels: ['x-user-defined'],\n    name: 'x-user-defined'\n  }],\n  heading: 'Legacy miscellaneous encodings'\n}];\nvar label_to_encoding = {};\nencodings.forEach(function (category) {\n  category.encodings.forEach(function (encoding) {\n    encoding.labels.forEach(function (label) {\n      label_to_encoding[label] = encoding;\n    });\n  });\n});\nvar encoders = {};\nvar decoders = {};\n\nfunction indexCodePointFor(pointer, index) {\n  if (!index) return null;\n  return index[pointer] || null;\n}\n\nfunction indexPointerFor(code_point, index) {\n  var pointer = index.indexOf(code_point);\n  return pointer === -1 ? null : pointer;\n}\n\nfunction index(name) {\n  if (!('encoding-indexes' in global)) {\n    throw Error('Indexes missing.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  return global['encoding-indexes'][name];\n}\n\nfunction indexGB18030RangesCodePointFor(pointer) {\n  if (pointer > 39419 && pointer < 189000 || pointer > 1237575) return null;\n  if (pointer === 7457) return 0xe7c7;\n  var offset = 0;\n  var code_point_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[0] <= pointer) {\n      offset = entry[0];\n      code_point_offset = entry[1];\n    } else {\n      break;\n    }\n  }\n\n  return code_point_offset + pointer - offset;\n}\n\nfunction indexGB18030RangesPointerFor(code_point) {\n  if (code_point === 0xe7c7) return 7457;\n  var offset = 0;\n  var pointer_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[1] <= code_point) {\n      offset = entry[1];\n      pointer_offset = entry[0];\n    } else {\n      break;\n    }\n  }\n\n  return pointer_offset + code_point - offset;\n}\n\nfunction indexShiftJISPointerFor(code_point) {\n  shift_jis_index = shift_jis_index || index('jis0208').map(function (code_point, pointer) {\n    return inRange(pointer, 8272, 8835) ? null : code_point;\n  });\n  var index_ = shift_jis_index;\n  return index_.indexOf(code_point);\n}\n\nvar shift_jis_index;\n\nfunction indexBig5PointerFor(code_point) {\n  big5_index_no_hkscs = big5_index_no_hkscs || index('big5').map(function (code_point, pointer) {\n    return pointer < (0xa1 - 0x81) * 157 ? null : code_point;\n  });\n  var index_ = big5_index_no_hkscs;\n\n  if (code_point === 0x2550 || code_point === 0x255e || code_point === 0x2561 || code_point === 0x256a || code_point === 0x5341 || code_point === 0x5345) {\n    return index_.lastIndexOf(code_point);\n  }\n\n  return indexPointerFor(code_point, index_);\n}\n\nvar big5_index_no_hkscs;\nvar DEFAULT_ENCODING = 'utf-8';\n\nfunction TextDecoder(label, options) {\n  if (!(this instanceof TextDecoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._decoder = null;\n  this._ignoreBOM = false;\n  this._BOMseen = false;\n  this._error_mode = 'replacement';\n  this._do_not_flush = false;\n  var encoding = getEncoding(label);\n  if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n  if (!decoders[encoding.name]) {\n    throw Error('Decoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  var dec = this;\n  dec._encoding = encoding;\n  if (Boolean(options['fatal'])) dec._error_mode = 'fatal';\n  if (Boolean(options['ignoreBOM'])) dec._ignoreBOM = true;\n\n  if (!Object.defineProperty) {\n    this.encoding = dec._encoding.name.toLowerCase();\n    this.fatal = dec._error_mode === 'fatal';\n    this.ignoreBOM = dec._ignoreBOM;\n  }\n\n  return dec;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextDecoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'fatal', {\n    get: function get() {\n      return this._error_mode === 'fatal';\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'ignoreBOM', {\n    get: function get() {\n      return this._ignoreBOM;\n    }\n  });\n}\n\nTextDecoder.prototype.decode = function decode(input, options) {\n  var bytes;\n\n  if (_typeof(input) === 'object' && input instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input);\n  } else if (_typeof(input) === 'object' && 'buffer' in input && input.buffer instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input.buffer, input.byteOffset, input.byteLength);\n  } else {\n    bytes = new Uint8Array(0);\n  }\n\n  options = ToDictionary(options);\n\n  if (!this._do_not_flush) {\n    this._decoder = decoders[this._encoding.name]({\n      fatal: this._error_mode === 'fatal'\n    });\n    this._BOMseen = false;\n  }\n\n  this._do_not_flush = Boolean(options['stream']);\n  var input_stream = new Stream(bytes);\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input_stream.read();\n    if (token === end_of_stream) break;\n    result = this._decoder.handler(input_stream, token);\n    if (result === finished) break;\n\n    if (result !== null) {\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n  }\n\n  if (!this._do_not_flush) {\n    do {\n      result = this._decoder.handler(input_stream, input_stream.read());\n      if (result === finished) break;\n      if (result === null) continue;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    } while (!input_stream.endOfStream());\n\n    this._decoder = null;\n  }\n\n  function serializeStream(stream) {\n    if (includes(['UTF-8', 'UTF-16LE', 'UTF-16BE'], this._encoding.name) && !this._ignoreBOM && !this._BOMseen) {\n      if (stream.length > 0 && stream[0] === 0xfeff) {\n        this._BOMseen = true;\n        stream.shift();\n      } else if (stream.length > 0) {\n        this._BOMseen = true;\n      } else {}\n    }\n\n    return codePointsToString(stream);\n  }\n\n  return serializeStream.call(this, output);\n};\n\nfunction TextEncoder(label, options) {\n  if (!(this instanceof TextEncoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._encoder = null;\n  this._do_not_flush = false;\n  this._fatal = Boolean(options['fatal']) ? 'fatal' : 'replacement';\n  var enc = this;\n\n  if (Boolean(options['NONSTANDARD_allowLegacyEncoding'])) {\n    label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n    var encoding = getEncoding(label);\n    if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n    if (!encoders[encoding.name]) {\n      throw Error('Encoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n    }\n\n    enc._encoding = encoding;\n  } else {\n    enc._encoding = getEncoding('utf-8');\n\n    if (label !== undefined && 'console' in global) {\n      console.warn('TextEncoder constructor called with encoding label, ' + 'which is ignored.');\n    }\n  }\n\n  if (!Object.defineProperty) this.encoding = enc._encoding.name.toLowerCase();\n  return enc;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextEncoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n}\n\nTextEncoder.prototype.encode = function encode(opt_string, options) {\n  opt_string = opt_string === undefined ? '' : String(opt_string);\n  options = ToDictionary(options);\n  if (!this._do_not_flush) this._encoder = encoders[this._encoding.name]({\n    fatal: this._fatal === 'fatal'\n  });\n  this._do_not_flush = Boolean(options['stream']);\n  var input = new Stream(stringToCodePoints(opt_string));\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input.read();\n    if (token === end_of_stream) break;\n    result = this._encoder.handler(input, token);\n    if (result === finished) break;\n    if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n  }\n\n  if (!this._do_not_flush) {\n    while (true) {\n      result = this._encoder.handler(input, input.read());\n      if (result === finished) break;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n\n    this._encoder = null;\n  }\n\n  return new Uint8Array(output);\n};\n\nfunction UTF8Decoder(options) {\n  var fatal = options.fatal;\n  var utf8_code_point = 0,\n      utf8_bytes_seen = 0,\n      utf8_bytes_needed = 0,\n      utf8_lower_boundary = 0x80,\n      utf8_upper_boundary = 0xbf;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && utf8_bytes_needed !== 0) {\n      utf8_bytes_needed = 0;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream) return finished;\n\n    if (utf8_bytes_needed === 0) {\n      if (inRange(bite, 0x00, 0x7f)) {\n        return bite;\n      } else if (inRange(bite, 0xc2, 0xdf)) {\n        utf8_bytes_needed = 1;\n        utf8_code_point = bite & 0x1f;\n      } else if (inRange(bite, 0xe0, 0xef)) {\n        if (bite === 0xe0) utf8_lower_boundary = 0xa0;\n        if (bite === 0xed) utf8_upper_boundary = 0x9f;\n        utf8_bytes_needed = 2;\n        utf8_code_point = bite & 0xf;\n      } else if (inRange(bite, 0xf0, 0xf4)) {\n        if (bite === 0xf0) utf8_lower_boundary = 0x90;\n        if (bite === 0xf4) utf8_upper_boundary = 0x8f;\n        utf8_bytes_needed = 3;\n        utf8_code_point = bite & 0x7;\n      } else {\n        return decoderError(fatal);\n      }\n\n      return null;\n    }\n\n    if (!inRange(bite, utf8_lower_boundary, utf8_upper_boundary)) {\n      utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n      utf8_lower_boundary = 0x80;\n      utf8_upper_boundary = 0xbf;\n      stream.prepend(bite);\n      return decoderError(fatal);\n    }\n\n    utf8_lower_boundary = 0x80;\n    utf8_upper_boundary = 0xbf;\n    utf8_code_point = utf8_code_point << 6 | bite & 0x3f;\n    utf8_bytes_seen += 1;\n    if (utf8_bytes_seen !== utf8_bytes_needed) return null;\n    var code_point = utf8_code_point;\n    utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n    return code_point;\n  };\n}\n\nfunction UTF8Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var count, offset;\n\n    if (inRange(code_point, 0x0080, 0x07ff)) {\n      count = 1;\n      offset = 0xc0;\n    } else if (inRange(code_point, 0x0800, 0xffff)) {\n      count = 2;\n      offset = 0xe0;\n    } else if (inRange(code_point, 0x10000, 0x10ffff)) {\n      count = 3;\n      offset = 0xf0;\n    }\n\n    var bytes = [(code_point >> 6 * count) + offset];\n\n    while (count > 0) {\n      var temp = code_point >> 6 * (count - 1);\n      bytes.push(0x80 | temp & 0x3f);\n      count -= 1;\n    }\n\n    return bytes;\n  };\n}\n\nencoders['UTF-8'] = function (options) {\n  return new UTF8Encoder(options);\n};\n\ndecoders['UTF-8'] = function (options) {\n  return new UTF8Decoder(options);\n};\n\nfunction SingleByteDecoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    var code_point = index[bite - 0x80];\n    if (code_point === null) return decoderError(fatal);\n    return code_point;\n  };\n}\n\nfunction SingleByteEncoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index);\n    if (pointer === null) encoderError(code_point);\n    return pointer + 0x80;\n  };\n}\n\n(function () {\n  if (!('encoding-indexes' in global)) return;\n  encodings.forEach(function (category) {\n    if (category.heading !== 'Legacy single-byte encodings') return;\n    category.encodings.forEach(function (encoding) {\n      var name = encoding.name;\n      var idx = index(name.toLowerCase());\n\n      decoders[name] = function (options) {\n        return new SingleByteDecoder(idx, options);\n      };\n\n      encoders[name] = function (options) {\n        return new SingleByteEncoder(idx, options);\n      };\n    });\n  });\n})();\n\ndecoders['GBK'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nencoders['GBK'] = function (options) {\n  return new GB18030Encoder(options, true);\n};\n\nfunction GB18030Decoder(options) {\n  var fatal = options.fatal;\n  var gb18030_first = 0x00,\n      gb18030_second = 0x00,\n      gb18030_third = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && gb18030_first === 0x00 && gb18030_second === 0x00 && gb18030_third === 0x00) {\n      return finished;\n    }\n\n    if (bite === end_of_stream && (gb18030_first !== 0x00 || gb18030_second !== 0x00 || gb18030_third !== 0x00)) {\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n      decoderError(fatal);\n    }\n\n    var code_point;\n\n    if (gb18030_third !== 0x00) {\n      code_point = null;\n\n      if (inRange(bite, 0x30, 0x39)) {\n        code_point = indexGB18030RangesCodePointFor((((gb18030_first - 0x81) * 10 + gb18030_second - 0x30) * 126 + gb18030_third - 0x81) * 10 + bite - 0x30);\n      }\n\n      var buffer = [gb18030_second, gb18030_third, bite];\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n\n      if (code_point === null) {\n        stream.prepend(buffer);\n        return decoderError(fatal);\n      }\n\n      return code_point;\n    }\n\n    if (gb18030_second !== 0x00) {\n      if (inRange(bite, 0x81, 0xfe)) {\n        gb18030_third = bite;\n        return null;\n      }\n\n      stream.prepend([gb18030_second, bite]);\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (gb18030_first !== 0x00) {\n      if (inRange(bite, 0x30, 0x39)) {\n        gb18030_second = bite;\n        return null;\n      }\n\n      var lead = gb18030_first;\n      var pointer = null;\n      gb18030_first = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - offset);\n      code_point = pointer === null ? null : indexCodePointFor(pointer, index('gb18030'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n    if (bite === 0x80) return 0x20ac;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      gb18030_first = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction GB18030Encoder(options, gbk_flag) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0xe5e5) return encoderError(code_point);\n    if (gbk_flag && code_point === 0x20ac) return 0x80;\n    var pointer = indexPointerFor(code_point, index('gb18030'));\n\n    if (pointer !== null) {\n      var lead = floor(pointer / 190) + 0x81;\n      var trail = pointer % 190;\n      var offset = trail < 0x3f ? 0x40 : 0x41;\n      return [lead, trail + offset];\n    }\n\n    if (gbk_flag) return encoderError(code_point);\n    pointer = indexGB18030RangesPointerFor(code_point);\n    var byte1 = floor(pointer / 10 / 126 / 10);\n    pointer = pointer - byte1 * 10 * 126 * 10;\n    var byte2 = floor(pointer / 10 / 126);\n    pointer = pointer - byte2 * 10 * 126;\n    var byte3 = floor(pointer / 10);\n    var byte4 = pointer - byte3 * 10;\n    return [byte1 + 0x81, byte2 + 0x30, byte3 + 0x81, byte4 + 0x30];\n  };\n}\n\nencoders['gb18030'] = function (options) {\n  return new GB18030Encoder(options);\n};\n\ndecoders['gb18030'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nfunction Big5Decoder(options) {\n  var fatal = options.fatal;\n  var Big5_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Big5_lead !== 0x00) {\n      Big5_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Big5_lead === 0x00) return finished;\n\n    if (Big5_lead !== 0x00) {\n      var lead = Big5_lead;\n      var pointer = null;\n      Big5_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x62;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0xa1, 0xfe)) pointer = (lead - 0x81) * 157 + (bite - offset);\n\n      switch (pointer) {\n        case 1133:\n          return [0x00ca, 0x0304];\n\n        case 1135:\n          return [0x00ca, 0x030c];\n\n        case 1164:\n          return [0x00ea, 0x0304];\n\n        case 1166:\n          return [0x00ea, 0x030c];\n      }\n\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('big5'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      Big5_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction Big5Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexBig5PointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 157) + 0x81;\n    if (lead < 0xa1) return encoderError(code_point);\n    var trail = pointer % 157;\n    var offset = trail < 0x3f ? 0x40 : 0x62;\n    return [lead, trail + offset];\n  };\n}\n\nencoders['Big5'] = function (options) {\n  return new Big5Encoder(options);\n};\n\ndecoders['Big5'] = function (options) {\n  return new Big5Decoder(options);\n};\n\nfunction EUCJPDecoder(options) {\n  var fatal = options.fatal;\n  var eucjp_jis0212_flag = false,\n      eucjp_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && eucjp_lead !== 0x00) {\n      eucjp_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && eucjp_lead === 0x00) return finished;\n\n    if (eucjp_lead === 0x8e && inRange(bite, 0xa1, 0xdf)) {\n      eucjp_lead = 0x00;\n      return 0xff61 - 0xa1 + bite;\n    }\n\n    if (eucjp_lead === 0x8f && inRange(bite, 0xa1, 0xfe)) {\n      eucjp_jis0212_flag = true;\n      eucjp_lead = bite;\n      return null;\n    }\n\n    if (eucjp_lead !== 0x00) {\n      var lead = eucjp_lead;\n      eucjp_lead = 0x00;\n      var code_point = null;\n\n      if (inRange(lead, 0xa1, 0xfe) && inRange(bite, 0xa1, 0xfe)) {\n        code_point = indexCodePointFor((lead - 0xa1) * 94 + (bite - 0xa1), index(!eucjp_jis0212_flag ? 'jis0208' : 'jis0212'));\n      }\n\n      eucjp_jis0212_flag = false;\n      if (!inRange(bite, 0xa1, 0xfe)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (bite === 0x8e || bite === 0x8f || inRange(bite, 0xa1, 0xfe)) {\n      eucjp_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCJPEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return [0x8e, code_point - 0xff61 + 0xa1];\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 94) + 0xa1;\n    var trail = pointer % 94 + 0xa1;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-JP'] = function (options) {\n  return new EUCJPEncoder(options);\n};\n\ndecoders['EUC-JP'] = function (options) {\n  return new EUCJPDecoder(options);\n};\n\nfunction ISO2022JPDecoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    Katakana: 2,\n    LeadByte: 3,\n    TrailByte: 4,\n    EscapeStart: 5,\n    Escape: 6\n  };\n  var iso2022jp_decoder_state = states.ASCII,\n      iso2022jp_decoder_output_state = states.ASCII,\n      iso2022jp_lead = 0x00,\n      iso2022jp_output_flag = false;\n\n  this.handler = function (stream, bite) {\n    switch (iso2022jp_decoder_state) {\n      default:\n      case states.ASCII:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Roman:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (bite === 0x5c) {\n          iso2022jp_output_flag = false;\n          return 0x00a5;\n        }\n\n        if (bite === 0x7e) {\n          iso2022jp_output_flag = false;\n          return 0x203e;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b && bite !== 0x5c && bite !== 0x7e) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Katakana:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x5f)) {\n          iso2022jp_output_flag = false;\n          return 0xff61 - 0x21 + bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.LeadByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_output_flag = false;\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.TrailByte;\n          return null;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.TrailByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return decoderError(fatal);\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_decoder_state = states.LeadByte;\n          var pointer = (iso2022jp_lead - 0x21) * 94 + bite - 0x21;\n          var code_point = indexCodePointFor(pointer, index('jis0208'));\n          if (code_point === null) return decoderError(fatal);\n          return code_point;\n        }\n\n        if (bite === end_of_stream) {\n          iso2022jp_decoder_state = states.LeadByte;\n          stream.prepend(bite);\n          return decoderError(fatal);\n        }\n\n        iso2022jp_decoder_state = states.LeadByte;\n        return decoderError(fatal);\n\n      case states.EscapeStart:\n        if (bite === 0x24 || bite === 0x28) {\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.Escape;\n          return null;\n        }\n\n        stream.prepend(bite);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n\n      case states.Escape:\n        var lead = iso2022jp_lead;\n        iso2022jp_lead = 0x00;\n        var state = null;\n        if (lead === 0x28 && bite === 0x42) state = states.ASCII;\n        if (lead === 0x28 && bite === 0x4a) state = states.Roman;\n        if (lead === 0x28 && bite === 0x49) state = states.Katakana;\n        if (lead === 0x24 && (bite === 0x40 || bite === 0x42)) state = states.LeadByte;\n\n        if (state !== null) {\n          iso2022jp_decoder_state = iso2022jp_decoder_state = state;\n          var output_flag = iso2022jp_output_flag;\n          iso2022jp_output_flag = true;\n          return !output_flag ? null : decoderError(fatal);\n        }\n\n        stream.prepend([lead, bite]);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n    }\n  };\n}\n\nfunction ISO2022JPEncoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    jis0208: 2\n  };\n  var iso2022jp_state = states.ASCII;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if (code_point === end_of_stream && iso2022jp_state === states.ASCII) return finished;\n\n    if ((iso2022jp_state === states.ASCII || iso2022jp_state === states.Roman) && (code_point === 0x000e || code_point === 0x000f || code_point === 0x001b)) {\n      return encoderError(0xfffd);\n    }\n\n    if (iso2022jp_state === states.ASCII && isASCIICodePoint(code_point)) return code_point;\n\n    if (iso2022jp_state === states.Roman && (isASCIICodePoint(code_point) && code_point !== 0x005c && code_point !== 0x007e || code_point == 0x00a5 || code_point == 0x203e)) {\n      if (isASCIICodePoint(code_point)) return code_point;\n      if (code_point === 0x00a5) return 0x5c;\n      if (code_point === 0x203e) return 0x7e;\n    }\n\n    if (isASCIICodePoint(code_point) && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if ((code_point === 0x00a5 || code_point === 0x203e) && iso2022jp_state !== states.Roman) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.Roman;\n      return [0x1b, 0x28, 0x4a];\n    }\n\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n\n    if (iso2022jp_state !== states.jis0208) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.jis0208;\n      return [0x1b, 0x24, 0x42];\n    }\n\n    var lead = floor(pointer / 94) + 0x21;\n    var trail = pointer % 94 + 0x21;\n    return [lead, trail];\n  };\n}\n\nencoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPEncoder(options);\n};\n\ndecoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPDecoder(options);\n};\n\nfunction ShiftJISDecoder(options) {\n  var fatal = options.fatal;\n  var Shift_JIS_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Shift_JIS_lead !== 0x00) {\n      Shift_JIS_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Shift_JIS_lead === 0x00) return finished;\n\n    if (Shift_JIS_lead !== 0x00) {\n      var lead = Shift_JIS_lead;\n      var pointer = null;\n      Shift_JIS_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      var lead_offset = lead < 0xa0 ? 0x81 : 0xc1;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfc)) pointer = (lead - lead_offset) * 188 + bite - offset;\n      if (inRange(pointer, 8836, 10715)) return 0xe000 - 8836 + pointer;\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('jis0208'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite) || bite === 0x80) return bite;\n    if (inRange(bite, 0xa1, 0xdf)) return 0xff61 - 0xa1 + bite;\n\n    if (inRange(bite, 0x81, 0x9f) || inRange(bite, 0xe0, 0xfc)) {\n      Shift_JIS_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction ShiftJISEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point) || code_point === 0x0080) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return code_point - 0xff61 + 0xa1;\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexShiftJISPointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 188);\n    var lead_offset = lead < 0x1f ? 0x81 : 0xc1;\n    var trail = pointer % 188;\n    var offset = trail < 0x3f ? 0x40 : 0x41;\n    return [lead + lead_offset, trail + offset];\n  };\n}\n\nencoders['Shift_JIS'] = function (options) {\n  return new ShiftJISEncoder(options);\n};\n\ndecoders['Shift_JIS'] = function (options) {\n  return new ShiftJISDecoder(options);\n};\n\nfunction EUCKRDecoder(options) {\n  var fatal = options.fatal;\n  var euckr_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && euckr_lead !== 0) {\n      euckr_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && euckr_lead === 0) return finished;\n\n    if (euckr_lead !== 0x00) {\n      var lead = euckr_lead;\n      var pointer = null;\n      euckr_lead = 0x00;\n      if (inRange(bite, 0x41, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - 0x41);\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('euc-kr'));\n      if (pointer === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      euckr_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCKREncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index('euc-kr'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 190) + 0x81;\n    var trail = pointer % 190 + 0x41;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-KR'] = function (options) {\n  return new EUCKREncoder(options);\n};\n\ndecoders['EUC-KR'] = function (options) {\n  return new EUCKRDecoder(options);\n};\n\nfunction convertCodeUnitToBytes(code_unit, utf16be) {\n  var byte1 = code_unit >> 8;\n  var byte2 = code_unit & 0x00ff;\n  if (utf16be) return [byte1, byte2];\n  return [byte2, byte1];\n}\n\nfunction UTF16Decoder(utf16_be, options) {\n  var fatal = options.fatal;\n  var utf16_lead_byte = null,\n      utf16_lead_surrogate = null;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && (utf16_lead_byte !== null || utf16_lead_surrogate !== null)) {\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && utf16_lead_byte === null && utf16_lead_surrogate === null) {\n      return finished;\n    }\n\n    if (utf16_lead_byte === null) {\n      utf16_lead_byte = bite;\n      return null;\n    }\n\n    var code_unit;\n\n    if (utf16_be) {\n      code_unit = (utf16_lead_byte << 8) + bite;\n    } else {\n      code_unit = (bite << 8) + utf16_lead_byte;\n    }\n\n    utf16_lead_byte = null;\n\n    if (utf16_lead_surrogate !== null) {\n      var lead_surrogate = utf16_lead_surrogate;\n      utf16_lead_surrogate = null;\n\n      if (inRange(code_unit, 0xdc00, 0xdfff)) {\n        return 0x10000 + (lead_surrogate - 0xd800) * 0x400 + (code_unit - 0xdc00);\n      }\n\n      stream.prepend(convertCodeUnitToBytes(code_unit, utf16_be));\n      return decoderError(fatal);\n    }\n\n    if (inRange(code_unit, 0xd800, 0xdbff)) {\n      utf16_lead_surrogate = code_unit;\n      return null;\n    }\n\n    if (inRange(code_unit, 0xdc00, 0xdfff)) return decoderError(fatal);\n    return code_unit;\n  };\n}\n\nfunction UTF16Encoder(utf16_be, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (inRange(code_point, 0x0000, 0xffff)) return convertCodeUnitToBytes(code_point, utf16_be);\n    var lead = convertCodeUnitToBytes((code_point - 0x10000 >> 10) + 0xd800, utf16_be);\n    var trail = convertCodeUnitToBytes((code_point - 0x10000 & 0x3ff) + 0xdc00, utf16_be);\n    return lead.concat(trail);\n  };\n}\n\nencoders['UTF-16BE'] = function (options) {\n  return new UTF16Encoder(true, options);\n};\n\ndecoders['UTF-16BE'] = function (options) {\n  return new UTF16Decoder(true, options);\n};\n\nencoders['UTF-16LE'] = function (options) {\n  return new UTF16Encoder(false, options);\n};\n\ndecoders['UTF-16LE'] = function (options) {\n  return new UTF16Decoder(false, options);\n};\n\nfunction XUserDefinedDecoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    return 0xf780 + bite - 0x80;\n  };\n}\n\nfunction XUserDefinedEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (inRange(code_point, 0xf780, 0xf7ff)) return code_point - 0xf780 + 0x80;\n    return encoderError(code_point);\n  };\n}\n\nencoders['x-user-defined'] = function (options) {\n  return new XUserDefinedEncoder(options);\n};\n\ndecoders['x-user-defined'] = function (options) {\n  return new XUserDefinedDecoder(options);\n};\n\nexport { TextEncoder, TextDecoder };","'use strict';\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar $native = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n    // convert -0 to +0\n    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;\n    var O = toIObject(this);\n    var length = toLength(O.length);\n    var index = length - 1;\n    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));\n    if (index < 0) index = length + index;\n    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;\n    return -1;\n  }\n});\n","import \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.index-of\";\nimport { toArrayBuffer } from './to-array-buffer.node';\nexport default function decodeDataUri(uri) {\n  var dataIndex = uri.indexOf(',');\n  var buffer;\n  var mimeType;\n\n  if (uri.slice(dataIndex - 7, dataIndex) === ';base64') {\n    buffer = new Buffer(uri.slice(dataIndex + 1), 'base64');\n    mimeType = uri.slice(5, dataIndex - 7).trim();\n  } else {\n    buffer = new Buffer(decodeURIComponent(uri.slice(dataIndex + 1)));\n    mimeType = uri.slice(5, dataIndex).trim();\n  }\n\n  if (!mimeType) {\n    mimeType = 'text/plain;charset=US-ASCII';\n  } else if (mimeType[0] === ';') {\n    mimeType = \"text/plain\".concat(mimeType);\n  }\n\n  return {\n    arrayBuffer: toArrayBuffer(buffer),\n    mimeType: mimeType\n  };\n}","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../../utils/assert';\n\nvar isArrayBuffer = function isArrayBuffer(x) {\n  return x && x instanceof ArrayBuffer;\n};\n\nvar isBuffer = function isBuffer(x) {\n  return x && x instanceof Buffer;\n};\n\nexport function toArrayBuffer(data) {\n  if (isArrayBuffer(data)) {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    var typedArray = new Uint8Array(data);\n    return typedArray.buffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport savePixels from 'save-pixels';\nimport ndarray from 'ndarray';\nimport { bufferToArrayBuffer } from '../utils/to-array-buffer.node';\nexport function encodeImageToStreamNode(image, options) {\n  var type = options.type ? options.type.replace('image/', '') : 'jpeg';\n  var pixels = ndarray(image.data, [image.width, image.height, 4], [4, image.width * 4, 1], 0);\n  return savePixels(pixels, type, options);\n}\nexport function encodeImageNode(image, options) {\n  var imageStream = encodeImageToStreamNode(image, options);\n  return new Promise(function (resolve) {\n    var buffers = [];\n    imageStream.on('data', function (buffer) {\n      return buffers.push(buffer);\n    });\n    imageStream.on('end', function () {\n      var buffer = Buffer.concat(buffers);\n      resolve(bufferToArrayBuffer(buffer));\n    });\n  });\n}","export default `\\\n#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n\n // Constant-Linear-Exponential\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n`;\n","import lightingShader from './lights.glsl';\n\nexport default {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\n\nconst INITIAL_MODULE_OPTIONS = {};\n\n// Take color 0-255 and intensity as input and output 0.0-1.0 range\nfunction convertColor({color = [0, 0, 0], intensity = 1.0} = {}) {\n  return color.map(component => (component * intensity) / 255.0);\n}\n\nfunction getLightSourceUniforms({ambientLight, pointLights = [], directionalLights = []}) {\n  const lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach((pointLight, index) => {\n    lightSourceUniforms[`lighting_uPointLight[${index}].color`] = convertColor(pointLight);\n    lightSourceUniforms[`lighting_uPointLight[${index}].position`] = pointLight.position;\n    lightSourceUniforms[`lighting_uPointLight[${index}].attenuation`] = pointLight.attenuation || [\n      1,\n      0,\n      0\n    ];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n\n  directionalLights.forEach((directionalLight, index) => {\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].color`] = convertColor(\n      directionalLight\n    );\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].direction`] =\n      directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n\n  return lightSourceUniforms;\n}\n\n// eslint-disable-next-line complexity\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  // Specify lights separately\n  if ('lightSources' in opts) {\n    const {ambientLight, pointLights, directionalLights} = opts.lightSources || {};\n    const hasLights =\n      ambientLight ||\n      (pointLights && pointLights.length > 0) ||\n      (directionalLights && directionalLights.length > 0);\n\n    if (!hasLights) {\n      return {lighting_uEnabled: false};\n    }\n\n    return Object.assign(\n      {},\n      getLightSourceUniforms({ambientLight, pointLights, directionalLights}),\n      {\n        lighting_uEnabled: true\n      }\n    );\n  }\n\n  // Support for array of lights. Type of light is detected by type field\n  if ('lights' in opts) {\n    const lightSources = {pointLights: [], directionalLights: []};\n    for (const light of opts.lights || []) {\n      switch (light.type) {\n        case 'ambient':\n          // Note: Only uses last ambient light\n          // TODO - add ambient light sources on CPU?\n          lightSources.ambientLight = light;\n          break;\n        case 'directional':\n          lightSources.directionalLights.push(light);\n          break;\n        case 'point':\n          lightSources.pointLights.push(light);\n          break;\n        default:\n        // eslint-disable-next-line\n        // console.warn(light.type);\n      }\n    }\n\n    // Call the `opts.lightSources`` version\n    return getUniforms({lightSources});\n  }\n\n  return {};\n}\n","import \"core-js/modules/es6.typed.float32-array\";\n\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && value.length !== undefined;\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}"],"sourceRoot":""}