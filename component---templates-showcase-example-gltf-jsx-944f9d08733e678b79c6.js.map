{"version":3,"sources":["webpack:///../node_modules/math.gl/dist/esm/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/isarray/index.js","webpack:///../modules/engine/src/animation/timeline.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/stream-utils.node.js","webpack:///../node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/core-js/modules/es6.date.to-json.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/validate-loader-version.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/constants.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/merge-options.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.browser.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/check-errors.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-loader-context.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/binary-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-worker-url.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-transfer-list.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-thread.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-pool.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-farm.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/register-loaders.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/select-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/parse.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/image-type.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/get-image-output-format.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-parsers.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-html-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-svg.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/get-first-characters.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/parser-utils/parse-json.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/memory-copy-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/resolve-url.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/get-typed-array.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-scenegraph.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-attribute-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_draco_mesh_compression.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-constants.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_lights_punctual.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_materials_unlit.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/gltf-extensions.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-glb.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/post-process-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/library-utils/library-utils.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-module-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-parser.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/draco-loader.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/headers.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/response.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/fetch.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/index.js","webpack:///../modules/experimental/src/scenegraph/nodes/scenegraph-node.js","webpack:///../modules/experimental/src/scenegraph/nodes/group-node.js","webpack:///../modules/experimental/src/gltf/gltf-animator.js","webpack:///../modules/shadertools/src/modules/pbr/pbr.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-vertex.glsl.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-fragment.glsl.js","webpack:///../modules/experimental/src/scenegraph/nodes/model-node.js","webpack:///../modules/experimental/src/gltf/gltf-material-parser.js","webpack:///../modules/experimental/src/gltf/create-gltf-model.js","webpack:///../modules/experimental/src/gltf/gltf-instantiator.js","webpack:///../modules/experimental/src/gltf/create-gltf-objects.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/parsed-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/generate-url.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/async-deep-map.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/deep-load.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/load-image.js","webpack:///../modules/experimental/src/gltf/gltf-environment.js","webpack:///../examples/showcase/gltf/app.js","webpack:///./templates/showcase/example-gltf.jsx","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/btoa.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/to-array-buffer.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../node_modules/gl-matrix/esm/mat3.js","webpack:///../node_modules/gl-matrix/esm/quat.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/quaternion.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/read-file.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/globals.js","webpack:///./node_modules/core-js/modules/es6.object.define-properties.js","webpack:///../node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/parse-image.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./node_modules/ieee754/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/vec2.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/encoding.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/decode-data-uri.node.js","webpack:///./node_modules/core-js/modules/_own-keys.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/to-array-buffer.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/encode-image.node.js","webpack:///../modules/shadertools/src/modules/lights/lights.glsl.js","webpack:///../modules/shadertools/src/modules/lights/lights.js","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/common.js"],"names":["assert","condition","message","Error","concat","toString","module","exports","Array","isArray","arr","call","channelHandles","animationHandles","Timeline","this","time","channels","animations","playing","lastEngineTime","addChannel","props","delay","duration","Number","rate","handle","channel","repeat","_setChannelTime","set","removeChannel","delete","animationHandle","animation","detachAnimation","isFinished","get","getTime","setTime","Math","animationData","play","pause","reset","attachAnimation","channelHandle","update","engineTime","offsetTime","concatenateReadStream","readStream","arrayBuffer","ArrayBuffer","string","Promise","resolve","reject","data","chunk","source1","source2","sourceArray1","sourceArray2","temp","Uint8Array","byteLength","on","error","complete","clone","a","out","fromValues","x","y","z","w","copy","add","b","scale","length","sqrt","squaredLength","normalize","len","dot","lerp","t","ax","ay","az","aw","transformMat4","m","transformQuat","q","qx","qy","qz","qw","ix","iy","iz","iw","exactEquals","equals","a0","a1","a2","a3","b0","b1","b2","b3","abs","max","vec","Float32Array","$export","toObject","toPrimitive","P","F","Date","NaN","toJSON","prototype","toISOString","key","O","pv","isFinite","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","Arr","_byteLength","curByte","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","parts","len2","push","encodeChunk","lookup","join","code","indexOf","start","end","num","output","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","value","TypeError","array","byteOffset","undefined","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","checked","buffer","val","type","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","e","typedArraySupport","poolSize","_augment","Symbol","species","Object","defineProperty","configurable","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","arguments","inspect","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","trim","replace","stringtrim","base64clean","src","dst","asyncGeneratorStep","gen","_next","_throw","info","done","then","_asyncToGenerator","fn","self","args","err","globals","window","document","global_","isBrowser","process","browser","isWorker","importScripts","matches","version","parseFloat","validateLoaderVersion","loader","coreVersion","loaderVersion","parseVersion","split","map","major","minor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","source","forEach","getOwnPropertyDescriptors","defineProperties","isLoaderObject","hasParser","parseTextSync","parseSync","parse","parseStream","parseInBatches","loaderOptions","options","id","workerUrl","normalizeLoader","extension","extensions","text","binary","NullLog","_","DEFAULT_LOADER_OPTIONS","CDN","worker","log","ConsoleLog","console","_this$console$log","_len","_key","bind","_this$console$info","_len2","_key2","_this$console$warn","_len3","_key3","warn","_this$console$error","_len4","_key4","dataType","constructor","globalOptions","mergeOptions","url","mergedOptions","defaultOptions","baseUri","addUrlOptions","mergeNestedFields","isFetchResponse","Response","json","isFileReadable","File","isFile","Blob","isBlob","_AwaitValue","wrapped","AsyncGenerator","front","back","resume","result","wrappedAwait","settle","next","_invoke","request","asyncIterator","FileReadableResponse","fileOrBlob","_fileOrBlob","bodyUsed","_this$_getFileReader","reader","promise","async","_context","prev","_getFileReader","readAsArrayBuffer","abrupt","stop","_this$_getFileReader2","_context2","readAsText","_context3","awrap","sent","JSON","FileReader","onerror","onabort","onload","Headers","name","fetchFileReadable","checkFetchResponseStatus","response","errorMessage","ok","status","t0","ERR_DATA","getUrlFromData","getArrayBufferOrStringFromDataSync","TextDecoder","decode","getArrayBufferOrStringFromData","isArrayBuffer","pathPrefix","fileAliases","resolvePath","filename","alias","startsWith","replacement","fetchFile","fetch","getLoaderContext","context","previousContext","loaders","getLoaders","candidateLoaders","contextLoaders","toArrayBuffer","TextEncoder","encode","workerURLCache","Map","buildScript","isTransferable","MessagePort","ImageBitmap","OffscreenCanvas","getTransferList","recursive","transfers","defaultOnMessage","_ref","WorkerThread","_ref2","_ref2$name","onMessage","workerSource","endsWith","workerURL","blob","URL","createObjectURL","getWorkerURL","Worker","_this","onmessage","event","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","jobQueue","idleQueue","count","isDestroyed","destroy","jobName","_startQueuedJob","_this2","_getAvailableWorker","job","shift","backlog","_onWorkerDone","WorkerFarm","workerPools","workerPool","workerName","_getWorkerPool","canParseWithWorker","isSupported","localWorkerUrl","useWorker","parseWithWorker","workerFarm","_workerFarm","onWorkerMessage","setProps","getWorkerFarm","stringify","arraybuffer","t1","registeredLoaders","getRegisteredLoaders","EXT_PATTERN","DATA_URL_PATTERN","selectLoader","_ref$nothrow","nothrow","_loader","normalizeLoaders","findLoaderByUrl","findLoaderByContentType","findLoaderByExamingInitialData","getFirstCharacters","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","mimeType","findLoaderByMimeType","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","findLoaderByExtension","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","mimeTypes","headers","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","testText","testBinary","test","some","getMagicString","dataView","DataView","magic","getUint8","autoUrl","parseWithLoader","IMAGE_BITMAP_SUPPORTED","HTML_IMAGE_SUPPORTED","Image","NODE_IMAGE_SUPPORTED","Boolean","_parseImageNode","isImageTypeSupported","getSupportedImageType","getImageOutputFormat","imageOptions","image","mimeTypeMap","isPng","getSize","width","getUint32","height","isJpeg","getUint16","_getJpegMarkers","tableMarkers","Set","sofMarkers","getJpegMarkers","marker","has","isGif","isBmp","getBinaryImageMIMEType","toDataView","entries","_step$value","parseToNodeImage","parseToHTMLImage","objectUrl","webkitURL","loadToHTMLImage","revokeObjectURL","finish","parseToImageBitmap","imagebitmapOptions","imagebitmap","createImageBitmap","parseSVG","textDecoder","xmlText","btoa","parseImage","format","images","decodeHTML","parseJSON","padTo4Bytes","getZeroOffsetArrayBuffer","subArray","copyToArray","targetOffset","sourceArray","srcByteOffset","srcByteLength","resolveUrl","baseUrl","uri","buffers","bufferViewIndex","bufferView","bufferViews","binChunk","TYPES","ARRAY_TO_COMPONENT_TYPE","Int8Array","Int16Array","Uint16Array","Uint32Array","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5120","5121","5122","5123","5125","5126","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","getAccessorTypeFromSize","getComponentTypeFromArray","typedArray","componentType","getAccessorArrayTypeAndLength","accessor","ArrayType","components","bytesPerComponent","GLTFScenegraph","gltf","extras","extensionName","isExtension","getUsedExtensions","find","getRequiredExtensions","getExtension","extensionsRequired","extensionsUsed","index","getObject","bufferIndex","getBufferView","getAccessor","getBuffer","_getAccessorArrayType","registerUsedExtension","addExtension","registerRequiredExtension","_removeStringFromArray","attributes","indices","mode","accessors","_addAttributes","glTFMesh","primitives","meshes","imageData","glTFImage","addBufferView","sourceBuffers","glTFBufferView","glTFAccessor","sourceBuffer","accessorDefaults","round","addAccessor","assign","totalByteLength","targetArray","dstByteOffset","splice","getGLTFAccessors","attribute","getGLTFAccessor","gltfAttributeName","_getAccessorData","attributeName","convertTypedArrays","toTypedArray","getAccessorData","_marked","mark","meshPrimitiveIterator","gltfData","scenegraph","promises","primitive","decompressMeshes","getObjectExtension","decompressPrimitive","all","removeExtension","mesh","compressMesh","addRequiredExtension","compressedPrimitive","bufferCopy","decodedData","getTypedArrayForBufferView","checkPrimitive","DracoWriter","DracoLoader","compressedData","encodeSync","fauxAccessors","_addFauxAttributes","wrap","gltfScenegraph","lights","nodes","node","nodeExtension","light","removeObjectExtension","addExtensions","addObjectExtension","materials","material","KHR_materials_unlit","unlit","KHR_draco_mesh_compression","KHR_lights_punctual","decodeExtensions","excludes","_args","excludeExtensions","_DEFAULT_SAMPLER","isGLB","_options$magic","magic1","parseGLBChunksSync","glb","header","chunkLength","chunkFormat","parseJSONChunk","parseBINChunk","strict","jsonChunk","jsonText","hasBinChunk","binChunks","GL_SAMPLER","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","REPEAT","LINEAR","NEAREST_MIPMAP_LINEAR","SAMPLER_PARAMETER_GLTF_TO_GL","magFilter","minFilter","wrapS","wrapT","DEFAULT_SAMPLER","TEXTURE_WRAP_","GLTFPostProcessor","_gltf$buffers","_gltf$images","_gltf$baseUri","_resolveTree","bufView","_resolveBufferView","_resolveImage","samplers","sampler","_resolveSampler","textures","texture","_resolveTexture","_resolveAccessor","_resolveMaterial","_resolveMesh","_resolveNode","skins","skin","_resolveSkin","scenes","scene","_resolveScene","_get","getNode","_this3","children","child","getMesh","camera","getCamera","getSkin","inverseBindMatrices","_this4","getMaterial","normalTexture","getTexture","occlusionTexture","occlustionTexture","emissiveTexture","emmisiveTexture","pbrMetallicRoughness","mr","baseColorTexture","metallicRoughnessTexture","bytesPerElement","getSampler","getImage","parameters","glEnum","_enumSamplerParameter","preloadedImage","perspective","orthographic","postProcessGLTF","postProcess","parseGLTF","arrayBufferOrString","_promise","parseGLTFContainerSync","loadImages","loadBuffers","GLB_FILE_HEADER_SIZE","parseGLBSync","_glb","loadImage","parsedImage","_context4","GLTFLoader","_options$byteOffset","addDeprecatedGLTFOptions","fetchImages","createImages","fetchBuffers","fetchLinkedResources","decompress","loadDecoderPromise","loadLibraryPromises","loadLibrary","_x","_loadLibrary","_callee","libraryUrl","moduleName","getLibraryUrl","loadLibraryFromFile","library","modules","_x2","_loadLibraryFromFile","_callee2","_response","scriptSource","loadLibraryFromString","eval","script","createElement","appendChild","createTextNode","body","loadDracoDecoderModule","_loadDracoDecoderModule","draco3d","draco","createDecoderModule","loadDracoDecoder","_x3","_loadDracoDecoder","_callee3","DracoDecoderModule","wasmBinary","decoderType","t2","t3","t4","initializeDracoDecoder","onModuleLoaded","GEOMETRY_TYPE","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","POSITION","NORMAL","COLOR","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","1","2","3","4","5","Int32Array","6","9","DracoParser","dracoGeometry","DecoderBuffer","Init","dracoStatus","decoder","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeBufferToMesh","faceCount","num_faces","attributeCount","num_attributes","vertexCount","num_points","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ptr","error_msg","loaderData","extractDRACOGeometry","geometry","getAttributes","positionAttribute","getPositionAttributeMetadata","drawMode","getMeshStripIndices","getMeshFaceIndices","metadata","posTransform","AttributeQuantizationTransform","InitFromAttribute","position","isQuantized","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","numPoints","attributeType","attributeId","GetAttributeId","dracoAttribute","GetAttribute","getAttributeTypedArray","numFaces","dracoArray","DracoInt32Array","GetFaceFromMesh","GetValue","GetTriangleStripsFromMesh","data_type","numComponents","num_components","numValues","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","DracoInt16Array","GetAttributeInt16ForAllPoints","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","WebAssembly","libraryPath","_x4","_parse","dracoParser","append","getOwnPropertyNames","normalizeName","normalizeValue","oldValue","hasOwnProperty","callback","thisArg","items","iteratorFor","delegateYield","NodeFetchResponse","_url","_ok","_status","_headers","_json","_text","_arrayBuffer","httpResponse","httpHeaders","getHeaders","contentLength","_getContentLength","isDataURL","statSync","_getHeaders","fetchNode","ScenegraphNode","uid","display","rotation","matrix","userData","_setScenegraphNodeProps","setPosition","setRotation","setScale","setMatrix","copyMatrix","setMatrixComponents","updateMatrix","rot","identity","translate","rotateXYZ","getCoordinateUniforms","modelMatrix","worldMatrix","worldInverse","worldInverseTranspose","viewMatrix","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","GroupNode","remove","removeAll","traverse","visitor","accessorToJsArray","slicedArray","helperMatrix","quaternion","interpolate","input","interpolation","animationTime","nextIndex","previousIndex","previousTime","nextTime","stepInterpolate","ratio","path","linearInterpolate","tDiff","p0","outTangent0","inTangent1","p1","m0","m1","cubicsplineInterpolate","GLTFAnimation","startTime","speed","animate","timeMs","gltfNode","rotationMatrix","applyTranslationRotationScale","GLTFAnimator","getAnimations","vs","fs","defines","LIGHTING_FRAGMENT","dependencies","ModelNode","gl","_setModelNodeProps","model","managedResources","resource","draw","setUniforms","setAttributes","updateModuleSettings","GLTFMaterialParser","pbrDebug","imageBasedLightingEnvironment","useTangents","MANUAL_SRGB","SRGB_FAST_APPROXIMATION","hasFeature","FEATURES","USE_TEX_LOD","uniforms","u_Camera","u_MetallicRoughnessValues","generatedTextures","u_DiffuseEnvSampler","u_SpecularEnvSampler","u_brdfLUT","u_ScaleIBLAmbient","u_ScaleDiffBaseMR","u_ScaleFGDSpec","defineIfPresent","parseMaterial","parseTexture","define","gltfTexture","pixelStore","parsePbrMetallicRoughness","u_BaseColorFactor","metallicFactor","roughnessFactor","u_NormalScale","strength","u_OcclusionStrength","u_EmissiveFactor","alphaCutoff","ALPHA_CUTOFF","u_AlphaCutoff","blend","blendEquation","blendFunc","addVersionToShader","isWebGL2","DEFAULT_OPTIONS","modelOptions","GLTFInstantiator","instantiate","createAnimator","createScene","gltfScene","createNode","createMesh","gltfMesh","getVertexCount","createPrimitive","materialParser","createGLTFModel","gltfPrimitive","createAttributes","loadedAttributes","attrName","createAccessor","generated","stride","createSampler","gltfSampler","needsPOT","createGLTFObjects","instantiator","animator","getImageType","getImageTypeOrNull","getImageSize","naturalWidth","naturalHeight","generateUrl","getUrl","urlOptions","asyncDeepMap","tree","func","mapSubtree","mapArray","mapObject","values","_loop","urlArray","_args4","deepLoad","urlTree","load","shallowLoad","imageUrls","getImageUrls","mipLevels","_args2","getMipmappedImageUrls","urls","_getImageSize","mipLevel","lod","getMipLevels","log2","GLTFEnvironment","brdfLutUrl","getTexUrl","specularMipLevels","makeCube","getTextureForFace","pixels","TextureCube","face","mipmaps","getDiffuseEnvSampler","_DiffuseEnvSampler","GL","getSpecularEnvSampler","_SpecularEnvSampler","imageArray","getBrdfTexture","_BrdfTexture","CUBE_FACE_TO_DIRECTION","GLTF_BASE_URL","LIGHT_SOURCES","default","directionalLights","color","direction","intensity","ambient","ambientLight","directional1","directional3","point1far","pointLights","attenuation","point1near","loadGLTF","urlOrPromise","AppAnimationLoop","opts","glOptions","webgl1","webgl2","alpha","modelFile","initialZoom","lastX","lastY","getInfo","initalizeEventHandling","pointerIsDown","pointerDown","pointerMove","dX","dY","canvas","ev","_fileLoaded","timeline","onInitialize","setParameters","depthTest","loadOptions","environment","showSelector","lightSelector","iblSelector","_updateLightSettings","_rebuildModel","_deleteScenes","lumaStats","applyLight","lightSources","onRender","aspect","projectionMatrix","clear","depth","pitch","roll","cameraPos","uView","uProjection","fov","radians","near","far","success","u_MVPMatrix","u_ModelMatrix","u_NormalMatrix","AnimationLoop","animationLoop","infoDiv","Example","render","exampleConfig","pageContext","React","Component","atob","_inherits","subClass","superClass","create","writable","cross","bx","by","bz","transformMat3","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","p","r","cos","sin","rotateY","rotateZ","angle","tempA","tempB","cosine","PI","acos","bufferToArrayBuffer","_slicedToArray","_n","_d","_e","_s","_i","setAxisAngle","axis","rad","s","bw","omega","cosom","sinom","scale0","scale1","fromMat3","fRoot","fTrace","k","vec4","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","vec3","IDENTITY_QUATERNION","_MathArray","Quaternion","check","fromAxisRotation","vectorA","vectorB","invDot","l","_arguments$","_arguments$$start","_arguments","vector","lengthSquared","multiplyLeft","multiplyRight","isNativeReflectConstruct","Reflect","construct","sham","Proxy","_construct","Parent","Class","instance","Function","Vector","ELEMENTS","mathArray","distanceSquared","dist","product","magnitude","vectors","_vectors","_i2","_vectors2","distance","subtract","multiply","multiplyScalar","ORIGIN","_Vector","Vector3","debug","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","isRequestURL","readFile","_readFile","_decodeDataUri","queryIndex","readFileAsync","getReadFileOptions","promisify","createReadStream","_createReadStream","responseType","S","mathgl","config","_cache","Wrapper","getPrototypeOf","setPrototypeOf","_Array","MathArray","arrayOrObject","toArray","to","formatString","printTypes","ai","minVector","maxVector","_scale","addScalar","scalar","validate","valid","parseImageNode","getPixelsAsync","ndarray","shape","layers","checkNumber","checkVector","v","callerName","validateVector","deprecated","method","_getPrototypeOf","o","toIObject","gOPD","createProperty","desc","getDesc","f","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","rt","LN2","Matrix","printRowMajor","row","RANK","col","columnIndex","firstIndex","columnVector","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","fovy","nf","tan","eye","center","up","x0","x1","x2","y0","y1","y2","z0","z1","z2","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","_Matrix","Matrix4","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","xx","yx","yy","zx","zy","zz","wx","wy","wz","left","right","bottom","top","_computeInfinitePerspectiveOffCenter","rl","tb","_eye","_ref2$near","_ref2$far","lr","bt","_ref3$fovy","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","ortho","_ref4","_ref4$fov","_ref4$aspect","_ref4$near","_ref4$far","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","_ref5","_ref6","rx","ry","rz","b12","b20","b21","b22","factor","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","inRange","ToDictionary","isASCIIByte","isASCIICodePoint","Stream","tokens","reverse","endOfStream","pop","prepend","token","unshift","decoderError","fatal","opt_code_point","encoderError","code_point","getEncoding","label","label_to_encoding","encodings","labels","heading","category","shift_jis_index","big5_index_no_hkscs","encoders","decoders","indexCodePointFor","pointer","indexPointerFor","_encoding","_decoder","_ignoreBOM","_BOMseen","_error_mode","_do_not_flush","ignoreBOM","_encoder","_fatal","UTF8Decoder","utf8_code_point","utf8_bytes_seen","utf8_bytes_needed","utf8_lower_boundary","utf8_upper_boundary","handler","stream","bite","UTF8Encoder","SingleByteDecoder","SingleByteEncoder","GB18030Decoder","gb18030_first","gb18030_second","gb18030_third","code_point_offset","idx","entry","indexGB18030RangesCodePointFor","lead","GB18030Encoder","gbk_flag","trail","pointer_offset","indexGB18030RangesPointerFor","byte1","byte2","byte3","Big5Decoder","Big5_lead","Big5Encoder","index_","indexBig5PointerFor","EUCJPDecoder","eucjp_jis0212_flag","eucjp_lead","EUCJPEncoder","ISO2022JPDecoder","states","iso2022jp_decoder_state","iso2022jp_decoder_output_state","iso2022jp_lead","iso2022jp_output_flag","state","output_flag","ISO2022JPEncoder","iso2022jp_state","ShiftJISDecoder","Shift_JIS_lead","lead_offset","ShiftJISEncoder","indexShiftJISPointerFor","EUCKRDecoder","euckr_lead","EUCKREncoder","convertCodeUnitToBytes","code_unit","utf16be","UTF16Decoder","utf16_be","utf16_lead_byte","utf16_lead_surrogate","lead_surrogate","UTF16Encoder","XUserDefinedDecoder","XUserDefinedEncoder","input_stream","item","code_points","cp","codePointsToString","opt_string","u","stringToCodePoints","decodeDataUri","dataIndex","decodeURIComponent","gOPN","gOPS","anObject","it","getSymbols","_possibleConstructorReturn","ReferenceError","nodeVersion","_setPrototypeOf","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","encodeImageNode","imageStream","encodeImageToStreamNode","INITIAL_MODULE_OPTIONS","getUniforms","lightSourceUniforms","convertColor","pointLight","directionalLight","getLightSourceUniforms","lighting_uEnabled","MAX_LIGHTS","component","EPSILON","ARRAY_TYPE","RANDOM","random","DEGREES_TO_RADIANS","formatValue","_ref$precision","precision","toPrecision","degrees","epsilon","oldEpsilon","printDegrees"],"mappings":"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","file":"component---templates-showcase-example-gltf-jsx-944f9d08733e678b79c6.js","sourcesContent":["export * from '@math.gl/core';","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}","require(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","let channelHandles = 1;\nlet animationHandles = 1;\n\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {delay = 0, duration = Number.POSITIVE_INFINITY, rate = 1, repeat = 1} = props;\n\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n    this._setChannelTime(channel, this.time);\n    this.channels.set(handle, channel);\n\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n\n    const channels = this.channels.values();\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n    for (const animationData of animations) {\n      const {animation, channel} = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n\n    animation.setTime(this.getTime(channelHandle));\n\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n    // Note(Tarek): Don't loop on final repeat.\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n}\n","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function concatenateReadStream(readStream) {\n  var arrayBuffer = new ArrayBuffer();\n  var string = '';\n  return new Promise(function (resolve, reject) {\n    readStream.data(function (chunk) {\n      if (typeof chunk === 'string') {\n        string += chunk;\n      } else {\n        arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n      }\n    });\n    readStream.on('error', function (error) {\n      return reject(error);\n    });\n    readStream.on('end', function () {\n      if (readStream.complete) {\n        resolve(arrayBuffer || string);\n      } else {\n        reject('The connection was terminated while the message was still being sent');\n      }\n    });\n  });\n}\n\nfunction concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nimport assert from './env-utils/assert';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread({}, loader, {\n      options: _objectSpread({}, loader.options, {}, options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}","import \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();","import { ConsoleLog } from './loader-utils/loggers';\nexport var DEFAULT_LOADER_OPTIONS = {\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  dataType: 'arraybuffer'\n};","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { DEFAULT_LOADER_OPTIONS } from '../constants';\nimport { NullLog } from './loggers';\n\nvar isPureObject = function isPureObject(value) {\n  return value && _typeof(value) === 'object' && value.constructor === {}.constructor;\n};\n\nvar globalOptions = _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n\nexport function setGlobalOptions(options) {\n  globalOptions = mergeOptions(globalOptions, options);\n}\nexport function mergeOptions(loader, options, url) {\n  var loaderDefaultOptions = loader && (loader.DEFAULT_LOADER_OPTIONS || loader.defaultOptions || loader.options || {});\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, globalOptions);\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread({}, mergedOptions[key], {}, options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nvar isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\n\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isFetchResponse = function isFetchResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isFileReadable = function isFileReadable(x) {\n  return isFile(x) || isBlob(x);\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.pipeTo) && isFunction(x.getReader);\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar FileReadableResponse = function () {\n  function FileReadableResponse(fileOrBlob) {\n    _classCallCheck(this, FileReadableResponse);\n\n    this._fileOrBlob = fileOrBlob;\n    this.bodyUsed = false;\n  }\n\n  _createClass(FileReadableResponse, [{\n    key: \"arrayBuffer\",\n    value: function arrayBuffer() {\n      var _this$_getFileReader, reader, promise;\n\n      return _regeneratorRuntime.async(function arrayBuffer$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$_getFileReader = this._getFileReader(), reader = _this$_getFileReader.reader, promise = _this$_getFileReader.promise;\n              reader.readAsArrayBuffer(this._fileOrBlob);\n              return _context.abrupt(\"return\", promise);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"text\",\n    value: function text() {\n      var _this$_getFileReader2, reader, promise;\n\n      return _regeneratorRuntime.async(function text$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$_getFileReader2 = this._getFileReader(), reader = _this$_getFileReader2.reader, promise = _this$_getFileReader2.promise;\n              reader.readAsText(this._fileOrBlob);\n              return _context2.abrupt(\"return\", promise);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"json\",\n    value: function json() {\n      var text;\n      return _regeneratorRuntime.async(function json$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(this.text());\n\n            case 2:\n              text = _context3.sent;\n              return _context3.abrupt(\"return\", JSON.parse(text));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_getFileReader\",\n    value: function _getFileReader() {\n      assert(!this.bodyUsed);\n      this.bodyUsed = true;\n      var reader;\n      var promise = new Promise(function (resolve, reject) {\n        try {\n          reader = new FileReader();\n\n          reader.onerror = function (error) {\n            return reject(new Error(error));\n          };\n\n          reader.onabort = function () {\n            return reject(new Error('Read aborted.'));\n          };\n\n          reader.onload = function () {\n            return resolve(reader.result);\n          };\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return {\n        reader: reader,\n        promise: promise\n      };\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return new Headers({\n        'Content-Length': this._fileOrBlob.size,\n        'Content-Type': this._fileOrBlob.type\n      });\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return 200;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._fileOrBlob.name || '';\n    }\n  }]);\n\n  return FileReadableResponse;\n}();\n\nexport default function fetchFileReadable(fileOrBlob, options) {\n  return Promise.resolve(new FileReadableResponse(fileOrBlob, options));\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nexport function checkFetchResponseStatus(response) {\n  var errorMessage, text;\n  return _regeneratorRuntime.async(function checkFetchResponseStatus$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (response.ok) {\n            _context.next = 12;\n            break;\n          }\n\n          errorMessage = \"fetch failed \".concat(response.status, \" \");\n          _context.prev = 2;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(response.text());\n\n        case 5:\n          text = _context.sent;\n          errorMessage += text;\n          _context.next = 11;\n          break;\n\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](2);\n\n        case 11:\n          throw new Error(errorMessage);\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[2, 9]]);\n}\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(\"fetch failed \".concat(response.status));\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { isFetchResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isFileReadable } from '../../javascript-utils/is-type';\nimport { getStreamIterator } from '../../javascript-utils/stream-utils';\nimport fetchFileReadable from '../fetch/fetch-file.browser';\nimport { checkFetchResponseStatus, checkFetchResponseStatusSync } from './check-errors';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getUrlFromData(data, url) {\n  if (isFetchResponse(data)) {\n    url = url || data.url;\n  } else if (isFileReadable(url)) {\n    url = url.name;\n  }\n\n  return typeof url === 'string' ? url.replace(/\\?.*/, '') : url;\n}\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    var arrayBuffer = data.buffer || data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(data, loader) {\n  var isArrayBuffer;\n  return _regeneratorRuntime.async(function getArrayBufferOrStringFromData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(data);\n\n        case 2:\n          data = _context.sent;\n          isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n          if (!(typeof data === 'string' || isArrayBuffer)) {\n            _context.next = 6;\n            break;\n          }\n\n          return _context.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n        case 6:\n          if (!isFileReadable(data)) {\n            _context.next = 10;\n            break;\n          }\n\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(fetchFileReadable(data));\n\n        case 9:\n          data = _context.sent;\n\n        case 10:\n          if (!isFetchResponse(data)) {\n            _context.next = 23;\n            break;\n          }\n\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(checkFetchResponseStatus(data));\n\n        case 13:\n          if (!loader.binary) {\n            _context.next = 19;\n            break;\n          }\n\n          _context.next = 16;\n          return _regeneratorRuntime.awrap(data.arrayBuffer());\n\n        case 16:\n          _context.t0 = _context.sent;\n          _context.next = 22;\n          break;\n\n        case 19:\n          _context.next = 21;\n          return _regeneratorRuntime.awrap(data.text());\n\n        case 21:\n          _context.t0 = _context.sent;\n\n        case 22:\n          return _context.abrupt(\"return\", _context.t0);\n\n        case 23:\n          throw new Error(ERR_DATA);\n\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function getAsyncIteratorFromData(data) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isFetchResponse(data) && data.body) {\n    checkFetchResponseStatusSync(data);\n    return getStreamIterator(data.body);\n  }\n\n  if (isReadableStream(data)) {\n    return getStreamIterator(data);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIteratorFromData(data);\n}\nexport function getIteratorFromData(data) {\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return data.buffer || data;\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.assign\";\nvar pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      return filename.replace(alias, replacement);\n    }\n  }\n\n  filename += pathPrefix;\n  return filename;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { isFileReadable } from '../../javascript-utils/is-type';\nimport fetchFileReadable from './fetch-file.browser';\nexport function fetchFile(url, options) {\n  return _regeneratorRuntime.async(function fetchFile$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!isFileReadable(url)) {\n            _context.next = 2;\n            break;\n          }\n\n          return _context.abrupt(\"return\", fetchFileReadable(url, options));\n\n        case 2:\n          url = resolvePath(url);\n          return _context.abrupt(\"return\", fetch(url, options));\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { fetchFile } from '../fetch/fetch-file';\nexport function getLoaderContext(context, options, previousContext) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: context.fetch || fetchFile\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}","import { assert } from '@loaders.gl/loader-utils';\nimport { toArrayBuffer as bufferToArrayBuffer } from '../node/utils/to-array-buffer.node';\nexport function toArrayBuffer(data) {\n  if (bufferToArrayBuffer) {\n    data = bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport { assert } from '@loaders.gl/loader-utils';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer || object.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== \"undefined\" && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== \"undefined\" && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfers.push(object);\n  } else if (isTransferable(object.buffer)) {\n    transfers.push(object.buffer);\n  } else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfers);\n    }\n  }\n\n  return transfers;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from './get-transfer-list';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function process(data) {\n      var _this = this;\n\n      return _regeneratorRuntime.async(function process$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                _this.worker.onmessage = function (event) {\n                  return _this.onMessage({\n                    worker: _this.worker,\n                    data: event.data,\n                    resolve: resolve,\n                    reject: reject\n                  });\n                };\n\n                _this.worker.onerror = function (error) {\n                  var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                  if (error.message) {\n                    message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                  }\n\n                  var betterError = new Error(message);\n                  console.error(error);\n                  reject(betterError);\n                };\n\n                var transferList = getTransferList(data);\n\n                _this.worker.postMessage(data, transferList);\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function process(data, jobName) {\n      var _this = this;\n\n      return _regeneratorRuntime.async(function process$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                _this.jobQueue.push({\n                  data: data,\n                  jobName: jobName,\n                  resolve: resolve,\n                  reject: reject\n                });\n\n                _this._startQueuedJob();\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_startQueuedJob\",\n    value: function _startQueuedJob() {\n      var _this2 = this;\n\n      if (!this.jobQueue.length) {\n        return;\n      }\n\n      var worker = this._getAvailableWorker();\n\n      if (!worker) {\n        return;\n      }\n\n      var job = this.jobQueue.shift();\n      this.onDebug({\n        message: 'processing',\n        worker: worker.name,\n        job: job.jobName,\n        backlog: this.jobQueue.length\n      });\n      worker.process(job.data).then(function (result) {\n        return job.resolve(result);\n      })[\"catch\"](function (error) {\n        return job.reject(error);\n      }).then(function () {\n        return _this2._onWorkerDone(worker);\n      });\n    }\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n      } else {\n        this.idleQueue.push(worker);\n\n        this._startQueuedJob();\n      }\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \"-worker-\").concat(this.count, \"-of-\").concat(this.maxConcurrency);\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function process(workerSource, workerName, data) {\n      var workerPool;\n      return _regeneratorRuntime.async(function process$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              workerPool = this._getWorkerPool(workerSource, workerName);\n              return _context.abrupt(\"return\", workerPool.process(data));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: this.onMessage,\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };","import \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { toArrayBuffer } from '../../javascript-utils/binary-utils';\nimport WorkerFarm from '../../worker-utils/worker-farm';\nimport { getTransferList } from '../../worker-utils/get-transfer-list';\nimport { parse } from '../parse';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  return workerFarm.process(workerSource, \"loaders.gl-\".concat(workerName), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(\"2.0.0\"),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_ref2) {\n  var worker, data, resolve, reject, result;\n  return _regeneratorRuntime.async(function onWorkerMessage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n          _context.t0 = data.type;\n          _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n          break;\n\n        case 4:\n          resolve(data.result);\n          return _context.abrupt(\"break\", 19);\n\n        case 6:\n          _context.prev = 6;\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(parse(data.arraybuffer, data.options, data.url));\n\n        case 9:\n          result = _context.sent;\n          worker.postMessage({\n            type: 'parse-done',\n            id: data.id,\n            result: result\n          }, getTransferList(result));\n          _context.next = 16;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t1 = _context[\"catch\"](6);\n          worker.postMessage({\n            type: 'parse-error',\n            id: data.id,\n            message: _context.t1.message\n          });\n\n        case 16:\n          return _context.abrupt(\"break\", 19);\n\n        case 17:\n          reject(data.message);\n          return _context.abrupt(\"break\", 19);\n\n        case 19:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[6, 13]]);\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.is-array\";\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nvar registeredLoaders = [];\nexport function registerLoaders(loaders) {\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!registeredLoaders.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        registeredLoaders.unshift(normalizedLoader);\n      }\n    };\n\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return registeredLoaders;\n}\nexport function _unregisterLoaders() {\n  registeredLoaders = [];\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { getRegisteredLoaders } from './register-loaders';\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nimport { isFetchResponse } from '../javascript-utils/is-type';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nvar DATA_URL_PATTERN = /^data:(.*?)(;|,)/;\nexport function selectLoader(loaders) {\n  var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n      _ref$nothrow = _ref.nothrow,\n      nothrow = _ref$nothrow === void 0 ? false : _ref$nothrow;\n\n  url = url || '';\n\n  if (loaders && !Array.isArray(loaders)) {\n    var _loader = loaders;\n    normalizeLoader(_loader);\n    return _loader;\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n  url = url.replace(/\\?.*/, '');\n  var loader = findLoaderByUrl(loaders, url);\n  loader = loader || findLoaderByContentType(loaders, data);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader) {\n    if (nothrow) {\n      return null;\n    }\n\n    var message = 'No valid loader found';\n\n    if (data) {\n      message += \" for data starting with \\\"\".concat(getFirstCharacters(data), \"\\\"\");\n    }\n\n    if (url) {\n      message += \" for \".concat(url);\n    }\n\n    throw new Error(message);\n  }\n\n  return loader;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url.match(DATA_URL_PATTERN);\n  var mimeType = match && match[1];\n\n  if (mimeType) {\n    return findLoaderByMimeType(loaders, mimeType);\n  }\n\n  match = url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  var loader = extension && findLoaderByExtension(loaders, extension);\n  return loader;\n}\n\nfunction findLoaderByMimeType(loaders, mimeType) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = loaders[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var loader = _step2.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = loaders[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var loader = _step3.value;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = loader.extensions[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var loaderExtension = _step4.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n        _iterator3[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, data) {\n  if (!data || !isFetchResponse(data) || !data.headers) {\n    return null;\n  }\n\n  var contentType = data.headers.get('content-type');\n  return findLoaderByMimeType(loaders, contentType);\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = loaders[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n        _iterator5[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testBinary(data, byteOffset, loader) {\n  var type = Array.isArray(loader.test) ? 'array' : _typeof(loader.test);\n\n  switch (type) {\n    case 'function':\n      return loader.test(data, loader);\n\n    case 'string':\n    case 'array':\n      var tests = Array.isArray(loader.test) ? loader.test : [loader.test];\n      return tests.some(function (test) {\n        var magic = getMagicString(data, byteOffset, test.length);\n        return test === magic;\n      });\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from './loader-utils/normalize-loader';\nimport { mergeOptions } from './loader-utils/merge-options';\nimport { getUrlFromData } from './loader-utils/get-data';\nimport { getArrayBufferOrStringFromData } from './loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from './loader-utils/get-loader-context';\nimport parseWithWorker, { canParseWithWorker } from './loader-utils/parse-with-worker';\nimport { selectLoader } from './select-loader';\nexport function parse(data, loaders, options, context) {\n  var url, autoUrl, candidateLoaders, loader;\n  return _regeneratorRuntime.async(function parse$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n            context = options;\n            options = loaders;\n            loaders = null;\n          }\n\n          url = '';\n\n          if (typeof context === 'string') {\n            url = context;\n            context = null;\n          }\n\n          options = options || {};\n          autoUrl = getUrlFromData(data, url);\n          candidateLoaders = getLoaders(loaders, context);\n          loader = selectLoader(candidateLoaders, autoUrl, data);\n\n          if (loader) {\n            _context.next = 9;\n            break;\n          }\n\n          return _context.abrupt(\"return\", null);\n\n        case 9:\n          options = mergeOptions(loader, options, autoUrl);\n          context = getLoaderContext({\n            url: autoUrl,\n            parse: parse,\n            loaders: candidateLoaders\n          }, options, context);\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(parseWithLoader(loader, data, options, context));\n\n        case 13:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction parseWithLoader(loader, data, options, context) {\n  return _regeneratorRuntime.async(function parseWithLoader$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          validateLoaderVersion(loader);\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(getArrayBufferOrStringFromData(data, loader));\n\n        case 3:\n          data = _context2.sent;\n\n          if (!(loader.parseTextSync && typeof data === 'string')) {\n            _context2.next = 7;\n            break;\n          }\n\n          options.dataType = 'text';\n          return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n        case 7:\n          if (!canParseWithWorker(loader, data, options, context)) {\n            _context2.next = 11;\n            break;\n          }\n\n          _context2.next = 10;\n          return _regeneratorRuntime.awrap(parseWithWorker(loader, data, options, context));\n\n        case 10:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 11:\n          if (!loader.parse) {\n            _context2.next = 15;\n            break;\n          }\n\n          _context2.next = 14;\n          return _regeneratorRuntime.awrap(loader.parse(data, options, context, loader));\n\n        case 14:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 15:\n          assert(!loader.parseSync);\n          return _context2.abrupt(\"return\", assert(false));\n\n        case 17:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { global, isBrowser } from '../utils/globals';\nimport assert from '../utils/assert';\nexport var IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nexport var HTML_IMAGE_SUPPORTED = (typeof Image === \"undefined\" ? \"undefined\" : _typeof(Image)) !== undefined;\nexport var NODE_IMAGE_SUPPORTED = Boolean(global._parseImageNode);\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'html':\n      return HTML_IMAGE_SUPPORTED;\n\n    case 'ndarray':\n      return NODE_IMAGE_SUPPORTED;\n\n    default:\n      throw new Error(\"Unknown image format \".concat(type));\n  }\n}\nexport function getSupportedImageType() {\n  if (isImageTypeSupported('ndarray')) {\n    return 'ndarray';\n  }\n\n  if (isImageTypeSupported('html')) {\n    return 'html';\n  }\n\n  if (isImageTypeSupported('imagebitmap')) {\n    return 'imagebitmap';\n  }\n\n  if (!isBrowser) {\n    throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n  }\n\n  return assert(false);\n}","import { isImageTypeSupported, getSupportedImageType } from '../parsed-image-api/image-type';\nexport default function getImageOutputFormat() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var imageOptions = options.image || {};\n  var type = imageOptions.type || 'auto';\n\n  switch (type) {\n    case 'imagebitmap':\n    case 'html':\n    case 'ndarray':\n      if (!isImageTypeSupported(type)) {\n        throw new Error(\"Requested image type \".concat(type, \" not available in current environment\"));\n      }\n\n      return type;\n\n    case 'auto':\n      return getSupportedImageType();\n\n    default:\n      throw new Error(\"Unknown image format \".concat(type));\n  }\n}","import \"core-js/modules/es6.set\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nvar BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport var mimeTypeMap = new Map([['image/png', {\n  test: isPng,\n  getSize: getPngSize\n}], ['image/jpeg', {\n  test: isJpeg,\n  getSize: getJpegSize\n}], ['image/gif', {\n  test: isGif,\n  getSize: getGifSize\n}], ['image/bmp', {\n  test: isBmp,\n  getSize: getBmpSize\n}]]);\nexport function isPng(dataView) {\n  return dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n}\n\nfunction getPngSize(dataView) {\n  return {\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nexport function isGif(dataView) {\n  return dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n}\n\nfunction getGifSize(dataView) {\n  return {\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function isBmp(dataView) {\n  return dataView.byteLength >= 2 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d;\n}\n\nfunction getBmpSize(dataView) {\n  return {\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nexport function isJpeg(dataView) {\n  return dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2, BIG_ENDIAN) === 0xff;\n}\n\nfunction getJpegSize(dataView) {\n  if (dataView.byteLength < 2 || dataView.getUint16(0, BIG_ENDIAN) !== 0xffd8) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { mimeTypeMap } from './binary-image-parsers';\nvar ERR_INVALID_MIME_TYPE = \"Invalid MIME type. Supported MIME types are: \".concat(Array.from(mimeTypeMap.keys()).join(', '));\nexport function isBinaryImage(arrayBuffer, mimeType) {\n  if (mimeType) {\n    var _getBinaryImageTypeHa = getBinaryImageTypeHandlers(mimeType),\n        test = _getBinaryImageTypeHa.test;\n\n    var dataView = toDataView(arrayBuffer);\n    return test(dataView);\n  }\n\n  return Boolean(getBinaryImageMIMEType(arrayBuffer));\n}\nexport function getBinaryImageMIMEType(arrayBuffer) {\n  var dataView = toDataView(arrayBuffer);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = mimeTypeMap.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          mimeType = _step$value[0],\n          test = _step$value[1].test;\n\n      if (test(dataView)) {\n        return mimeType;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return null;\n}\nexport function getBinaryImageSize(arrayBuffer) {\n  var mimeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  mimeType = mimeType || getBinaryImageMIMEType(arrayBuffer);\n\n  var _getBinaryImageTypeHa2 = getBinaryImageTypeHandlers(mimeType),\n      getSize = _getBinaryImageTypeHa2.getSize;\n\n  var dataView = toDataView(arrayBuffer);\n  var size = getSize(dataView);\n\n  if (!size) {\n    throw new Error(\"invalid image data for type: \".concat(mimeType));\n  }\n\n  return size;\n}\n\nfunction getBinaryImageTypeHandlers(mimeType) {\n  var handlers = mimeTypeMap.get(mimeType);\n\n  if (!handlers) {\n    throw new Error(ERR_INVALID_MIME_TYPE);\n  }\n\n  return handlers;\n}\n\nfunction toDataView(data) {\n  data = data.buffer || data;\n\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer || data);\n  }\n\n  throw new Error('toDataView');\n}","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMIMEType } from '../binary-image-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  assert(global._parseImageNode);\n  var mimeType = getBinaryImageMIMEType(arrayBuffer);\n  return global._parseImageNode(arrayBuffer, mimeType, options);\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nexport default function parseToHTMLImage(arrayBuffer, options) {\n  var mimeType, blob, URL, objectUrl;\n  return _regeneratorRuntime.async(function parseToHTMLImage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          mimeType = 'image/jpeg';\n          blob = new Blob([arrayBuffer], {\n            type: mimeType\n          });\n          URL = self.URL || self.webkitURL;\n          objectUrl = URL.createObjectURL(blob);\n          _context.prev = 4;\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(loadToHTMLImage(objectUrl, options));\n\n        case 7:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 8:\n          _context.prev = 8;\n          URL.revokeObjectURL(objectUrl);\n          return _context.finish(8);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[4,, 8, 11]]);\n}\nexport function loadToHTMLImage(url, options) {\n  var image;\n  return _regeneratorRuntime.async(function loadToHTMLImage$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          image = new Image();\n          image.src = url;\n\n          if (!(options.image && options.image.decode && image.decode)) {\n            _context2.next = 6;\n            break;\n          }\n\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(image.decode());\n\n        case 5:\n          return _context2.abrupt(\"return\", image);\n\n        case 6:\n          _context2.next = 8;\n          return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n            try {\n              image.onload = function () {\n                return resolve(image);\n              };\n\n              image.onerror = function (err) {\n                return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n              };\n            } catch (error) {\n              reject(error);\n            }\n          }));\n\n        case 8:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport default function parseToImageBitmap(arrayBuffer, options) {\n  var blob = new Blob([new Uint8Array(arrayBuffer)]);\n  var imagebitmapOptions = options && options.imagebitmap;\n  return imagebitmapOptions ? createImageBitmap(blob) : createImageBitmap(blob, imagebitmapOptions);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { loadToHTMLImage } from './parse-to-html-image';\nexport default function parseSVG(arrayBuffer, options) {\n  var textDecoder, xmlText, src;\n  return _regeneratorRuntime.async(function parseSVG$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          textDecoder = new TextDecoder();\n          xmlText = textDecoder.decode(arrayBuffer);\n          src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(loadToHTMLImage(src, options));\n\n        case 5:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport getImageOutputFormat from './get-image-output-format';\nimport parseToNodeImage from './parse-to-node-image';\nimport parseToHTMLImage from './parse-to-html-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseSVG from './parse-svg';\nexport default function parseImage(arrayBuffer, options, context) {\n  var _ref, url, format;\n\n  return _regeneratorRuntime.async(function parseImage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if ('image' in options) {\n            options = _objectSpread({}, options, {\n              image: {}\n            });\n          }\n\n          _ref = context || {}, url = _ref.url;\n\n          if (!(url && /\\.svg((\\?|#).*)?$/.test(url))) {\n            _context.next = 7;\n            break;\n          }\n\n          console.warn('@loaders.gl/images: SVG parsing needs to be fixed for 2.0');\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(parseSVG(arrayBuffer, options));\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n          format = getImageOutputFormat(options);\n          _context.t0 = format;\n          _context.next = _context.t0 === 'imagebitmap' ? 11 : _context.t0 === 'html' ? 14 : _context.t0 === 'ndarray' ? 17 : 20;\n          break;\n\n        case 11:\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(parseToImageBitmap(arrayBuffer, options));\n\n        case 13:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 14:\n          _context.next = 16;\n          return _regeneratorRuntime.awrap(parseToHTMLImage(arrayBuffer, options));\n\n        case 16:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 17:\n          _context.next = 19;\n          return _regeneratorRuntime.awrap(parseToNodeImage(arrayBuffer, options));\n\n        case 19:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 20:\n          return _context.abrupt(\"return\", assert(false));\n\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.typed.data-view\";\nimport parseImage from './lib/parsers/parse-image';\nimport { isPng, isGif, isBmp, isJpeg } from './lib/binary-image-api/binary-image-parsers';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vndmicrosofticon', 'image/svg+xml'];\nvar ImageLoader = {\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  test: function test(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    return isJpeg(dataView) || isBmp(dataView) || isGif(dataView) || isPng(dataView);\n  },\n  options: {\n    images: {\n      format: 'auto',\n      decodeHTML: true\n    }\n  }\n};\nexport default ImageLoader;","import \"core-js/modules/es6.typed.data-view\";\nexport function getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\nexport function getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import { getFirstCharacters } from '../binary-utils/get-first-characters';\nexport function parseJSON(string) {\n  try {\n    return JSON.parse(string);\n  } catch (_) {\n    throw new Error(\"Failed to parse JSON from data starting with \\\"\".concat(getFirstCharacters(string), \"\\\"\"));\n  }\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3;\n}\nexport function getZeroOffsetArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  var subArray = byteLength ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  var arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\nexport function copyArrayBuffer(targetBuffer, sourceBuffer, byteOffset) {\n  var byteLength = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : sourceBuffer.byteLength;\n  var targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  var sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\nexport function copyToArray(source, target, targetOffset) {\n  var sourceArray;\n\n  if (source instanceof ArrayBuffer) {\n    sourceArray = new Uint8Array(source);\n  } else {\n    var srcByteOffset = source.byteOffset;\n    var srcByteLength = source.byteLength;\n    sourceArray = new Uint8Array(source.buffer, srcByteOffset, srcByteLength);\n  }\n\n  target.set(sourceArray, targetOffset);\n  return targetOffset + padTo4Bytes(sourceArray.byteLength);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'assert failed: gltf');\n  }\n}","import \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.string.starts-with\";\nexport function resolveUrl(url, options) {\n  var absolute = url.startsWith('data:') || url.startsWith('http:') || url.startsWith('https:');\n\n  if (absolute) {\n    return url;\n  }\n\n  var baseUrl = options.baseUri || options.uri;\n\n  if (!baseUrl) {\n    throw new Error(\"'baseUri' must be provided to resolve relative url \".concat(url));\n  }\n\n  return baseUrl.substr(0, baseUrl.lastIndexOf('/') + 1) + url;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../utils/assert';\nexport function getTypedArrayForBufferView(json, buffers, bufferViewIndex) {\n  var bufferView = json.bufferViews[bufferViewIndex];\n  assert(bufferView);\n  var bufferIndex = bufferView.buffer;\n  var binChunk = buffers[bufferIndex];\n  assert(binChunk);\n  var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n  return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n}\nexport function getTypedArrayForImageData(json, buffers, imageIndex) {\n  var image = json.images[imageIndex];\n  var bufferViewIndex = json.bufferViews[image.bufferView];\n  return getTypedArrayForBufferView(json, buffers, bufferViewIndex);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport assert from '../utils/assert';\nvar TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nvar ARRAY_TO_COMPONENT_TYPE = new Map([[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126]]);\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  var type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  var componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  var bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  var length = accessor.count * components;\n  var byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType: ArrayType,\n    length: length,\n    byteLength: byteLength\n  };\n}","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.find\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getBinaryImageMIMEType } from '@loaders.gl/images';\nimport { padTo4Bytes, copyToArray } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength, getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils/gltf-utils';\n\nvar GLTFScenegraph = function () {\n  function GLTFScenegraph(gltf) {\n    _classCallCheck(this, GLTFScenegraph);\n\n    if (gltf instanceof GLTFScenegraph) {\n      return gltf;\n    }\n\n    if (!gltf) {\n      gltf = {\n        json: {\n          version: 2,\n          buffers: []\n        },\n        buffers: []\n      };\n    }\n\n    this.gltf = gltf;\n    assert(this.gltf.json);\n  }\n\n  _createClass(GLTFScenegraph, [{\n    key: \"getApplicationData\",\n    value: function getApplicationData(key) {\n      var data = this.json[key];\n      return data;\n    }\n  }, {\n    key: \"getExtraData\",\n    value: function getExtraData(key) {\n      var extras = this.json.extras || {};\n      return extras[key];\n    }\n  }, {\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      var isExtension = this.getUsedExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      var extensions = this.json.extensions || {};\n      return isExtension ? extensions[extensionName] || true : null;\n    }\n  }, {\n    key: \"getRequiredExtension\",\n    value: function getRequiredExtension(extensionName) {\n      var isRequired = this.getRequiredExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      return isRequired ? this.getExtension(extensionName) : null;\n    }\n  }, {\n    key: \"getRequiredExtensions\",\n    value: function getRequiredExtensions() {\n      return this.json.extensionsRequired || [];\n    }\n  }, {\n    key: \"getUsedExtensions\",\n    value: function getUsedExtensions() {\n      return this.json.extensionsUsed || [];\n    }\n  }, {\n    key: \"getObjectExtension\",\n    value: function getObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      return extensions[extensionName];\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this.getObject('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this.getObject('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this.getObject('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this.getObject('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this.getObject('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this.getObject('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this.getObject('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this.getObject('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this.getObject('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this.getObject('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this.getObject('buffers', index);\n    }\n  }, {\n    key: \"getObject\",\n    value: function getObject(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        throw new Error(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"getTypedArrayForBufferView\",\n    value: function getTypedArrayForBufferView(bufferView) {\n      bufferView = this.getBufferView(bufferView);\n      var bufferIndex = bufferView.buffer;\n      var binChunk = this.gltf.buffers[bufferIndex];\n      assert(binChunk);\n      var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n      return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"getTypedArrayForAccessor\",\n    value: function getTypedArrayForAccessor(accessor) {\n      accessor = this.getAccessor(accessor);\n      var bufferView = this.getBufferView(accessor.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n\n      var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, bufferView),\n          ArrayType = _getAccessorArrayType.ArrayType,\n          length = _getAccessorArrayType.length;\n\n      var byteOffset = bufferView.byteOffset + accessor.byteOffset;\n      return new ArrayType(arrayBuffer, byteOffset, length);\n    }\n  }, {\n    key: \"getTypedArrayForImageData\",\n    value: function getTypedArrayForImageData(image) {\n      image = this.getAccessor(image);\n      var bufferView = this.getBufferView(image.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n      var byteOffset = bufferView.byteOffset || 0;\n      return new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"addApplicationData\",\n    value: function addApplicationData(key, data) {\n      this.json[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addExtraData\",\n    value: function addExtraData(key, data) {\n      this.json.extras = this.json.extras || {};\n      this.json.extras[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addObjectExtension\",\n    value: function addObjectExtension(object, extensionName, data) {\n      assert(data);\n      object.extensions = object.extensions || {};\n      object.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"removeObjectExtension\",\n    value: function removeObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      delete extensions[extensionName];\n      return this;\n    }\n  }, {\n    key: \"addExtension\",\n    value: function addExtension(extensionName, data) {\n      assert(data);\n      this.json.extensions = this.json.extensions || {};\n      this.json.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"addRequiredExtension\",\n    value: function addRequiredExtension(extensionName, data) {\n      assert(data);\n      this.addExtension(extensionName, data);\n      this.registerRequiredExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"registerUsedExtension\",\n    value: function registerUsedExtension(extensionName) {\n      this.json.extensionsUsed = this.json.extensionsUsed || [];\n\n      if (!this.json.extensionsUsed.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsUsed.push(extensionName);\n      }\n    }\n  }, {\n    key: \"registerRequiredExtension\",\n    value: function registerRequiredExtension(extensionName) {\n      this.registerUsedExtension(extensionName);\n      this.json.extensionsRequired = this.json.extensionsRequired || [];\n\n      if (!this.json.extensionsRequired.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsRequired.push(extensionName);\n      }\n    }\n  }, {\n    key: \"removeExtension\",\n    value: function removeExtension(extensionName) {\n      if (this.json.extensionsRequired) {\n        this._removeStringFromArray(this.json.extensionsRequired, extensionName);\n      }\n\n      if (this.json.extensionsUsed) {\n        this._removeStringFromArray(this.json.extensionsUsed, extensionName);\n      }\n\n      if (this.json.extensions) {\n        delete this.json.extensions[extensionName];\n      }\n    }\n  }, {\n    key: \"setObjectExtension\",\n    value: function setObjectExtension(object, extensionName, data) {\n      var extensions = object.extensions || {};\n      extensions[extensionName] = data;\n    }\n  }, {\n    key: \"addMesh\",\n    value: function addMesh(attributes, indices) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n\n      var accessors = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessors,\n          indices: indices,\n          mode: mode\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addPointCloud\",\n    value: function addPointCloud(attributes) {\n      var accessorIndices = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessorIndices,\n          mode: 0\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(imageData, mimeType) {\n      mimeType = mimeType || getBinaryImageMIMEType(imageData);\n      var bufferViewIndex = this.addBufferView(imageData);\n      var glTFImage = {\n        bufferView: bufferViewIndex,\n        mimeType: mimeType\n      };\n      this.json.images = this.json.images || [];\n      this.json.images.push(glTFImage);\n      return this.json.images.length - 1;\n    }\n  }, {\n    key: \"addBufferView\",\n    value: function addBufferView(buffer) {\n      var byteLength = buffer.byteLength;\n      assert(Number.isFinite(byteLength));\n      this.sourceBuffers = this.sourceBuffers || [];\n      this.sourceBuffers.push(buffer);\n      var glTFBufferView = {\n        buffer: 0,\n        byteOffset: this.byteLength,\n        byteLength: byteLength\n      };\n      this.byteLength += padTo4Bytes(byteLength);\n      this.json.bufferViews = this.json.bufferViews || [];\n      this.json.bufferViews.push(glTFBufferView);\n      return this.json.bufferViews.length - 1;\n    }\n  }, {\n    key: \"addAccessor\",\n    value: function addAccessor(bufferViewIndex, accessor) {\n      var glTFAccessor = {\n        bufferView: bufferViewIndex,\n        type: getAccessorTypeFromSize(accessor.size),\n        componentType: accessor.componentType,\n        count: accessor.count\n      };\n      this.json.accessors = this.json.accessors || [];\n      this.json.accessors.push(glTFAccessor);\n      return this.json.accessors.length - 1;\n    }\n  }, {\n    key: \"addBinaryBuffer\",\n    value: function addBinaryBuffer(sourceBuffer) {\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        size: 3\n      };\n      var bufferViewIndex = this.addBufferView(sourceBuffer);\n      var accessorDefaults = {\n        size: accessor.size,\n        componentType: getComponentTypeFromArray(sourceBuffer),\n        count: Math.round(sourceBuffer.length / accessor.size)\n      };\n      return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n    }\n  }, {\n    key: \"createBinaryChunk\",\n    value: function createBinaryChunk() {\n      if (this.arrayBuffer) {\n        return;\n      }\n\n      var totalByteLength = this.byteLength;\n      var arrayBuffer = new ArrayBuffer(totalByteLength);\n      var targetArray = new Uint8Array(arrayBuffer);\n      var dstByteOffset = 0;\n\n      for (var i = 0; i < this.sourceBuffers.length; i++) {\n        var sourceBuffer = this.sourceBuffers[i];\n        dstByteOffset = copyToArray(sourceBuffer, targetArray, dstByteOffset);\n      }\n\n      this.json.buffers[0].byteLength = totalByteLength;\n      this.arrayBuffer = arrayBuffer;\n      this.sourceBuffers = [];\n    }\n  }, {\n    key: \"_removeStringFromArray\",\n    value: function _removeStringFromArray(array, string) {\n      var found = true;\n\n      while (found) {\n        var index = array.indexOf(string);\n\n        if (index > -1) {\n          array.splice(index, 1);\n        } else {\n          found = false;\n        }\n      }\n    }\n  }, {\n    key: \"json\",\n    get: function get() {\n      return this.gltf.json;\n    }\n  }]);\n\n  return GLTFScenegraph;\n}();\n\nexport { GLTFScenegraph as default };","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport { getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils';\nexport function getGLTFAccessors(attributes) {\n  var accessors = {};\n\n  for (var name in attributes) {\n    var attribute = attributes[name];\n\n    if (name !== 'indices') {\n      var glTFAccessor = getGLTFAccessor(attribute);\n      accessors[name] = glTFAccessor;\n    }\n  }\n\n  return accessors;\n}\nexport function getGLTFAccessor(attribute, gltfAttributeName) {\n  var _getAccessorData = getAccessorData(attribute, gltfAttributeName),\n      buffer = _getAccessorData.buffer,\n      size = _getAccessorData.size,\n      count = _getAccessorData.count;\n\n  var glTFAccessor = {\n    value: buffer,\n    size: size,\n    bufferView: null,\n    byteOffset: 0,\n    count: count,\n    type: getAccessorTypeFromSize(size),\n    componentType: getComponentTypeFromArray(buffer)\n  };\n  return glTFAccessor;\n}\nexport function getGLTFAttribute(data, gltfAttributeName) {\n  return data.attributes[data.glTFAttributeMap[gltfAttributeName]];\n}\n\nfunction getAccessorData(attribute, attributeName) {\n  var buffer = attribute;\n  var size = 1;\n  var count = 0;\n\n  if (attribute && attribute.value) {\n    buffer = attribute.value;\n    size = attribute.size || 1;\n  }\n\n  if (buffer) {\n    if (!ArrayBuffer.isView(buffer)) {\n      buffer = toTypedArray(buffer, Float32Array);\n    }\n\n    count = buffer.length / size;\n  }\n\n  return {\n    buffer: buffer,\n    size: size,\n    count: count\n  };\n}\n\nfunction toTypedArray(array, ArrayType) {\n  var convertTypedArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!array) {\n    return null;\n  }\n\n  if (Array.isArray(array)) {\n    return new ArrayType(array);\n  }\n\n  if (convertTypedArrays && !(array instanceof ArrayType)) {\n    return new ArrayType(array);\n  }\n\n  return array;\n}","import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(meshPrimitiveIterator);\n\nimport { getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_DRACO_MESH_COMPRESSION } from '../gltf-constants';\nimport { getGLTFAccessors, getGLTFAccessor } from '../gltf-utils/gltf-attribute-utils';\nexport function decode(gltfData, options, context) {\n  var scenegraph, promises, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, primitive;\n\n  return _regeneratorRuntime.async(function decode$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (options.gltf.decompressMeshes) {\n            _context.next = 2;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 2:\n          scenegraph = new GLTFScenegraph(gltfData);\n          promises = [];\n          _iteratorNormalCompletion = true;\n          _didIteratorError = false;\n          _iteratorError = undefined;\n          _context.prev = 7;\n\n          for (_iterator = meshPrimitiveIterator(scenegraph)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            primitive = _step.value;\n\n            if (scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION)) {\n              promises.push(decompressPrimitive(primitive, scenegraph, options, context));\n            }\n          }\n\n          _context.next = 15;\n          break;\n\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](7);\n          _didIteratorError = true;\n          _iteratorError = _context.t0;\n\n        case 15:\n          _context.prev = 15;\n          _context.prev = 16;\n\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n\n        case 18:\n          _context.prev = 18;\n\n          if (!_didIteratorError) {\n            _context.next = 21;\n            break;\n          }\n\n          throw _iteratorError;\n\n        case 21:\n          return _context.finish(18);\n\n        case 22:\n          return _context.finish(15);\n\n        case 23:\n          _context.next = 25;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 25:\n          scenegraph.removeExtension(KHR_DRACO_MESH_COMPRESSION);\n\n        case 26:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[7, 11, 15, 23], [16,, 18, 22]]);\n}\nexport function encode(gltfData) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scenegraph = new GLTFScenegraph(gltfData);\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = (scenegraph.json.meshes || [])[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var mesh = _step2.value;\n      compressMesh(mesh, options);\n      scenegraph.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction decompressPrimitive(primitive, scenegraph, options, context) {\n  var compressedPrimitive, buffer, bufferCopy, parse, decodedData;\n  return _regeneratorRuntime.async(function decompressPrimitive$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          compressedPrimitive = scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION);\n          buffer = scenegraph.getTypedArrayForBufferView(compressedPrimitive.bufferView);\n          bufferCopy = getZeroOffsetArrayBuffer(buffer.buffer, buffer.byteOffset);\n          parse = context.parse;\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(parse(bufferCopy, [], options, context));\n\n        case 6:\n          decodedData = _context2.sent;\n          primitive.attributes = getGLTFAccessors(decodedData.attributes);\n\n          if (decodedData.indices) {\n            primitive.indices = getGLTFAccessor(decodedData.indices);\n          }\n\n          checkPrimitive(primitive);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction compressMesh(attributes, indices) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n  var options = arguments.length > 3 ? arguments[3] : undefined;\n  var context = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (!options.DracoWriter || !options.DracoLoader) {\n    throw new Error('DracoWriter/DracoLoader not available');\n  }\n\n  var compressedData = options.DracoWriter.encodeSync({\n    attributes: attributes\n  });\n  var parseSync = context.parseSync;\n  var decodedData = parseSync({\n    attributes: attributes\n  });\n\n  var fauxAccessors = options._addFauxAttributes(decodedData.attributes);\n\n  var bufferViewIndex = options.addBufferView(compressedData);\n  var glTFMesh = {\n    primitives: [{\n      attributes: fauxAccessors,\n      mode: mode,\n      extensions: _defineProperty({}, KHR_DRACO_MESH_COMPRESSION, {\n        bufferView: bufferViewIndex,\n        attributes: fauxAccessors\n      })\n    }]\n  };\n  return glTFMesh;\n}\n\nfunction checkPrimitive(primitive) {\n  if (!primitive.attributes && Object.keys(primitive.attributes).length > 0) {\n    throw new Error('Empty glTF primitive detected: Draco decompression failure?');\n  }\n}\n\nfunction meshPrimitiveIterator(scenegraph) {\n  var _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, mesh, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, primitive;\n\n  return _regeneratorRuntime.wrap(function meshPrimitiveIterator$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _iteratorNormalCompletion3 = true;\n          _didIteratorError3 = false;\n          _iteratorError3 = undefined;\n          _context3.prev = 3;\n          _iterator3 = (scenegraph.json.meshes || [])[Symbol.iterator]();\n\n        case 5:\n          if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n            _context3.next = 36;\n            break;\n          }\n\n          mesh = _step3.value;\n          _iteratorNormalCompletion4 = true;\n          _didIteratorError4 = false;\n          _iteratorError4 = undefined;\n          _context3.prev = 10;\n          _iterator4 = mesh.primitives[Symbol.iterator]();\n\n        case 12:\n          if (_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done) {\n            _context3.next = 19;\n            break;\n          }\n\n          primitive = _step4.value;\n          _context3.next = 16;\n          return primitive;\n\n        case 16:\n          _iteratorNormalCompletion4 = true;\n          _context3.next = 12;\n          break;\n\n        case 19:\n          _context3.next = 25;\n          break;\n\n        case 21:\n          _context3.prev = 21;\n          _context3.t0 = _context3[\"catch\"](10);\n          _didIteratorError4 = true;\n          _iteratorError4 = _context3.t0;\n\n        case 25:\n          _context3.prev = 25;\n          _context3.prev = 26;\n\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n\n        case 28:\n          _context3.prev = 28;\n\n          if (!_didIteratorError4) {\n            _context3.next = 31;\n            break;\n          }\n\n          throw _iteratorError4;\n\n        case 31:\n          return _context3.finish(28);\n\n        case 32:\n          return _context3.finish(25);\n\n        case 33:\n          _iteratorNormalCompletion3 = true;\n          _context3.next = 5;\n          break;\n\n        case 36:\n          _context3.next = 42;\n          break;\n\n        case 38:\n          _context3.prev = 38;\n          _context3.t1 = _context3[\"catch\"](3);\n          _didIteratorError3 = true;\n          _iteratorError3 = _context3.t1;\n\n        case 42:\n          _context3.prev = 42;\n          _context3.prev = 43;\n\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n\n        case 45:\n          _context3.prev = 45;\n\n          if (!_didIteratorError3) {\n            _context3.next = 48;\n            break;\n          }\n\n          throw _iteratorError3;\n\n        case 48:\n          return _context3.finish(45);\n\n        case 49:\n          return _context3.finish(42);\n\n        case 50:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked, null, [[3, 38, 42, 50], [10, 21, 25, 33], [26,, 28, 32], [43,, 45, 49]]);\n}","export var KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nexport var UBER_POINT_CLOUD_EXTENSION = 'UBER_draco_point_cloud_compression';\nexport var KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nexport var KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport function getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\nexport function getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\nexport function getGLEnumFromSamplerParameter(parameter) {\n  var GL_TEXTURE_MAG_FILTER = 0x2800;\n  var GL_TEXTURE_MIN_FILTER = 0x2801;\n  var GL_TEXTURE_WRAP_S = 0x2802;\n  var GL_TEXTURE_WRAP_T = 0x2803;\n  var PARAMETER_MAP = {\n    magFilter: GL_TEXTURE_MAG_FILTER,\n    minFilter: GL_TEXTURE_MIN_FILTER,\n    wrapS: GL_TEXTURE_WRAP_S,\n    wrapT: GL_TEXTURE_WRAP_T\n  };\n  return PARAMETER_MAP[parameter];\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport assert from '../utils/assert';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_LIGHTS_PUNCTUAL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_LIGHTS_PUNCTUAL);\n\n  if (extension) {\n    gltfScenegraph.json.lights = extension.lights;\n    gltfScenegraph.removeExtension(KHR_LIGHTS_PUNCTUAL);\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.nodes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var nodeExtension = gltfScenegraph.getObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n\n      if (nodeExtension) {\n        node.light = nodeExtension.light;\n      }\n\n      gltfScenegraph.removeObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (json.lights) {\n    var extension = gltfScenegraph.addExtensions(KHR_LIGHTS_PUNCTUAL);\n    assert(!extension.lights);\n    extension.lights = json.lights;\n    delete json.lights;\n  }\n\n  if (gltfScenegraph.json.lights) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = gltfScenegraph.json.lights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var light = _step2.value;\n        var node = light.node;\n        gltfScenegraph.addObjectExtension(node, KHR_LIGHTS_PUNCTUAL, light);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    delete gltfScenegraph.json.lights;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_MATERIALS_UNLIT } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.materials || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var material = _step.value;\n      var extension = material.extensions && material.extensions.KHR_materials_unlit;\n\n      if (extension) {\n        material.unlit = true;\n      }\n\n      gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (gltfScenegraph.materials) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = json.materials[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var material = _step2.value;\n\n        if (material.unlit) {\n          delete material.unlit;\n          gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT);\n          gltfScenegraph.addExtensions(KHR_MATERIALS_UNLIT);\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as KHR_draco_mesh_compression from './KHR_draco_mesh_compression';\nimport * as KHR_lights_punctual from './KHR_lights_punctual';\nimport * as KHR_materials_unlit from './KHR_materials_unlit';\nexport var EXTENSIONS = {\n  KHR_draco_mesh_compression: KHR_draco_mesh_compression,\n  KHR_lights_punctual: KHR_lights_punctual,\n  KHR_materials_unlit: KHR_materials_unlit\n};\nexport function decodeExtensions(gltf) {\n  var options,\n      context,\n      extensionName,\n      excludes,\n      exclude,\n      extension,\n      _args = arguments;\n  return _regeneratorRuntime.async(function decodeExtensions$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          context = _args.length > 2 ? _args[2] : undefined;\n          options.gltf = options.gltf || {};\n          _context.t0 = _regeneratorRuntime.keys(EXTENSIONS);\n\n        case 4:\n          if ((_context.t1 = _context.t0()).done) {\n            _context.next = 14;\n            break;\n          }\n\n          extensionName = _context.t1.value;\n          excludes = options.gltf.excludeExtensions || {};\n          exclude = extensionName in excludes && !excludes[extensionName];\n\n          if (exclude) {\n            _context.next = 12;\n            break;\n          }\n\n          extension = EXTENSIONS[extensionName];\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(extension.decode(gltf, options, context));\n\n        case 12:\n          _context.next = 4;\n          break;\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport { padTo4Bytes, assert } from '@loaders.gl/loader-utils';\nvar MAGIC_glTF = 0x676c5446;\nvar GLB_FILE_HEADER_SIZE = 12;\nvar GLB_CHUNK_HEADER_SIZE = 8;\nvar GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nvar GLB_CHUNK_TYPE_BIN = 0x004e4942;\nvar GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED = 0;\nvar GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED = 1;\nvar LE = true;\n\nfunction getMagicString(dataView) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n\nexport function isGLB(arrayBuffer) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var dataView = new DataView(arrayBuffer);\n  var _options$magic = options.magic,\n      magic = _options$magic === void 0 ? MAGIC_glTF : _options$magic;\n  var magic1 = dataView.getUint32(byteOffset, false);\n  return magic1 === magic || magic1 === MAGIC_glTF;\n}\nexport default function parseGLBSync(glb, arrayBuffer) {\n  var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var dataView = new DataView(arrayBuffer);\n  glb.type = getMagicString(dataView, byteOffset + 0);\n  glb.version = dataView.getUint32(byteOffset + 4, LE);\n  var byteLength = dataView.getUint32(byteOffset + 8, LE);\n  glb.header = {\n    byteOffset: byteOffset,\n    byteLength: byteLength\n  };\n  assert(glb.version === 2, \"Invalid GLB version \".concat(glb.version, \". Only supports v2.\"));\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  glb.json = {};\n  glb.binChunks = [];\n  parseGLBChunksSync(glb, dataView, byteOffset + GLB_FILE_HEADER_SIZE, options);\n  return byteOffset + glb.header.byteLength;\n}\n\nfunction parseGLBChunksSync(glb, dataView, byteOffset, options) {\n  while (byteOffset + 8 <= glb.header.byteLength) {\n    var chunkLength = dataView.getUint32(byteOffset + 0, LE);\n    var chunkFormat = dataView.getUint32(byteOffset + 4, LE);\n    byteOffset += GLB_CHUNK_HEADER_SIZE;\n\n    switch (chunkFormat) {\n      case GLB_CHUNK_TYPE_JSON:\n        parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_BIN:\n        parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    byteOffset += padTo4Bytes(chunkLength);\n  }\n\n  return byteOffset;\n}\n\nfunction parseJSONChunk(glb, dataView, byteOffset, chunkLength, options) {\n  var jsonChunk = new Uint8Array(dataView.buffer, byteOffset, chunkLength);\n  var textDecoder = new TextDecoder('utf8');\n  var jsonText = textDecoder.decode(jsonChunk);\n  glb.json = JSON.parse(jsonText);\n}\n\nfunction parseBINChunk(glb, dataView, byteOffset, chunkLength, options) {\n  glb.header.hasBinChunk = true;\n  glb.binChunks.push({\n    byteOffset: byteOffset,\n    byteLength: chunkLength,\n    arrayBuffer: dataView.buffer\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _DEFAULT_SAMPLER;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength } from './gltf-utils/gltf-utils';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nvar GL_SAMPLER = {\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  REPEAT: 0x2901,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_LINEAR: 0x2702\n};\nvar SAMPLER_PARAMETER_GLTF_TO_GL = {\n  magFilter: GL_SAMPLER.TEXTURE_MAG_FILTER,\n  minFilter: GL_SAMPLER.TEXTURE_MIN_FILTER,\n  wrapS: GL_SAMPLER.TEXTURE_WRAP_S,\n  wrapT: GL_SAMPLER.TEXTURE_WRAP_T\n};\nvar DEFAULT_SAMPLER = (_DEFAULT_SAMPLER = {}, _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MAG_FILTER, GL_SAMPLER.LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MIN_FILTER, GL_SAMPLER.NEAREST_MIPMAP_LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_S, GL_SAMPLER.REPEAT), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_, GL_SAMPLER.REPEAT), _DEFAULT_SAMPLER);\n\nfunction getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\n\nfunction getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\n\nvar GLTFPostProcessor = function () {\n  function GLTFPostProcessor() {\n    _classCallCheck(this, GLTFPostProcessor);\n  }\n\n  _createClass(GLTFPostProcessor, [{\n    key: \"postProcess\",\n    value: function postProcess(gltf) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var json = gltf.json,\n          _gltf$buffers = gltf.buffers,\n          buffers = _gltf$buffers === void 0 ? [] : _gltf$buffers,\n          _gltf$images = gltf.images,\n          images = _gltf$images === void 0 ? [] : _gltf$images,\n          _gltf$baseUri = gltf.baseUri,\n          baseUri = _gltf$baseUri === void 0 ? '' : _gltf$baseUri;\n      assert(json);\n      this.baseUri = baseUri;\n      this.json = json;\n      this.buffers = buffers;\n      this.images = images;\n\n      this._resolveTree(this.json, options);\n\n      return this.json;\n    }\n  }, {\n    key: \"_resolveTree\",\n    value: function _resolveTree(json) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (json.bufferViews) {\n        json.bufferViews = json.bufferViews.map(function (bufView, i) {\n          return _this._resolveBufferView(bufView, i);\n        });\n      }\n\n      if (json.images) {\n        json.images = json.images.map(function (image, i) {\n          return _this._resolveImage(image, i, options);\n        });\n      }\n\n      if (json.samplers) {\n        json.samplers = json.samplers.map(function (sampler, i) {\n          return _this._resolveSampler(sampler, i);\n        });\n      }\n\n      if (json.textures) {\n        json.textures = json.textures.map(function (texture, i) {\n          return _this._resolveTexture(texture, i);\n        });\n      }\n\n      if (json.accessors) {\n        json.accessors = json.accessors.map(function (accessor, i) {\n          return _this._resolveAccessor(accessor, i, options);\n        });\n      }\n\n      if (json.materials) {\n        json.materials = json.materials.map(function (material, i) {\n          return _this._resolveMaterial(material, i);\n        });\n      }\n\n      if (json.meshes) {\n        json.meshes = json.meshes.map(function (mesh, i) {\n          return _this._resolveMesh(mesh, i);\n        });\n      }\n\n      if (json.nodes) {\n        json.nodes = json.nodes.map(function (node, i) {\n          return _this._resolveNode(node, i);\n        });\n      }\n\n      if (json.skins) {\n        json.skins = json.skins.map(function (skin, i) {\n          return _this._resolveSkin(skin, i);\n        });\n      }\n\n      if (json.scenes) {\n        json.scenes = json.scenes.map(function (scene, i) {\n          return _this._resolveScene(scene, i);\n        });\n      }\n\n      if (json.scene !== undefined) {\n        json.scene = json.scenes[this.json.scene];\n      }\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this._get('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this._get('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this._get('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this._get('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this._get('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this._get('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this._get('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this._get('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this._get('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this._get('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this._get('buffers', index);\n    }\n  }, {\n    key: \"_get\",\n    value: function _get(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        console.warn(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"_resolveScene\",\n    value: function _resolveScene(scene, index) {\n      var _this2 = this;\n\n      scene.id = scene.id || \"scene-\".concat(index);\n      scene.nodes = (scene.nodes || []).map(function (node) {\n        return _this2.getNode(node);\n      });\n      return scene;\n    }\n  }, {\n    key: \"_resolveNode\",\n    value: function _resolveNode(node, index) {\n      var _this3 = this;\n\n      node.id = node.id || \"node-\".concat(index);\n\n      if (node.children) {\n        node.children = node.children.map(function (child) {\n          return _this3.getNode(child);\n        });\n      }\n\n      if (node.mesh !== undefined) {\n        node.mesh = this.getMesh(node.mesh);\n      }\n\n      if (node.camera !== undefined) {\n        node.camera = this.getCamera(node.camera);\n      }\n\n      if (node.skin !== undefined) {\n        node.skin = this.getSkin(node.skin);\n      }\n\n      return node;\n    }\n  }, {\n    key: \"_resolveSkin\",\n    value: function _resolveSkin(skin, index) {\n      skin.id = skin.id || \"skin-\".concat(index);\n      skin.inverseBindMatrices = this.getAccessor(skin.inverseBindMatrices);\n      return skin;\n    }\n  }, {\n    key: \"_resolveMesh\",\n    value: function _resolveMesh(mesh, index) {\n      var _this4 = this;\n\n      mesh.id = mesh.id || \"mesh-\".concat(index);\n\n      if (mesh.primitives) {\n        mesh.primitives = mesh.primitives.map(function (primitive) {\n          primitive = _objectSpread({}, primitive);\n          var attributes = primitive.attributes;\n          primitive.attributes = {};\n\n          for (var attribute in attributes) {\n            primitive.attributes[attribute] = _this4.getAccessor(attributes[attribute]);\n          }\n\n          if (primitive.indices !== undefined) {\n            primitive.indices = _this4.getAccessor(primitive.indices);\n          }\n\n          if (primitive.material !== undefined) {\n            primitive.material = _this4.getMaterial(primitive.material);\n          }\n\n          return primitive;\n        });\n      }\n\n      return mesh;\n    }\n  }, {\n    key: \"_resolveMaterial\",\n    value: function _resolveMaterial(material, index) {\n      material.id = material.id || \"material-\".concat(index);\n\n      if (material.normalTexture) {\n        material.normalTexture = _objectSpread({}, material.normalTexture);\n        material.normalTexture.texture = this.getTexture(material.normalTexture.index);\n      }\n\n      if (material.occlusionTexture) {\n        material.occlustionTexture = _objectSpread({}, material.occlustionTexture);\n        material.occlusionTexture.texture = this.getTexture(material.occlusionTexture.index);\n      }\n\n      if (material.emissiveTexture) {\n        material.emmisiveTexture = _objectSpread({}, material.emmisiveTexture);\n        material.emissiveTexture.texture = this.getTexture(material.emissiveTexture.index);\n      }\n\n      if (material.pbrMetallicRoughness) {\n        material.pbrMetallicRoughness = _objectSpread({}, material.pbrMetallicRoughness);\n        var mr = material.pbrMetallicRoughness;\n\n        if (mr.baseColorTexture) {\n          mr.baseColorTexture = _objectSpread({}, mr.baseColorTexture);\n          mr.baseColorTexture.texture = this.getTexture(mr.baseColorTexture.index);\n        }\n\n        if (mr.metallicRoughnessTexture) {\n          mr.metallicRoughnessTexture = _objectSpread({}, mr.metallicRoughnessTexture);\n          mr.metallicRoughnessTexture.texture = this.getTexture(mr.metallicRoughnessTexture.index);\n        }\n      }\n\n      return material;\n    }\n  }, {\n    key: \"_resolveAccessor\",\n    value: function _resolveAccessor(accessor, index) {\n      accessor.id = accessor.id || \"accessor-\".concat(index);\n\n      if (accessor.bufferView !== undefined) {\n        accessor.bufferView = this.getBufferView(accessor.bufferView);\n      }\n\n      accessor.bytesPerComponent = getBytesFromComponentType(accessor.componentType);\n      accessor.components = getSizeFromAccessorType(accessor.type);\n      accessor.bytesPerElement = accessor.bytesPerComponent * accessor.components;\n\n      if (accessor.bufferView) {\n        var buffer = accessor.bufferView.buffer;\n\n        var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, accessor.bufferView),\n            ArrayType = _getAccessorArrayType.ArrayType,\n            length = _getAccessorArrayType.length;\n\n        var byteOffset = (accessor.bufferView.byteOffset || 0) + buffer.byteOffset;\n        accessor.value = new ArrayType(buffer.arrayBuffer, byteOffset, length);\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"_resolveTexture\",\n    value: function _resolveTexture(texture, index) {\n      texture.id = texture.id || \"texture-\".concat(index);\n      texture.sampler = 'sampler' in texture ? this.getSampler(texture.sampler) : DEFAULT_SAMPLER;\n      texture.source = this.getImage(texture.source);\n      return texture;\n    }\n  }, {\n    key: \"_resolveSampler\",\n    value: function _resolveSampler(sampler, index) {\n      sampler.id = sampler.id || \"sampler-\".concat(index);\n      sampler.parameters = {};\n\n      for (var key in sampler) {\n        var glEnum = this._enumSamplerParameter(key);\n\n        if (glEnum !== undefined) {\n          sampler.parameters[glEnum] = sampler[key];\n        }\n      }\n\n      return sampler;\n    }\n  }, {\n    key: \"_enumSamplerParameter\",\n    value: function _enumSamplerParameter(key) {\n      return SAMPLER_PARAMETER_GLTF_TO_GL[key];\n    }\n  }, {\n    key: \"_resolveImage\",\n    value: function _resolveImage(image, index) {\n      image.id = image.id || \"image-\".concat(index);\n\n      if (image.bufferView !== undefined) {\n        image.bufferView = this.getBufferView(image.bufferView);\n      }\n\n      var preloadedImage = this.images[index];\n\n      if (preloadedImage) {\n        image.image = preloadedImage;\n      }\n\n      return image;\n    }\n  }, {\n    key: \"_resolveBufferView\",\n    value: function _resolveBufferView(bufferView, index) {\n      bufferView.id = bufferView.id || \"bufferView-\".concat(index);\n      var bufferIndex = bufferView.buffer;\n      bufferView.buffer = this.buffers[bufferIndex];\n      var arrayBuffer = this.buffers[bufferIndex].arrayBuffer;\n      var byteOffset = this.buffers[bufferIndex].byteOffset || 0;\n\n      if ('byteOffset' in bufferView) {\n        byteOffset += bufferView.byteOffset;\n      }\n\n      bufferView.data = new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n      return bufferView;\n    }\n  }, {\n    key: \"_resolveCamera\",\n    value: function _resolveCamera(camera, index) {\n      camera.id = camera.id || \"camera-\".concat(index);\n\n      if (camera.perspective) {}\n\n      if (camera.orthographic) {}\n\n      return camera;\n    }\n  }]);\n\n  return GLTFPostProcessor;\n}();\n\nexport default function postProcessGLTF(gltf, options) {\n  return new GLTFPostProcessor().postProcess(gltf, options);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { ImageLoader } from '@loaders.gl/images';\nimport { parseJSON, getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { resolveUrl } from './gltf-utils/resolve-url';\nimport { getTypedArrayForBufferView } from './gltf-utils/get-typed-array';\nimport { decodeExtensions } from './extensions/gltf-extensions';\nimport parseGLBSync, { isGLB } from './parse-glb';\nimport postProcessGLTF from './post-process-gltf';\nexport function isGLTF(arrayBuffer) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var dataView = new DataView(arrayBuffer);\n  var byteOffset = 0;\n  return isGLB(dataView, byteOffset);\n}\nexport function parseGLTF(gltf, arrayBufferOrString) {\n  var byteOffset,\n      options,\n      context,\n      promises,\n      _promise,\n      promise,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function parseGLTF$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          byteOffset = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n          options = _args.length > 3 ? _args[3] : undefined;\n          context = _args.length > 4 ? _args[4] : undefined;\n          parseGLTFContainerSync(gltf, arrayBufferOrString, byteOffset, options);\n          promises = [];\n\n          if (options.gltf.loadImages) {\n            _promise = loadImages(gltf, options, context);\n            promises.push(_promise);\n          }\n\n          if (!options.gltf.loadBuffers) {\n            _context.next = 9;\n            break;\n          }\n\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(loadBuffers(gltf, options, context));\n\n        case 9:\n          promise = decodeExtensions(gltf, options, context);\n          promises.push(promise);\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 13:\n          return _context.abrupt(\"return\", options.gltf.postProcess ? postProcessGLTF(gltf, options) : gltf);\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction parseGLTFContainerSync(gltf, data, byteOffset, options) {\n  if (options.uri) {\n    gltf.baseUri = options.uri;\n  }\n\n  if (data instanceof ArrayBuffer && !isGLB(data, byteOffset, options)) {\n    var textDecoder = new TextDecoder();\n    data = textDecoder.decode(data);\n  }\n\n  if (typeof data === 'string') {\n    gltf.json = parseJSON(data);\n  } else if (data instanceof ArrayBuffer) {\n    var glb = {};\n    byteOffset = parseGLBSync(glb, data, byteOffset, options);\n    assert(glb.type === 'glTF', \"Invalid GLB magic string \".concat(glb.type));\n    gltf._glb = glb;\n    gltf.json = glb.json;\n  } else {\n    assert(false, \"GLTF: must be ArrayBuffer or string\");\n  }\n\n  var buffers = gltf.json.buffers || [];\n  gltf.buffers = new Array(buffers.length).fill(null);\n\n  if (gltf._glb && gltf._glb.header.hasBinChunk) {\n    var binChunks = gltf._glb.binChunks;\n    gltf.buffers[0] = {\n      arrayBuffer: binChunks[0].arrayBuffer,\n      byteOffset: binChunks[0].byteOffset,\n      byteLength: binChunks[0].byteLength\n    };\n  }\n\n  var images = gltf.json.images || [];\n  gltf.images = new Array(images.length).fill({});\n}\n\nfunction loadBuffers(gltf, options, context) {\n  var i, buffer, fetch, uri, response, arrayBuffer;\n  return _regeneratorRuntime.async(function loadBuffers$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          i = 0;\n\n        case 1:\n          if (!(i < gltf.json.buffers.length)) {\n            _context2.next = 18;\n            break;\n          }\n\n          buffer = gltf.json.buffers[i];\n\n          if (!buffer.uri) {\n            _context2.next = 15;\n            break;\n          }\n\n          fetch = context.fetch;\n          assert(fetch);\n          uri = resolveUrl(buffer.uri, options);\n          _context2.next = 9;\n          return _regeneratorRuntime.awrap(fetch(uri));\n\n        case 9:\n          response = _context2.sent;\n          _context2.next = 12;\n          return _regeneratorRuntime.awrap(response.arrayBuffer());\n\n        case 12:\n          arrayBuffer = _context2.sent;\n          gltf.buffers[i] = {\n            arrayBuffer: arrayBuffer,\n            byteOffset: 0,\n            byteLength: arrayBuffer.byteLength\n          };\n          delete buffer.uri;\n\n        case 15:\n          ++i;\n          _context2.next = 1;\n          break;\n\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction loadImages(gltf, options, context) {\n  var images, promises, i;\n  return _regeneratorRuntime.async(function loadImages$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          images = gltf.json.images || [];\n          promises = [];\n\n          for (i = 0; i < images.length; ++i) {\n            promises.push(loadImage(gltf, images[i], i, options, context));\n          }\n\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 5:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 6:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nfunction loadImage(gltf, image, i, options, context) {\n  var fetch, parse, arrayBuffer, uri, response, array, parsedImage;\n  return _regeneratorRuntime.async(function loadImage$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          fetch = context.fetch, parse = context.parse;\n\n          if (!image.uri) {\n            _context4.next = 9;\n            break;\n          }\n\n          uri = resolveUrl(image.uri, options);\n          _context4.next = 5;\n          return _regeneratorRuntime.awrap(fetch(uri));\n\n        case 5:\n          response = _context4.sent;\n          _context4.next = 8;\n          return _regeneratorRuntime.awrap(response.arrayBuffer());\n\n        case 8:\n          arrayBuffer = _context4.sent;\n\n        case 9:\n          if (Number.isFinite(image.bufferView)) {\n            array = getTypedArrayForBufferView(gltf.json, gltf.buffers, image.bufferView);\n            arrayBuffer = getZeroOffsetArrayBuffer(array.buffer, array.byteOffset, array.byteLength);\n          }\n\n          assert(arrayBuffer, 'glTF image has no data');\n          _context4.next = 13;\n          return _regeneratorRuntime.awrap(parse(arrayBuffer, ImageLoader, {}, context));\n\n        case 13:\n          parsedImage = _context4.sent;\n          gltf.images[i] = parsedImage;\n\n        case 15:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { parseGLTF } from './lib/parse-gltf';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : 'latest';\nvar GLTFLoader = {\n  id: 'gltf',\n  name: 'glTF',\n  version: VERSION,\n  extensions: ['gltf', 'glb'],\n  mimeType: 'model/gltf+json',\n  text: true,\n  binary: true,\n  test: 'glTF',\n  parse: parse,\n  options: {\n    gltf: {\n      loadBuffers: true,\n      loadImages: true,\n      decompressMeshes: true,\n      postProcess: true\n    },\n    uri: '',\n    log: console\n  }\n};\nexport default GLTFLoader;\nexport function parse(arrayBuffer) {\n  var options,\n      context,\n      _options,\n      _options$byteOffset,\n      byteOffset,\n      gltf,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function parse$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          context = _args.length > 2 ? _args[2] : undefined;\n          options = _objectSpread({}, GLTFLoader.options, {}, options);\n          options.gltf = _objectSpread({}, GLTFLoader.options.gltf, {}, options.gltf);\n          addDeprecatedGLTFOptions(options);\n          _options = options, _options$byteOffset = _options.byteOffset, byteOffset = _options$byteOffset === void 0 ? 0 : _options$byteOffset;\n          gltf = {};\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(parseGLTF(gltf, arrayBuffer, byteOffset, options, context));\n\n        case 9:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction addDeprecatedGLTFOptions(options) {\n  if ('fetchImages' in options) {\n    options.gltf.loadImages = options.fetchImages;\n  }\n\n  if ('createImages' in options) {\n    options.gltf.loadImages = options.createImages;\n  }\n\n  if ('fetchLinkedResources' in options) {\n    options.gltf.fetchBuffers = options.fetchLinkedResources;\n  }\n\n  if ('decompress' in options) {\n    options.gltf.decompressMeshes = options.decompress;\n  }\n\n  if ('decompress' in options.gltf) {\n    options.gltf.decompressMeshes = options.gltf.decompress;\n  }\n\n  if ('postProcess' in options) {\n    options.gltf.postProcess = options.postProcess;\n  }\n}","import \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { global, isBrowser, isWorker } from '../env-utils/globals';\nimport { requireFromFile, requireFromString } from './require-utils.node';\nimport assert from '../env-utils/assert';\nvar LATEST = 'beta';\nvar VERSION = typeof \"2.0.4\" !== 'undefined' ? \"2.0.4\" : LATEST;\nvar loadLibraryPromises = {};\nexport function loadLibrary(_x) {\n  return _loadLibrary.apply(this, arguments);\n}\n\nfunction _loadLibrary() {\n  _loadLibrary = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(libraryUrl) {\n    var moduleName,\n        options,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            moduleName = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n            if (moduleName) {\n              libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n            }\n\n            loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n            _context.next = 6;\n            return loadLibraryPromises[libraryUrl];\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadLibrary.apply(this, arguments);\n}\n\nexport function getLibraryUrl(library, moduleName, options) {\n  var modules = options.modules || {};\n\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\n\nfunction loadLibraryFromFile(_x2) {\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction _loadLibraryFromFile() {\n  _loadLibraryFromFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(libraryUrl) {\n    var _response, response, scriptSource;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!libraryUrl.endsWith('wasm')) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 3;\n            return fetch(libraryUrl);\n\n          case 3:\n            _response = _context2.sent;\n            _context2.next = 6;\n            return _response.arrayBuffer();\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n            if (isBrowser) {\n              _context2.next = 9;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", requireFromFile(libraryUrl));\n\n          case 9:\n            if (!isWorker) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", importScripts(libraryUrl));\n\n          case 11:\n            _context2.next = 13;\n            return fetch(libraryUrl);\n\n          case 13:\n            response = _context2.sent;\n            _context2.next = 16;\n            return response.text();\n\n          case 16:\n            scriptSource = _context2.sent;\n            return _context2.abrupt(\"return\", loadLibraryFromString(scriptSource, libraryUrl));\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n\n  var script = document.createElement('script');\n  script.id = id;\n\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n\n  document.body.appendChild(script);\n  return null;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadLibrary, global } from '@loaders.gl/loader-utils';\nvar loadDecoderPromise;\nvar loadEncoderPromise;\nexport function loadDracoDecoderModule(_x) {\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoDecoderModule() {\n  _loadDracoDecoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              draco: modules.draco3d.createDecoderModule()\n            });\n\n          case 3:\n            loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n            _context.next = 6;\n            return loadDecoderPromise;\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nexport function loadDracoEncoderModule(_x2) {\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoEncoderModule() {\n  _loadDracoEncoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              draco: modules.draco3d.createEncoderModule()\n            });\n\n          case 3:\n            loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n            _context2.next = 6;\n            return loadEncoderPromise;\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction loadDracoDecoder(_x3) {\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction _loadDracoDecoder() {\n  _loadDracoDecoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(options) {\n    var DracoDecoderModule, wasmBinary, _ref, _ref2;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.t0 = options.draco && options.draco.decoderType;\n            _context3.next = _context3.t0 === 'js' ? 3 : _context3.t0 === 'wasm' ? 7 : 7;\n            break;\n\n          case 3:\n            _context3.next = 5;\n            return loadLibrary('draco_decoder.js', 'draco', options);\n\n          case 5:\n            DracoDecoderModule = _context3.sent;\n            return _context3.abrupt(\"break\", 21);\n\n          case 7:\n            _context3.t1 = Promise;\n            _context3.next = 10;\n            return loadLibrary('draco_wasm_wrapper.js', 'draco', options);\n\n          case 10:\n            _context3.t2 = _context3.sent;\n            _context3.next = 13;\n            return loadLibrary('draco_decoder.wasm', 'draco', options);\n\n          case 13:\n            _context3.t3 = _context3.sent;\n            _context3.t4 = [_context3.t2, _context3.t3];\n            _context3.next = 17;\n            return _context3.t1.all.call(_context3.t1, _context3.t4);\n\n          case 17:\n            _ref = _context3.sent;\n            _ref2 = _slicedToArray(_ref, 2);\n            DracoDecoderModule = _ref2[0];\n            wasmBinary = _ref2[1];\n\n          case 21:\n            DracoDecoderModule = DracoDecoderModule || global.DracoDecoderModule;\n            _context3.next = 24;\n            return initializeDracoDecoder(DracoDecoderModule, wasmBinary);\n\n          case 24:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 25:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  var options = {};\n\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise(function (resolve) {\n    DracoDecoderModule(_objectSpread({}, options, {\n      onModuleLoaded: function onModuleLoaded(draco) {\n        return resolve({\n          draco: draco\n        });\n      }\n    }));\n  });\n}\n\nfunction loadDracoEncoder(_x4) {\n  return _loadDracoEncoder.apply(this, arguments);\n}\n\nfunction _loadDracoEncoder() {\n  _loadDracoEncoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(options) {\n    var DracoEncoderModule;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return loadLibrary('draco_encoder.js', 'draco', options);\n\n          case 2:\n            DracoEncoderModule = _context4.sent;\n            DracoEncoderModule = DracoEncoderModule || global.DracoEncoderModule;\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              DracoEncoderModule({\n                onModuleLoaded: function onModuleLoaded(draco) {\n                  return resolve({\n                    draco: draco\n                  });\n                }\n              });\n            }));\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadDracoEncoder.apply(this, arguments);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\nvar DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\nvar DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\n\nvar DracoParser = function () {\n  function DracoParser(draco) {\n    _classCallCheck(this, DracoParser);\n\n    this.draco = draco;\n  }\n\n  _createClass(DracoParser, [{\n    key: \"destroy\",\n    value: function destroy() {}\n  }, {\n    key: \"destroyGeometry\",\n    value: function destroyGeometry(dracoGeometry) {\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry.dracoGeometry);\n      }\n    }\n  }, {\n    key: \"parseSync\",\n    value: function parseSync(arrayBuffer) {\n      var buffer = new this.draco.DecoderBuffer();\n      buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n      var decoder = new this.draco.Decoder();\n      var data = {};\n      var dracoStatus;\n      var dracoGeometry;\n      var header;\n\n      try {\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n\n        switch (geometryType) {\n          case this.draco.TRIANGULAR_MESH:\n            dracoGeometry = new this.draco.Mesh();\n            dracoStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.TRIANGULAR_MESH,\n              faceCount: dracoGeometry.num_faces(),\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          case this.draco.POINT_CLOUD:\n            dracoGeometry = new this.draco.PointCloud();\n            dracoStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.POINT_CLOUD,\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          default:\n            throw new Error('Unknown DRACO geometry type.');\n        }\n\n        if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n          var message = \"DRACO decompression failed: \".concat(dracoStatus.error_msg());\n\n          if (dracoGeometry) {\n            this.draco.destroy(dracoGeometry);\n          }\n\n          throw new Error(message);\n        }\n\n        data.header = {\n          vertexCount: header.vertexCount\n        };\n        data.loaderData = {\n          header: header\n        };\n        this.extractDRACOGeometry(decoder, dracoGeometry, geometryType, data);\n      } finally {\n        this.draco.destroy(decoder);\n        this.draco.destroy(buffer);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"extractDRACOGeometry\",\n    value: function extractDRACOGeometry(decoder, dracoGeometry, geometryType, geometry) {\n      var attributes = this.getAttributes(decoder, dracoGeometry);\n      var positionAttribute = attributes.POSITION;\n\n      if (!positionAttribute) {\n        throw new Error('DRACO decompressor: No position attribute found.');\n      }\n\n      this.getPositionAttributeMetadata(positionAttribute);\n\n      if (geometryType === this.draco.TRIANGULAR_MESH) {\n        attributes.indices = this.drawMode === 'TRIANGLE_STRIP' ? this.getMeshStripIndices(decoder, dracoGeometry) : this.getMeshFaceIndices(decoder, dracoGeometry);\n        geometry.mode = this.drawMode === 'TRIANGLE_STRIP' ? 5 : 4;\n      } else {\n        geometry.mode = 0;\n      }\n\n      if (attributes.indices) {\n        geometry.indices = {\n          value: attributes.indices,\n          size: 1\n        };\n        delete attributes.indices;\n      }\n\n      geometry.attributes = attributes;\n      return geometry;\n    }\n  }, {\n    key: \"getPositionAttributeMetadata\",\n    value: function getPositionAttributeMetadata(positionAttribute) {\n      this.metadata = this.metadata || {};\n      this.metadata.attributes = this.metadata.attributes || {};\n      var posTransform = new this.draco.AttributeQuantizationTransform();\n\n      if (posTransform.InitFromAttribute(positionAttribute)) {\n        this.metadata.attributes.position.isQuantized = true;\n        this.metadata.attributes.position.maxRange = posTransform.range();\n        this.metadata.attributes.position.numQuantizationBits = posTransform.quantization_bits();\n        this.metadata.attributes.position.minValues = new Float32Array(3);\n\n        for (var i = 0; i < 3; ++i) {\n          this.metadata.attributes.position.minValues[i] = posTransform.min_value(i);\n        }\n      }\n\n      this.draco.destroy(posTransform);\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(decoder, dracoGeometry) {\n      var attributes = {};\n      var numPoints = dracoGeometry.num_points();\n\n      for (var attributeName in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n        var attributeType = this.draco[attributeName];\n        var attributeId = decoder.GetAttributeId(dracoGeometry, attributeType);\n\n        if (attributeId !== -1) {\n          var dracoAttribute = decoder.GetAttribute(dracoGeometry, attributeId);\n\n          var _this$getAttributeTyp = this.getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName),\n              typedArray = _this$getAttributeTyp.typedArray;\n\n          attributes[DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[attributeName]] = {\n            value: typedArray,\n            size: typedArray.length / numPoints\n          };\n        }\n      }\n\n      return attributes;\n    }\n  }, {\n    key: \"getMeshFaceIndices\",\n    value: function getMeshFaceIndices(decoder, dracoGeometry) {\n      var numFaces = dracoGeometry.num_faces();\n      var numIndices = numFaces * 3;\n      var indices = new Uint32Array(numIndices);\n      var dracoArray = new this.draco.DracoInt32Array();\n\n      for (var i = 0; i < numFaces; ++i) {\n        decoder.GetFaceFromMesh(dracoGeometry, i, dracoArray);\n        var index = i * 3;\n        indices[index] = dracoArray.GetValue(0);\n        indices[index + 1] = dracoArray.GetValue(1);\n        indices[index + 2] = dracoArray.GetValue(2);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getMeshStripIndices\",\n    value: function getMeshStripIndices(decoder, dracoGeometry) {\n      var dracoArray = new this.draco.DracoInt32Array();\n      decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      var indices = new Uint32Array(dracoArray.size());\n\n      for (var i = 0; i < dracoArray.size(); ++i) {\n        indices[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getAttributeTypedArray\",\n    value: function getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName) {\n      if (dracoAttribute.ptr === 0) {\n        var message = \"DRACO decode bad attribute \".concat(attributeName);\n        throw new Error(message);\n      }\n\n      var attributeType = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[dracoAttribute.data_type()];\n      var numComponents = dracoAttribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var dracoArray;\n      var typedArray;\n\n      switch (attributeType) {\n        case Float32Array:\n          dracoArray = new this.draco.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Float32Array(numValues);\n          break;\n\n        case Int8Array:\n          dracoArray = new this.draco.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int8Array(numValues);\n          break;\n\n        case Int16Array:\n          dracoArray = new this.draco.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int16Array(numValues);\n          break;\n\n        case Int32Array:\n          dracoArray = new this.draco.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int32Array(numValues);\n          break;\n\n        case Uint8Array:\n          dracoArray = new this.draco.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint8Array(numValues);\n          break;\n\n        case Uint16Array:\n          dracoArray = new this.draco.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint16Array(numValues);\n          break;\n\n        case Uint32Array:\n          dracoArray = new this.draco.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint32Array(numValues);\n          break;\n\n        default:\n          var errorMsg = 'DRACO decoder: unexpected attribute type.';\n          throw new Error(errorMsg);\n      }\n\n      for (var i = 0; i < numValues; i++) {\n        typedArray[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return {\n        typedArray: typedArray,\n        components: numComponents\n      };\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(arrayBuffer, options) {\n      return this.parseSync(arrayBuffer, options);\n    }\n  }]);\n\n  return DracoParser;\n}();\n\nexport { DracoParser as default };","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadDracoDecoderModule } from './lib/draco-module-loader';\nimport DracoParser from './lib/draco-parser';\nvar VERSION = typeof \"2.0.4\" !== 'undefined' ? \"2.0.4\" : 'latest';\nexport var DracoWorkerLoader = {\n  id: 'draco',\n  name: 'Draco',\n  version: VERSION,\n  extensions: ['drc'],\n  mimeType: 'application/octet-stream',\n  binary: true,\n  test: 'DRACO',\n  options: {\n    draco: {\n      decoderType: (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) === 'object' ? 'wasm' : 'js',\n      libraryPath: \"libs/\",\n      workerUrl: \"https://unpkg.com/@loaders.gl/draco@\".concat(VERSION, \"/dist/draco-loader.worker.js\"),\n      localWorkerUrl: \"modules/draco/dist/draco-loader.worker.dev.js\"\n    }\n  }\n};\nexport var DracoLoader = _objectSpread({}, DracoWorkerLoader, {\n  parse: parse\n});\n\nfunction parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context, loader) {\n    var _ref, draco, dracoParser;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return loadDracoDecoderModule(options);\n\n          case 2:\n            _ref = _context.sent;\n            draco = _ref.draco;\n            dracoParser = new DracoParser(draco);\n            _context.prev = 5;\n            return _context.abrupt(\"return\", dracoParser.parseSync(arrayBuffer, options));\n\n          case 7:\n            _context.prev = 7;\n            dracoParser.destroy();\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5,, 7, 10]]);\n  }));\n  return _parse.apply(this, arguments);\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Headers = function () {\n  function Headers(headers) {\n    _classCallCheck(this, Headers);\n\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function (value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function (header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function (name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  _createClass(Headers, [{\n    key: \"append\",\n    value: function append(name, value) {\n      name = normalizeName(name);\n      value = normalizeValue(value);\n      var oldValue = this.map[name];\n      this.map[name] = oldValue ? \"\".concat(oldValue, \", \").concat(value) : value;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      delete this.map[normalizeName(name)];\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      name = normalizeName(name);\n      return this.has(name) ? this.map[name] : null;\n    }\n  }, {\n    key: \"has\",\n    value: function has(name) {\n      return this.map.hasOwnProperty(normalizeName(name));\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.map[normalizeName(name)] = normalizeValue(value);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback, thisArg) {\n      for (var name in this.map) {\n        if (this.map.hasOwnProperty(name)) {\n          callback.call(thisArg, this.map[name], name, this);\n        }\n      }\n    }\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push(name);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      var items = [];\n      this.forEach(function (value) {\n        items.push(value);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"entries\",\n    value: function entries() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push([name, value]);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: Symbol.iterator,\n    value: _regeneratorRuntime.mark(function value() {\n      return _regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.delegateYield(this.entries(), \"t0\", 1);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this);\n    })\n  }]);\n\n  return Headers;\n}();\n\nexport { Headers as default };\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name);\n  }\n\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name');\n  }\n\n  return name.toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value);\n  }\n\n  return value;\n}\n\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function next() {\n      var value = items.shift();\n      return {\n        done: value === undefined,\n        value: value\n      };\n    }\n  };\n\n  iterator[Symbol.iterator] = function () {\n    return iterator;\n  };\n\n  return iterator;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport fs from 'fs';\nimport Headers from './headers.node';\nimport { readFile, createReadStream } from './read-file.node';\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nvar NodeFetchResponse = function () {\n  function NodeFetchResponse(url, options) {\n    _classCallCheck(this, NodeFetchResponse);\n\n    this._url = url;\n    this._ok = true;\n    this._status = 200;\n    this.options = options;\n    this.bodyUsed = false;\n    this._headers = null;\n  }\n\n  _createClass(NodeFetchResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.bodyUsed = true;\n                _context.next = 3;\n                return readFile(this.url, this.options);\n\n              case 3:\n                data = _context.sent;\n                return _context.abrupt(\"return\", data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var arrayBuffer, textDecoder;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.arrayBuffer();\n\n              case 2:\n                arrayBuffer = _context2.sent;\n                textDecoder = new TextDecoder();\n                return _context2.abrupt(\"return\", textDecoder.decode(arrayBuffer));\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getHeaders\",\n    value: function _getHeaders() {\n      var headers = {};\n\n      if (this.httpResponse) {\n        var httpHeaders = this.httpResponse.getHeaders();\n\n        for (var name in httpHeaders) {\n          var header = headers[name];\n          headers[name] = String(header);\n        }\n      } else {\n        var contentLength = this._getContentLength();\n\n        if (Number.isFinite(contentLength)) {\n          headers['Content-Length'] = contentLength;\n        }\n      }\n\n      return new Headers(headers);\n    }\n  }, {\n    key: \"_getContentLength\",\n    value: function _getContentLength() {\n      if (isRequestURL(this.url)) {\n        return null;\n      } else if (isDataURL(this.url)) {\n        return this.url.length - 'data:'.length;\n      }\n\n      var stats = fs.statSync(this.url);\n      return stats.size;\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return this._ok;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this._status;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._url;\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      this._headers = this._headers || this._getHeaders();\n      return this._headers;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      var url = this.url,\n          options = this.options;\n      this.bodyUsed = true;\n      return createReadStream(url, options);\n    }\n  }]);\n\n  return NodeFetchResponse;\n}();\n\nexport { NodeFetchResponse as default };","import NodeFetchResponse from './response.node';\nexport default function fetchNode(url, options) {\n  return new NodeFetchResponse(url, options);\n}","import { isBrowser, global } from './utils/globals';\nimport { TextDecoder, TextEncoder } from './text-encoding/encoding';\nimport * as base64 from './text-encoding/btoa.node';\nimport HeadersNode from './fetch-node/headers.node';\nimport ResponseNode from './fetch-node/response.node';\nimport fetchNode from './fetch-node/fetch.node';\nimport { encodeImageNode } from './images-node/encode-image.node';\nimport { parseImageNode } from './images-node/parse-image.node';\n\nif (!('TextEncoder' in global) && TextEncoder) {\n  global['TextEncoder'] = TextEncoder;\n}\n\nif (!('TextDecoder' in global) && TextDecoder) {\n  global['TextDecoder'] = TextDecoder;\n}\n\nif (!isBrowser && !('atob' in global) && base64.atob) {\n  global['atob'] = base64.atob;\n}\n\nif (!isBrowser && !('btoa' in global) && base64.btoa) {\n  global['btoa'] = base64.btoa;\n}\n\nif (!isBrowser && !('Headers' in global) && HeadersNode) {\n  global['Headers'] = HeadersNode;\n}\n\nif (!isBrowser && !('Response' in global) && ResponseNode) {\n  global['Response'] = ResponseNode;\n}\n\nif (!isBrowser && !('fetch' in global) && fetchNode) {\n  global['fetch'] = fetchNode;\n}\n\nif (!isBrowser && !('_encodeImageNode' in global) && encodeImageNode) {\n  global['_encodeImageNode'] = encodeImageNode;\n}\n\nif (!isBrowser && !('_parseImageNode' in global) && parseImageNode) {\n  global['_parseImageNode'] = parseImageNode;\n}","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '@luma.gl/webgl';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import {Matrix4} from 'math.gl';\nimport {log} from '@luma.gl/webgl';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class GroupNode extends ScenegraphNode {\n  constructor(props = {}) {\n    props = Array.isArray(props) ? {children: props} : props;\n    const {children = []} = props;\n    log.assert(\n      children.every(child => child instanceof ScenegraphNode),\n      'every child must an instance of ScenegraphNode'\n    );\n    super(props);\n    this.children = children;\n  }\n\n  // Unpacks arrays and nested arrays of children\n  add(...children) {\n    for (const child of children) {\n      if (Array.isArray(child)) {\n        this.add(...child);\n      } else {\n        this.children.push(child);\n      }\n    }\n    return this;\n  }\n\n  remove(child) {\n    const children = this.children;\n    const indexOf = children.indexOf(child);\n    if (indexOf > -1) {\n      children.splice(indexOf, 1);\n    }\n    return this;\n  }\n\n  removeAll() {\n    this.children = [];\n    return this;\n  }\n\n  delete() {\n    this.children.forEach(child => child.delete());\n    this.removeAll();\n    super.delete();\n  }\n\n  traverse(visitor, {worldMatrix = new Matrix4()} = {}) {\n    const modelMatrix = new Matrix4(worldMatrix).multiplyRight(this.matrix);\n\n    for (const child of this.children) {\n      if (child instanceof GroupNode) {\n        child.traverse(visitor, {worldMatrix: modelMatrix});\n      } else {\n        visitor(child, {worldMatrix: modelMatrix});\n      }\n    }\n  }\n}\n","import {assert, log} from '@luma.gl/webgl';\nimport {Matrix4, Quaternion} from 'math.gl';\n\n// TODO: import from loaders.gl?\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\n//\n\nfunction accessorToJsArray(accessor) {\n  if (!accessor._animation) {\n    const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n    const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n    const length = components * accessor.count;\n    const {buffer, byteOffset} = accessor.bufferView.data;\n\n    const array = new ArrayType(buffer, byteOffset + (accessor.byteOffset || 0), length);\n\n    if (components === 1) {\n      accessor._animation = Array.from(array);\n    } else {\n      // Slice array\n      const slicedArray = [];\n      for (let i = 0; i < array.length; i += components) {\n        slicedArray.push(Array.from(array.slice(i, i + components)));\n      }\n      accessor._animation = slicedArray;\n    }\n  }\n\n  return accessor._animation;\n}\n\n// TODO: share with GLTFInstantiator\nconst helperMatrix = new Matrix4();\nfunction applyTranslationRotationScale(gltfNode, node) {\n  node.matrix.identity();\n\n  if (gltfNode.translation) {\n    node.matrix.translate(gltfNode.translation);\n  }\n\n  if (gltfNode.rotation) {\n    const rotationMatrix = helperMatrix.fromQuaternion(gltfNode.rotation);\n    node.matrix.multiplyRight(rotationMatrix);\n  }\n\n  if (gltfNode.scale) {\n    node.matrix.scale(gltfNode.scale);\n  }\n}\n\nconst quaternion = new Quaternion();\nfunction linearInterpolate(target, path, start, stop, ratio) {\n  if (path === 'rotation') {\n    // SLERP when path is rotation\n    quaternion.slerp({start, target: stop, ratio});\n    for (let i = 0; i < quaternion.length; i++) {\n      target[path][i] = quaternion[i];\n    }\n  } else {\n    // regular interpolation\n    for (let i = 0; i < start.length; i++) {\n      target[path][i] = ratio * stop[i] + (1 - ratio) * start[i];\n    }\n  }\n}\n\nfunction cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio: t}) {\n  // TODO: Quaternion might need normalization\n  for (let i = 0; i < target[path].length; i++) {\n    const m0 = outTangent0[i] * tDiff;\n    const m1 = inTangent1[i] * tDiff;\n    target[path][i] =\n      (2 * Math.pow(t, 3) - 3 * Math.pow(t, 2) + 1) * p0[i] +\n      (Math.pow(t, 3) - 2 * Math.pow(t, 2) + t) * m0 +\n      (-2 * Math.pow(t, 3) + 3 * Math.pow(t, 2)) * p1[i] +\n      (Math.pow(t, 3) - Math.pow(t, 2)) * m1;\n  }\n}\n\nfunction stepInterpolate(target, path, value) {\n  for (let i = 0; i < value.length; i++) {\n    target[path][i] = value[i];\n  }\n}\n\nfunction interpolate(time, {input, interpolation, output}, target, path) {\n  const maxTime = input[input.length - 1];\n  const animationTime = time % maxTime;\n\n  const nextIndex = input.findIndex(t => t >= animationTime);\n  const previousIndex = Math.max(0, nextIndex - 1);\n\n  if (!Array.isArray(target[path])) {\n    switch (path) {\n      case 'translation':\n        target[path] = [0, 0, 0];\n        break;\n\n      case 'rotation':\n        target[path] = [0, 0, 0, 1];\n        break;\n\n      case 'scale':\n        target[path] = [1, 1, 1];\n        break;\n\n      default:\n        log.warn(`Bad animation path ${path}`)();\n    }\n  }\n\n  assert(target[path].length === output[previousIndex].length);\n  const previousTime = input[previousIndex];\n  const nextTime = input[nextIndex];\n\n  switch (interpolation) {\n    case 'STEP':\n      stepInterpolate(target, path, output[previousIndex]);\n      break;\n\n    case 'LINEAR':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        linearInterpolate(target, path, output[previousIndex], output[nextIndex], ratio);\n      }\n      break;\n\n    case 'CUBICSPLINE':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        const tDiff = nextTime - previousTime;\n\n        const p0 = output[3 * previousIndex + 1];\n        const outTangent0 = output[3 * previousIndex + 2];\n        const inTangent1 = output[3 * nextIndex + 0];\n        const p1 = output[3 * nextIndex + 1];\n\n        cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio});\n      }\n      break;\n\n    default:\n      log.warn(`Interpolation ${interpolation} not supported`)();\n      break;\n  }\n}\n\nclass GLTFAnimation {\n  constructor(props) {\n    this.startTime = 0;\n    this.playing = true;\n    this.speed = 1;\n\n    Object.assign(this, props);\n  }\n\n  animate(timeMs) {\n    if (!this.playing) {\n      return;\n    }\n\n    const absTime = timeMs / 1000;\n    const time = (absTime - this.startTime) * this.speed;\n\n    this.channels.forEach(({sampler, target, path}) => {\n      interpolate(time, sampler, target, path);\n      applyTranslationRotationScale(target, target._node);\n    });\n  }\n}\n\nexport default class GLTFAnimator {\n  constructor(gltf) {\n    this.animations = gltf.animations.map((animation, index) => {\n      const name = animation.name || `Animation-${index}`;\n      const samplers = animation.samplers.map(({input, interpolation = 'LINEAR', output}) => ({\n        input: accessorToJsArray(gltf.accessors[input]),\n        interpolation,\n        output: accessorToJsArray(gltf.accessors[output])\n      }));\n      const channels = animation.channels.map(({sampler, target}) => ({\n        sampler: samplers[sampler],\n        target: gltf.nodes[target.node],\n        path: target.path\n      }));\n      return new GLTFAnimation({name, channels});\n    });\n  }\n\n  // TODO(Tarek): This should be removed? (deck.gl is using this)\n  animate(time) {\n    this.setTime(time);\n  }\n\n  setTime(time) {\n    this.animations.forEach(animation => animation.animate(time));\n  }\n\n  getAnimations() {\n    return this.animations;\n  }\n}\n","import lights from '../lights/lights';\n\nimport vs from './pbr-vertex.glsl';\nimport fs from './pbr-fragment.glsl';\n\nexport default {\n  name: 'pbr',\n  vs,\n  fs,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  dependencies: [lights]\n};\n","export default `\\\nuniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else // HAS_TANGENTS != 1\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n`;\n","// This fragment shader defines a reference implementation for Physically Based Shading of\n// a microfacet surface material defined by a glTF model.\n//\n// Attribution:\n// MIT license, Copyright (c) 2016-2017 Mohamad Moneimne and Contributors\n\nexport default `\\\n#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n// WebGL 1.0 does not support non-constant in for loops\n// This provides an easy way to handle these cases\n// and still take advantage of WebGL 2.0\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n\n// debugging flags used for shader output of intermediate PBR variables\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n  float NdotL;                  // cos angle between normal and light direction\n  float NdotV;                  // cos angle between normal and view direction\n  float NdotH;                  // cos angle between normal and half vector\n  float LdotH;                  // cos angle between light direction and half vector\n  float VdotH;                  // cos angle between view direction and half vector\n  float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n  float metalness;              // metallic value at the surface\n  vec3 reflectance0;            // full reflectance color (normal incidence angle)\n  vec3 reflectance90;           // reflectance color at grazing angle\n  float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n  vec3 diffuseColor;            // color contribution from diffuse lighting\n  vec3 specularColor;           // color contribution from specular lighting\n  vec3 n;                       // normal at surface point\n  vec3 v;                       // vector from surface point to camera\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else //SRGB_FAST_APPROXIMATION\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif //SRGB_FAST_APPROXIMATION\n  return vec4(linOut,srgbIn.w);;\n#else //MANUAL_SRGB\n  return srgbIn;\n#endif //MANUAL_SRGB\n}\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\nvec3 getNormal()\n{\n  // Retrieve the tangent space matrix\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else // HAS_TANGENTS\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  // The tbn matrix is linearly interpolated, so we need to re-normalize\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0; // resolution of 512x512\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  // retrieve a scale and bias to F0. See [1], Figure 3\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n  // For presentation, this allows us to disable IBL terms\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across\n// the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface\n// for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes\n// from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);             // Vector from surface point to light\n  vec3 h = normalize(l+v);                        // Half vector between both l and v\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  // Calculate the shading terms for the microfacet specular shading model\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n\n  // Calculation of analytical lighting contribution\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n  // Metallic and Roughness material properties are packed together\n  // In glTF, these factors can be specified by fixed scalar values\n  // or from a metallic-roughness map\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n  // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n  // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n  // Roughness is authored as perceptual roughness; as is convention,\n  // convert to material roughness by squaring the perceptual roughness [2].\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n  // The albedo may be defined from a base texture or a flat color\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n  // Compute reflectance.\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n  // For typical incident reflectance range (between 4% to 100%) set the grazing\n  // reflectance to 100% for typical fresnel effect.\n  // For very low reflectance range on highly diffuse objects (below 4%),\n  // incrementally reduce grazing reflecance to 0%.\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();                          // normal at surface point\n  vec3 v = normalize(u_Camera - pbr_vPosition);  // Vector from surface point to camera\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0, // NdotL\n    NdotV,\n    0.0, // NdotH\n    0.0, // LdotH\n    0.0, // VdotH\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  // Apply ambient light\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n\n  // Apply directional light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n\n  // Apply point light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n\n  // Calculate lighting contribution from image based lighting source (IBL)\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n  // Apply optional PBR terms for additional (optional) shading\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n  // This section uses mix to override final color for reference app visualization\n  // of various parameters in the lighting equation.\n#ifdef PBR_DEBUG\n  // TODO: Figure out how to debug multiple lights\n\n  // color = mix(color, F, u_ScaleFGDSpec.x);\n  // color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n  // color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n  // color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n  // color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n`;\n","import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","import {Texture2D, hasFeature, FEATURES, log} from '@luma.gl/webgl';\n\nexport default class GLTFMaterialParser {\n  constructor(\n    gl,\n    {attributes, material, pbrDebug, imageBasedLightingEnvironment, lights, useTangents}\n  ) {\n    this.gl = gl;\n\n    this.defines = {\n      // TODO: Use EXT_sRGB if available (Standard in WebGL 2.0)\n      MANUAL_SRGB: 1,\n      SRGB_FAST_APPROXIMATION: 1\n    };\n\n    if (hasFeature(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n      this.defines.USE_TEX_LOD = 1;\n    }\n\n    this.uniforms = {\n      // TODO: find better values?\n      u_Camera: [0, 0, 0], // Model should override\n\n      u_MetallicRoughnessValues: [1, 1] // Default is 1 and 1\n    };\n\n    this.parameters = {};\n    this.generatedTextures = [];\n\n    if (imageBasedLightingEnvironment) {\n      this.uniforms.u_DiffuseEnvSampler = imageBasedLightingEnvironment.getDiffuseEnvSampler();\n      this.uniforms.u_SpecularEnvSampler = imageBasedLightingEnvironment.getSpecularEnvSampler();\n      this.uniforms.u_brdfLUT = imageBasedLightingEnvironment.getBrdfTexture();\n      this.uniforms.u_ScaleIBLAmbient = [1, 1];\n    }\n\n    if (pbrDebug) {\n      // Override final color for reference app visualization\n      // of various parameters in the lighting equation.\n      this.uniforms.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n      this.uniforms.u_ScaleFGDSpec = [0, 0, 0, 0];\n    }\n\n    this.defineIfPresent(attributes.NORMAL, 'HAS_NORMALS');\n    this.defineIfPresent(attributes.TANGENT && useTangents, 'HAS_TANGENTS');\n    this.defineIfPresent(attributes.TEXCOORD_0, 'HAS_UV');\n\n    this.defineIfPresent(imageBasedLightingEnvironment, 'USE_IBL');\n    this.defineIfPresent(lights, 'USE_LIGHTS');\n    this.defineIfPresent(pbrDebug, 'PBR_DEBUG');\n\n    if (material) {\n      this.parseMaterial(material);\n    }\n  }\n\n  defineIfPresent(value, name) {\n    if (value) {\n      this.defines[name] = 1;\n    }\n  }\n\n  parseTexture(gltfTexture, name, define = null) {\n    const parameters =\n      (gltfTexture.texture &&\n        gltfTexture.texture.sampler &&\n        gltfTexture.texture.sampler.parameters) ||\n      {};\n\n    const texture = new Texture2D(this.gl, {\n      id: gltfTexture.name || gltfTexture.id,\n      parameters,\n      pixelStore: {\n        [this.gl.UNPACK_FLIP_Y_WEBGL]: false\n      },\n      // Texture2D accepts a promise that returns an image as data (Async Textures)\n      data: gltfTexture.texture.source.image\n    });\n    this.uniforms[name] = texture;\n    this.defineIfPresent(define, define);\n    this.generatedTextures.push(texture);\n  }\n\n  parsePbrMetallicRoughness(pbrMetallicRoughness) {\n    if (pbrMetallicRoughness.baseColorTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.baseColorTexture,\n        'u_BaseColorSampler',\n        'HAS_BASECOLORMAP'\n      );\n    }\n    this.uniforms.u_BaseColorFactor = pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1];\n\n    if (pbrMetallicRoughness.metallicRoughnessTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.metallicRoughnessTexture,\n        'u_MetallicRoughnessSampler',\n        'HAS_METALROUGHNESSMAP'\n      );\n    }\n    const {metallicFactor = 1, roughnessFactor = 1} = pbrMetallicRoughness;\n    this.uniforms.u_MetallicRoughnessValues = [metallicFactor, roughnessFactor];\n  }\n\n  parseMaterial(material) {\n    if (material.pbrMetallicRoughness) {\n      this.parsePbrMetallicRoughness(material.pbrMetallicRoughness);\n    }\n    if (material.normalTexture) {\n      this.parseTexture(material.normalTexture, 'u_NormalSampler', 'HAS_NORMALMAP');\n\n      const {scale = 1} = material.normalTexture;\n      this.uniforms.u_NormalScale = scale;\n    }\n    if (material.occlusionTexture) {\n      this.parseTexture(material.occlusionTexture, 'u_OcclusionSampler', 'HAS_OCCLUSIONMAP');\n\n      const {strength = 1} = material.occlusionTexture;\n      this.uniforms.u_OcclusionStrength = strength;\n    }\n    if (material.emissiveTexture) {\n      this.parseTexture(material.emissiveTexture, 'u_EmissiveSampler', 'HAS_EMISSIVEMAP');\n      this.uniforms.u_EmissiveFactor = material.emissiveFactor || [0, 0, 0];\n    }\n    if (material.alphaMode === 'MASK') {\n      const {alphaCutoff = 0.5} = material;\n      this.defines.ALPHA_CUTOFF = 1;\n      this.uniforms.u_AlphaCutoff = alphaCutoff;\n    } else if (material.alphaMode === 'BLEND') {\n      log.warn('BLEND alphaMode might not work well because it requires mesh sorting')();\n      Object.assign(this.parameters, {\n        blend: true,\n        blendEquation: this.gl.FUNC_ADD,\n        blendFunc: [\n          this.gl.SRC_ALPHA,\n          this.gl.ONE_MINUS_SRC_ALPHA,\n          this.gl.ONE,\n          this.gl.ONE_MINUS_SRC_ALPHA\n        ]\n      });\n    }\n  }\n}\n","import {isWebGL2} from '@luma.gl/gltools';\nimport {log} from '@luma.gl/webgl';\nimport {pbr} from '@luma.gl/shadertools';\nimport {ModelNode} from '../scenegraph';\nimport GLTFMaterialParser from './gltf-material-parser';\n\nconst vs = `\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n`;\n\nconst fs = `\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n`;\n\nfunction addVersionToShader(gl, source) {\n  if (isWebGL2(gl)) {\n    return `#version 300 es\\n${source}`;\n  }\n\n  return source;\n}\n\nexport default function createGLTFModel(gl, options) {\n  const {id, drawMode, vertexCount, attributes, modelOptions} = options;\n  const materialParser = new GLTFMaterialParser(gl, options);\n\n  log.info(4, 'createGLTFModel defines: ', materialParser.defines)();\n\n  // Calculate managedResources\n  // TODO: Implement resource management logic that will\n  // not deallocate resources/textures/buffers that are shared\n  const managedResources = [];\n  managedResources.push(...materialParser.generatedTextures);\n  managedResources.push(...Object.values(attributes).map(attribute => attribute.buffer));\n\n  const model = new ModelNode(\n    gl,\n    Object.assign(\n      {\n        id,\n        drawMode,\n        vertexCount,\n        modules: [pbr],\n        defines: materialParser.defines,\n        parameters: materialParser.parameters,\n        vs: addVersionToShader(gl, vs),\n        fs: addVersionToShader(gl, fs),\n        managedResources\n      },\n      modelOptions\n    )\n  );\n\n  model.setProps({attributes});\n  model.setUniforms(materialParser.uniforms);\n\n  return model;\n}\n","import {Matrix4} from 'math.gl';\nimport {Buffer, Accessor, log} from '@luma.gl/webgl';\nimport {GroupNode} from '../scenegraph/';\n\nimport GLTFAnimator from './gltf-animator';\nimport createGLTFModel from './create-gltf-model';\n\n// TODO: import {ATTRIBUTE_TYPE_TO_COMPONENTS} from '@loaders.gl/gltf';\nconst ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nconst DEFAULT_OPTIONS = {\n  modelOptions: {},\n  pbrDebug: false,\n  imageBasedLightingEnvironment: null,\n  lights: true,\n  useTangents: false\n};\n\n// GLTF instantiator for luma.gl\n// Walks the parsed and resolved glTF structure and builds a luma.gl scenegraph\nexport default class GLTFInstantiator {\n  constructor(gl, options = {}) {\n    this.gl = gl;\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  instantiate(gltf) {\n    this.gltf = gltf;\n    const scenes = (gltf.scenes || []).map(scene => this.createScene(scene));\n    return scenes;\n  }\n\n  createAnimator() {\n    if (Array.isArray(this.gltf.animations)) {\n      return new GLTFAnimator(this.gltf);\n    }\n\n    return null;\n  }\n\n  createScene(gltfScene) {\n    const gltfNodes = gltfScene.nodes || [];\n    const nodes = gltfNodes.map(node => this.createNode(node));\n    const scene = new GroupNode({\n      id: gltfScene.name || gltfScene.id,\n      children: nodes\n    });\n    return scene;\n  }\n\n  createNode(gltfNode) {\n    if (!gltfNode._node) {\n      const gltfChildren = gltfNode.children || [];\n      const children = gltfChildren.map(child => this.createNode(child));\n\n      // Node can have children nodes and meshes at the same time\n      if (gltfNode.mesh) {\n        children.push(this.createMesh(gltfNode.mesh));\n      }\n\n      const node = new GroupNode({\n        id: gltfNode.name || gltfNode.id,\n        children\n      });\n\n      if (gltfNode.matrix) {\n        node.setMatrix(gltfNode.matrix);\n      } else {\n        node.matrix.identity();\n\n        if (gltfNode.translation) {\n          node.matrix.translate(gltfNode.translation);\n        }\n\n        if (gltfNode.rotation) {\n          const rotationMatrix = new Matrix4().fromQuaternion(gltfNode.rotation);\n          node.matrix.multiplyRight(rotationMatrix);\n        }\n\n        if (gltfNode.scale) {\n          node.matrix.scale(gltfNode.scale);\n        }\n      }\n      gltfNode._node = node;\n    }\n\n    return gltfNode._node;\n  }\n\n  createMesh(gltfMesh) {\n    // TODO: avoid changing the gltf\n    if (!gltfMesh._mesh) {\n      const gltfPrimitives = gltfMesh.primitives || [];\n      const primitives = gltfPrimitives.map((gltfPrimitive, i) =>\n        this.createPrimitive(gltfPrimitive, i, gltfMesh)\n      );\n      const mesh = new GroupNode({\n        id: gltfMesh.name || gltfMesh.id,\n        children: primitives\n      });\n      gltfMesh._mesh = mesh;\n    }\n\n    return gltfMesh._mesh;\n  }\n\n  getVertexCount(attributes) {\n    // TODO: implement this\n    log.warn('getVertexCount() not found')();\n  }\n\n  createPrimitive(gltfPrimitive, i, gltfMesh) {\n    return createGLTFModel(\n      this.gl,\n      Object.assign(\n        {\n          id: gltfPrimitive.name || `${gltfMesh.name || gltfMesh.id}-primitive-${i}`,\n          drawMode: gltfPrimitive.mode || 4,\n          vertexCount: gltfPrimitive.indices\n            ? gltfPrimitive.indices.count\n            : this.getVertexCount(gltfPrimitive.attributes),\n          attributes: this.createAttributes(gltfPrimitive.attributes, gltfPrimitive.indices),\n          material: gltfPrimitive.material\n        },\n        this.options\n      )\n    );\n  }\n\n  createAttributes(attributes, indices) {\n    const loadedAttributes = {};\n\n    Object.keys(attributes).forEach(attrName => {\n      loadedAttributes[attrName] = this.createAccessor(\n        attributes[attrName],\n        this.createBuffer(attributes[attrName], this.gl.ARRAY_BUFFER)\n      );\n    });\n\n    if (indices) {\n      loadedAttributes.indices = this.createAccessor(\n        indices,\n        this.createBuffer(indices, this.gl.ELEMENT_ARRAY_BUFFER)\n      );\n    }\n\n    log.info(4, 'glTF Attributes', {attributes, indices, generated: loadedAttributes})();\n\n    return loadedAttributes;\n  }\n\n  createBuffer(attribute, target) {\n    if (!attribute.bufferView) {\n      // Draco decoded files do not have a bufferView\n      attribute.bufferView = {};\n    }\n\n    const {bufferView} = attribute;\n    if (!bufferView.lumaBuffers) {\n      bufferView.lumaBuffers = {};\n    }\n\n    if (!bufferView.lumaBuffers[target]) {\n      bufferView.lumaBuffers[target] = new Buffer(this.gl, {\n        id: `from-${bufferView.id}`,\n        // Draco decoded files have attribute.value\n        data: bufferView.data || attribute.value,\n        target\n      });\n    }\n\n    return bufferView.lumaBuffers[target];\n  }\n\n  createAccessor(accessor, buffer) {\n    return new Accessor({\n      buffer,\n      offset: accessor.byteOffset || 0,\n      stride: accessor.bufferView.byteStride || 0,\n      type: accessor.componentType,\n      size: ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type]\n    });\n  }\n\n  // TODO - create sampler in WebGL2\n  createSampler(gltfSampler) {\n    return gltfSampler;\n  }\n\n  // Helper methods (move to GLTFLoader.resolve...?)\n\n  needsPOT() {\n    // Has a wrapping mode (either wrapS or wrapT) equal to REPEAT or MIRRORED_REPEAT, or\n    // Has a minification filter (minFilter) that uses mipmapping\n    // (NEAREST_MIPMAP_NEAREST, NEAREST_MIPMAP_LINEAR,\n    // LINEAR_MIPMAP_NEAREST, or LINEAR_MIPMAP_LINEAR).\n    return false;\n  }\n}\n","import GLTFInstantiator from './gltf-instantiator';\n\nexport default function createGLTFObjects(gl, gltf, options) {\n  const instantiator = new GLTFInstantiator(gl, options);\n  const scenes = instantiator.instantiate(gltf);\n  const animator = instantiator.createAnimator();\n\n  return {scenes, animator};\n}\n","import \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n    case 'ndarray':\n      return {\n        width: image.width,\n        height: image.height\n      };\n\n    case 'html':\n      return {\n        width: image.naturalWidth,\n        height: image.naturalHeight\n      };\n\n    default:\n      return assert(false);\n  }\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n    case 'html':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      var imageData = context.getImageData(0, 0, image.width, image.height);\n      return imageData.data;\n\n    case 'ndarray':\n      return image.data;\n\n    default:\n      return assert(false);\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'html';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'ndarray';\n  }\n\n  if (Array.isArray(image)) {\n    return 'ndarray';\n  }\n\n  return null;\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nexport function generateUrl(getUrl, options, urlOptions) {\n  var url = getUrl;\n\n  if (typeof getUrl === 'function') {\n    url = getUrl(_objectSpread({}, options, {}, urlOptions));\n  }\n\n  assert(typeof url === 'string');\n  var baseUrl = options.baseUrl;\n\n  if (baseUrl) {\n    url = baseUrl[baseUrl.length - 1] === '/' ? \"\".concat(baseUrl).concat(url) : \"\".concat(baseUrl, \"/\").concat(url);\n  }\n\n  return url;\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isObject = function isObject(value) {\n  return value && _typeof(value) === 'object';\n};\n\nexport function asyncDeepMap(tree, func) {\n  var options,\n      _args = arguments;\n  return _regeneratorRuntime.async(function asyncDeepMap$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(mapSubtree(tree, func, options));\n\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function mapSubtree(object, func, options) {\n  var url;\n  return _regeneratorRuntime.async(function mapSubtree$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!Array.isArray(object)) {\n            _context2.next = 4;\n            break;\n          }\n\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(mapArray(object, func, options));\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 4:\n          if (!isObject(object)) {\n            _context2.next = 8;\n            break;\n          }\n\n          _context2.next = 7;\n          return _regeneratorRuntime.awrap(mapObject(object, func, options));\n\n        case 7:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 8:\n          url = object;\n          _context2.next = 11;\n          return _regeneratorRuntime.awrap(func(url, options));\n\n        case 11:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction mapObject(object, func, options) {\n  var promises, values, _loop, key;\n\n  return _regeneratorRuntime.async(function mapObject$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          promises = [];\n          values = {};\n\n          _loop = function _loop(key) {\n            var url = object[key];\n            var promise = mapSubtree(url, func, options).then(function (value) {\n              values[key] = value;\n            });\n            promises.push(promise);\n          };\n\n          for (key in object) {\n            _loop(key);\n          }\n\n          _context3.next = 6;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 6:\n          return _context3.abrupt(\"return\", values);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nfunction mapArray(urlArray, func) {\n  var options,\n      promises,\n      _args4 = arguments;\n  return _regeneratorRuntime.async(function mapArray$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          options = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n          promises = urlArray.map(function (url) {\n            return mapSubtree(url, func, options);\n          });\n          _context4.next = 4;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 4:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { asyncDeepMap } from './async-deep-map';\nexport function deepLoad(urlTree, load, options) {\n  return _regeneratorRuntime.async(function deepLoad$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(asyncDeepMap(urlTree, function (url) {\n            return shallowLoad(url, load, options);\n          }));\n\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function shallowLoad(url, load, options) {\n  var response, arrayBuffer;\n  return _regeneratorRuntime.async(function shallowLoad$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(fetch(url, options.fetch));\n\n        case 2:\n          response = _context2.sent;\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(response.arrayBuffer());\n\n        case 5:\n          arrayBuffer = _context2.sent;\n          _context2.next = 8;\n          return _regeneratorRuntime.awrap(load(arrayBuffer, options));\n\n        case 8:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport parseImage from '../parsers/parse-image';\nimport { getImageSize } from '../parsed-image-api/parsed-image-api';\nimport { generateUrl } from './generate-url';\nimport { deepLoad, shallowLoad } from './deep-load';\nexport function loadImage(getUrl) {\n  var options,\n      imageUrls,\n      _args = arguments;\n  return _regeneratorRuntime.async(function loadImage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(getImageUrls(getUrl, options));\n\n        case 3:\n          imageUrls = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(deepLoad(imageUrls, parseImage, options));\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function getImageUrls(getUrl, options) {\n  var urlOptions,\n      mipLevels,\n      _args2 = arguments;\n  return _regeneratorRuntime.async(function getImageUrls$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          urlOptions = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n          mipLevels = options && options.image && options.image.mipLevels || 0;\n\n          if (!(mipLevels !== 0)) {\n            _context2.next = 8;\n            break;\n          }\n\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions));\n\n        case 5:\n          _context2.t0 = _context2.sent;\n          _context2.next = 9;\n          break;\n\n        case 8:\n          _context2.t0 = generateUrl(getUrl, options, urlOptions);\n\n        case 9:\n          return _context2.abrupt(\"return\", _context2.t0);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions) {\n  var urls, url, image, _getImageSize, width, height, mipLevel, _url;\n\n  return _regeneratorRuntime.async(function getMipmappedImageUrls$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          urls = [];\n\n          if (!(mipLevels === 'auto')) {\n            _context3.next = 9;\n            break;\n          }\n\n          url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n            lod: 0\n          }));\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(shallowLoad(url, parseImage, options));\n\n        case 5:\n          image = _context3.sent;\n          _getImageSize = getImageSize(image), width = _getImageSize.width, height = _getImageSize.height;\n          mipLevels = getMipLevels({\n            width: width,\n            height: height\n          });\n          urls.push(url);\n\n        case 9:\n          assert(mipLevels > 0);\n\n          for (mipLevel = urls.length; mipLevel < mipLevels; ++mipLevel) {\n            _url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n              lod: mipLevel\n            }));\n            urls.push(_url);\n          }\n\n          return _context3.abrupt(\"return\", urls);\n\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nexport function getMipLevels(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n  return 1 + Math.floor(Math.log2(Math.max(width, height)));\n}","import GL from '@luma.gl/constants';\nimport {Texture2D, TextureCube} from '@luma.gl/webgl';\nimport {loadImage} from '@loaders.gl/images';\n\nexport default class GLTFEnvironment {\n  constructor(gl, {brdfLutUrl, getTexUrl, specularMipLevels = 10}) {\n    this.gl = gl;\n    this.brdfLutUrl = brdfLutUrl;\n    this.getTexUrl = getTexUrl;\n    this.specularMipLevels = specularMipLevels;\n  }\n\n  makeCube({id, getTextureForFace, parameters}) {\n    const pixels = {};\n    TextureCube.FACES.forEach(face => {\n      pixels[face] = getTextureForFace(face);\n    });\n    return new TextureCube(this.gl, {\n      id,\n      mipmaps: false,\n      parameters,\n      pixels\n    });\n  }\n\n  getDiffuseEnvSampler() {\n    if (!this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler = this.makeCube({\n        id: 'DiffuseEnvSampler',\n        getTextureForFace: dir => loadImage(this.getTexUrl('diffuse', dir, 0)),\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._DiffuseEnvSampler;\n  }\n\n  getSpecularEnvSampler() {\n    if (!this._SpecularEnvSampler) {\n      this._SpecularEnvSampler = this.makeCube({\n        id: 'SpecularEnvSampler',\n        getTextureForFace: dir => {\n          const imageArray = [];\n          for (let lod = 0; lod <= this.specularMipLevels - 1; lod++) {\n            imageArray.push(loadImage(this.getTexUrl('specular', dir, lod)));\n          }\n          return imageArray;\n        },\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR_MIPMAP_LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._SpecularEnvSampler;\n  }\n\n  getBrdfTexture() {\n    if (!this._BrdfTexture) {\n      this._BrdfTexture = new Texture2D(this.gl, {\n        id: 'brdfLUT',\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        },\n        // Texture2D accepts a promise that returns an image as data (Async Textures)\n        data: loadImage(this.brdfLutUrl)\n      });\n    }\n\n    return this._BrdfTexture;\n  }\n\n  delete() {\n    if (this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler.delete();\n      this._DiffuseEnvSampler = null;\n    }\n\n    if (this._SpecularEnvSampler) {\n      this._SpecularEnvSampler.delete();\n      this._SpecularEnvSampler = null;\n    }\n\n    if (this._BrdfTexture) {\n      this._BrdfTexture.delete();\n      this._BrdfTexture = null;\n    }\n  }\n}\n","/* eslint-disable camelcase */\n/* global document, window */\nimport {parse} from '@loaders.gl/core';\n// eslint-disable-next-line import/no-unresolved\nimport {GLTFLoader} from '@loaders.gl/gltf';\nimport {DracoLoader} from '@loaders.gl/draco';\nimport '@loaders.gl/polyfills'; // text-encoding polyfill for older MS browsers\nimport GL from '@luma.gl/constants';\nimport {AnimationLoop, Timeline} from '@luma.gl/engine';\nimport {clear, log, lumaStats} from '@luma.gl/webgl';\nimport {setParameters} from '@luma.gl/gltools';\nimport {createGLTFObjects, GLTFEnvironment, VRDisplay} from '@luma.gl/experimental';\nimport {Matrix4, radians} from 'math.gl';\n\nconst CUBE_FACE_TO_DIRECTION = {\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_X]: 'right',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_X]: 'left',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Y]: 'top',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Y]: 'bottom',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Z]: 'front',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Z]: 'back'\n};\n\n// Damaged helmet model used under creative commons: https://github.com/KhronosGroup/glTF-Sample-Models/tree/1ba47770292486e66ca1e1161857a6e5695c2631/2.0/DamagedHelmet\n// Papermill textures used under Apache 2.0: https://github.com/KhronosGroup/glTF-Sample-Viewer/blob/e2d487693fa2e6148bd29d05bc82586f5a002a45/LICENSE.md\n\nconst GLTF_BASE_URL =\n  'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/';\nconst GLTF_DEFAULT_MODEL = 'DamagedHelmet.glb';\n\n// URL for animated model\n// 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/InterpolationTest/glTF-Binary/InterpolationTest.glb';\n\nconst INFO_HTML = `\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Show\n  <select id=\"showSelector\">\n    <option value=\"0 0 0 0 0 0 0 0\">Final Result</option>\n\n    <option value=\"0 1 0 0 0 0 0 0\">Base Color</option>\n    <option value=\"0 0 1 0 0 0 0 0\">Metallic</option>\n    <option value=\"0 0 0 1 0 0 0 0\">Roughness</option>\n    <option value=\"1 0 0 0 0 0 0 0\">Diffuse</option>\n\n    <option value=\"0 0 0 0 1 0 0 0\">Specular Reflection</option>\n    <option value=\"0 0 0 0 0 1 0 0\">Geometric Occlusion</option>\n    <option value=\"0 0 0 0 0 0 1 0\">Microfacet Distribution</option>\n    <option value=\"0 0 0 0 0 0 0 1\">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights\n  <select id=\"lightSelector\">\n    <option value=\"default\">Default</option>\n    <option value=\"ambient\">Ambient Only</option>\n    <option value=\"directional1\">1x Directional (Red) + Ambient</option>\n    <option value=\"directional3\">3x Directional (RGB)</option>\n    <option value=\"point1far\">1x Point Light Far (Red) + Ambient</option>\n    <option value=\"point1near\">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light\n  <select id=\"iblSelector\">\n    <option value=\"exclusive\">On (Exclusive)</option>\n    <option value=\"addition\">On (Addition to Regular)</option>\n    <option value=\"off\">Off (Only Regular)</option>\n  </select>\n  <br>\n</div>\n<p><img src=\"https://img.shields.io/badge/WebVR-Supported-orange.svg\" /></p>\n`;\n\nconst LIGHT_SOURCES = {\n  default: {\n    directionalLights: [\n      {\n        color: [255, 255, 255],\n        direction: [0.0, 0.5, 0.5],\n        intensity: 1.0\n      }\n    ]\n  },\n  ambient: {\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional1: {\n    directionalLights: [\n      {\n        color: [255, 0, 0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional3: {\n    directionalLights: [\n      {\n        color: [255, 0.0, 0.0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 0.0, 255],\n        direction: [0.0, 0.0, 1.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 255, 0.0],\n        direction: [0.0, 1.0, 0.0],\n        intensity: 1.0\n      }\n    ]\n  },\n  point1far: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [200.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  point1near: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [10.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  }\n};\n\nconst DEFAULT_OPTIONS = {\n  pbrDebug: true,\n  imageBasedLightingEnvironment: null,\n  lights: false\n};\n\nasync function loadGLTF(urlOrPromise, gl, options) {\n  const data = typeof urlOrPromise === 'string' ? window.fetch(urlOrPromise) : urlOrPromise;\n  const gltf = await parse(data, GLTFLoader, {\n    ...options,\n    gl,\n    DracoLoader\n  });\n  const {scenes, animator} = createGLTFObjects(gl, gltf, options);\n\n  scenes[0].traverse((node, {worldMatrix}) => log.info(4, 'Using model: ', node)());\n  return {scenes, animator, gltf};\n}\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n  constructor(opts = {}) {\n    super({\n      ...opts,\n      glOptions: {\n        // Use to test gltf with webgl 1.0 and 2.0\n        webgl1: true,\n        webgl2: true,\n        // alpha causes issues with some glTF demos\n        alpha: false\n      }\n    });\n\n    const {modelFile = null, initialZoom = 2} = opts;\n    this.scenes = [];\n    this.animator = null;\n    this.gl = null;\n    this.modelFile = modelFile;\n\n    this.mouse = {\n      lastX: 0,\n      lastY: 0\n    };\n\n    this.translate = initialZoom;\n    this.rotation = [0, 0];\n    this.rotationStart = [0, 0];\n\n    this.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n    this.u_ScaleFGDSpec = [0, 0, 0, 0];\n\n    this.attachTimeline(new Timeline());\n    this.timeline.play();\n    this.timelineChannel = this.timeline.addChannel({\n      rate: 0.5\n    });\n    this.animationHandle = null;\n\n    this.onInitialize = this.onInitialize.bind(this);\n    this.onRender = this.onRender.bind(this);\n    this._setDisplay(new VRDisplay());\n  }\n\n  initalizeEventHandling(canvas) {\n    let pointerIsDown = false;\n\n    const pointerDown = (x, y) => {\n      this.mouse.lastX = x;\n      this.mouse.lastY = y;\n\n      this.rotationStart[0] = this.rotation[0];\n      this.rotationStart[1] = this.rotation[1];\n\n      pointerIsDown = true;\n    };\n\n    const pointerMove = (x, y) => {\n      if (!pointerIsDown) {\n        return;\n      }\n\n      const dX = x - this.mouse.lastX;\n      const dY = y - this.mouse.lastY;\n\n      this.rotation[0] = this.rotationStart[0] + dY / 100;\n      this.rotation[1] = this.rotationStart[1] + dX / 100;\n    };\n\n    canvas.addEventListener('wheel', e => {\n      this.translate += e.deltaY / 10;\n      if (this.translate < 0.5) {\n        this.translate = 0.5;\n      }\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mousedown', e => {\n      pointerDown(e.clientX, e.clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mouseup', e => {\n      pointerIsDown = false;\n    });\n\n    canvas.addEventListener('mousemove', e => {\n      pointerMove(e.clientX, e.clientY);\n    });\n\n    canvas.addEventListener('touchstart', e => {\n      pointerDown(e.touches[0].clientX, e.touches[0].clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('touchmove', e => {\n      pointerMove(e.touches[0].clientX, e.touches[0].clientY);\n    });\n\n    canvas.addEventListener('touchend', e => {\n      if (e.touches.length === 0) {\n        pointerIsDown = false;\n      }\n    });\n\n    canvas.addEventListener('dragover', e => {\n      e.dataTransfer.dropEffect = 'link';\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('drop', e => {\n      e.preventDefault();\n      if (e.dataTransfer.files && e.dataTransfer.files.length === 1) {\n        this._deleteScenes();\n        const readPromise = new Promise(resolve => {\n          const reader = new window.FileReader();\n          reader.onload = ev => resolve(ev.target.result);\n          reader.readAsArrayBuffer(e.dataTransfer.files[0]);\n        });\n\n        loadGLTF(readPromise, this.gl, this.loadOptions).then(result => this._fileLoaded(result));\n      }\n    });\n  }\n\n  _fileLoaded(loadResult) {\n    if (this.animationHandle !== null) {\n      this.timeline.detachAnimation(this.animationHandle);\n      this.animationHandle = null;\n    }\n    this.animator = null;\n\n    Object.assign(this, loadResult);\n    if (this.animator) {\n      this.animationHandle = this.timeline.attachAnimation(this.animator, this.timelineChannel);\n    }\n  }\n\n  onInitialize({gl, canvas}) {\n    setParameters(gl, {\n      depthTest: true,\n      blend: false\n    });\n\n    this.loadOptions = DEFAULT_OPTIONS;\n    this.environment = new GLTFEnvironment(gl, {\n      brdfLutUrl: `${GLTF_BASE_URL}/brdfLUT.png`,\n      getTexUrl: (type, dir, mipLevel) =>\n        `${GLTF_BASE_URL}/papermill/${type}/${type}_${CUBE_FACE_TO_DIRECTION[dir]}_${mipLevel}.jpg`\n    });\n    this.loadOptions.imageBasedLightingEnvironment = this.environment;\n\n    this.gl = gl;\n    if (this.modelFile) {\n      // options for unit testing\n      const options = {\n        pbrDebug: false,\n        imageBasedLightingEnvironment: null,\n        lights: true\n      };\n      loadGLTF(this.modelFile, this.gl, options).then(result => this._fileLoaded(result));\n    } else {\n      const modelUrl = GLTF_DEFAULT_MODEL;\n      loadGLTF(GLTF_BASE_URL + modelUrl, this.gl, this.loadOptions).then(result =>\n        this._fileLoaded(result)\n      );\n    }\n\n    const showSelector = document.getElementById('showSelector');\n    if (showSelector) {\n      showSelector.onchange = event => {\n        const value = showSelector.value.split(' ').map(x => parseFloat(x));\n        this.u_ScaleDiffBaseMR = value.slice(0, 4);\n        this.u_ScaleFGDSpec = value.slice(4);\n      };\n    }\n\n    const lightSelector = document.getElementById('lightSelector');\n    if (lightSelector) {\n      lightSelector.onchange = event => {\n        this.light = lightSelector.value;\n      };\n    }\n\n    const iblSelector = document.getElementById('iblSelector');\n    if (iblSelector) {\n      iblSelector.onchange = event => {\n        this._updateLightSettings(iblSelector.value);\n        this._rebuildModel();\n      };\n    }\n\n    this.initalizeEventHandling(canvas);\n  }\n\n  _updateLightSettings(value) {\n    switch (value) {\n      case 'exclusive':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: false\n        });\n        break;\n\n      case 'addition':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: true\n        });\n        break;\n\n      case 'off':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: null,\n          lights: true\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _rebuildModel() {\n    // Clean and regenerate model so we have new \"#defines\"\n    // TODO: Find better way to do this\n    (this.gltf.meshes || []).forEach(mesh => delete mesh._mesh);\n    (this.gltf.nodes || []).forEach(node => delete node._node);\n    (this.gltf.bufferViews || []).forEach(bufferView => delete bufferView.lumaBuffers);\n\n    this._deleteScenes();\n    Object.assign(this, createGLTFObjects(this.gl, this.gltf, this.loadOptions));\n  }\n\n  _deleteScenes() {\n    this.scenes.forEach(scene => scene.delete());\n    this.scenes = [];\n\n    lumaStats.get('Resource Counts').forEach(({name, count}) => {\n      log.info(3, `${name}: ${count}`)();\n    });\n  }\n\n  applyLight(model) {\n    // TODO: only do this when light changes\n    model.updateModuleSettings({\n      lightSources: LIGHT_SOURCES[this.light || 'default']\n    });\n  }\n\n  onRender({gl, time, aspect, viewMatrix, projectionMatrix}) {\n    clear(gl, {color: [0.2, 0.2, 0.2, 1.0], depth: true});\n\n    const [pitch, roll] = this.rotation;\n    const cameraPos = [\n      -this.translate * Math.sin(roll) * Math.cos(-pitch),\n      -this.translate * Math.sin(-pitch),\n      this.translate * Math.cos(roll) * Math.cos(-pitch)\n    ];\n\n    // TODO: find how to avoid using Array.from() to convert TypedArray to regular array\n    const uView = new Matrix4(viewMatrix ? Array.from(viewMatrix) : null)\n      .translate([0, 0, -this.translate])\n      .rotateX(pitch)\n      .rotateY(roll);\n\n    const uProjection = projectionMatrix\n      ? new Matrix4(Array.from(projectionMatrix))\n      : new Matrix4().perspective({fov: radians(40), aspect, near: 0.1, far: 9000});\n\n    if (!this.scenes.length) return false;\n\n    let success = true;\n\n    this.scenes[0].traverse((model, {worldMatrix}) => {\n      // In glTF, meshes and primitives do no have their own matrix.\n      const u_MVPMatrix = new Matrix4(uProjection).multiplyRight(uView).multiplyRight(worldMatrix);\n      this.applyLight(model);\n      success =\n        success &&\n        model.draw({\n          uniforms: {\n            u_Camera: cameraPos,\n            u_MVPMatrix,\n            u_ModelMatrix: worldMatrix,\n            u_NormalMatrix: new Matrix4(worldMatrix).invert().transpose(),\n\n            u_ScaleDiffBaseMR: this.u_ScaleDiffBaseMR,\n            u_ScaleFGDSpec: this.u_ScaleFGDSpec\n          },\n          parameters: model.props.parameters\n        });\n    });\n\n    return success;\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n\n  const infoDiv = document.createElement('div');\n  infoDiv.innerHTML = AppAnimationLoop.getInfo();\n  document.body.appendChild(infoDiv);\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/showcase/gltf/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function atob(string) {\n  return Buffer.from(string).toString('base64');\n}\nexport function btoa(base64) {\n  return Buffer.from(base64, 'base64').toString('ascii');\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.typed.uint8-array\";\nexport function bufferToArrayBuffer(buffer) {\n  if (Buffer.isBuffer(buffer)) {\n    var typedArray = new Uint8Array(buffer);\n    return typedArray.buffer;\n  }\n\n  return buffer;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './base/math-array';\nimport { checkNumber, checkVector } from '../lib/validators';\nimport assert from '../lib/assert';\nimport * as quat from 'gl-matrix/quat';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY_QUATERNION = [0, 0, 0, 1];\n\nvar Quaternion = function (_MathArray) {\n  _inherits(Quaternion, _MathArray);\n\n  function Quaternion() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Quaternion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Quaternion).call(this, -0, -0, -0, -0));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z, w);\n    }\n\n    return _this;\n  }\n\n  _createClass(Quaternion, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      this[3] = w;\n      return this.check();\n    }\n  }, {\n    key: \"fromMatrix3\",\n    value: function fromMatrix3(m) {\n      quat.fromMat3(this, m);\n      return this.check();\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      quat.identity(this);\n      return this.check();\n    }\n  }, {\n    key: \"fromAxisRotation\",\n    value: function fromAxisRotation(axis, rad) {\n      quat.setAxisAngle(this, axis, rad);\n      return this.check();\n    }\n  }, {\n    key: \"setAxisAngle\",\n    value: function setAxisAngle(axis, rad) {\n      return this.fromAxisRotation(axis, rad);\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return quat.length(this);\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared(a) {\n      return quat.squaredLength(this);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.dot only takes one argument');\n      }\n\n      return quat.dot(this, a);\n    }\n  }, {\n    key: \"rotationTo\",\n    value: function rotationTo(vectorA, vectorB) {\n      quat.rotationTo(this, vectorA, vectorB);\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.add only takes one argument');\n      }\n\n      quat.add(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"calculateW\",\n    value: function calculateW() {\n      quat.calculateW(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"conjugate\",\n    value: function conjugate() {\n      quat.conjugate(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      quat.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      quat.lerp(this, a, b, t);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a, b) {\n      assert(!b);\n      quat.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a, b) {\n      assert(!b);\n      quat.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.len();\n      var l = length > 0 ? 1 / length : 0;\n      this[0] = this[0] * l;\n      this[1] = this[1] * l;\n      this[2] = this[2] * l;\n      this[3] = this[3] * l;\n\n      if (length === 0) {\n        this[3] = 1;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(rad) {\n      quat.rotateX(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(rad) {\n      quat.rotateY(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(rad) {\n      quat.rotateZ(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(b) {\n      quat.scale(this, this, b);\n      return this.check();\n    }\n  }, {\n    key: \"slerp\",\n    value: function slerp(start, target, ratio) {\n      switch (arguments.length) {\n        case 1:\n          var _arguments$ = arguments[0];\n          var _arguments$$start = _arguments$.start;\n          start = _arguments$$start === void 0 ? IDENTITY_QUATERNION : _arguments$$start;\n          target = _arguments$.target;\n          ratio = _arguments$.ratio;\n          break;\n\n        case 2:\n          var _arguments = Array.prototype.slice.call(arguments);\n\n          target = _arguments[0];\n          ratio = _arguments[1];\n          start = this;\n          break;\n\n        default:\n      }\n\n      quat.slerp(this, start, target, ratio);\n      return this.check();\n    }\n  }, {\n    key: \"transformVector4\",\n    value: function transformVector4(vector) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : vector;\n      vec4.transformQuat(result, vector, this);\n      return checkVector(result, 4);\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"setFromAxisAngle\",\n    value: function setFromAxisAngle(axis, rad) {\n      return this.setAxisAngle(axis, rad);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(a, b) {\n      return this.multiplyLeft(a, b);\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      return this.multiplyRight(a, b);\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 4;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(value) {\n      return this[3] = checkNumber(value);\n    }\n  }]);\n\n  return Quaternion;\n}(MathArray);\n\nexport { Quaternion as default };","import setPrototypeOf from \"./setPrototypeOf\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport fs from 'fs';\nimport http from 'http';\nimport https from 'https';\nimport util from 'util';\nimport { toArrayBuffer } from './utils/to-array-buffer.node';\nimport decodeDataUri from './utils/decode-data-uri.node';\nimport { concatenateReadStream } from './utils/stream-utils.node';\nvar DEFAULT_OPTIONS = {\n  dataType: 'arraybuffer'\n};\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nexport function readFile(_x) {\n  return _readFile.apply(this, arguments);\n}\n\nfunction _readFile() {\n  _readFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url) {\n    var options,\n        _decodeDataUri,\n        arrayBuffer,\n        queryIndex,\n        readFileAsync,\n        buffer,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            options = getReadFileOptions(options);\n\n            if (!isDataURL(url)) {\n              _context.next = 5;\n              break;\n            }\n\n            _decodeDataUri = decodeDataUri(url), arrayBuffer = _decodeDataUri.arrayBuffer;\n            return _context.abrupt(\"return\", Promise.resolve(arrayBuffer));\n\n          case 5:\n            if (!isRequestURL(url)) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              options = _objectSpread({}, new URL(url), {}, options);\n              var request = url.startsWith('https:') ? https.request : http.request;\n              request(url, function (response) {\n                return concatenateReadStream(response).then(resolve, reject);\n              });\n            }));\n\n          case 7:\n            queryIndex = url && url.lastIndexOf('?');\n            url = queryIndex >= 0 ? url.substr(0, queryIndex) : url;\n            readFileAsync = util.promisify(fs.readFile);\n            _context.next = 12;\n            return readFileAsync(url, options);\n\n          case 12:\n            buffer = _context.sent;\n            return _context.abrupt(\"return\", buffer instanceof Buffer ? toArrayBuffer(buffer) : buffer);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _readFile.apply(this, arguments);\n}\n\nexport function createReadStream(_x2, _x3) {\n  return _createReadStream.apply(this, arguments);\n}\n\nfunction _createReadStream() {\n  _createReadStream = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!isDataURL(url)) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", decodeDataUri(url));\n\n          case 2:\n            if (isRequestURL(url)) {\n              _context2.next = 4;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", fs.createReadStream(url, options));\n\n          case 4:\n            return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n              options = _objectSpread({}, new URL(url), {}, options);\n              var request = url.startsWith('https:') ? https.request : http.request;\n              request(url, function (response) {\n                return resolve(response);\n              });\n            }));\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _createReadStream.apply(this, arguments);\n}\n\nfunction getReadFileOptions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  options = Object.assign({}, DEFAULT_OPTIONS, options);\n  options.responseType = options.responseType || options.dataType;\n\n  if (fs) {\n    options.encoding = options.encoding || (options.dataType === 'text' ? 'utf8' : null);\n  }\n\n  return options;\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nexport { isBrowser, global_ as global };","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","import { config } from 'math.gl';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon as _withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\nexport { default as _Polygon } from './addons/polygon';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate(this)) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport getPixels from 'get-pixels';\nimport util from 'util';\nexport function parseImageNode(_x, _x2, _x3) {\n  return _parseImageNode.apply(this, arguments);\n}\n\nfunction _parseImageNode() {\n  _parseImageNode = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, mimeType, options) {\n    var getPixelsAsync, buffer, ndarray, shape, layers;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            getPixelsAsync = util.promisify(getPixels);\n            buffer = arrayBuffer instanceof Buffer ? arrayBuffer : Buffer.from(arrayBuffer);\n            _context.next = 4;\n            return getPixelsAsync(buffer, mimeType);\n\n          case 4:\n            ndarray = _context.sent;\n            shape = _toConsumableArray(ndarray.shape);\n            layers = ndarray.shape.length === 4 ? ndarray.shape.shift() : 1;\n            return _context.abrupt(\"return\", {\n              shape: shape,\n              data: ndarray.data,\n              width: ndarray.shape[0],\n              height: ndarray.shape[1],\n              components: ndarray.shape[2],\n              layers: layers\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImageNode.apply(this, arguments);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName) {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName | '', \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Matrix).apply(this, arguments));\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0));\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          fovy = _ref4.fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nglobal['encoding-indexes'] = {};\n\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nvar floor = Math.floor;\n\nfunction ToDictionary(o) {\n  if (o === undefined) return {};\n  if (o === Object(o)) return o;\n  throw TypeError('Could not convert argument to dictionary');\n}\n\nfunction stringToCodePoints(string) {\n  var s = String(string);\n  var n = s.length;\n  var i = 0;\n  var u = [];\n\n  while (i < n) {\n    var c = s.charCodeAt(i);\n\n    if (c < 0xd800 || c > 0xdfff) {\n      u.push(c);\n    } else if (0xdc00 <= c && c <= 0xdfff) {\n      u.push(0xfffd);\n    } else if (0xd800 <= c && c <= 0xdbff) {\n      if (i === n - 1) {\n        u.push(0xfffd);\n      } else {\n        var d = s.charCodeAt(i + 1);\n\n        if (0xdc00 <= d && d <= 0xdfff) {\n          var a = c & 0x3ff;\n          var b = d & 0x3ff;\n          u.push(0x10000 + (a << 10) + b);\n          i += 1;\n        } else {\n          u.push(0xfffd);\n        }\n      }\n    }\n\n    i += 1;\n  }\n\n  return u;\n}\n\nfunction codePointsToString(code_points) {\n  var s = '';\n\n  for (var i = 0; i < code_points.length; ++i) {\n    var cp = code_points[i];\n\n    if (cp <= 0xffff) {\n      s += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      s += String.fromCharCode((cp >> 10) + 0xd800, (cp & 0x3ff) + 0xdc00);\n    }\n  }\n\n  return s;\n}\n\nfunction isASCIIByte(a) {\n  return 0x00 <= a && a <= 0x7f;\n}\n\nvar isASCIICodePoint = isASCIIByte;\nvar end_of_stream = -1;\n\nfunction Stream(tokens) {\n  this.tokens = [].slice.call(tokens);\n  this.tokens.reverse();\n}\n\nStream.prototype = {\n  endOfStream: function endOfStream() {\n    return !this.tokens.length;\n  },\n  read: function read() {\n    if (!this.tokens.length) return end_of_stream;\n    return this.tokens.pop();\n  },\n  prepend: function prepend(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.push(tokens.pop());\n      }\n    } else {\n      this.tokens.push(token);\n    }\n  },\n  push: function push(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.unshift(tokens.shift());\n      }\n    } else {\n      this.tokens.unshift(token);\n    }\n  }\n};\nvar finished = -1;\n\nfunction decoderError(fatal, opt_code_point) {\n  if (fatal) throw TypeError('Decoder error');\n  return opt_code_point || 0xfffd;\n}\n\nfunction encoderError(code_point) {\n  throw TypeError('The code point ' + code_point + ' could not be encoded.');\n}\n\nfunction Decoder() {}\n\nDecoder.prototype = {\n  handler: function handler(stream, bite) {}\n};\n\nfunction Encoder() {}\n\nEncoder.prototype = {\n  handler: function handler(stream, code_point) {}\n};\n\nfunction getEncoding(label) {\n  label = String(label).trim().toLowerCase();\n\n  if (Object.prototype.hasOwnProperty.call(label_to_encoding, label)) {\n    return label_to_encoding[label];\n  }\n\n  return null;\n}\n\nvar encodings = [{\n  encodings: [{\n    labels: ['unicode-1-1-utf-8', 'utf-8', 'utf8'],\n    name: 'UTF-8'\n  }],\n  heading: 'The Encoding'\n}, {\n  encodings: [{\n    labels: ['866', 'cp866', 'csibm866', 'ibm866'],\n    name: 'IBM866'\n  }, {\n    labels: ['csisolatin2', 'iso-8859-2', 'iso-ir-101', 'iso8859-2', 'iso88592', 'iso_8859-2', 'iso_8859-2:1987', 'l2', 'latin2'],\n    name: 'ISO-8859-2'\n  }, {\n    labels: ['csisolatin3', 'iso-8859-3', 'iso-ir-109', 'iso8859-3', 'iso88593', 'iso_8859-3', 'iso_8859-3:1988', 'l3', 'latin3'],\n    name: 'ISO-8859-3'\n  }, {\n    labels: ['csisolatin4', 'iso-8859-4', 'iso-ir-110', 'iso8859-4', 'iso88594', 'iso_8859-4', 'iso_8859-4:1988', 'l4', 'latin4'],\n    name: 'ISO-8859-4'\n  }, {\n    labels: ['csisolatincyrillic', 'cyrillic', 'iso-8859-5', 'iso-ir-144', 'iso8859-5', 'iso88595', 'iso_8859-5', 'iso_8859-5:1988'],\n    name: 'ISO-8859-5'\n  }, {\n    labels: ['arabic', 'asmo-708', 'csiso88596e', 'csiso88596i', 'csisolatinarabic', 'ecma-114', 'iso-8859-6', 'iso-8859-6-e', 'iso-8859-6-i', 'iso-ir-127', 'iso8859-6', 'iso88596', 'iso_8859-6', 'iso_8859-6:1987'],\n    name: 'ISO-8859-6'\n  }, {\n    labels: ['csisolatingreek', 'ecma-118', 'elot_928', 'greek', 'greek8', 'iso-8859-7', 'iso-ir-126', 'iso8859-7', 'iso88597', 'iso_8859-7', 'iso_8859-7:1987', 'sun_eu_greek'],\n    name: 'ISO-8859-7'\n  }, {\n    labels: ['csiso88598e', 'csisolatinhebrew', 'hebrew', 'iso-8859-8', 'iso-8859-8-e', 'iso-ir-138', 'iso8859-8', 'iso88598', 'iso_8859-8', 'iso_8859-8:1988', 'visual'],\n    name: 'ISO-8859-8'\n  }, {\n    labels: ['csiso88598i', 'iso-8859-8-i', 'logical'],\n    name: 'ISO-8859-8-I'\n  }, {\n    labels: ['csisolatin6', 'iso-8859-10', 'iso-ir-157', 'iso8859-10', 'iso885910', 'l6', 'latin6'],\n    name: 'ISO-8859-10'\n  }, {\n    labels: ['iso-8859-13', 'iso8859-13', 'iso885913'],\n    name: 'ISO-8859-13'\n  }, {\n    labels: ['iso-8859-14', 'iso8859-14', 'iso885914'],\n    name: 'ISO-8859-14'\n  }, {\n    labels: ['csisolatin9', 'iso-8859-15', 'iso8859-15', 'iso885915', 'iso_8859-15', 'l9'],\n    name: 'ISO-8859-15'\n  }, {\n    labels: ['iso-8859-16'],\n    name: 'ISO-8859-16'\n  }, {\n    labels: ['cskoi8r', 'koi', 'koi8', 'koi8-r', 'koi8_r'],\n    name: 'KOI8-R'\n  }, {\n    labels: ['koi8-ru', 'koi8-u'],\n    name: 'KOI8-U'\n  }, {\n    labels: ['csmacintosh', 'mac', 'macintosh', 'x-mac-roman'],\n    name: 'macintosh'\n  }, {\n    labels: ['dos-874', 'iso-8859-11', 'iso8859-11', 'iso885911', 'tis-620', 'windows-874'],\n    name: 'windows-874'\n  }, {\n    labels: ['cp1250', 'windows-1250', 'x-cp1250'],\n    name: 'windows-1250'\n  }, {\n    labels: ['cp1251', 'windows-1251', 'x-cp1251'],\n    name: 'windows-1251'\n  }, {\n    labels: ['ansi_x3.4-1968', 'ascii', 'cp1252', 'cp819', 'csisolatin1', 'ibm819', 'iso-8859-1', 'iso-ir-100', 'iso8859-1', 'iso88591', 'iso_8859-1', 'iso_8859-1:1987', 'l1', 'latin1', 'us-ascii', 'windows-1252', 'x-cp1252'],\n    name: 'windows-1252'\n  }, {\n    labels: ['cp1253', 'windows-1253', 'x-cp1253'],\n    name: 'windows-1253'\n  }, {\n    labels: ['cp1254', 'csisolatin5', 'iso-8859-9', 'iso-ir-148', 'iso8859-9', 'iso88599', 'iso_8859-9', 'iso_8859-9:1989', 'l5', 'latin5', 'windows-1254', 'x-cp1254'],\n    name: 'windows-1254'\n  }, {\n    labels: ['cp1255', 'windows-1255', 'x-cp1255'],\n    name: 'windows-1255'\n  }, {\n    labels: ['cp1256', 'windows-1256', 'x-cp1256'],\n    name: 'windows-1256'\n  }, {\n    labels: ['cp1257', 'windows-1257', 'x-cp1257'],\n    name: 'windows-1257'\n  }, {\n    labels: ['cp1258', 'windows-1258', 'x-cp1258'],\n    name: 'windows-1258'\n  }, {\n    labels: ['x-mac-cyrillic', 'x-mac-ukrainian'],\n    name: 'x-mac-cyrillic'\n  }],\n  heading: 'Legacy single-byte encodings'\n}, {\n  encodings: [{\n    labels: ['chinese', 'csgb2312', 'csiso58gb231280', 'gb2312', 'gb_2312', 'gb_2312-80', 'gbk', 'iso-ir-58', 'x-gbk'],\n    name: 'GBK'\n  }, {\n    labels: ['gb18030'],\n    name: 'gb18030'\n  }],\n  heading: 'Legacy multi-byte Chinese (simplified) encodings'\n}, {\n  encodings: [{\n    labels: ['big5', 'big5-hkscs', 'cn-big5', 'csbig5', 'x-x-big5'],\n    name: 'Big5'\n  }],\n  heading: 'Legacy multi-byte Chinese (traditional) encodings'\n}, {\n  encodings: [{\n    labels: ['cseucpkdfmtjapanese', 'euc-jp', 'x-euc-jp'],\n    name: 'EUC-JP'\n  }, {\n    labels: ['csiso2022jp', 'iso-2022-jp'],\n    name: 'ISO-2022-JP'\n  }, {\n    labels: ['csshiftjis', 'ms932', 'ms_kanji', 'shift-jis', 'shift_jis', 'sjis', 'windows-31j', 'x-sjis'],\n    name: 'Shift_JIS'\n  }],\n  heading: 'Legacy multi-byte Japanese encodings'\n}, {\n  encodings: [{\n    labels: ['cseuckr', 'csksc56011987', 'euc-kr', 'iso-ir-149', 'korean', 'ks_c_5601-1987', 'ks_c_5601-1989', 'ksc5601', 'ksc_5601', 'windows-949'],\n    name: 'EUC-KR'\n  }],\n  heading: 'Legacy multi-byte Korean encodings'\n}, {\n  encodings: [{\n    labels: ['csiso2022kr', 'hz-gb-2312', 'iso-2022-cn', 'iso-2022-cn-ext', 'iso-2022-kr'],\n    name: 'replacement'\n  }, {\n    labels: ['utf-16be'],\n    name: 'UTF-16BE'\n  }, {\n    labels: ['utf-16', 'utf-16le'],\n    name: 'UTF-16LE'\n  }, {\n    labels: ['x-user-defined'],\n    name: 'x-user-defined'\n  }],\n  heading: 'Legacy miscellaneous encodings'\n}];\nvar label_to_encoding = {};\nencodings.forEach(function (category) {\n  category.encodings.forEach(function (encoding) {\n    encoding.labels.forEach(function (label) {\n      label_to_encoding[label] = encoding;\n    });\n  });\n});\nvar encoders = {};\nvar decoders = {};\n\nfunction indexCodePointFor(pointer, index) {\n  if (!index) return null;\n  return index[pointer] || null;\n}\n\nfunction indexPointerFor(code_point, index) {\n  var pointer = index.indexOf(code_point);\n  return pointer === -1 ? null : pointer;\n}\n\nfunction index(name) {\n  if (!('encoding-indexes' in global)) {\n    throw Error('Indexes missing.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  return global['encoding-indexes'][name];\n}\n\nfunction indexGB18030RangesCodePointFor(pointer) {\n  if (pointer > 39419 && pointer < 189000 || pointer > 1237575) return null;\n  if (pointer === 7457) return 0xe7c7;\n  var offset = 0;\n  var code_point_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[0] <= pointer) {\n      offset = entry[0];\n      code_point_offset = entry[1];\n    } else {\n      break;\n    }\n  }\n\n  return code_point_offset + pointer - offset;\n}\n\nfunction indexGB18030RangesPointerFor(code_point) {\n  if (code_point === 0xe7c7) return 7457;\n  var offset = 0;\n  var pointer_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[1] <= code_point) {\n      offset = entry[1];\n      pointer_offset = entry[0];\n    } else {\n      break;\n    }\n  }\n\n  return pointer_offset + code_point - offset;\n}\n\nfunction indexShiftJISPointerFor(code_point) {\n  shift_jis_index = shift_jis_index || index('jis0208').map(function (code_point, pointer) {\n    return inRange(pointer, 8272, 8835) ? null : code_point;\n  });\n  var index_ = shift_jis_index;\n  return index_.indexOf(code_point);\n}\n\nvar shift_jis_index;\n\nfunction indexBig5PointerFor(code_point) {\n  big5_index_no_hkscs = big5_index_no_hkscs || index('big5').map(function (code_point, pointer) {\n    return pointer < (0xa1 - 0x81) * 157 ? null : code_point;\n  });\n  var index_ = big5_index_no_hkscs;\n\n  if (code_point === 0x2550 || code_point === 0x255e || code_point === 0x2561 || code_point === 0x256a || code_point === 0x5341 || code_point === 0x5345) {\n    return index_.lastIndexOf(code_point);\n  }\n\n  return indexPointerFor(code_point, index_);\n}\n\nvar big5_index_no_hkscs;\nvar DEFAULT_ENCODING = 'utf-8';\n\nfunction TextDecoder(label, options) {\n  if (!(this instanceof TextDecoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._decoder = null;\n  this._ignoreBOM = false;\n  this._BOMseen = false;\n  this._error_mode = 'replacement';\n  this._do_not_flush = false;\n  var encoding = getEncoding(label);\n  if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n  if (!decoders[encoding.name]) {\n    throw Error('Decoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  var dec = this;\n  dec._encoding = encoding;\n  if (Boolean(options['fatal'])) dec._error_mode = 'fatal';\n  if (Boolean(options['ignoreBOM'])) dec._ignoreBOM = true;\n\n  if (!Object.defineProperty) {\n    this.encoding = dec._encoding.name.toLowerCase();\n    this.fatal = dec._error_mode === 'fatal';\n    this.ignoreBOM = dec._ignoreBOM;\n  }\n\n  return dec;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextDecoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'fatal', {\n    get: function get() {\n      return this._error_mode === 'fatal';\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'ignoreBOM', {\n    get: function get() {\n      return this._ignoreBOM;\n    }\n  });\n}\n\nTextDecoder.prototype.decode = function decode(input, options) {\n  var bytes;\n\n  if (_typeof(input) === 'object' && input instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input);\n  } else if (_typeof(input) === 'object' && 'buffer' in input && input.buffer instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input.buffer, input.byteOffset, input.byteLength);\n  } else {\n    bytes = new Uint8Array(0);\n  }\n\n  options = ToDictionary(options);\n\n  if (!this._do_not_flush) {\n    this._decoder = decoders[this._encoding.name]({\n      fatal: this._error_mode === 'fatal'\n    });\n    this._BOMseen = false;\n  }\n\n  this._do_not_flush = Boolean(options['stream']);\n  var input_stream = new Stream(bytes);\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input_stream.read();\n    if (token === end_of_stream) break;\n    result = this._decoder.handler(input_stream, token);\n    if (result === finished) break;\n\n    if (result !== null) {\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n  }\n\n  if (!this._do_not_flush) {\n    do {\n      result = this._decoder.handler(input_stream, input_stream.read());\n      if (result === finished) break;\n      if (result === null) continue;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    } while (!input_stream.endOfStream());\n\n    this._decoder = null;\n  }\n\n  function serializeStream(stream) {\n    if (includes(['UTF-8', 'UTF-16LE', 'UTF-16BE'], this._encoding.name) && !this._ignoreBOM && !this._BOMseen) {\n      if (stream.length > 0 && stream[0] === 0xfeff) {\n        this._BOMseen = true;\n        stream.shift();\n      } else if (stream.length > 0) {\n        this._BOMseen = true;\n      } else {}\n    }\n\n    return codePointsToString(stream);\n  }\n\n  return serializeStream.call(this, output);\n};\n\nfunction TextEncoder(label, options) {\n  if (!(this instanceof TextEncoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._encoder = null;\n  this._do_not_flush = false;\n  this._fatal = Boolean(options['fatal']) ? 'fatal' : 'replacement';\n  var enc = this;\n\n  if (Boolean(options['NONSTANDARD_allowLegacyEncoding'])) {\n    label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n    var encoding = getEncoding(label);\n    if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n    if (!encoders[encoding.name]) {\n      throw Error('Encoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n    }\n\n    enc._encoding = encoding;\n  } else {\n    enc._encoding = getEncoding('utf-8');\n\n    if (label !== undefined && 'console' in global) {\n      console.warn('TextEncoder constructor called with encoding label, ' + 'which is ignored.');\n    }\n  }\n\n  if (!Object.defineProperty) this.encoding = enc._encoding.name.toLowerCase();\n  return enc;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextEncoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n}\n\nTextEncoder.prototype.encode = function encode(opt_string, options) {\n  opt_string = opt_string === undefined ? '' : String(opt_string);\n  options = ToDictionary(options);\n  if (!this._do_not_flush) this._encoder = encoders[this._encoding.name]({\n    fatal: this._fatal === 'fatal'\n  });\n  this._do_not_flush = Boolean(options['stream']);\n  var input = new Stream(stringToCodePoints(opt_string));\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input.read();\n    if (token === end_of_stream) break;\n    result = this._encoder.handler(input, token);\n    if (result === finished) break;\n    if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n  }\n\n  if (!this._do_not_flush) {\n    while (true) {\n      result = this._encoder.handler(input, input.read());\n      if (result === finished) break;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n\n    this._encoder = null;\n  }\n\n  return new Uint8Array(output);\n};\n\nfunction UTF8Decoder(options) {\n  var fatal = options.fatal;\n  var utf8_code_point = 0,\n      utf8_bytes_seen = 0,\n      utf8_bytes_needed = 0,\n      utf8_lower_boundary = 0x80,\n      utf8_upper_boundary = 0xbf;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && utf8_bytes_needed !== 0) {\n      utf8_bytes_needed = 0;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream) return finished;\n\n    if (utf8_bytes_needed === 0) {\n      if (inRange(bite, 0x00, 0x7f)) {\n        return bite;\n      } else if (inRange(bite, 0xc2, 0xdf)) {\n        utf8_bytes_needed = 1;\n        utf8_code_point = bite & 0x1f;\n      } else if (inRange(bite, 0xe0, 0xef)) {\n        if (bite === 0xe0) utf8_lower_boundary = 0xa0;\n        if (bite === 0xed) utf8_upper_boundary = 0x9f;\n        utf8_bytes_needed = 2;\n        utf8_code_point = bite & 0xf;\n      } else if (inRange(bite, 0xf0, 0xf4)) {\n        if (bite === 0xf0) utf8_lower_boundary = 0x90;\n        if (bite === 0xf4) utf8_upper_boundary = 0x8f;\n        utf8_bytes_needed = 3;\n        utf8_code_point = bite & 0x7;\n      } else {\n        return decoderError(fatal);\n      }\n\n      return null;\n    }\n\n    if (!inRange(bite, utf8_lower_boundary, utf8_upper_boundary)) {\n      utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n      utf8_lower_boundary = 0x80;\n      utf8_upper_boundary = 0xbf;\n      stream.prepend(bite);\n      return decoderError(fatal);\n    }\n\n    utf8_lower_boundary = 0x80;\n    utf8_upper_boundary = 0xbf;\n    utf8_code_point = utf8_code_point << 6 | bite & 0x3f;\n    utf8_bytes_seen += 1;\n    if (utf8_bytes_seen !== utf8_bytes_needed) return null;\n    var code_point = utf8_code_point;\n    utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n    return code_point;\n  };\n}\n\nfunction UTF8Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var count, offset;\n\n    if (inRange(code_point, 0x0080, 0x07ff)) {\n      count = 1;\n      offset = 0xc0;\n    } else if (inRange(code_point, 0x0800, 0xffff)) {\n      count = 2;\n      offset = 0xe0;\n    } else if (inRange(code_point, 0x10000, 0x10ffff)) {\n      count = 3;\n      offset = 0xf0;\n    }\n\n    var bytes = [(code_point >> 6 * count) + offset];\n\n    while (count > 0) {\n      var temp = code_point >> 6 * (count - 1);\n      bytes.push(0x80 | temp & 0x3f);\n      count -= 1;\n    }\n\n    return bytes;\n  };\n}\n\nencoders['UTF-8'] = function (options) {\n  return new UTF8Encoder(options);\n};\n\ndecoders['UTF-8'] = function (options) {\n  return new UTF8Decoder(options);\n};\n\nfunction SingleByteDecoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    var code_point = index[bite - 0x80];\n    if (code_point === null) return decoderError(fatal);\n    return code_point;\n  };\n}\n\nfunction SingleByteEncoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index);\n    if (pointer === null) encoderError(code_point);\n    return pointer + 0x80;\n  };\n}\n\n(function () {\n  if (!('encoding-indexes' in global)) return;\n  encodings.forEach(function (category) {\n    if (category.heading !== 'Legacy single-byte encodings') return;\n    category.encodings.forEach(function (encoding) {\n      var name = encoding.name;\n      var idx = index(name.toLowerCase());\n\n      decoders[name] = function (options) {\n        return new SingleByteDecoder(idx, options);\n      };\n\n      encoders[name] = function (options) {\n        return new SingleByteEncoder(idx, options);\n      };\n    });\n  });\n})();\n\ndecoders['GBK'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nencoders['GBK'] = function (options) {\n  return new GB18030Encoder(options, true);\n};\n\nfunction GB18030Decoder(options) {\n  var fatal = options.fatal;\n  var gb18030_first = 0x00,\n      gb18030_second = 0x00,\n      gb18030_third = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && gb18030_first === 0x00 && gb18030_second === 0x00 && gb18030_third === 0x00) {\n      return finished;\n    }\n\n    if (bite === end_of_stream && (gb18030_first !== 0x00 || gb18030_second !== 0x00 || gb18030_third !== 0x00)) {\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n      decoderError(fatal);\n    }\n\n    var code_point;\n\n    if (gb18030_third !== 0x00) {\n      code_point = null;\n\n      if (inRange(bite, 0x30, 0x39)) {\n        code_point = indexGB18030RangesCodePointFor((((gb18030_first - 0x81) * 10 + gb18030_second - 0x30) * 126 + gb18030_third - 0x81) * 10 + bite - 0x30);\n      }\n\n      var buffer = [gb18030_second, gb18030_third, bite];\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n\n      if (code_point === null) {\n        stream.prepend(buffer);\n        return decoderError(fatal);\n      }\n\n      return code_point;\n    }\n\n    if (gb18030_second !== 0x00) {\n      if (inRange(bite, 0x81, 0xfe)) {\n        gb18030_third = bite;\n        return null;\n      }\n\n      stream.prepend([gb18030_second, bite]);\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (gb18030_first !== 0x00) {\n      if (inRange(bite, 0x30, 0x39)) {\n        gb18030_second = bite;\n        return null;\n      }\n\n      var lead = gb18030_first;\n      var pointer = null;\n      gb18030_first = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - offset);\n      code_point = pointer === null ? null : indexCodePointFor(pointer, index('gb18030'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n    if (bite === 0x80) return 0x20ac;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      gb18030_first = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction GB18030Encoder(options, gbk_flag) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0xe5e5) return encoderError(code_point);\n    if (gbk_flag && code_point === 0x20ac) return 0x80;\n    var pointer = indexPointerFor(code_point, index('gb18030'));\n\n    if (pointer !== null) {\n      var lead = floor(pointer / 190) + 0x81;\n      var trail = pointer % 190;\n      var offset = trail < 0x3f ? 0x40 : 0x41;\n      return [lead, trail + offset];\n    }\n\n    if (gbk_flag) return encoderError(code_point);\n    pointer = indexGB18030RangesPointerFor(code_point);\n    var byte1 = floor(pointer / 10 / 126 / 10);\n    pointer = pointer - byte1 * 10 * 126 * 10;\n    var byte2 = floor(pointer / 10 / 126);\n    pointer = pointer - byte2 * 10 * 126;\n    var byte3 = floor(pointer / 10);\n    var byte4 = pointer - byte3 * 10;\n    return [byte1 + 0x81, byte2 + 0x30, byte3 + 0x81, byte4 + 0x30];\n  };\n}\n\nencoders['gb18030'] = function (options) {\n  return new GB18030Encoder(options);\n};\n\ndecoders['gb18030'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nfunction Big5Decoder(options) {\n  var fatal = options.fatal;\n  var Big5_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Big5_lead !== 0x00) {\n      Big5_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Big5_lead === 0x00) return finished;\n\n    if (Big5_lead !== 0x00) {\n      var lead = Big5_lead;\n      var pointer = null;\n      Big5_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x62;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0xa1, 0xfe)) pointer = (lead - 0x81) * 157 + (bite - offset);\n\n      switch (pointer) {\n        case 1133:\n          return [0x00ca, 0x0304];\n\n        case 1135:\n          return [0x00ca, 0x030c];\n\n        case 1164:\n          return [0x00ea, 0x0304];\n\n        case 1166:\n          return [0x00ea, 0x030c];\n      }\n\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('big5'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      Big5_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction Big5Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexBig5PointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 157) + 0x81;\n    if (lead < 0xa1) return encoderError(code_point);\n    var trail = pointer % 157;\n    var offset = trail < 0x3f ? 0x40 : 0x62;\n    return [lead, trail + offset];\n  };\n}\n\nencoders['Big5'] = function (options) {\n  return new Big5Encoder(options);\n};\n\ndecoders['Big5'] = function (options) {\n  return new Big5Decoder(options);\n};\n\nfunction EUCJPDecoder(options) {\n  var fatal = options.fatal;\n  var eucjp_jis0212_flag = false,\n      eucjp_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && eucjp_lead !== 0x00) {\n      eucjp_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && eucjp_lead === 0x00) return finished;\n\n    if (eucjp_lead === 0x8e && inRange(bite, 0xa1, 0xdf)) {\n      eucjp_lead = 0x00;\n      return 0xff61 - 0xa1 + bite;\n    }\n\n    if (eucjp_lead === 0x8f && inRange(bite, 0xa1, 0xfe)) {\n      eucjp_jis0212_flag = true;\n      eucjp_lead = bite;\n      return null;\n    }\n\n    if (eucjp_lead !== 0x00) {\n      var lead = eucjp_lead;\n      eucjp_lead = 0x00;\n      var code_point = null;\n\n      if (inRange(lead, 0xa1, 0xfe) && inRange(bite, 0xa1, 0xfe)) {\n        code_point = indexCodePointFor((lead - 0xa1) * 94 + (bite - 0xa1), index(!eucjp_jis0212_flag ? 'jis0208' : 'jis0212'));\n      }\n\n      eucjp_jis0212_flag = false;\n      if (!inRange(bite, 0xa1, 0xfe)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (bite === 0x8e || bite === 0x8f || inRange(bite, 0xa1, 0xfe)) {\n      eucjp_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCJPEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return [0x8e, code_point - 0xff61 + 0xa1];\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 94) + 0xa1;\n    var trail = pointer % 94 + 0xa1;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-JP'] = function (options) {\n  return new EUCJPEncoder(options);\n};\n\ndecoders['EUC-JP'] = function (options) {\n  return new EUCJPDecoder(options);\n};\n\nfunction ISO2022JPDecoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    Katakana: 2,\n    LeadByte: 3,\n    TrailByte: 4,\n    EscapeStart: 5,\n    Escape: 6\n  };\n  var iso2022jp_decoder_state = states.ASCII,\n      iso2022jp_decoder_output_state = states.ASCII,\n      iso2022jp_lead = 0x00,\n      iso2022jp_output_flag = false;\n\n  this.handler = function (stream, bite) {\n    switch (iso2022jp_decoder_state) {\n      default:\n      case states.ASCII:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Roman:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (bite === 0x5c) {\n          iso2022jp_output_flag = false;\n          return 0x00a5;\n        }\n\n        if (bite === 0x7e) {\n          iso2022jp_output_flag = false;\n          return 0x203e;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b && bite !== 0x5c && bite !== 0x7e) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Katakana:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x5f)) {\n          iso2022jp_output_flag = false;\n          return 0xff61 - 0x21 + bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.LeadByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_output_flag = false;\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.TrailByte;\n          return null;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.TrailByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return decoderError(fatal);\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_decoder_state = states.LeadByte;\n          var pointer = (iso2022jp_lead - 0x21) * 94 + bite - 0x21;\n          var code_point = indexCodePointFor(pointer, index('jis0208'));\n          if (code_point === null) return decoderError(fatal);\n          return code_point;\n        }\n\n        if (bite === end_of_stream) {\n          iso2022jp_decoder_state = states.LeadByte;\n          stream.prepend(bite);\n          return decoderError(fatal);\n        }\n\n        iso2022jp_decoder_state = states.LeadByte;\n        return decoderError(fatal);\n\n      case states.EscapeStart:\n        if (bite === 0x24 || bite === 0x28) {\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.Escape;\n          return null;\n        }\n\n        stream.prepend(bite);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n\n      case states.Escape:\n        var lead = iso2022jp_lead;\n        iso2022jp_lead = 0x00;\n        var state = null;\n        if (lead === 0x28 && bite === 0x42) state = states.ASCII;\n        if (lead === 0x28 && bite === 0x4a) state = states.Roman;\n        if (lead === 0x28 && bite === 0x49) state = states.Katakana;\n        if (lead === 0x24 && (bite === 0x40 || bite === 0x42)) state = states.LeadByte;\n\n        if (state !== null) {\n          iso2022jp_decoder_state = iso2022jp_decoder_state = state;\n          var output_flag = iso2022jp_output_flag;\n          iso2022jp_output_flag = true;\n          return !output_flag ? null : decoderError(fatal);\n        }\n\n        stream.prepend([lead, bite]);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n    }\n  };\n}\n\nfunction ISO2022JPEncoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    jis0208: 2\n  };\n  var iso2022jp_state = states.ASCII;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if (code_point === end_of_stream && iso2022jp_state === states.ASCII) return finished;\n\n    if ((iso2022jp_state === states.ASCII || iso2022jp_state === states.Roman) && (code_point === 0x000e || code_point === 0x000f || code_point === 0x001b)) {\n      return encoderError(0xfffd);\n    }\n\n    if (iso2022jp_state === states.ASCII && isASCIICodePoint(code_point)) return code_point;\n\n    if (iso2022jp_state === states.Roman && (isASCIICodePoint(code_point) && code_point !== 0x005c && code_point !== 0x007e || code_point == 0x00a5 || code_point == 0x203e)) {\n      if (isASCIICodePoint(code_point)) return code_point;\n      if (code_point === 0x00a5) return 0x5c;\n      if (code_point === 0x203e) return 0x7e;\n    }\n\n    if (isASCIICodePoint(code_point) && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if ((code_point === 0x00a5 || code_point === 0x203e) && iso2022jp_state !== states.Roman) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.Roman;\n      return [0x1b, 0x28, 0x4a];\n    }\n\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n\n    if (iso2022jp_state !== states.jis0208) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.jis0208;\n      return [0x1b, 0x24, 0x42];\n    }\n\n    var lead = floor(pointer / 94) + 0x21;\n    var trail = pointer % 94 + 0x21;\n    return [lead, trail];\n  };\n}\n\nencoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPEncoder(options);\n};\n\ndecoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPDecoder(options);\n};\n\nfunction ShiftJISDecoder(options) {\n  var fatal = options.fatal;\n  var Shift_JIS_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Shift_JIS_lead !== 0x00) {\n      Shift_JIS_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Shift_JIS_lead === 0x00) return finished;\n\n    if (Shift_JIS_lead !== 0x00) {\n      var lead = Shift_JIS_lead;\n      var pointer = null;\n      Shift_JIS_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      var lead_offset = lead < 0xa0 ? 0x81 : 0xc1;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfc)) pointer = (lead - lead_offset) * 188 + bite - offset;\n      if (inRange(pointer, 8836, 10715)) return 0xe000 - 8836 + pointer;\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('jis0208'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite) || bite === 0x80) return bite;\n    if (inRange(bite, 0xa1, 0xdf)) return 0xff61 - 0xa1 + bite;\n\n    if (inRange(bite, 0x81, 0x9f) || inRange(bite, 0xe0, 0xfc)) {\n      Shift_JIS_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction ShiftJISEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point) || code_point === 0x0080) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return code_point - 0xff61 + 0xa1;\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexShiftJISPointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 188);\n    var lead_offset = lead < 0x1f ? 0x81 : 0xc1;\n    var trail = pointer % 188;\n    var offset = trail < 0x3f ? 0x40 : 0x41;\n    return [lead + lead_offset, trail + offset];\n  };\n}\n\nencoders['Shift_JIS'] = function (options) {\n  return new ShiftJISEncoder(options);\n};\n\ndecoders['Shift_JIS'] = function (options) {\n  return new ShiftJISDecoder(options);\n};\n\nfunction EUCKRDecoder(options) {\n  var fatal = options.fatal;\n  var euckr_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && euckr_lead !== 0) {\n      euckr_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && euckr_lead === 0) return finished;\n\n    if (euckr_lead !== 0x00) {\n      var lead = euckr_lead;\n      var pointer = null;\n      euckr_lead = 0x00;\n      if (inRange(bite, 0x41, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - 0x41);\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('euc-kr'));\n      if (pointer === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      euckr_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCKREncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index('euc-kr'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 190) + 0x81;\n    var trail = pointer % 190 + 0x41;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-KR'] = function (options) {\n  return new EUCKREncoder(options);\n};\n\ndecoders['EUC-KR'] = function (options) {\n  return new EUCKRDecoder(options);\n};\n\nfunction convertCodeUnitToBytes(code_unit, utf16be) {\n  var byte1 = code_unit >> 8;\n  var byte2 = code_unit & 0x00ff;\n  if (utf16be) return [byte1, byte2];\n  return [byte2, byte1];\n}\n\nfunction UTF16Decoder(utf16_be, options) {\n  var fatal = options.fatal;\n  var utf16_lead_byte = null,\n      utf16_lead_surrogate = null;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && (utf16_lead_byte !== null || utf16_lead_surrogate !== null)) {\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && utf16_lead_byte === null && utf16_lead_surrogate === null) {\n      return finished;\n    }\n\n    if (utf16_lead_byte === null) {\n      utf16_lead_byte = bite;\n      return null;\n    }\n\n    var code_unit;\n\n    if (utf16_be) {\n      code_unit = (utf16_lead_byte << 8) + bite;\n    } else {\n      code_unit = (bite << 8) + utf16_lead_byte;\n    }\n\n    utf16_lead_byte = null;\n\n    if (utf16_lead_surrogate !== null) {\n      var lead_surrogate = utf16_lead_surrogate;\n      utf16_lead_surrogate = null;\n\n      if (inRange(code_unit, 0xdc00, 0xdfff)) {\n        return 0x10000 + (lead_surrogate - 0xd800) * 0x400 + (code_unit - 0xdc00);\n      }\n\n      stream.prepend(convertCodeUnitToBytes(code_unit, utf16_be));\n      return decoderError(fatal);\n    }\n\n    if (inRange(code_unit, 0xd800, 0xdbff)) {\n      utf16_lead_surrogate = code_unit;\n      return null;\n    }\n\n    if (inRange(code_unit, 0xdc00, 0xdfff)) return decoderError(fatal);\n    return code_unit;\n  };\n}\n\nfunction UTF16Encoder(utf16_be, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (inRange(code_point, 0x0000, 0xffff)) return convertCodeUnitToBytes(code_point, utf16_be);\n    var lead = convertCodeUnitToBytes((code_point - 0x10000 >> 10) + 0xd800, utf16_be);\n    var trail = convertCodeUnitToBytes((code_point - 0x10000 & 0x3ff) + 0xdc00, utf16_be);\n    return lead.concat(trail);\n  };\n}\n\nencoders['UTF-16BE'] = function (options) {\n  return new UTF16Encoder(true, options);\n};\n\ndecoders['UTF-16BE'] = function (options) {\n  return new UTF16Decoder(true, options);\n};\n\nencoders['UTF-16LE'] = function (options) {\n  return new UTF16Encoder(false, options);\n};\n\ndecoders['UTF-16LE'] = function (options) {\n  return new UTF16Decoder(false, options);\n};\n\nfunction XUserDefinedDecoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    return 0xf780 + bite - 0x80;\n  };\n}\n\nfunction XUserDefinedEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (inRange(code_point, 0xf780, 0xf7ff)) return code_point - 0xf780 + 0x80;\n    return encoderError(code_point);\n  };\n}\n\nencoders['x-user-defined'] = function (options) {\n  return new XUserDefinedEncoder(options);\n};\n\ndecoders['x-user-defined'] = function (options) {\n  return new XUserDefinedDecoder(options);\n};\n\nexport { TextEncoder, TextDecoder };","import \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.index-of\";\nimport { toArrayBuffer } from './to-array-buffer.node';\nexport default function decodeDataUri(uri) {\n  var dataIndex = uri.indexOf(',');\n  var buffer;\n  var mimeType;\n\n  if (uri.slice(dataIndex - 7, dataIndex) === ';base64') {\n    buffer = new Buffer(uri.slice(dataIndex + 1), 'base64');\n    mimeType = uri.slice(5, dataIndex - 7).trim();\n  } else {\n    buffer = new Buffer(decodeURIComponent(uri.slice(dataIndex + 1)));\n    mimeType = uri.slice(5, dataIndex).trim();\n  }\n\n  if (!mimeType) {\n    mimeType = 'text/plain;charset=US-ASCII';\n  } else if (mimeType[0] === ';') {\n    mimeType = \"text/plain\".concat(mimeType);\n  }\n\n  return {\n    arrayBuffer: toArrayBuffer(buffer),\n    mimeType: mimeType\n  };\n}","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../../utils/assert';\n\nvar isArrayBuffer = function isArrayBuffer(x) {\n  return x && x instanceof ArrayBuffer;\n};\n\nvar isBuffer = function isBuffer(x) {\n  return x && x instanceof Buffer;\n};\n\nexport function toArrayBuffer(data) {\n  if (isArrayBuffer(data)) {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    var typedArray = new Uint8Array(data);\n    return typedArray.buffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport savePixels from 'save-pixels';\nimport ndarray from 'ndarray';\nimport { bufferToArrayBuffer } from '../utils/to-array-buffer.node';\nexport function encodeImageToStreamNode(image, options) {\n  var type = options.type ? options.type.replace('image/', '') : 'jpeg';\n  var pixels = ndarray(image.data, [image.width, image.height, 4], [4, image.width * 4, 1], 0);\n  return savePixels(pixels, type, options);\n}\nexport function encodeImageNode(image, options) {\n  var imageStream = encodeImageToStreamNode(image, options);\n  return new Promise(function (resolve) {\n    var buffers = [];\n    imageStream.on('data', function (buffer) {\n      return buffers.push(buffer);\n    });\n    imageStream.on('end', function () {\n      var buffer = Buffer.concat(buffers);\n      resolve(bufferToArrayBuffer(buffer));\n    });\n  });\n}","export default `\\\n#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n\n // Constant-Linear-Exponential\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n`;\n","import lightingShader from './lights.glsl';\n\nexport default {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\n\nconst INITIAL_MODULE_OPTIONS = {};\n\n// Take color 0-255 and intensity as input and output 0.0-1.0 range\nfunction convertColor({color = [0, 0, 0], intensity = 1.0} = {}) {\n  return color.map(component => (component * intensity) / 255.0);\n}\n\nfunction getLightSourceUniforms({ambientLight, pointLights = [], directionalLights = []}) {\n  const lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach((pointLight, index) => {\n    lightSourceUniforms[`lighting_uPointLight[${index}].color`] = convertColor(pointLight);\n    lightSourceUniforms[`lighting_uPointLight[${index}].position`] = pointLight.position;\n    lightSourceUniforms[`lighting_uPointLight[${index}].attenuation`] = pointLight.attenuation || [\n      1,\n      0,\n      0\n    ];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n\n  directionalLights.forEach((directionalLight, index) => {\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].color`] = convertColor(\n      directionalLight\n    );\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].direction`] =\n      directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n\n  return lightSourceUniforms;\n}\n\n// eslint-disable-next-line complexity\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  // Specify lights separately\n  if ('lightSources' in opts) {\n    const {ambientLight, pointLights, directionalLights} = opts.lightSources || {};\n    const hasLights =\n      ambientLight ||\n      (pointLights && pointLights.length > 0) ||\n      (directionalLights && directionalLights.length > 0);\n\n    if (!hasLights) {\n      return {lighting_uEnabled: false};\n    }\n\n    return Object.assign(\n      {},\n      getLightSourceUniforms({ambientLight, pointLights, directionalLights}),\n      {\n        lighting_uEnabled: true\n      }\n    );\n  }\n\n  // Support for array of lights. Type of light is detected by type field\n  if ('lights' in opts) {\n    const lightSources = {pointLights: [], directionalLights: []};\n    for (const light of opts.lights || []) {\n      switch (light.type) {\n        case 'ambient':\n          // Note: Only uses last ambient light\n          // TODO - add ambient light sources on CPU?\n          lightSources.ambientLight = light;\n          break;\n        case 'directional':\n          lightSources.directionalLights.push(light);\n          break;\n        case 'point':\n          lightSources.pointLights.push(light);\n          break;\n        default:\n        // eslint-disable-next-line\n        // console.warn(light.type);\n      }\n    }\n\n    // Call the `opts.lightSources`` version\n    return getUniforms({lightSources});\n  }\n\n  return {};\n}\n","import \"core-js/modules/es6.typed.float32-array\";\n\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && value.length !== undefined;\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}"],"sourceRoot":""}