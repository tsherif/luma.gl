{"version":3,"sources":["webpack:///../node_modules/math.gl/dist/esm/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/isarray/index.js","webpack:///../modules/engine/src/animation/timeline.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/stream-utils.node.js","webpack:///../node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/core-js/modules/es6.date.to-json.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/validate-loader-version.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/constants.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/merge-options.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.browser.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/check-errors.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-loader-context.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/binary-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-worker-url.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-transfer-list.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-thread.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-pool.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-farm.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/register-loaders.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/select-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/parse.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/image-type.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/get-image-output-format.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-parsers.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-html-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-svg.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/get-first-characters.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/parser-utils/parse-json.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/memory-copy-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/resolve-url.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/get-typed-array.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-scenegraph.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-constants.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-attribute-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_draco_mesh_compression.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_lights_punctual.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_materials_unlit.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/gltf-extensions.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-glb.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/post-process-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/library-utils/library-utils.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-module-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-parser.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/draco-loader.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/headers.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/response.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/fetch.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/index.js","webpack:///../modules/experimental/src/scenegraph/nodes/scenegraph-node.js","webpack:///../modules/experimental/src/scenegraph/nodes/group-node.js","webpack:///../modules/experimental/src/gltf/gltf-animator.js","webpack:///../modules/shadertools/src/modules/pbr/pbr.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-vertex.glsl.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-fragment.glsl.js","webpack:///../modules/experimental/src/scenegraph/nodes/model-node.js","webpack:///../modules/experimental/src/gltf/gltf-material-parser.js","webpack:///../modules/experimental/src/gltf/create-gltf-model.js","webpack:///../modules/experimental/src/gltf/gltf-instantiator.js","webpack:///../modules/experimental/src/gltf/create-gltf-objects.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/parsed-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/generate-url.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/async-deep-map.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/deep-load.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/load-image.js","webpack:///../modules/experimental/src/gltf/gltf-environment.js","webpack:///../examples/showcase/gltf/app.js","webpack:///./templates/showcase/example-gltf.jsx","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/btoa.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/to-array-buffer.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../node_modules/gl-matrix/esm/mat3.js","webpack:///../node_modules/gl-matrix/esm/quat.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/quaternion.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/read-file.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/globals.js","webpack:///./node_modules/core-js/modules/es6.object.define-properties.js","webpack:///../node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/parse-image.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./node_modules/ieee754/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/vec2.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/encoding.js","webpack:///./node_modules/core-js/modules/es6.array.last-index-of.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/decode-data-uri.node.js","webpack:///./node_modules/core-js/modules/_own-keys.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/to-array-buffer.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/encode-image.node.js","webpack:///../modules/shadertools/src/modules/lights/lights.glsl.js","webpack:///../modules/shadertools/src/modules/lights/lights.js","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/common.js"],"names":["assert","condition","message","Error","concat","toString","module","exports","Array","isArray","arr","call","channelHandles","animationHandles","Timeline","this","time","channels","animations","playing","lastEngineTime","addChannel","props","delay","duration","Number","rate","handle","channel","repeat","_setChannelTime","set","removeChannel","delete","animationHandle","animation","detachAnimation","isFinished","get","getTime","setTime","Math","animationData","play","pause","reset","attachAnimation","channelHandle","update","engineTime","offsetTime","concatenateReadStream","readStream","arrayBuffer","ArrayBuffer","string","Promise","resolve","reject","data","chunk","source1","source2","sourceArray1","sourceArray2","temp","Uint8Array","byteLength","on","error","complete","clone","a","out","fromValues","x","y","z","w","copy","add","b","scale","length","sqrt","squaredLength","normalize","len","dot","lerp","t","ax","ay","az","aw","transformMat4","m","transformQuat","q","qx","qy","qz","qw","ix","iy","iz","iw","exactEquals","equals","a0","a1","a2","a3","b0","b1","b2","b3","abs","max","vec","Float32Array","$export","toObject","toPrimitive","P","F","Date","NaN","toJSON","prototype","toISOString","key","O","pv","isFinite","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","Arr","_byteLength","curByte","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","parts","len2","push","encodeChunk","lookup","join","code","indexOf","start","end","num","output","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","value","TypeError","array","byteOffset","undefined","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","checked","buffer","val","type","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","e","typedArraySupport","poolSize","_augment","Symbol","species","Object","defineProperty","configurable","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","arguments","inspect","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","trim","replace","stringtrim","base64clean","src","dst","globals","self","window","document","global_","isBrowser","process","browser","isWorker","importScripts","matches","version","parseFloat","VERSION","validateLoaderVersion","loader","coreVersion","loaderVersion","parseVersion","split","map","major","minor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","source","forEach","getOwnPropertyDescriptors","defineProperties","isLoaderObject","hasParser","parseTextSync","parseSync","parse","parseStream","parseInBatches","loaderOptions","options","id","workerUrl","normalizeLoader","extension","extensions","text","binary","NullLog","_","DEFAULT_LOADER_OPTIONS","CDN","worker","log","ConsoleLog","console","_this$console$log","_len","args","_key","bind","_this$console$info","_len2","_key2","info","_this$console$warn","_len3","_key3","warn","_this$console$error","_len4","_key4","dataType","constructor","globalOptions","mergeOptions","url","mergedOptions","defaultOptions","baseUri","addUrlOptions","mergeNestedFields","isFetchResponse","Response","json","isFileReadable","File","isFile","Blob","isBlob","_AwaitValue","wrapped","AsyncGenerator","gen","front","back","resume","result","wrappedAwait","then","settle","done","err","next","_invoke","request","asyncIterator","FileReadableResponse","fileOrBlob","_fileOrBlob","bodyUsed","_this$_getFileReader","reader","promise","async","_context","prev","_getFileReader","readAsArrayBuffer","abrupt","stop","_this$_getFileReader2","_context2","readAsText","_context3","awrap","sent","JSON","FileReader","onerror","onabort","onload","Headers","name","fetchFileReadable","checkFetchResponseStatus","response","errorMessage","ok","status","t0","ERR_DATA","getUrlFromData","getArrayBufferOrStringFromDataSync","TextDecoder","decode","getArrayBufferOrStringFromData","isArrayBuffer","pathPrefix","fileAliases","resolvePath","filename","alias","startsWith","replacement","fetchFile","fetch","getLoaderContext","context","previousContext","loaders","getLoaders","candidateLoaders","contextLoaders","toArrayBuffer","TextEncoder","encode","workerURLCache","Map","isTransferable","MessagePort","ImageBitmap","OffscreenCanvas","getTransferList","recursive","transfers","defaultOnMessage","_ref","WorkerThread","_ref2","_ref2$name","onMessage","workerSource","endsWith","buildScript","workerURL","blob","URL","createObjectURL","getWorkerURL","Worker","_this","onmessage","event","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","jobQueue","idleQueue","count","isDestroyed","destroy","jobName","_startQueuedJob","_this2","_getAvailableWorker","job","shift","backlog","_onWorkerDone","DEFAULT_MAX_CONCURRENCY","WorkerFarm","workerPools","workerPool","workerName","_getWorkerPool","canParseWithWorker","isSupported","localWorkerUrl","useWorker","parseWithWorker","workerFarm","_workerFarm","onWorkerMessage","setProps","getWorkerFarm","stringify","arraybuffer","t1","registeredLoaders","EXT_PATTERN","DATA_URL_PATTERN","selectLoader","_ref$nothrow","nothrow","_loader","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","normalizeLoaders","mimeType","findLoaderByMimeType","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","findLoaderByExtension","findLoaderByUrl","headers","contentType","findLoaderByContentType","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","testText","testBinary","findLoaderByExamingInitialData","getMagicString","getFirstCharacters","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","mimeTypes","test","some","dataView","DataView","magic","getUint8","autoUrl","parseWithLoader","IMAGE_BITMAP_SUPPORTED","HTML_IMAGE_SUPPORTED","Image","NODE_IMAGE_SUPPORTED","Boolean","_parseImageNode","isImageTypeSupported","getImageOutputFormat","image","getSupportedImageType","BIG_ENDIAN","LITTLE_ENDIAN","mimeTypeMap","isPng","getSize","width","getUint32","height","isJpeg","getUint16","_getJpegMarkers","tableMarkers","Set","sofMarkers","getJpegMarkers","marker","has","isGif","isBmp","getBinaryImageMIMEType","toDataView","entries","_step$value","parseToNodeImage","parseToHTMLImage","objectUrl","webkitURL","loadToHTMLImage","revokeObjectURL","finish","parseToImageBitmap","imagebitmapOptions","imagebitmap","createImageBitmap","parseSVG","textDecoder","xmlText","btoa","parseImage","format","images","decodeHTML","parseJSON","padTo4Bytes","getZeroOffsetArrayBuffer","subArray","copyToArray","targetOffset","sourceArray","srcByteOffset","srcByteLength","resolveUrl","baseUrl","uri","buffers","bufferViewIndex","bufferView","bufferViews","binChunk","TYPES","ARRAY_TO_COMPONENT_TYPE","Int8Array","Int16Array","Uint16Array","Uint32Array","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5120","5121","5122","5123","5125","5126","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","getAccessorTypeFromSize","getComponentTypeFromArray","typedArray","componentType","getAccessorArrayTypeAndLength","accessor","ArrayType","components","bytesPerComponent","GLTFScenegraph","gltf","extras","extensionName","isExtension","getUsedExtensions","find","getRequiredExtensions","getExtension","extensionsRequired","extensionsUsed","index","getObject","bufferIndex","getBufferView","getAccessor","getBuffer","_getAccessorArrayType","registerUsedExtension","addExtension","registerRequiredExtension","_removeStringFromArray","attributes","indices","mode","accessors","_addAttributes","glTFMesh","primitives","meshes","imageData","glTFImage","addBufferView","sourceBuffers","glTFBufferView","glTFAccessor","sourceBuffer","accessorDefaults","round","addAccessor","assign","totalByteLength","targetArray","dstByteOffset","splice","KHR_DRACO_MESH_COMPRESSION","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_UNLIT","getGLTFAccessors","attribute","getGLTFAccessor","gltfAttributeName","_getAccessorData","attributeName","convertTypedArrays","toTypedArray","getAccessorData","_marked","mark","meshPrimitiveIterator","gltfData","scenegraph","promises","primitive","decompressMeshes","getObjectExtension","decompressPrimitive","all","removeExtension","compressMesh","addRequiredExtension","compressedPrimitive","bufferCopy","decodedData","getTypedArrayForBufferView","checkPrimitive","DracoWriter","DracoLoader","compressedData","encodeSync","fauxAccessors","_addFauxAttributes","mesh","wrap","gltfScenegraph","lights","nodes","node","nodeExtension","light","removeObjectExtension","addExtensions","addObjectExtension","materials","material","KHR_materials_unlit","unlit","KHR_draco_mesh_compression","KHR_lights_punctual","decodeExtensions","excludes","_args","excludeExtensions","_DEFAULT_SAMPLER","MAGIC_glTF","GLB_FILE_HEADER_SIZE","GLB_CHUNK_HEADER_SIZE","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED","GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED","LE","isGLB","_options$magic","magic1","parseGLBSync","glb","header","binChunks","chunkLength","chunkFormat","parseJSONChunk","parseBINChunk","strict","parseGLBChunksSync","jsonChunk","jsonText","hasBinChunk","GL_SAMPLER","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","REPEAT","LINEAR","NEAREST_MIPMAP_LINEAR","SAMPLER_PARAMETER_GLTF_TO_GL","magFilter","minFilter","wrapS","wrapT","DEFAULT_SAMPLER","TEXTURE_WRAP_","GLTFPostProcessor","_gltf$buffers","_gltf$images","_gltf$baseUri","_resolveTree","bufView","_resolveBufferView","_resolveImage","samplers","sampler","_resolveSampler","textures","texture","_resolveTexture","_resolveAccessor","_resolveMaterial","_resolveMesh","_resolveNode","skins","skin","_resolveSkin","scenes","scene","_resolveScene","_get","getNode","_this3","children","child","getMesh","camera","getCamera","getSkin","inverseBindMatrices","_this4","getMaterial","normalTexture","getTexture","occlusionTexture","occlustionTexture","emissiveTexture","emmisiveTexture","pbrMetallicRoughness","mr","baseColorTexture","metallicRoughnessTexture","bytesPerElement","getSampler","getImage","parameters","glEnum","_enumSamplerParameter","preloadedImage","perspective","orthographic","postProcessGLTF","postProcess","parseGLTF","arrayBufferOrString","_promise","parseGLTFContainerSync","loadImages","loadBuffers","_glb","loadImage","parsedImage","_context4","GLTFLoader","_options$byteOffset","addDeprecatedGLTFOptions","fetchImages","createImages","fetchBuffers","fetchLinkedResources","decompress","loadDecoderPromise","loadLibraryPromises","loadLibrary","libraryUrl","moduleName","getLibraryUrl","loadLibraryFromFile","library","modules","_response","scriptSource","loadLibraryFromString","eval","script","createElement","appendChild","createTextNode","body","loadDracoDecoderModule","draco3d","draco","createDecoderModule","loadDracoDecoder","DracoDecoderModule","wasmBinary","decoderType","t2","t3","t4","t5","t6","initializeDracoDecoder","onModuleLoaded","GEOMETRY_TYPE","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","POSITION","NORMAL","COLOR","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","1","2","3","4","5","Int32Array","6","9","DracoParser","dracoGeometry","DecoderBuffer","Init","dracoStatus","decoder","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeBufferToMesh","faceCount","num_faces","attributeCount","num_attributes","vertexCount","num_points","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ptr","error_msg","loaderData","extractDRACOGeometry","geometry","getAttributes","positionAttribute","getPositionAttributeMetadata","drawMode","getMeshStripIndices","getMeshFaceIndices","metadata","posTransform","AttributeQuantizationTransform","InitFromAttribute","position","isQuantized","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","numPoints","attributeType","attributeId","GetAttributeId","dracoAttribute","GetAttribute","getAttributeTypedArray","numFaces","dracoArray","DracoInt32Array","GetFaceFromMesh","GetValue","GetTriangleStripsFromMesh","data_type","numComponents","num_components","numValues","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","DracoInt16Array","GetAttributeInt16ForAllPoints","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","WebAssembly","libraryPath","dracoParser","append","getOwnPropertyNames","normalizeName","normalizeValue","oldValue","hasOwnProperty","callback","thisArg","items","iteratorFor","delegateYield","NodeFetchResponse","_url","_ok","_status","_headers","httpResponse","httpHeaders","getHeaders","contentLength","_getContentLength","isDataURL","statSync","_getHeaders","fetchNode","ScenegraphNode","uid","display","rotation","matrix","userData","_setScenegraphNodeProps","setPosition","setRotation","setScale","setMatrix","copyMatrix","setMatrixComponents","updateMatrix","rot","identity","translate","rotateXYZ","getCoordinateUniforms","modelMatrix","worldMatrix","worldInverse","worldInverseTranspose","viewMatrix","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","GroupNode","remove","removeAll","traverse","visitor","accessorToJsArray","slicedArray","helperMatrix","quaternion","interpolate","input","interpolation","animationTime","nextIndex","previousIndex","previousTime","nextTime","stepInterpolate","ratio","path","linearInterpolate","tDiff","p0","outTangent0","inTangent1","p1","m0","m1","cubicsplineInterpolate","GLTFAnimation","startTime","speed","animate","timeMs","gltfNode","rotationMatrix","applyTranslationRotationScale","GLTFAnimator","getAnimations","vs","fs","defines","LIGHTING_FRAGMENT","dependencies","ModelNode","gl","_setModelNodeProps","model","managedResources","resource","draw","setUniforms","setAttributes","updateModuleSettings","GLTFMaterialParser","pbrDebug","imageBasedLightingEnvironment","useTangents","MANUAL_SRGB","SRGB_FAST_APPROXIMATION","hasFeature","FEATURES","USE_TEX_LOD","uniforms","u_Camera","u_MetallicRoughnessValues","generatedTextures","u_DiffuseEnvSampler","u_SpecularEnvSampler","u_brdfLUT","u_ScaleIBLAmbient","u_ScaleDiffBaseMR","u_ScaleFGDSpec","defineIfPresent","parseMaterial","parseTexture","define","gltfTexture","pixelStore","parsePbrMetallicRoughness","u_BaseColorFactor","metallicFactor","roughnessFactor","u_NormalScale","strength","u_OcclusionStrength","u_EmissiveFactor","alphaCutoff","ALPHA_CUTOFF","u_AlphaCutoff","blend","blendEquation","blendFunc","addVersionToShader","isWebGL2","DEFAULT_OPTIONS","modelOptions","GLTFInstantiator","instantiate","createAnimator","createScene","gltfScene","createNode","createMesh","gltfMesh","getVertexCount","createPrimitive","materialParser","createGLTFModel","gltfPrimitive","createAttributes","loadedAttributes","attrName","createAccessor","generated","stride","createSampler","gltfSampler","needsPOT","createGLTFObjects","instantiator","animator","getImageType","getImageTypeOrNull","getImageSize","naturalWidth","naturalHeight","generateUrl","getUrl","urlOptions","asyncDeepMap","tree","func","mapSubtree","mapArray","mapObject","values","_loop","urlArray","_args4","deepLoad","urlTree","load","shallowLoad","imageUrls","getImageUrls","mipLevels","_args2","getMipmappedImageUrls","urls","_getImageSize","mipLevel","lod","getMipLevels","log2","GLTFEnvironment","brdfLutUrl","getTexUrl","specularMipLevels","makeCube","getTextureForFace","pixels","TextureCube","face","mipmaps","getDiffuseEnvSampler","_DiffuseEnvSampler","GL","getSpecularEnvSampler","_SpecularEnvSampler","imageArray","getBrdfTexture","_BrdfTexture","CUBE_FACE_TO_DIRECTION","GLTF_BASE_URL","LIGHT_SOURCES","default","directionalLights","color","direction","intensity","ambient","ambientLight","directional1","directional3","point1far","pointLights","attenuation","point1near","urlOrPromise","AppAnimationLoop","opts","glOptions","webgl1","webgl2","alpha","modelFile","initialZoom","lastX","lastY","getInfo","initalizeEventHandling","pointerIsDown","pointerDown","pointerMove","dX","dY","canvas","loadGLTF","ev","_fileLoaded","timeline","onInitialize","setParameters","depthTest","loadOptions","environment","showSelector","lightSelector","iblSelector","_updateLightSettings","_rebuildModel","_deleteScenes","lumaStats","applyLight","lightSources","onRender","aspect","projectionMatrix","clear","depth","pitch","roll","cameraPos","uView","uProjection","fov","radians","near","far","success","u_MVPMatrix","u_ModelMatrix","u_NormalMatrix","AnimationLoop","animationLoop","infoDiv","Example","render","exampleConfig","pageContext","React","Component","atob","_inherits","subClass","superClass","create","writable","cross","bx","by","bz","transformMat3","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","p","r","cos","sin","rotateY","rotateZ","angle","tempA","tempB","cosine","PI","acos","bufferToArrayBuffer","_slicedToArray","_n","_d","_e","_s","_i","setAxisAngle","axis","rad","s","bw","omega","cosom","sinom","scale0","scale1","fromMat3","fRoot","fTrace","k","vec4","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","vec3","IDENTITY_QUATERNION","_MathArray","Quaternion","check","fromAxisRotation","vectorA","vectorB","invDot","l","_arguments$","_arguments$$start","_arguments","vector","lengthSquared","multiplyLeft","multiplyRight","_construct","Parent","Class","Reflect","construct","sham","Proxy","isNativeReflectConstruct","instance","Function","Vector","ELEMENTS","mathArray","distanceSquared","dist","product","magnitude","vectors","_vectors","_i2","_vectors2","distance","subtract","multiply","multiplyScalar","ORIGIN","_Vector","Vector3","debug","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","isRequestURL","readFile","_decodeDataUri","queryIndex","readFileAsync","getReadFileOptions","promisify","createReadStream","responseType","S","mathgl","config","_cache","fn","Wrapper","getPrototypeOf","setPrototypeOf","_Array","MathArray","arrayOrObject","toArray","to","formatString","printTypes","ai","minVector","maxVector","_scale","addScalar","scalar","validate","valid","parseImageNode","getPixelsAsync","ndarray","shape","layers","checkNumber","checkVector","v","callerName","validateVector","deprecated","method","_getPrototypeOf","o","toIObject","gOPD","createProperty","desc","getDesc","f","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","rt","LN2","Matrix","printRowMajor","row","RANK","col","columnIndex","firstIndex","columnVector","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","fovy","nf","tan","eye","center","up","x0","x1","x2","y0","y1","y2","z0","z1","z2","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","_Matrix","Matrix4","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","xx","yx","yy","zx","zy","zz","wx","wy","wz","left","right","bottom","top","_computeInfinitePerspectiveOffCenter","rl","tb","_eye","_ref2$near","_ref2$far","lr","bt","_ref3$fovy","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","ortho","_ref4","_ref4$fov","_ref4$aspect","_ref4$near","_ref4$far","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","_ref5","_ref6","rx","ry","rz","b12","b20","b21","b22","factor","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","inRange","ToDictionary","isASCIIByte","isASCIICodePoint","end_of_stream","Stream","tokens","reverse","endOfStream","pop","prepend","token","unshift","finished","decoderError","fatal","opt_code_point","encoderError","code_point","getEncoding","label","label_to_encoding","encodings","labels","heading","category","shift_jis_index","big5_index_no_hkscs","encoders","decoders","indexCodePointFor","pointer","indexPointerFor","DEFAULT_ENCODING","_encoding","_decoder","_ignoreBOM","_BOMseen","_error_mode","_do_not_flush","ignoreBOM","_encoder","_fatal","UTF8Decoder","utf8_code_point","utf8_bytes_seen","utf8_bytes_needed","utf8_lower_boundary","utf8_upper_boundary","handler","stream","bite","UTF8Encoder","SingleByteDecoder","SingleByteEncoder","GB18030Decoder","gb18030_first","gb18030_second","gb18030_third","code_point_offset","idx","entry","indexGB18030RangesCodePointFor","lead","GB18030Encoder","gbk_flag","trail","pointer_offset","indexGB18030RangesPointerFor","byte1","byte2","byte3","Big5Decoder","Big5_lead","Big5Encoder","index_","indexBig5PointerFor","EUCJPDecoder","eucjp_jis0212_flag","eucjp_lead","EUCJPEncoder","ISO2022JPDecoder","states","iso2022jp_decoder_state","iso2022jp_decoder_output_state","iso2022jp_lead","iso2022jp_output_flag","state","output_flag","ISO2022JPEncoder","iso2022jp_state","ShiftJISDecoder","Shift_JIS_lead","lead_offset","ShiftJISEncoder","indexShiftJISPointerFor","EUCKRDecoder","euckr_lead","EUCKREncoder","convertCodeUnitToBytes","code_unit","utf16be","UTF16Decoder","utf16_be","utf16_lead_byte","utf16_lead_surrogate","lead_surrogate","UTF16Encoder","XUserDefinedDecoder","XUserDefinedEncoder","input_stream","item","code_points","cp","codePointsToString","opt_string","u","stringToCodePoints","toInteger","toLength","$native","NEGATIVE_ZERO","searchElement","decodeDataUri","dataIndex","decodeURIComponent","gOPN","gOPS","anObject","it","getSymbols","_possibleConstructorReturn","ReferenceError","nodeVersion","_setPrototypeOf","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","encodeImageNode","imageStream","encodeImageToStreamNode","INITIAL_MODULE_OPTIONS","getUniforms","lightSourceUniforms","convertColor","pointLight","directionalLight","getLightSourceUniforms","lighting_uEnabled","MAX_LIGHTS","component","EPSILON","ARRAY_TYPE","RANDOM","random","DEGREES_TO_RADIANS","formatValue","_ref$precision","precision","toPrecision","degrees","epsilon","oldEpsilon","printDegrees"],"mappings":"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","file":"component---templates-showcase-example-gltf-jsx-ddfd673a8bd72ab10d81.js","sourcesContent":["export * from '@math.gl/core';","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}","require(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","let channelHandles = 1;\nlet animationHandles = 1;\n\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {delay = 0, duration = Number.POSITIVE_INFINITY, rate = 1, repeat = 1} = props;\n\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n    this._setChannelTime(channel, this.time);\n    this.channels.set(handle, channel);\n\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n\n    const channels = this.channels.values();\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n    for (const animationData of animations) {\n      const {animation, channel} = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n\n    animation.setTime(this.getTime(channelHandle));\n\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n    // Note(Tarek): Don't loop on final repeat.\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n}\n","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function concatenateReadStream(readStream) {\n  var arrayBuffer = new ArrayBuffer();\n  var string = '';\n  return new Promise(function (resolve, reject) {\n    readStream.data(function (chunk) {\n      if (typeof chunk === 'string') {\n        string += chunk;\n      } else {\n        arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n      }\n    });\n    readStream.on('error', function (error) {\n      return reject(error);\n    });\n    readStream.on('end', function () {\n      if (readStream.complete) {\n        resolve(arrayBuffer || string);\n      } else {\n        reject('The connection was terminated while the message was still being sent');\n      }\n    });\n  });\n}\n\nfunction concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nimport assert from './env-utils/assert';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread({}, loader, {\n      options: _objectSpread({}, loader.options, {}, options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}","import \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();","import { ConsoleLog } from './loader-utils/loggers';\nexport var DEFAULT_LOADER_OPTIONS = {\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  dataType: 'arraybuffer'\n};","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { DEFAULT_LOADER_OPTIONS } from '../constants';\nimport { NullLog } from './loggers';\n\nvar isPureObject = function isPureObject(value) {\n  return value && _typeof(value) === 'object' && value.constructor === {}.constructor;\n};\n\nvar globalOptions = _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n\nexport function setGlobalOptions(options) {\n  globalOptions = mergeOptions(globalOptions, options);\n}\nexport function mergeOptions(loader, options, url) {\n  var loaderDefaultOptions = loader && (loader.DEFAULT_LOADER_OPTIONS || loader.defaultOptions || loader.options || {});\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, globalOptions);\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread({}, mergedOptions[key], {}, options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nvar isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\n\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isFetchResponse = function isFetchResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isFileReadable = function isFileReadable(x) {\n  return isFile(x) || isBlob(x);\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.pipeTo) && isFunction(x.getReader);\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar FileReadableResponse = function () {\n  function FileReadableResponse(fileOrBlob) {\n    _classCallCheck(this, FileReadableResponse);\n\n    this._fileOrBlob = fileOrBlob;\n    this.bodyUsed = false;\n  }\n\n  _createClass(FileReadableResponse, [{\n    key: \"arrayBuffer\",\n    value: function arrayBuffer() {\n      var _this$_getFileReader, reader, promise;\n\n      return _regeneratorRuntime.async(function arrayBuffer$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$_getFileReader = this._getFileReader(), reader = _this$_getFileReader.reader, promise = _this$_getFileReader.promise;\n              reader.readAsArrayBuffer(this._fileOrBlob);\n              return _context.abrupt(\"return\", promise);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"text\",\n    value: function text() {\n      var _this$_getFileReader2, reader, promise;\n\n      return _regeneratorRuntime.async(function text$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$_getFileReader2 = this._getFileReader(), reader = _this$_getFileReader2.reader, promise = _this$_getFileReader2.promise;\n              reader.readAsText(this._fileOrBlob);\n              return _context2.abrupt(\"return\", promise);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"json\",\n    value: function json() {\n      var text;\n      return _regeneratorRuntime.async(function json$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(this.text());\n\n            case 2:\n              text = _context3.sent;\n              return _context3.abrupt(\"return\", JSON.parse(text));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_getFileReader\",\n    value: function _getFileReader() {\n      assert(!this.bodyUsed);\n      this.bodyUsed = true;\n      var reader;\n      var promise = new Promise(function (resolve, reject) {\n        try {\n          reader = new FileReader();\n\n          reader.onerror = function (error) {\n            return reject(new Error(error));\n          };\n\n          reader.onabort = function () {\n            return reject(new Error('Read aborted.'));\n          };\n\n          reader.onload = function () {\n            return resolve(reader.result);\n          };\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return {\n        reader: reader,\n        promise: promise\n      };\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return new Headers({\n        'Content-Length': this._fileOrBlob.size,\n        'Content-Type': this._fileOrBlob.type\n      });\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return 200;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._fileOrBlob.name || '';\n    }\n  }]);\n\n  return FileReadableResponse;\n}();\n\nexport default function fetchFileReadable(fileOrBlob, options) {\n  return Promise.resolve(new FileReadableResponse(fileOrBlob, options));\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nexport function checkFetchResponseStatus(response) {\n  var errorMessage, text;\n  return _regeneratorRuntime.async(function checkFetchResponseStatus$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (response.ok) {\n            _context.next = 12;\n            break;\n          }\n\n          errorMessage = \"fetch failed \".concat(response.status, \" \");\n          _context.prev = 2;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(response.text());\n\n        case 5:\n          text = _context.sent;\n          errorMessage += text;\n          _context.next = 11;\n          break;\n\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](2);\n\n        case 11:\n          throw new Error(errorMessage);\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[2, 9]]);\n}\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(\"fetch failed \".concat(response.status));\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { isFetchResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isFileReadable } from '../../javascript-utils/is-type';\nimport { getStreamIterator } from '../../javascript-utils/stream-utils';\nimport fetchFileReadable from '../fetch/fetch-file.browser';\nimport { checkFetchResponseStatus, checkFetchResponseStatusSync } from './check-errors';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getUrlFromData(data, url) {\n  if (isFetchResponse(data)) {\n    url = url || data.url;\n  } else if (isFileReadable(url)) {\n    url = url.name;\n  }\n\n  return typeof url === 'string' ? url.replace(/\\?.*/, '') : url;\n}\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    var arrayBuffer = data.buffer || data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(data, loader) {\n  var isArrayBuffer;\n  return _regeneratorRuntime.async(function getArrayBufferOrStringFromData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(data);\n\n        case 2:\n          data = _context.sent;\n          isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n          if (!(typeof data === 'string' || isArrayBuffer)) {\n            _context.next = 6;\n            break;\n          }\n\n          return _context.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n        case 6:\n          if (!isFileReadable(data)) {\n            _context.next = 10;\n            break;\n          }\n\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(fetchFileReadable(data));\n\n        case 9:\n          data = _context.sent;\n\n        case 10:\n          if (!isFetchResponse(data)) {\n            _context.next = 23;\n            break;\n          }\n\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(checkFetchResponseStatus(data));\n\n        case 13:\n          if (!loader.binary) {\n            _context.next = 19;\n            break;\n          }\n\n          _context.next = 16;\n          return _regeneratorRuntime.awrap(data.arrayBuffer());\n\n        case 16:\n          _context.t0 = _context.sent;\n          _context.next = 22;\n          break;\n\n        case 19:\n          _context.next = 21;\n          return _regeneratorRuntime.awrap(data.text());\n\n        case 21:\n          _context.t0 = _context.sent;\n\n        case 22:\n          return _context.abrupt(\"return\", _context.t0);\n\n        case 23:\n          throw new Error(ERR_DATA);\n\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function getAsyncIteratorFromData(data) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isFetchResponse(data) && data.body) {\n    checkFetchResponseStatusSync(data);\n    return getStreamIterator(data.body);\n  }\n\n  if (isReadableStream(data)) {\n    return getStreamIterator(data);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIteratorFromData(data);\n}\nexport function getIteratorFromData(data) {\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return data.buffer || data;\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.assign\";\nvar pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      return filename.replace(alias, replacement);\n    }\n  }\n\n  filename += pathPrefix;\n  return filename;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { isFileReadable } from '../../javascript-utils/is-type';\nimport fetchFileReadable from './fetch-file.browser';\nexport function fetchFile(url, options) {\n  return _regeneratorRuntime.async(function fetchFile$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!isFileReadable(url)) {\n            _context.next = 2;\n            break;\n          }\n\n          return _context.abrupt(\"return\", fetchFileReadable(url, options));\n\n        case 2:\n          url = resolvePath(url);\n          return _context.abrupt(\"return\", fetch(url, options));\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { fetchFile } from '../fetch/fetch-file';\nexport function getLoaderContext(context, options, previousContext) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: context.fetch || fetchFile\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}","import { assert } from '@loaders.gl/loader-utils';\nimport { toArrayBuffer as bufferToArrayBuffer } from '../node/utils/to-array-buffer.node';\nexport function toArrayBuffer(data) {\n  if (bufferToArrayBuffer) {\n    data = bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport { assert } from '@loaders.gl/loader-utils';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer || object.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== \"undefined\" && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== \"undefined\" && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfers.push(object);\n  } else if (isTransferable(object.buffer)) {\n    transfers.push(object.buffer);\n  } else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfers);\n    }\n  }\n\n  return transfers;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from './get-transfer-list';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function process(data) {\n      var _this = this;\n\n      return _regeneratorRuntime.async(function process$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                _this.worker.onmessage = function (event) {\n                  return _this.onMessage({\n                    worker: _this.worker,\n                    data: event.data,\n                    resolve: resolve,\n                    reject: reject\n                  });\n                };\n\n                _this.worker.onerror = function (error) {\n                  var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                  if (error.message) {\n                    message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                  }\n\n                  var betterError = new Error(message);\n                  console.error(error);\n                  reject(betterError);\n                };\n\n                var transferList = getTransferList(data);\n\n                _this.worker.postMessage(data, transferList);\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function process(data, jobName) {\n      var _this = this;\n\n      return _regeneratorRuntime.async(function process$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                _this.jobQueue.push({\n                  data: data,\n                  jobName: jobName,\n                  resolve: resolve,\n                  reject: reject\n                });\n\n                _this._startQueuedJob();\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_startQueuedJob\",\n    value: function _startQueuedJob() {\n      var _this2 = this;\n\n      if (!this.jobQueue.length) {\n        return;\n      }\n\n      var worker = this._getAvailableWorker();\n\n      if (!worker) {\n        return;\n      }\n\n      var job = this.jobQueue.shift();\n      this.onDebug({\n        message: 'processing',\n        worker: worker.name,\n        job: job.jobName,\n        backlog: this.jobQueue.length\n      });\n      worker.process(job.data).then(function (result) {\n        return job.resolve(result);\n      })[\"catch\"](function (error) {\n        return job.reject(error);\n      }).then(function () {\n        return _this2._onWorkerDone(worker);\n      });\n    }\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n      } else {\n        this.idleQueue.push(worker);\n\n        this._startQueuedJob();\n      }\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \"-worker-\").concat(this.count, \"-of-\").concat(this.maxConcurrency);\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function process(workerSource, workerName, data) {\n      var workerPool;\n      return _regeneratorRuntime.async(function process$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              workerPool = this._getWorkerPool(workerSource, workerName);\n              return _context.abrupt(\"return\", workerPool.process(data));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: this.onMessage,\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };","import \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { toArrayBuffer } from '../../javascript-utils/binary-utils';\nimport WorkerFarm from '../../worker-utils/worker-farm';\nimport { getTransferList } from '../../worker-utils/get-transfer-list';\nimport { parse } from '../parse';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  return workerFarm.process(workerSource, \"loaders.gl-\".concat(workerName), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(\"2.0.0\"),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_ref2) {\n  var worker, data, resolve, reject, result;\n  return _regeneratorRuntime.async(function onWorkerMessage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n          _context.t0 = data.type;\n          _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n          break;\n\n        case 4:\n          resolve(data.result);\n          return _context.abrupt(\"break\", 19);\n\n        case 6:\n          _context.prev = 6;\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(parse(data.arraybuffer, data.options, data.url));\n\n        case 9:\n          result = _context.sent;\n          worker.postMessage({\n            type: 'parse-done',\n            id: data.id,\n            result: result\n          }, getTransferList(result));\n          _context.next = 16;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t1 = _context[\"catch\"](6);\n          worker.postMessage({\n            type: 'parse-error',\n            id: data.id,\n            message: _context.t1.message\n          });\n\n        case 16:\n          return _context.abrupt(\"break\", 19);\n\n        case 17:\n          reject(data.message);\n          return _context.abrupt(\"break\", 19);\n\n        case 19:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[6, 13]]);\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.is-array\";\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nvar registeredLoaders = [];\nexport function registerLoaders(loaders) {\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!registeredLoaders.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        registeredLoaders.unshift(normalizedLoader);\n      }\n    };\n\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return registeredLoaders;\n}\nexport function _unregisterLoaders() {\n  registeredLoaders = [];\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { getRegisteredLoaders } from './register-loaders';\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nimport { isFetchResponse } from '../javascript-utils/is-type';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nvar DATA_URL_PATTERN = /^data:(.*?)(;|,)/;\nexport function selectLoader(loaders) {\n  var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n      _ref$nothrow = _ref.nothrow,\n      nothrow = _ref$nothrow === void 0 ? false : _ref$nothrow;\n\n  url = url || '';\n\n  if (loaders && !Array.isArray(loaders)) {\n    var _loader = loaders;\n    normalizeLoader(_loader);\n    return _loader;\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n  url = url.replace(/\\?.*/, '');\n  var loader = findLoaderByUrl(loaders, url);\n  loader = loader || findLoaderByContentType(loaders, data);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader) {\n    if (nothrow) {\n      return null;\n    }\n\n    var message = 'No valid loader found';\n\n    if (data) {\n      message += \" for data starting with \\\"\".concat(getFirstCharacters(data), \"\\\"\");\n    }\n\n    if (url) {\n      message += \" for \".concat(url);\n    }\n\n    throw new Error(message);\n  }\n\n  return loader;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url.match(DATA_URL_PATTERN);\n  var mimeType = match && match[1];\n\n  if (mimeType) {\n    return findLoaderByMimeType(loaders, mimeType);\n  }\n\n  match = url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  var loader = extension && findLoaderByExtension(loaders, extension);\n  return loader;\n}\n\nfunction findLoaderByMimeType(loaders, mimeType) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = loaders[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var loader = _step2.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = loaders[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var loader = _step3.value;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = loader.extensions[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var loaderExtension = _step4.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n        _iterator3[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, data) {\n  if (!data || !isFetchResponse(data) || !data.headers) {\n    return null;\n  }\n\n  var contentType = data.headers.get('content-type');\n  return findLoaderByMimeType(loaders, contentType);\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = loaders[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n        _iterator5[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testBinary(data, byteOffset, loader) {\n  var type = Array.isArray(loader.test) ? 'array' : _typeof(loader.test);\n\n  switch (type) {\n    case 'function':\n      return loader.test(data, loader);\n\n    case 'string':\n    case 'array':\n      var tests = Array.isArray(loader.test) ? loader.test : [loader.test];\n      return tests.some(function (test) {\n        var magic = getMagicString(data, byteOffset, test.length);\n        return test === magic;\n      });\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from './loader-utils/normalize-loader';\nimport { mergeOptions } from './loader-utils/merge-options';\nimport { getUrlFromData } from './loader-utils/get-data';\nimport { getArrayBufferOrStringFromData } from './loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from './loader-utils/get-loader-context';\nimport parseWithWorker, { canParseWithWorker } from './loader-utils/parse-with-worker';\nimport { selectLoader } from './select-loader';\nexport function parse(data, loaders, options, context) {\n  var url, autoUrl, candidateLoaders, loader;\n  return _regeneratorRuntime.async(function parse$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n            context = options;\n            options = loaders;\n            loaders = null;\n          }\n\n          url = '';\n\n          if (typeof context === 'string') {\n            url = context;\n            context = null;\n          }\n\n          options = options || {};\n          autoUrl = getUrlFromData(data, url);\n          candidateLoaders = getLoaders(loaders, context);\n          loader = selectLoader(candidateLoaders, autoUrl, data);\n\n          if (loader) {\n            _context.next = 9;\n            break;\n          }\n\n          return _context.abrupt(\"return\", null);\n\n        case 9:\n          options = mergeOptions(loader, options, autoUrl);\n          context = getLoaderContext({\n            url: autoUrl,\n            parse: parse,\n            loaders: candidateLoaders\n          }, options, context);\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(parseWithLoader(loader, data, options, context));\n\n        case 13:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction parseWithLoader(loader, data, options, context) {\n  return _regeneratorRuntime.async(function parseWithLoader$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          validateLoaderVersion(loader);\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(getArrayBufferOrStringFromData(data, loader));\n\n        case 3:\n          data = _context2.sent;\n\n          if (!(loader.parseTextSync && typeof data === 'string')) {\n            _context2.next = 7;\n            break;\n          }\n\n          options.dataType = 'text';\n          return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n        case 7:\n          if (!canParseWithWorker(loader, data, options, context)) {\n            _context2.next = 11;\n            break;\n          }\n\n          _context2.next = 10;\n          return _regeneratorRuntime.awrap(parseWithWorker(loader, data, options, context));\n\n        case 10:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 11:\n          if (!loader.parse) {\n            _context2.next = 15;\n            break;\n          }\n\n          _context2.next = 14;\n          return _regeneratorRuntime.awrap(loader.parse(data, options, context, loader));\n\n        case 14:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 15:\n          assert(!loader.parseSync);\n          return _context2.abrupt(\"return\", assert(false));\n\n        case 17:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { global, isBrowser } from '../utils/globals';\nimport assert from '../utils/assert';\nexport var IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nexport var HTML_IMAGE_SUPPORTED = (typeof Image === \"undefined\" ? \"undefined\" : _typeof(Image)) !== undefined;\nexport var NODE_IMAGE_SUPPORTED = Boolean(global._parseImageNode);\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'html':\n      return HTML_IMAGE_SUPPORTED;\n\n    case 'ndarray':\n      return NODE_IMAGE_SUPPORTED;\n\n    default:\n      throw new Error(\"Unknown image format \".concat(type));\n  }\n}\nexport function getSupportedImageType() {\n  if (isImageTypeSupported('ndarray')) {\n    return 'ndarray';\n  }\n\n  if (isImageTypeSupported('html')) {\n    return 'html';\n  }\n\n  if (isImageTypeSupported('imagebitmap')) {\n    return 'imagebitmap';\n  }\n\n  if (!isBrowser) {\n    throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n  }\n\n  return assert(false);\n}","import { isImageTypeSupported, getSupportedImageType } from '../parsed-image-api/image-type';\nexport default function getImageOutputFormat() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var imageOptions = options.image || {};\n  var type = imageOptions.type || 'auto';\n\n  switch (type) {\n    case 'imagebitmap':\n    case 'html':\n    case 'ndarray':\n      if (!isImageTypeSupported(type)) {\n        throw new Error(\"Requested image type \".concat(type, \" not available in current environment\"));\n      }\n\n      return type;\n\n    case 'auto':\n      return getSupportedImageType();\n\n    default:\n      throw new Error(\"Unknown image format \".concat(type));\n  }\n}","import \"core-js/modules/es6.set\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nvar BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport var mimeTypeMap = new Map([['image/png', {\n  test: isPng,\n  getSize: getPngSize\n}], ['image/jpeg', {\n  test: isJpeg,\n  getSize: getJpegSize\n}], ['image/gif', {\n  test: isGif,\n  getSize: getGifSize\n}], ['image/bmp', {\n  test: isBmp,\n  getSize: getBmpSize\n}]]);\nexport function isPng(dataView) {\n  return dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n}\n\nfunction getPngSize(dataView) {\n  return {\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nexport function isGif(dataView) {\n  return dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n}\n\nfunction getGifSize(dataView) {\n  return {\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function isBmp(dataView) {\n  return dataView.byteLength >= 2 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d;\n}\n\nfunction getBmpSize(dataView) {\n  return {\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nexport function isJpeg(dataView) {\n  return dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2, BIG_ENDIAN) === 0xff;\n}\n\nfunction getJpegSize(dataView) {\n  if (dataView.byteLength < 2 || dataView.getUint16(0, BIG_ENDIAN) !== 0xffd8) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { mimeTypeMap } from './binary-image-parsers';\nvar ERR_INVALID_MIME_TYPE = \"Invalid MIME type. Supported MIME types are: \".concat(Array.from(mimeTypeMap.keys()).join(', '));\nexport function isBinaryImage(arrayBuffer, mimeType) {\n  if (mimeType) {\n    var _getBinaryImageTypeHa = getBinaryImageTypeHandlers(mimeType),\n        test = _getBinaryImageTypeHa.test;\n\n    var dataView = toDataView(arrayBuffer);\n    return test(dataView);\n  }\n\n  return Boolean(getBinaryImageMIMEType(arrayBuffer));\n}\nexport function getBinaryImageMIMEType(arrayBuffer) {\n  var dataView = toDataView(arrayBuffer);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = mimeTypeMap.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          mimeType = _step$value[0],\n          test = _step$value[1].test;\n\n      if (test(dataView)) {\n        return mimeType;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return null;\n}\nexport function getBinaryImageSize(arrayBuffer) {\n  var mimeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  mimeType = mimeType || getBinaryImageMIMEType(arrayBuffer);\n\n  var _getBinaryImageTypeHa2 = getBinaryImageTypeHandlers(mimeType),\n      getSize = _getBinaryImageTypeHa2.getSize;\n\n  var dataView = toDataView(arrayBuffer);\n  var size = getSize(dataView);\n\n  if (!size) {\n    throw new Error(\"invalid image data for type: \".concat(mimeType));\n  }\n\n  return size;\n}\n\nfunction getBinaryImageTypeHandlers(mimeType) {\n  var handlers = mimeTypeMap.get(mimeType);\n\n  if (!handlers) {\n    throw new Error(ERR_INVALID_MIME_TYPE);\n  }\n\n  return handlers;\n}\n\nfunction toDataView(data) {\n  data = data.buffer || data;\n\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer || data);\n  }\n\n  throw new Error('toDataView');\n}","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMIMEType } from '../binary-image-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  assert(global._parseImageNode);\n  var mimeType = getBinaryImageMIMEType(arrayBuffer);\n  return global._parseImageNode(arrayBuffer, mimeType, options);\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nexport default function parseToHTMLImage(arrayBuffer, options) {\n  var mimeType, blob, URL, objectUrl;\n  return _regeneratorRuntime.async(function parseToHTMLImage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          mimeType = 'image/jpeg';\n          blob = new Blob([arrayBuffer], {\n            type: mimeType\n          });\n          URL = self.URL || self.webkitURL;\n          objectUrl = URL.createObjectURL(blob);\n          _context.prev = 4;\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(loadToHTMLImage(objectUrl, options));\n\n        case 7:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 8:\n          _context.prev = 8;\n          URL.revokeObjectURL(objectUrl);\n          return _context.finish(8);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[4,, 8, 11]]);\n}\nexport function loadToHTMLImage(url, options) {\n  var image;\n  return _regeneratorRuntime.async(function loadToHTMLImage$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          image = new Image();\n          image.src = url;\n\n          if (!(options.image && options.image.decode && image.decode)) {\n            _context2.next = 6;\n            break;\n          }\n\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(image.decode());\n\n        case 5:\n          return _context2.abrupt(\"return\", image);\n\n        case 6:\n          _context2.next = 8;\n          return _regeneratorRuntime.awrap(new Promise(function (resolve, reject) {\n            try {\n              image.onload = function () {\n                return resolve(image);\n              };\n\n              image.onerror = function (err) {\n                return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n              };\n            } catch (error) {\n              reject(error);\n            }\n          }));\n\n        case 8:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport default function parseToImageBitmap(arrayBuffer, options) {\n  var blob = new Blob([new Uint8Array(arrayBuffer)]);\n  var imagebitmapOptions = options && options.imagebitmap;\n  return imagebitmapOptions ? createImageBitmap(blob) : createImageBitmap(blob, imagebitmapOptions);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { loadToHTMLImage } from './parse-to-html-image';\nexport default function parseSVG(arrayBuffer, options) {\n  var textDecoder, xmlText, src;\n  return _regeneratorRuntime.async(function parseSVG$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          textDecoder = new TextDecoder();\n          xmlText = textDecoder.decode(arrayBuffer);\n          src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(loadToHTMLImage(src, options));\n\n        case 5:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport getImageOutputFormat from './get-image-output-format';\nimport parseToNodeImage from './parse-to-node-image';\nimport parseToHTMLImage from './parse-to-html-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseSVG from './parse-svg';\nexport default function parseImage(arrayBuffer, options, context) {\n  var _ref, url, format;\n\n  return _regeneratorRuntime.async(function parseImage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if ('image' in options) {\n            options = _objectSpread({}, options, {\n              image: {}\n            });\n          }\n\n          _ref = context || {}, url = _ref.url;\n\n          if (!(url && /\\.svg((\\?|#).*)?$/.test(url))) {\n            _context.next = 7;\n            break;\n          }\n\n          console.warn('@loaders.gl/images: SVG parsing needs to be fixed for 2.0');\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(parseSVG(arrayBuffer, options));\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n          format = getImageOutputFormat(options);\n          _context.t0 = format;\n          _context.next = _context.t0 === 'imagebitmap' ? 11 : _context.t0 === 'html' ? 14 : _context.t0 === 'ndarray' ? 17 : 20;\n          break;\n\n        case 11:\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(parseToImageBitmap(arrayBuffer, options));\n\n        case 13:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 14:\n          _context.next = 16;\n          return _regeneratorRuntime.awrap(parseToHTMLImage(arrayBuffer, options));\n\n        case 16:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 17:\n          _context.next = 19;\n          return _regeneratorRuntime.awrap(parseToNodeImage(arrayBuffer, options));\n\n        case 19:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 20:\n          return _context.abrupt(\"return\", assert(false));\n\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.typed.data-view\";\nimport parseImage from './lib/parsers/parse-image';\nimport { isPng, isGif, isBmp, isJpeg } from './lib/binary-image-api/binary-image-parsers';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vndmicrosofticon', 'image/svg+xml'];\nvar ImageLoader = {\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  test: function test(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    return isJpeg(dataView) || isBmp(dataView) || isGif(dataView) || isPng(dataView);\n  },\n  options: {\n    images: {\n      format: 'auto',\n      decodeHTML: true\n    }\n  }\n};\nexport default ImageLoader;","import \"core-js/modules/es6.typed.data-view\";\nexport function getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\nexport function getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import { getFirstCharacters } from '../binary-utils/get-first-characters';\nexport function parseJSON(string) {\n  try {\n    return JSON.parse(string);\n  } catch (_) {\n    throw new Error(\"Failed to parse JSON from data starting with \\\"\".concat(getFirstCharacters(string), \"\\\"\"));\n  }\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3;\n}\nexport function getZeroOffsetArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  var subArray = byteLength ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  var arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\nexport function copyArrayBuffer(targetBuffer, sourceBuffer, byteOffset) {\n  var byteLength = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : sourceBuffer.byteLength;\n  var targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  var sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\nexport function copyToArray(source, target, targetOffset) {\n  var sourceArray;\n\n  if (source instanceof ArrayBuffer) {\n    sourceArray = new Uint8Array(source);\n  } else {\n    var srcByteOffset = source.byteOffset;\n    var srcByteLength = source.byteLength;\n    sourceArray = new Uint8Array(source.buffer, srcByteOffset, srcByteLength);\n  }\n\n  target.set(sourceArray, targetOffset);\n  return targetOffset + padTo4Bytes(sourceArray.byteLength);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'assert failed: gltf');\n  }\n}","import \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.string.starts-with\";\nexport function resolveUrl(url, options) {\n  var absolute = url.startsWith('data:') || url.startsWith('http:') || url.startsWith('https:');\n\n  if (absolute) {\n    return url;\n  }\n\n  var baseUrl = options.baseUri || options.uri;\n\n  if (!baseUrl) {\n    throw new Error(\"'baseUri' must be provided to resolve relative url \".concat(url));\n  }\n\n  return baseUrl.substr(0, baseUrl.lastIndexOf('/') + 1) + url;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../utils/assert';\nexport function getTypedArrayForBufferView(json, buffers, bufferViewIndex) {\n  var bufferView = json.bufferViews[bufferViewIndex];\n  assert(bufferView);\n  var bufferIndex = bufferView.buffer;\n  var binChunk = buffers[bufferIndex];\n  assert(binChunk);\n  var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n  return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n}\nexport function getTypedArrayForImageData(json, buffers, imageIndex) {\n  var image = json.images[imageIndex];\n  var bufferViewIndex = json.bufferViews[image.bufferView];\n  return getTypedArrayForBufferView(json, buffers, bufferViewIndex);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport assert from '../utils/assert';\nvar TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nvar ARRAY_TO_COMPONENT_TYPE = new Map([[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126]]);\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  var type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  var componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  var bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  var length = accessor.count * components;\n  var byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType: ArrayType,\n    length: length,\n    byteLength: byteLength\n  };\n}","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.find\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getBinaryImageMIMEType } from '@loaders.gl/images';\nimport { padTo4Bytes, copyToArray } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength, getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils/gltf-utils';\n\nvar GLTFScenegraph = function () {\n  function GLTFScenegraph(gltf) {\n    _classCallCheck(this, GLTFScenegraph);\n\n    if (gltf instanceof GLTFScenegraph) {\n      return gltf;\n    }\n\n    if (!gltf) {\n      gltf = {\n        json: {\n          version: 2,\n          buffers: []\n        },\n        buffers: []\n      };\n    }\n\n    this.gltf = gltf;\n    assert(this.gltf.json);\n  }\n\n  _createClass(GLTFScenegraph, [{\n    key: \"getApplicationData\",\n    value: function getApplicationData(key) {\n      var data = this.json[key];\n      return data;\n    }\n  }, {\n    key: \"getExtraData\",\n    value: function getExtraData(key) {\n      var extras = this.json.extras || {};\n      return extras[key];\n    }\n  }, {\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      var isExtension = this.getUsedExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      var extensions = this.json.extensions || {};\n      return isExtension ? extensions[extensionName] || true : null;\n    }\n  }, {\n    key: \"getRequiredExtension\",\n    value: function getRequiredExtension(extensionName) {\n      var isRequired = this.getRequiredExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      return isRequired ? this.getExtension(extensionName) : null;\n    }\n  }, {\n    key: \"getRequiredExtensions\",\n    value: function getRequiredExtensions() {\n      return this.json.extensionsRequired || [];\n    }\n  }, {\n    key: \"getUsedExtensions\",\n    value: function getUsedExtensions() {\n      return this.json.extensionsUsed || [];\n    }\n  }, {\n    key: \"getObjectExtension\",\n    value: function getObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      return extensions[extensionName];\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this.getObject('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this.getObject('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this.getObject('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this.getObject('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this.getObject('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this.getObject('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this.getObject('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this.getObject('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this.getObject('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this.getObject('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this.getObject('buffers', index);\n    }\n  }, {\n    key: \"getObject\",\n    value: function getObject(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        throw new Error(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"getTypedArrayForBufferView\",\n    value: function getTypedArrayForBufferView(bufferView) {\n      bufferView = this.getBufferView(bufferView);\n      var bufferIndex = bufferView.buffer;\n      var binChunk = this.gltf.buffers[bufferIndex];\n      assert(binChunk);\n      var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n      return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"getTypedArrayForAccessor\",\n    value: function getTypedArrayForAccessor(accessor) {\n      accessor = this.getAccessor(accessor);\n      var bufferView = this.getBufferView(accessor.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n\n      var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, bufferView),\n          ArrayType = _getAccessorArrayType.ArrayType,\n          length = _getAccessorArrayType.length;\n\n      var byteOffset = bufferView.byteOffset + accessor.byteOffset;\n      return new ArrayType(arrayBuffer, byteOffset, length);\n    }\n  }, {\n    key: \"getTypedArrayForImageData\",\n    value: function getTypedArrayForImageData(image) {\n      image = this.getAccessor(image);\n      var bufferView = this.getBufferView(image.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n      var byteOffset = bufferView.byteOffset || 0;\n      return new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"addApplicationData\",\n    value: function addApplicationData(key, data) {\n      this.json[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addExtraData\",\n    value: function addExtraData(key, data) {\n      this.json.extras = this.json.extras || {};\n      this.json.extras[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addObjectExtension\",\n    value: function addObjectExtension(object, extensionName, data) {\n      assert(data);\n      object.extensions = object.extensions || {};\n      object.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"removeObjectExtension\",\n    value: function removeObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      delete extensions[extensionName];\n      return this;\n    }\n  }, {\n    key: \"addExtension\",\n    value: function addExtension(extensionName, data) {\n      assert(data);\n      this.json.extensions = this.json.extensions || {};\n      this.json.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"addRequiredExtension\",\n    value: function addRequiredExtension(extensionName, data) {\n      assert(data);\n      this.addExtension(extensionName, data);\n      this.registerRequiredExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"registerUsedExtension\",\n    value: function registerUsedExtension(extensionName) {\n      this.json.extensionsUsed = this.json.extensionsUsed || [];\n\n      if (!this.json.extensionsUsed.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsUsed.push(extensionName);\n      }\n    }\n  }, {\n    key: \"registerRequiredExtension\",\n    value: function registerRequiredExtension(extensionName) {\n      this.registerUsedExtension(extensionName);\n      this.json.extensionsRequired = this.json.extensionsRequired || [];\n\n      if (!this.json.extensionsRequired.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsRequired.push(extensionName);\n      }\n    }\n  }, {\n    key: \"removeExtension\",\n    value: function removeExtension(extensionName) {\n      if (this.json.extensionsRequired) {\n        this._removeStringFromArray(this.json.extensionsRequired, extensionName);\n      }\n\n      if (this.json.extensionsUsed) {\n        this._removeStringFromArray(this.json.extensionsUsed, extensionName);\n      }\n\n      if (this.json.extensions) {\n        delete this.json.extensions[extensionName];\n      }\n    }\n  }, {\n    key: \"setObjectExtension\",\n    value: function setObjectExtension(object, extensionName, data) {\n      var extensions = object.extensions || {};\n      extensions[extensionName] = data;\n    }\n  }, {\n    key: \"addMesh\",\n    value: function addMesh(attributes, indices) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n\n      var accessors = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessors,\n          indices: indices,\n          mode: mode\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addPointCloud\",\n    value: function addPointCloud(attributes) {\n      var accessorIndices = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessorIndices,\n          mode: 0\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(imageData, mimeType) {\n      mimeType = mimeType || getBinaryImageMIMEType(imageData);\n      var bufferViewIndex = this.addBufferView(imageData);\n      var glTFImage = {\n        bufferView: bufferViewIndex,\n        mimeType: mimeType\n      };\n      this.json.images = this.json.images || [];\n      this.json.images.push(glTFImage);\n      return this.json.images.length - 1;\n    }\n  }, {\n    key: \"addBufferView\",\n    value: function addBufferView(buffer) {\n      var byteLength = buffer.byteLength;\n      assert(Number.isFinite(byteLength));\n      this.sourceBuffers = this.sourceBuffers || [];\n      this.sourceBuffers.push(buffer);\n      var glTFBufferView = {\n        buffer: 0,\n        byteOffset: this.byteLength,\n        byteLength: byteLength\n      };\n      this.byteLength += padTo4Bytes(byteLength);\n      this.json.bufferViews = this.json.bufferViews || [];\n      this.json.bufferViews.push(glTFBufferView);\n      return this.json.bufferViews.length - 1;\n    }\n  }, {\n    key: \"addAccessor\",\n    value: function addAccessor(bufferViewIndex, accessor) {\n      var glTFAccessor = {\n        bufferView: bufferViewIndex,\n        type: getAccessorTypeFromSize(accessor.size),\n        componentType: accessor.componentType,\n        count: accessor.count\n      };\n      this.json.accessors = this.json.accessors || [];\n      this.json.accessors.push(glTFAccessor);\n      return this.json.accessors.length - 1;\n    }\n  }, {\n    key: \"addBinaryBuffer\",\n    value: function addBinaryBuffer(sourceBuffer) {\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        size: 3\n      };\n      var bufferViewIndex = this.addBufferView(sourceBuffer);\n      var accessorDefaults = {\n        size: accessor.size,\n        componentType: getComponentTypeFromArray(sourceBuffer),\n        count: Math.round(sourceBuffer.length / accessor.size)\n      };\n      return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n    }\n  }, {\n    key: \"createBinaryChunk\",\n    value: function createBinaryChunk() {\n      if (this.arrayBuffer) {\n        return;\n      }\n\n      var totalByteLength = this.byteLength;\n      var arrayBuffer = new ArrayBuffer(totalByteLength);\n      var targetArray = new Uint8Array(arrayBuffer);\n      var dstByteOffset = 0;\n\n      for (var i = 0; i < this.sourceBuffers.length; i++) {\n        var sourceBuffer = this.sourceBuffers[i];\n        dstByteOffset = copyToArray(sourceBuffer, targetArray, dstByteOffset);\n      }\n\n      this.json.buffers[0].byteLength = totalByteLength;\n      this.arrayBuffer = arrayBuffer;\n      this.sourceBuffers = [];\n    }\n  }, {\n    key: \"_removeStringFromArray\",\n    value: function _removeStringFromArray(array, string) {\n      var found = true;\n\n      while (found) {\n        var index = array.indexOf(string);\n\n        if (index > -1) {\n          array.splice(index, 1);\n        } else {\n          found = false;\n        }\n      }\n    }\n  }, {\n    key: \"json\",\n    get: function get() {\n      return this.gltf.json;\n    }\n  }]);\n\n  return GLTFScenegraph;\n}();\n\nexport { GLTFScenegraph as default };","export var KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nexport var UBER_POINT_CLOUD_EXTENSION = 'UBER_draco_point_cloud_compression';\nexport var KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nexport var KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport function getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\nexport function getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\nexport function getGLEnumFromSamplerParameter(parameter) {\n  var GL_TEXTURE_MAG_FILTER = 0x2800;\n  var GL_TEXTURE_MIN_FILTER = 0x2801;\n  var GL_TEXTURE_WRAP_S = 0x2802;\n  var GL_TEXTURE_WRAP_T = 0x2803;\n  var PARAMETER_MAP = {\n    magFilter: GL_TEXTURE_MAG_FILTER,\n    minFilter: GL_TEXTURE_MIN_FILTER,\n    wrapS: GL_TEXTURE_WRAP_S,\n    wrapT: GL_TEXTURE_WRAP_T\n  };\n  return PARAMETER_MAP[parameter];\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport { getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils';\nexport function getGLTFAccessors(attributes) {\n  var accessors = {};\n\n  for (var name in attributes) {\n    var attribute = attributes[name];\n\n    if (name !== 'indices') {\n      var glTFAccessor = getGLTFAccessor(attribute);\n      accessors[name] = glTFAccessor;\n    }\n  }\n\n  return accessors;\n}\nexport function getGLTFAccessor(attribute, gltfAttributeName) {\n  var _getAccessorData = getAccessorData(attribute, gltfAttributeName),\n      buffer = _getAccessorData.buffer,\n      size = _getAccessorData.size,\n      count = _getAccessorData.count;\n\n  var glTFAccessor = {\n    value: buffer,\n    size: size,\n    bufferView: null,\n    byteOffset: 0,\n    count: count,\n    type: getAccessorTypeFromSize(size),\n    componentType: getComponentTypeFromArray(buffer)\n  };\n  return glTFAccessor;\n}\nexport function getGLTFAttribute(data, gltfAttributeName) {\n  return data.attributes[data.glTFAttributeMap[gltfAttributeName]];\n}\n\nfunction getAccessorData(attribute, attributeName) {\n  var buffer = attribute;\n  var size = 1;\n  var count = 0;\n\n  if (attribute && attribute.value) {\n    buffer = attribute.value;\n    size = attribute.size || 1;\n  }\n\n  if (buffer) {\n    if (!ArrayBuffer.isView(buffer)) {\n      buffer = toTypedArray(buffer, Float32Array);\n    }\n\n    count = buffer.length / size;\n  }\n\n  return {\n    buffer: buffer,\n    size: size,\n    count: count\n  };\n}\n\nfunction toTypedArray(array, ArrayType) {\n  var convertTypedArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!array) {\n    return null;\n  }\n\n  if (Array.isArray(array)) {\n    return new ArrayType(array);\n  }\n\n  if (convertTypedArrays && !(array instanceof ArrayType)) {\n    return new ArrayType(array);\n  }\n\n  return array;\n}","import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(meshPrimitiveIterator);\n\nimport { getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_DRACO_MESH_COMPRESSION } from '../gltf-constants';\nimport { getGLTFAccessors, getGLTFAccessor } from '../gltf-utils/gltf-attribute-utils';\nexport function decode(gltfData, options, context) {\n  var scenegraph, promises, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, primitive;\n\n  return _regeneratorRuntime.async(function decode$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (options.gltf.decompressMeshes) {\n            _context.next = 2;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 2:\n          scenegraph = new GLTFScenegraph(gltfData);\n          promises = [];\n          _iteratorNormalCompletion = true;\n          _didIteratorError = false;\n          _iteratorError = undefined;\n          _context.prev = 7;\n\n          for (_iterator = meshPrimitiveIterator(scenegraph)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            primitive = _step.value;\n\n            if (scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION)) {\n              promises.push(decompressPrimitive(primitive, scenegraph, options, context));\n            }\n          }\n\n          _context.next = 15;\n          break;\n\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](7);\n          _didIteratorError = true;\n          _iteratorError = _context.t0;\n\n        case 15:\n          _context.prev = 15;\n          _context.prev = 16;\n\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n\n        case 18:\n          _context.prev = 18;\n\n          if (!_didIteratorError) {\n            _context.next = 21;\n            break;\n          }\n\n          throw _iteratorError;\n\n        case 21:\n          return _context.finish(18);\n\n        case 22:\n          return _context.finish(15);\n\n        case 23:\n          _context.next = 25;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 25:\n          scenegraph.removeExtension(KHR_DRACO_MESH_COMPRESSION);\n\n        case 26:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[7, 11, 15, 23], [16,, 18, 22]]);\n}\nexport function encode(gltfData) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scenegraph = new GLTFScenegraph(gltfData);\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = (scenegraph.json.meshes || [])[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var mesh = _step2.value;\n      compressMesh(mesh, options);\n      scenegraph.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction decompressPrimitive(primitive, scenegraph, options, context) {\n  var compressedPrimitive, buffer, bufferCopy, parse, decodedData;\n  return _regeneratorRuntime.async(function decompressPrimitive$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          compressedPrimitive = scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION);\n          buffer = scenegraph.getTypedArrayForBufferView(compressedPrimitive.bufferView);\n          bufferCopy = getZeroOffsetArrayBuffer(buffer.buffer, buffer.byteOffset);\n          parse = context.parse;\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(parse(bufferCopy, [], options, context));\n\n        case 6:\n          decodedData = _context2.sent;\n          primitive.attributes = getGLTFAccessors(decodedData.attributes);\n\n          if (decodedData.indices) {\n            primitive.indices = getGLTFAccessor(decodedData.indices);\n          }\n\n          checkPrimitive(primitive);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction compressMesh(attributes, indices) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n  var options = arguments.length > 3 ? arguments[3] : undefined;\n  var context = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (!options.DracoWriter || !options.DracoLoader) {\n    throw new Error('DracoWriter/DracoLoader not available');\n  }\n\n  var compressedData = options.DracoWriter.encodeSync({\n    attributes: attributes\n  });\n  var parseSync = context.parseSync;\n  var decodedData = parseSync({\n    attributes: attributes\n  });\n\n  var fauxAccessors = options._addFauxAttributes(decodedData.attributes);\n\n  var bufferViewIndex = options.addBufferView(compressedData);\n  var glTFMesh = {\n    primitives: [{\n      attributes: fauxAccessors,\n      mode: mode,\n      extensions: _defineProperty({}, KHR_DRACO_MESH_COMPRESSION, {\n        bufferView: bufferViewIndex,\n        attributes: fauxAccessors\n      })\n    }]\n  };\n  return glTFMesh;\n}\n\nfunction checkPrimitive(primitive) {\n  if (!primitive.attributes && Object.keys(primitive.attributes).length > 0) {\n    throw new Error('Empty glTF primitive detected: Draco decompression failure?');\n  }\n}\n\nfunction meshPrimitiveIterator(scenegraph) {\n  var _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, mesh, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, primitive;\n\n  return _regeneratorRuntime.wrap(function meshPrimitiveIterator$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _iteratorNormalCompletion3 = true;\n          _didIteratorError3 = false;\n          _iteratorError3 = undefined;\n          _context3.prev = 3;\n          _iterator3 = (scenegraph.json.meshes || [])[Symbol.iterator]();\n\n        case 5:\n          if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n            _context3.next = 36;\n            break;\n          }\n\n          mesh = _step3.value;\n          _iteratorNormalCompletion4 = true;\n          _didIteratorError4 = false;\n          _iteratorError4 = undefined;\n          _context3.prev = 10;\n          _iterator4 = mesh.primitives[Symbol.iterator]();\n\n        case 12:\n          if (_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done) {\n            _context3.next = 19;\n            break;\n          }\n\n          primitive = _step4.value;\n          _context3.next = 16;\n          return primitive;\n\n        case 16:\n          _iteratorNormalCompletion4 = true;\n          _context3.next = 12;\n          break;\n\n        case 19:\n          _context3.next = 25;\n          break;\n\n        case 21:\n          _context3.prev = 21;\n          _context3.t0 = _context3[\"catch\"](10);\n          _didIteratorError4 = true;\n          _iteratorError4 = _context3.t0;\n\n        case 25:\n          _context3.prev = 25;\n          _context3.prev = 26;\n\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n\n        case 28:\n          _context3.prev = 28;\n\n          if (!_didIteratorError4) {\n            _context3.next = 31;\n            break;\n          }\n\n          throw _iteratorError4;\n\n        case 31:\n          return _context3.finish(28);\n\n        case 32:\n          return _context3.finish(25);\n\n        case 33:\n          _iteratorNormalCompletion3 = true;\n          _context3.next = 5;\n          break;\n\n        case 36:\n          _context3.next = 42;\n          break;\n\n        case 38:\n          _context3.prev = 38;\n          _context3.t1 = _context3[\"catch\"](3);\n          _didIteratorError3 = true;\n          _iteratorError3 = _context3.t1;\n\n        case 42:\n          _context3.prev = 42;\n          _context3.prev = 43;\n\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n\n        case 45:\n          _context3.prev = 45;\n\n          if (!_didIteratorError3) {\n            _context3.next = 48;\n            break;\n          }\n\n          throw _iteratorError3;\n\n        case 48:\n          return _context3.finish(45);\n\n        case 49:\n          return _context3.finish(42);\n\n        case 50:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked, null, [[3, 38, 42, 50], [10, 21, 25, 33], [26,, 28, 32], [43,, 45, 49]]);\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport assert from '../utils/assert';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_LIGHTS_PUNCTUAL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_LIGHTS_PUNCTUAL);\n\n  if (extension) {\n    gltfScenegraph.json.lights = extension.lights;\n    gltfScenegraph.removeExtension(KHR_LIGHTS_PUNCTUAL);\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.nodes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var nodeExtension = gltfScenegraph.getObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n\n      if (nodeExtension) {\n        node.light = nodeExtension.light;\n      }\n\n      gltfScenegraph.removeObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (json.lights) {\n    var extension = gltfScenegraph.addExtensions(KHR_LIGHTS_PUNCTUAL);\n    assert(!extension.lights);\n    extension.lights = json.lights;\n    delete json.lights;\n  }\n\n  if (gltfScenegraph.json.lights) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = gltfScenegraph.json.lights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var light = _step2.value;\n        var node = light.node;\n        gltfScenegraph.addObjectExtension(node, KHR_LIGHTS_PUNCTUAL, light);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    delete gltfScenegraph.json.lights;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_MATERIALS_UNLIT } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.materials || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var material = _step.value;\n      var extension = material.extensions && material.extensions.KHR_materials_unlit;\n\n      if (extension) {\n        material.unlit = true;\n      }\n\n      gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (gltfScenegraph.materials) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = json.materials[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var material = _step2.value;\n\n        if (material.unlit) {\n          delete material.unlit;\n          gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT);\n          gltfScenegraph.addExtensions(KHR_MATERIALS_UNLIT);\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport * as KHR_draco_mesh_compression from './KHR_draco_mesh_compression';\nimport * as KHR_lights_punctual from './KHR_lights_punctual';\nimport * as KHR_materials_unlit from './KHR_materials_unlit';\nexport var EXTENSIONS = {\n  KHR_draco_mesh_compression: KHR_draco_mesh_compression,\n  KHR_lights_punctual: KHR_lights_punctual,\n  KHR_materials_unlit: KHR_materials_unlit\n};\nexport function decodeExtensions(gltf) {\n  var options,\n      context,\n      extensionName,\n      excludes,\n      exclude,\n      extension,\n      _args = arguments;\n  return _regeneratorRuntime.async(function decodeExtensions$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          context = _args.length > 2 ? _args[2] : undefined;\n          options.gltf = options.gltf || {};\n          _context.t0 = _regeneratorRuntime.keys(EXTENSIONS);\n\n        case 4:\n          if ((_context.t1 = _context.t0()).done) {\n            _context.next = 14;\n            break;\n          }\n\n          extensionName = _context.t1.value;\n          excludes = options.gltf.excludeExtensions || {};\n          exclude = extensionName in excludes && !excludes[extensionName];\n\n          if (exclude) {\n            _context.next = 12;\n            break;\n          }\n\n          extension = EXTENSIONS[extensionName];\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(extension.decode(gltf, options, context));\n\n        case 12:\n          _context.next = 4;\n          break;\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport { padTo4Bytes, assert } from '@loaders.gl/loader-utils';\nvar MAGIC_glTF = 0x676c5446;\nvar GLB_FILE_HEADER_SIZE = 12;\nvar GLB_CHUNK_HEADER_SIZE = 8;\nvar GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nvar GLB_CHUNK_TYPE_BIN = 0x004e4942;\nvar GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED = 0;\nvar GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED = 1;\nvar LE = true;\n\nfunction getMagicString(dataView) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n\nexport function isGLB(arrayBuffer) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var dataView = new DataView(arrayBuffer);\n  var _options$magic = options.magic,\n      magic = _options$magic === void 0 ? MAGIC_glTF : _options$magic;\n  var magic1 = dataView.getUint32(byteOffset, false);\n  return magic1 === magic || magic1 === MAGIC_glTF;\n}\nexport default function parseGLBSync(glb, arrayBuffer) {\n  var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var dataView = new DataView(arrayBuffer);\n  glb.type = getMagicString(dataView, byteOffset + 0);\n  glb.version = dataView.getUint32(byteOffset + 4, LE);\n  var byteLength = dataView.getUint32(byteOffset + 8, LE);\n  glb.header = {\n    byteOffset: byteOffset,\n    byteLength: byteLength\n  };\n  assert(glb.version === 2, \"Invalid GLB version \".concat(glb.version, \". Only supports v2.\"));\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  glb.json = {};\n  glb.binChunks = [];\n  parseGLBChunksSync(glb, dataView, byteOffset + GLB_FILE_HEADER_SIZE, options);\n  return byteOffset + glb.header.byteLength;\n}\n\nfunction parseGLBChunksSync(glb, dataView, byteOffset, options) {\n  while (byteOffset + 8 <= glb.header.byteLength) {\n    var chunkLength = dataView.getUint32(byteOffset + 0, LE);\n    var chunkFormat = dataView.getUint32(byteOffset + 4, LE);\n    byteOffset += GLB_CHUNK_HEADER_SIZE;\n\n    switch (chunkFormat) {\n      case GLB_CHUNK_TYPE_JSON:\n        parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_BIN:\n        parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    byteOffset += padTo4Bytes(chunkLength);\n  }\n\n  return byteOffset;\n}\n\nfunction parseJSONChunk(glb, dataView, byteOffset, chunkLength, options) {\n  var jsonChunk = new Uint8Array(dataView.buffer, byteOffset, chunkLength);\n  var textDecoder = new TextDecoder('utf8');\n  var jsonText = textDecoder.decode(jsonChunk);\n  glb.json = JSON.parse(jsonText);\n}\n\nfunction parseBINChunk(glb, dataView, byteOffset, chunkLength, options) {\n  glb.header.hasBinChunk = true;\n  glb.binChunks.push({\n    byteOffset: byteOffset,\n    byteLength: chunkLength,\n    arrayBuffer: dataView.buffer\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _DEFAULT_SAMPLER;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength } from './gltf-utils/gltf-utils';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nvar GL_SAMPLER = {\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  REPEAT: 0x2901,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_LINEAR: 0x2702\n};\nvar SAMPLER_PARAMETER_GLTF_TO_GL = {\n  magFilter: GL_SAMPLER.TEXTURE_MAG_FILTER,\n  minFilter: GL_SAMPLER.TEXTURE_MIN_FILTER,\n  wrapS: GL_SAMPLER.TEXTURE_WRAP_S,\n  wrapT: GL_SAMPLER.TEXTURE_WRAP_T\n};\nvar DEFAULT_SAMPLER = (_DEFAULT_SAMPLER = {}, _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MAG_FILTER, GL_SAMPLER.LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MIN_FILTER, GL_SAMPLER.NEAREST_MIPMAP_LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_S, GL_SAMPLER.REPEAT), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_, GL_SAMPLER.REPEAT), _DEFAULT_SAMPLER);\n\nfunction getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\n\nfunction getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\n\nvar GLTFPostProcessor = function () {\n  function GLTFPostProcessor() {\n    _classCallCheck(this, GLTFPostProcessor);\n  }\n\n  _createClass(GLTFPostProcessor, [{\n    key: \"postProcess\",\n    value: function postProcess(gltf) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var json = gltf.json,\n          _gltf$buffers = gltf.buffers,\n          buffers = _gltf$buffers === void 0 ? [] : _gltf$buffers,\n          _gltf$images = gltf.images,\n          images = _gltf$images === void 0 ? [] : _gltf$images,\n          _gltf$baseUri = gltf.baseUri,\n          baseUri = _gltf$baseUri === void 0 ? '' : _gltf$baseUri;\n      assert(json);\n      this.baseUri = baseUri;\n      this.json = json;\n      this.buffers = buffers;\n      this.images = images;\n\n      this._resolveTree(this.json, options);\n\n      return this.json;\n    }\n  }, {\n    key: \"_resolveTree\",\n    value: function _resolveTree(json) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (json.bufferViews) {\n        json.bufferViews = json.bufferViews.map(function (bufView, i) {\n          return _this._resolveBufferView(bufView, i);\n        });\n      }\n\n      if (json.images) {\n        json.images = json.images.map(function (image, i) {\n          return _this._resolveImage(image, i, options);\n        });\n      }\n\n      if (json.samplers) {\n        json.samplers = json.samplers.map(function (sampler, i) {\n          return _this._resolveSampler(sampler, i);\n        });\n      }\n\n      if (json.textures) {\n        json.textures = json.textures.map(function (texture, i) {\n          return _this._resolveTexture(texture, i);\n        });\n      }\n\n      if (json.accessors) {\n        json.accessors = json.accessors.map(function (accessor, i) {\n          return _this._resolveAccessor(accessor, i, options);\n        });\n      }\n\n      if (json.materials) {\n        json.materials = json.materials.map(function (material, i) {\n          return _this._resolveMaterial(material, i);\n        });\n      }\n\n      if (json.meshes) {\n        json.meshes = json.meshes.map(function (mesh, i) {\n          return _this._resolveMesh(mesh, i);\n        });\n      }\n\n      if (json.nodes) {\n        json.nodes = json.nodes.map(function (node, i) {\n          return _this._resolveNode(node, i);\n        });\n      }\n\n      if (json.skins) {\n        json.skins = json.skins.map(function (skin, i) {\n          return _this._resolveSkin(skin, i);\n        });\n      }\n\n      if (json.scenes) {\n        json.scenes = json.scenes.map(function (scene, i) {\n          return _this._resolveScene(scene, i);\n        });\n      }\n\n      if (json.scene !== undefined) {\n        json.scene = json.scenes[this.json.scene];\n      }\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this._get('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this._get('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this._get('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this._get('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this._get('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this._get('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this._get('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this._get('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this._get('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this._get('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this._get('buffers', index);\n    }\n  }, {\n    key: \"_get\",\n    value: function _get(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        console.warn(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"_resolveScene\",\n    value: function _resolveScene(scene, index) {\n      var _this2 = this;\n\n      scene.id = scene.id || \"scene-\".concat(index);\n      scene.nodes = (scene.nodes || []).map(function (node) {\n        return _this2.getNode(node);\n      });\n      return scene;\n    }\n  }, {\n    key: \"_resolveNode\",\n    value: function _resolveNode(node, index) {\n      var _this3 = this;\n\n      node.id = node.id || \"node-\".concat(index);\n\n      if (node.children) {\n        node.children = node.children.map(function (child) {\n          return _this3.getNode(child);\n        });\n      }\n\n      if (node.mesh !== undefined) {\n        node.mesh = this.getMesh(node.mesh);\n      }\n\n      if (node.camera !== undefined) {\n        node.camera = this.getCamera(node.camera);\n      }\n\n      if (node.skin !== undefined) {\n        node.skin = this.getSkin(node.skin);\n      }\n\n      return node;\n    }\n  }, {\n    key: \"_resolveSkin\",\n    value: function _resolveSkin(skin, index) {\n      skin.id = skin.id || \"skin-\".concat(index);\n      skin.inverseBindMatrices = this.getAccessor(skin.inverseBindMatrices);\n      return skin;\n    }\n  }, {\n    key: \"_resolveMesh\",\n    value: function _resolveMesh(mesh, index) {\n      var _this4 = this;\n\n      mesh.id = mesh.id || \"mesh-\".concat(index);\n\n      if (mesh.primitives) {\n        mesh.primitives = mesh.primitives.map(function (primitive) {\n          primitive = _objectSpread({}, primitive);\n          var attributes = primitive.attributes;\n          primitive.attributes = {};\n\n          for (var attribute in attributes) {\n            primitive.attributes[attribute] = _this4.getAccessor(attributes[attribute]);\n          }\n\n          if (primitive.indices !== undefined) {\n            primitive.indices = _this4.getAccessor(primitive.indices);\n          }\n\n          if (primitive.material !== undefined) {\n            primitive.material = _this4.getMaterial(primitive.material);\n          }\n\n          return primitive;\n        });\n      }\n\n      return mesh;\n    }\n  }, {\n    key: \"_resolveMaterial\",\n    value: function _resolveMaterial(material, index) {\n      material.id = material.id || \"material-\".concat(index);\n\n      if (material.normalTexture) {\n        material.normalTexture = _objectSpread({}, material.normalTexture);\n        material.normalTexture.texture = this.getTexture(material.normalTexture.index);\n      }\n\n      if (material.occlusionTexture) {\n        material.occlustionTexture = _objectSpread({}, material.occlustionTexture);\n        material.occlusionTexture.texture = this.getTexture(material.occlusionTexture.index);\n      }\n\n      if (material.emissiveTexture) {\n        material.emmisiveTexture = _objectSpread({}, material.emmisiveTexture);\n        material.emissiveTexture.texture = this.getTexture(material.emissiveTexture.index);\n      }\n\n      if (material.pbrMetallicRoughness) {\n        material.pbrMetallicRoughness = _objectSpread({}, material.pbrMetallicRoughness);\n        var mr = material.pbrMetallicRoughness;\n\n        if (mr.baseColorTexture) {\n          mr.baseColorTexture = _objectSpread({}, mr.baseColorTexture);\n          mr.baseColorTexture.texture = this.getTexture(mr.baseColorTexture.index);\n        }\n\n        if (mr.metallicRoughnessTexture) {\n          mr.metallicRoughnessTexture = _objectSpread({}, mr.metallicRoughnessTexture);\n          mr.metallicRoughnessTexture.texture = this.getTexture(mr.metallicRoughnessTexture.index);\n        }\n      }\n\n      return material;\n    }\n  }, {\n    key: \"_resolveAccessor\",\n    value: function _resolveAccessor(accessor, index) {\n      accessor.id = accessor.id || \"accessor-\".concat(index);\n\n      if (accessor.bufferView !== undefined) {\n        accessor.bufferView = this.getBufferView(accessor.bufferView);\n      }\n\n      accessor.bytesPerComponent = getBytesFromComponentType(accessor.componentType);\n      accessor.components = getSizeFromAccessorType(accessor.type);\n      accessor.bytesPerElement = accessor.bytesPerComponent * accessor.components;\n\n      if (accessor.bufferView) {\n        var buffer = accessor.bufferView.buffer;\n\n        var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, accessor.bufferView),\n            ArrayType = _getAccessorArrayType.ArrayType,\n            length = _getAccessorArrayType.length;\n\n        var byteOffset = (accessor.bufferView.byteOffset || 0) + buffer.byteOffset;\n        accessor.value = new ArrayType(buffer.arrayBuffer, byteOffset, length);\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"_resolveTexture\",\n    value: function _resolveTexture(texture, index) {\n      texture.id = texture.id || \"texture-\".concat(index);\n      texture.sampler = 'sampler' in texture ? this.getSampler(texture.sampler) : DEFAULT_SAMPLER;\n      texture.source = this.getImage(texture.source);\n      return texture;\n    }\n  }, {\n    key: \"_resolveSampler\",\n    value: function _resolveSampler(sampler, index) {\n      sampler.id = sampler.id || \"sampler-\".concat(index);\n      sampler.parameters = {};\n\n      for (var key in sampler) {\n        var glEnum = this._enumSamplerParameter(key);\n\n        if (glEnum !== undefined) {\n          sampler.parameters[glEnum] = sampler[key];\n        }\n      }\n\n      return sampler;\n    }\n  }, {\n    key: \"_enumSamplerParameter\",\n    value: function _enumSamplerParameter(key) {\n      return SAMPLER_PARAMETER_GLTF_TO_GL[key];\n    }\n  }, {\n    key: \"_resolveImage\",\n    value: function _resolveImage(image, index) {\n      image.id = image.id || \"image-\".concat(index);\n\n      if (image.bufferView !== undefined) {\n        image.bufferView = this.getBufferView(image.bufferView);\n      }\n\n      var preloadedImage = this.images[index];\n\n      if (preloadedImage) {\n        image.image = preloadedImage;\n      }\n\n      return image;\n    }\n  }, {\n    key: \"_resolveBufferView\",\n    value: function _resolveBufferView(bufferView, index) {\n      bufferView.id = bufferView.id || \"bufferView-\".concat(index);\n      var bufferIndex = bufferView.buffer;\n      bufferView.buffer = this.buffers[bufferIndex];\n      var arrayBuffer = this.buffers[bufferIndex].arrayBuffer;\n      var byteOffset = this.buffers[bufferIndex].byteOffset || 0;\n\n      if ('byteOffset' in bufferView) {\n        byteOffset += bufferView.byteOffset;\n      }\n\n      bufferView.data = new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n      return bufferView;\n    }\n  }, {\n    key: \"_resolveCamera\",\n    value: function _resolveCamera(camera, index) {\n      camera.id = camera.id || \"camera-\".concat(index);\n\n      if (camera.perspective) {}\n\n      if (camera.orthographic) {}\n\n      return camera;\n    }\n  }]);\n\n  return GLTFPostProcessor;\n}();\n\nexport default function postProcessGLTF(gltf, options) {\n  return new GLTFPostProcessor().postProcess(gltf, options);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { ImageLoader } from '@loaders.gl/images';\nimport { parseJSON, getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { resolveUrl } from './gltf-utils/resolve-url';\nimport { getTypedArrayForBufferView } from './gltf-utils/get-typed-array';\nimport { decodeExtensions } from './extensions/gltf-extensions';\nimport parseGLBSync, { isGLB } from './parse-glb';\nimport postProcessGLTF from './post-process-gltf';\nexport function isGLTF(arrayBuffer) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var dataView = new DataView(arrayBuffer);\n  var byteOffset = 0;\n  return isGLB(dataView, byteOffset);\n}\nexport function parseGLTF(gltf, arrayBufferOrString) {\n  var byteOffset,\n      options,\n      context,\n      promises,\n      _promise,\n      promise,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function parseGLTF$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          byteOffset = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n          options = _args.length > 3 ? _args[3] : undefined;\n          context = _args.length > 4 ? _args[4] : undefined;\n          parseGLTFContainerSync(gltf, arrayBufferOrString, byteOffset, options);\n          promises = [];\n\n          if (options.gltf.loadImages) {\n            _promise = loadImages(gltf, options, context);\n            promises.push(_promise);\n          }\n\n          if (!options.gltf.loadBuffers) {\n            _context.next = 9;\n            break;\n          }\n\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(loadBuffers(gltf, options, context));\n\n        case 9:\n          promise = decodeExtensions(gltf, options, context);\n          promises.push(promise);\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 13:\n          return _context.abrupt(\"return\", options.gltf.postProcess ? postProcessGLTF(gltf, options) : gltf);\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction parseGLTFContainerSync(gltf, data, byteOffset, options) {\n  if (options.uri) {\n    gltf.baseUri = options.uri;\n  }\n\n  if (data instanceof ArrayBuffer && !isGLB(data, byteOffset, options)) {\n    var textDecoder = new TextDecoder();\n    data = textDecoder.decode(data);\n  }\n\n  if (typeof data === 'string') {\n    gltf.json = parseJSON(data);\n  } else if (data instanceof ArrayBuffer) {\n    var glb = {};\n    byteOffset = parseGLBSync(glb, data, byteOffset, options);\n    assert(glb.type === 'glTF', \"Invalid GLB magic string \".concat(glb.type));\n    gltf._glb = glb;\n    gltf.json = glb.json;\n  } else {\n    assert(false, \"GLTF: must be ArrayBuffer or string\");\n  }\n\n  var buffers = gltf.json.buffers || [];\n  gltf.buffers = new Array(buffers.length).fill(null);\n\n  if (gltf._glb && gltf._glb.header.hasBinChunk) {\n    var binChunks = gltf._glb.binChunks;\n    gltf.buffers[0] = {\n      arrayBuffer: binChunks[0].arrayBuffer,\n      byteOffset: binChunks[0].byteOffset,\n      byteLength: binChunks[0].byteLength\n    };\n  }\n\n  var images = gltf.json.images || [];\n  gltf.images = new Array(images.length).fill({});\n}\n\nfunction loadBuffers(gltf, options, context) {\n  var i, buffer, fetch, uri, response, arrayBuffer;\n  return _regeneratorRuntime.async(function loadBuffers$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          i = 0;\n\n        case 1:\n          if (!(i < gltf.json.buffers.length)) {\n            _context2.next = 18;\n            break;\n          }\n\n          buffer = gltf.json.buffers[i];\n\n          if (!buffer.uri) {\n            _context2.next = 15;\n            break;\n          }\n\n          fetch = context.fetch;\n          assert(fetch);\n          uri = resolveUrl(buffer.uri, options);\n          _context2.next = 9;\n          return _regeneratorRuntime.awrap(fetch(uri));\n\n        case 9:\n          response = _context2.sent;\n          _context2.next = 12;\n          return _regeneratorRuntime.awrap(response.arrayBuffer());\n\n        case 12:\n          arrayBuffer = _context2.sent;\n          gltf.buffers[i] = {\n            arrayBuffer: arrayBuffer,\n            byteOffset: 0,\n            byteLength: arrayBuffer.byteLength\n          };\n          delete buffer.uri;\n\n        case 15:\n          ++i;\n          _context2.next = 1;\n          break;\n\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction loadImages(gltf, options, context) {\n  var images, promises, i;\n  return _regeneratorRuntime.async(function loadImages$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          images = gltf.json.images || [];\n          promises = [];\n\n          for (i = 0; i < images.length; ++i) {\n            promises.push(loadImage(gltf, images[i], i, options, context));\n          }\n\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 5:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 6:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nfunction loadImage(gltf, image, i, options, context) {\n  var fetch, parse, arrayBuffer, uri, response, array, parsedImage;\n  return _regeneratorRuntime.async(function loadImage$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          fetch = context.fetch, parse = context.parse;\n\n          if (!image.uri) {\n            _context4.next = 9;\n            break;\n          }\n\n          uri = resolveUrl(image.uri, options);\n          _context4.next = 5;\n          return _regeneratorRuntime.awrap(fetch(uri));\n\n        case 5:\n          response = _context4.sent;\n          _context4.next = 8;\n          return _regeneratorRuntime.awrap(response.arrayBuffer());\n\n        case 8:\n          arrayBuffer = _context4.sent;\n\n        case 9:\n          if (Number.isFinite(image.bufferView)) {\n            array = getTypedArrayForBufferView(gltf.json, gltf.buffers, image.bufferView);\n            arrayBuffer = getZeroOffsetArrayBuffer(array.buffer, array.byteOffset, array.byteLength);\n          }\n\n          assert(arrayBuffer, 'glTF image has no data');\n          _context4.next = 13;\n          return _regeneratorRuntime.awrap(parse(arrayBuffer, ImageLoader, {}, context));\n\n        case 13:\n          parsedImage = _context4.sent;\n          gltf.images[i] = parsedImage;\n\n        case 15:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { parseGLTF } from './lib/parse-gltf';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : 'latest';\nvar GLTFLoader = {\n  id: 'gltf',\n  name: 'glTF',\n  version: VERSION,\n  extensions: ['gltf', 'glb'],\n  mimeType: 'model/gltf+json',\n  text: true,\n  binary: true,\n  test: 'glTF',\n  parse: parse,\n  options: {\n    gltf: {\n      loadBuffers: true,\n      loadImages: true,\n      decompressMeshes: true,\n      postProcess: true\n    },\n    uri: '',\n    log: console\n  }\n};\nexport default GLTFLoader;\nexport function parse(arrayBuffer) {\n  var options,\n      context,\n      _options,\n      _options$byteOffset,\n      byteOffset,\n      gltf,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function parse$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          context = _args.length > 2 ? _args[2] : undefined;\n          options = _objectSpread({}, GLTFLoader.options, {}, options);\n          options.gltf = _objectSpread({}, GLTFLoader.options.gltf, {}, options.gltf);\n          addDeprecatedGLTFOptions(options);\n          _options = options, _options$byteOffset = _options.byteOffset, byteOffset = _options$byteOffset === void 0 ? 0 : _options$byteOffset;\n          gltf = {};\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(parseGLTF(gltf, arrayBuffer, byteOffset, options, context));\n\n        case 9:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nfunction addDeprecatedGLTFOptions(options) {\n  if ('fetchImages' in options) {\n    options.gltf.loadImages = options.fetchImages;\n  }\n\n  if ('createImages' in options) {\n    options.gltf.loadImages = options.createImages;\n  }\n\n  if ('fetchLinkedResources' in options) {\n    options.gltf.fetchBuffers = options.fetchLinkedResources;\n  }\n\n  if ('decompress' in options) {\n    options.gltf.decompressMeshes = options.decompress;\n  }\n\n  if ('decompress' in options.gltf) {\n    options.gltf.decompressMeshes = options.gltf.decompress;\n  }\n\n  if ('postProcess' in options) {\n    options.gltf.postProcess = options.postProcess;\n  }\n}","import \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { global, isBrowser, isWorker } from '../env-utils/globals';\nimport { requireFromFile, requireFromString } from './require-utils.node';\nimport assert from '../env-utils/assert';\nvar LATEST = 'beta';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : LATEST;\nvar loadLibraryPromises = {};\nexport function loadLibrary(libraryUrl) {\n  var moduleName,\n      options,\n      _args = arguments;\n  return _regeneratorRuntime.async(function loadLibrary$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          moduleName = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n          options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n          if (moduleName) {\n            libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n          }\n\n          loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(loadLibraryPromises[libraryUrl]);\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function getLibraryUrl(library, moduleName, options) {\n  var modules = options.modules || {};\n\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\n\nfunction loadLibraryFromFile(libraryUrl) {\n  var _response, response, scriptSource;\n\n  return _regeneratorRuntime.async(function loadLibraryFromFile$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!libraryUrl.endsWith('wasm')) {\n            _context2.next = 7;\n            break;\n          }\n\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(fetch(libraryUrl));\n\n        case 3:\n          _response = _context2.sent;\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(_response.arrayBuffer());\n\n        case 6:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 7:\n          if (isBrowser) {\n            _context2.next = 9;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", requireFromFile(libraryUrl));\n\n        case 9:\n          if (!isWorker) {\n            _context2.next = 11;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", importScripts(libraryUrl));\n\n        case 11:\n          _context2.next = 13;\n          return _regeneratorRuntime.awrap(fetch(libraryUrl));\n\n        case 13:\n          response = _context2.sent;\n          _context2.next = 16;\n          return _regeneratorRuntime.awrap(response.text());\n\n        case 16:\n          scriptSource = _context2.sent;\n          return _context2.abrupt(\"return\", loadLibraryFromString(scriptSource, libraryUrl));\n\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n\n  var script = document.createElement('script');\n  script.id = id;\n\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n\n  document.body.appendChild(script);\n  return null;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadLibrary, global } from '@loaders.gl/loader-utils';\nvar loadDecoderPromise;\nvar loadEncoderPromise;\nexport function loadDracoDecoderModule(options) {\n  var modules;\n  return _regeneratorRuntime.async(function loadDracoDecoderModule$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          modules = options.modules || {};\n\n          if (!modules.draco3d) {\n            _context.next = 3;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            draco: modules.draco3d.createDecoderModule()\n          });\n\n        case 3:\n          loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(loadDecoderPromise);\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function loadDracoEncoderModule(options) {\n  var modules;\n  return _regeneratorRuntime.async(function loadDracoEncoderModule$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          modules = options.modules || {};\n\n          if (!modules.draco3d) {\n            _context2.next = 3;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            draco: modules.draco3d.createEncoderModule()\n          });\n\n        case 3:\n          loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(loadEncoderPromise);\n\n        case 6:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction loadDracoDecoder(options) {\n  var DracoDecoderModule, wasmBinary, _ref, _ref2;\n\n  return _regeneratorRuntime.async(function loadDracoDecoder$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.t0 = options.draco && options.draco.decoderType;\n          _context3.next = _context3.t0 === 'js' ? 3 : _context3.t0 === 'wasm' ? 7 : 7;\n          break;\n\n        case 3:\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_decoder.js', 'draco', options));\n\n        case 5:\n          DracoDecoderModule = _context3.sent;\n          return _context3.abrupt(\"break\", 23);\n\n        case 7:\n          _context3.t1 = _regeneratorRuntime;\n          _context3.t2 = Promise;\n          _context3.next = 11;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_wasm_wrapper.js', 'draco', options));\n\n        case 11:\n          _context3.t3 = _context3.sent;\n          _context3.next = 14;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_decoder.wasm', 'draco', options));\n\n        case 14:\n          _context3.t4 = _context3.sent;\n          _context3.t5 = [_context3.t3, _context3.t4];\n          _context3.t6 = _context3.t2.all.call(_context3.t2, _context3.t5);\n          _context3.next = 19;\n          return _context3.t1.awrap.call(_context3.t1, _context3.t6);\n\n        case 19:\n          _ref = _context3.sent;\n          _ref2 = _slicedToArray(_ref, 2);\n          DracoDecoderModule = _ref2[0];\n          wasmBinary = _ref2[1];\n\n        case 23:\n          DracoDecoderModule = DracoDecoderModule || global.DracoDecoderModule;\n          _context3.next = 26;\n          return _regeneratorRuntime.awrap(initializeDracoDecoder(DracoDecoderModule, wasmBinary));\n\n        case 26:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 27:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  var options = {};\n\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise(function (resolve) {\n    DracoDecoderModule(_objectSpread({}, options, {\n      onModuleLoaded: function onModuleLoaded(draco) {\n        return resolve({\n          draco: draco\n        });\n      }\n    }));\n  });\n}\n\nfunction loadDracoEncoder(options) {\n  var DracoEncoderModule;\n  return _regeneratorRuntime.async(function loadDracoEncoder$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regeneratorRuntime.awrap(loadLibrary('draco_encoder.js', 'draco', options));\n\n        case 2:\n          DracoEncoderModule = _context4.sent;\n          DracoEncoderModule = DracoEncoderModule || global.DracoEncoderModule;\n          return _context4.abrupt(\"return\", new Promise(function (resolve) {\n            DracoEncoderModule({\n              onModuleLoaded: function onModuleLoaded(draco) {\n                return resolve({\n                  draco: draco\n                });\n              }\n            });\n          }));\n\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\nvar DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\nvar DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\n\nvar DracoParser = function () {\n  function DracoParser(draco) {\n    _classCallCheck(this, DracoParser);\n\n    this.draco = draco;\n  }\n\n  _createClass(DracoParser, [{\n    key: \"destroy\",\n    value: function destroy() {}\n  }, {\n    key: \"destroyGeometry\",\n    value: function destroyGeometry(dracoGeometry) {\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry.dracoGeometry);\n      }\n    }\n  }, {\n    key: \"parseSync\",\n    value: function parseSync(arrayBuffer) {\n      var buffer = new this.draco.DecoderBuffer();\n      buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n      var decoder = new this.draco.Decoder();\n      var data = {};\n      var dracoStatus;\n      var dracoGeometry;\n      var header;\n\n      try {\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n\n        switch (geometryType) {\n          case this.draco.TRIANGULAR_MESH:\n            dracoGeometry = new this.draco.Mesh();\n            dracoStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.TRIANGULAR_MESH,\n              faceCount: dracoGeometry.num_faces(),\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          case this.draco.POINT_CLOUD:\n            dracoGeometry = new this.draco.PointCloud();\n            dracoStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.POINT_CLOUD,\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          default:\n            throw new Error('Unknown DRACO geometry type.');\n        }\n\n        if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n          var message = \"DRACO decompression failed: \".concat(dracoStatus.error_msg());\n\n          if (dracoGeometry) {\n            this.draco.destroy(dracoGeometry);\n          }\n\n          throw new Error(message);\n        }\n\n        data.header = {\n          vertexCount: header.vertexCount\n        };\n        data.loaderData = {\n          header: header\n        };\n        this.extractDRACOGeometry(decoder, dracoGeometry, geometryType, data);\n      } finally {\n        this.draco.destroy(decoder);\n        this.draco.destroy(buffer);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"extractDRACOGeometry\",\n    value: function extractDRACOGeometry(decoder, dracoGeometry, geometryType, geometry) {\n      var attributes = this.getAttributes(decoder, dracoGeometry);\n      var positionAttribute = attributes.POSITION;\n\n      if (!positionAttribute) {\n        throw new Error('DRACO decompressor: No position attribute found.');\n      }\n\n      this.getPositionAttributeMetadata(positionAttribute);\n\n      if (geometryType === this.draco.TRIANGULAR_MESH) {\n        attributes.indices = this.drawMode === 'TRIANGLE_STRIP' ? this.getMeshStripIndices(decoder, dracoGeometry) : this.getMeshFaceIndices(decoder, dracoGeometry);\n        geometry.mode = this.drawMode === 'TRIANGLE_STRIP' ? 5 : 4;\n      } else {\n        geometry.mode = 0;\n      }\n\n      if (attributes.indices) {\n        geometry.indices = {\n          value: attributes.indices,\n          size: 1\n        };\n        delete attributes.indices;\n      }\n\n      geometry.attributes = attributes;\n      return geometry;\n    }\n  }, {\n    key: \"getPositionAttributeMetadata\",\n    value: function getPositionAttributeMetadata(positionAttribute) {\n      this.metadata = this.metadata || {};\n      this.metadata.attributes = this.metadata.attributes || {};\n      var posTransform = new this.draco.AttributeQuantizationTransform();\n\n      if (posTransform.InitFromAttribute(positionAttribute)) {\n        this.metadata.attributes.position.isQuantized = true;\n        this.metadata.attributes.position.maxRange = posTransform.range();\n        this.metadata.attributes.position.numQuantizationBits = posTransform.quantization_bits();\n        this.metadata.attributes.position.minValues = new Float32Array(3);\n\n        for (var i = 0; i < 3; ++i) {\n          this.metadata.attributes.position.minValues[i] = posTransform.min_value(i);\n        }\n      }\n\n      this.draco.destroy(posTransform);\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(decoder, dracoGeometry) {\n      var attributes = {};\n      var numPoints = dracoGeometry.num_points();\n\n      for (var attributeName in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n        var attributeType = this.draco[attributeName];\n        var attributeId = decoder.GetAttributeId(dracoGeometry, attributeType);\n\n        if (attributeId !== -1) {\n          var dracoAttribute = decoder.GetAttribute(dracoGeometry, attributeId);\n\n          var _this$getAttributeTyp = this.getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName),\n              typedArray = _this$getAttributeTyp.typedArray;\n\n          attributes[DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[attributeName]] = {\n            value: typedArray,\n            size: typedArray.length / numPoints\n          };\n        }\n      }\n\n      return attributes;\n    }\n  }, {\n    key: \"getMeshFaceIndices\",\n    value: function getMeshFaceIndices(decoder, dracoGeometry) {\n      var numFaces = dracoGeometry.num_faces();\n      var numIndices = numFaces * 3;\n      var indices = new Uint32Array(numIndices);\n      var dracoArray = new this.draco.DracoInt32Array();\n\n      for (var i = 0; i < numFaces; ++i) {\n        decoder.GetFaceFromMesh(dracoGeometry, i, dracoArray);\n        var index = i * 3;\n        indices[index] = dracoArray.GetValue(0);\n        indices[index + 1] = dracoArray.GetValue(1);\n        indices[index + 2] = dracoArray.GetValue(2);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getMeshStripIndices\",\n    value: function getMeshStripIndices(decoder, dracoGeometry) {\n      var dracoArray = new this.draco.DracoInt32Array();\n      decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      var indices = new Uint32Array(dracoArray.size());\n\n      for (var i = 0; i < dracoArray.size(); ++i) {\n        indices[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getAttributeTypedArray\",\n    value: function getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName) {\n      if (dracoAttribute.ptr === 0) {\n        var message = \"DRACO decode bad attribute \".concat(attributeName);\n        throw new Error(message);\n      }\n\n      var attributeType = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[dracoAttribute.data_type()];\n      var numComponents = dracoAttribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var dracoArray;\n      var typedArray;\n\n      switch (attributeType) {\n        case Float32Array:\n          dracoArray = new this.draco.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Float32Array(numValues);\n          break;\n\n        case Int8Array:\n          dracoArray = new this.draco.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int8Array(numValues);\n          break;\n\n        case Int16Array:\n          dracoArray = new this.draco.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int16Array(numValues);\n          break;\n\n        case Int32Array:\n          dracoArray = new this.draco.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int32Array(numValues);\n          break;\n\n        case Uint8Array:\n          dracoArray = new this.draco.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint8Array(numValues);\n          break;\n\n        case Uint16Array:\n          dracoArray = new this.draco.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint16Array(numValues);\n          break;\n\n        case Uint32Array:\n          dracoArray = new this.draco.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint32Array(numValues);\n          break;\n\n        default:\n          var errorMsg = 'DRACO decoder: unexpected attribute type.';\n          throw new Error(errorMsg);\n      }\n\n      for (var i = 0; i < numValues; i++) {\n        typedArray[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return {\n        typedArray: typedArray,\n        components: numComponents\n      };\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(arrayBuffer, options) {\n      return this.parseSync(arrayBuffer, options);\n    }\n  }]);\n\n  return DracoParser;\n}();\n\nexport { DracoParser as default };","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadDracoDecoderModule } from './lib/draco-module-loader';\nimport DracoParser from './lib/draco-parser';\nvar VERSION = typeof \"2.0.0\" !== 'undefined' ? \"2.0.0\" : 'latest';\nexport var DracoWorkerLoader = {\n  id: 'draco',\n  name: 'Draco',\n  version: VERSION,\n  extensions: ['drc'],\n  mimeType: 'application/octet-stream',\n  binary: true,\n  test: 'DRACO',\n  options: {\n    draco: {\n      decoderType: (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) === 'object' ? 'wasm' : 'js',\n      libraryPath: \"libs/\",\n      workerUrl: \"https://unpkg.com/@loaders.gl/draco@\".concat(VERSION, \"/dist/draco-loader.worker.js\"),\n      localWorkerUrl: \"modules/draco/dist/draco-loader.worker.dev.js\"\n    }\n  }\n};\nexport var DracoLoader = _objectSpread({}, DracoWorkerLoader, {\n  parse: parse\n});\n\nfunction parse(arrayBuffer, options, context, loader) {\n  var _ref, draco, dracoParser;\n\n  return _regeneratorRuntime.async(function parse$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(loadDracoDecoderModule(options));\n\n        case 2:\n          _ref = _context.sent;\n          draco = _ref.draco;\n          dracoParser = new DracoParser(draco);\n          _context.prev = 5;\n          return _context.abrupt(\"return\", dracoParser.parseSync(arrayBuffer, options));\n\n        case 7:\n          _context.prev = 7;\n          dracoParser.destroy();\n          return _context.finish(7);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[5,, 7, 10]]);\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Headers = function () {\n  function Headers(headers) {\n    _classCallCheck(this, Headers);\n\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function (value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function (header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function (name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  _createClass(Headers, [{\n    key: \"append\",\n    value: function append(name, value) {\n      name = normalizeName(name);\n      value = normalizeValue(value);\n      var oldValue = this.map[name];\n      this.map[name] = oldValue ? \"\".concat(oldValue, \", \").concat(value) : value;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      delete this.map[normalizeName(name)];\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      name = normalizeName(name);\n      return this.has(name) ? this.map[name] : null;\n    }\n  }, {\n    key: \"has\",\n    value: function has(name) {\n      return this.map.hasOwnProperty(normalizeName(name));\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.map[normalizeName(name)] = normalizeValue(value);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback, thisArg) {\n      for (var name in this.map) {\n        if (this.map.hasOwnProperty(name)) {\n          callback.call(thisArg, this.map[name], name, this);\n        }\n      }\n    }\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push(name);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      var items = [];\n      this.forEach(function (value) {\n        items.push(value);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"entries\",\n    value: function entries() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push([name, value]);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: Symbol.iterator,\n    value: _regeneratorRuntime.mark(function value() {\n      return _regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.delegateYield(this.entries(), \"t0\", 1);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this);\n    })\n  }]);\n\n  return Headers;\n}();\n\nexport { Headers as default };\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name);\n  }\n\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name');\n  }\n\n  return name.toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value);\n  }\n\n  return value;\n}\n\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function next() {\n      var value = items.shift();\n      return {\n        done: value === undefined,\n        value: value\n      };\n    }\n  };\n\n  iterator[Symbol.iterator] = function () {\n    return iterator;\n  };\n\n  return iterator;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport fs from 'fs';\nimport Headers from './headers.node';\nimport { readFile, createReadStream } from './read-file.node';\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nvar NodeFetchResponse = function () {\n  function NodeFetchResponse(url, options) {\n    _classCallCheck(this, NodeFetchResponse);\n\n    this._url = url;\n    this._ok = true;\n    this._status = 200;\n    this.options = options;\n    this.bodyUsed = false;\n    this._headers = null;\n  }\n\n  _createClass(NodeFetchResponse, [{\n    key: \"arrayBuffer\",\n    value: function arrayBuffer() {\n      var data;\n      return _regeneratorRuntime.async(function arrayBuffer$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.bodyUsed = true;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(readFile(this.url, this.options));\n\n            case 3:\n              data = _context.sent;\n              return _context.abrupt(\"return\", data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"text\",\n    value: function text() {\n      var arrayBuffer, textDecoder;\n      return _regeneratorRuntime.async(function text$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.arrayBuffer());\n\n            case 2:\n              arrayBuffer = _context2.sent;\n              textDecoder = new TextDecoder();\n              return _context2.abrupt(\"return\", textDecoder.decode(arrayBuffer));\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"json\",\n    value: function json() {\n      var text;\n      return _regeneratorRuntime.async(function json$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(this.text());\n\n            case 2:\n              text = _context3.sent;\n              return _context3.abrupt(\"return\", JSON.parse(text));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this);\n    }\n  }, {\n    key: \"_getHeaders\",\n    value: function _getHeaders() {\n      var headers = {};\n\n      if (this.httpResponse) {\n        var httpHeaders = this.httpResponse.getHeaders();\n\n        for (var name in httpHeaders) {\n          var header = headers[name];\n          headers[name] = String(header);\n        }\n      } else {\n        var contentLength = this._getContentLength();\n\n        if (Number.isFinite(contentLength)) {\n          headers['Content-Length'] = contentLength;\n        }\n      }\n\n      return new Headers(headers);\n    }\n  }, {\n    key: \"_getContentLength\",\n    value: function _getContentLength() {\n      if (isRequestURL(this.url)) {\n        return null;\n      } else if (isDataURL(this.url)) {\n        return this.url.length - 'data:'.length;\n      }\n\n      var stats = fs.statSync(this.url);\n      return stats.size;\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return this._ok;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this._status;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._url;\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      this._headers = this._headers || this._getHeaders();\n      return this._headers;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      var url = this.url,\n          options = this.options;\n      this.bodyUsed = true;\n      return createReadStream(url, options);\n    }\n  }]);\n\n  return NodeFetchResponse;\n}();\n\nexport { NodeFetchResponse as default };","import NodeFetchResponse from './response.node';\nexport default function fetchNode(url, options) {\n  return new NodeFetchResponse(url, options);\n}","import { isBrowser, global } from './utils/globals';\nimport { TextDecoder, TextEncoder } from './text-encoding/encoding';\nimport * as base64 from './text-encoding/btoa.node';\nimport HeadersNode from './fetch-node/headers.node';\nimport ResponseNode from './fetch-node/response.node';\nimport fetchNode from './fetch-node/fetch.node';\nimport { encodeImageNode } from './images-node/encode-image.node';\nimport { parseImageNode } from './images-node/parse-image.node';\n\nif (!('TextEncoder' in global) && TextEncoder) {\n  global['TextEncoder'] = TextEncoder;\n}\n\nif (!('TextDecoder' in global) && TextDecoder) {\n  global['TextDecoder'] = TextDecoder;\n}\n\nif (!isBrowser && !('atob' in global) && base64.atob) {\n  global['atob'] = base64.atob;\n}\n\nif (!isBrowser && !('btoa' in global) && base64.btoa) {\n  global['btoa'] = base64.btoa;\n}\n\nif (!isBrowser && !('Headers' in global) && HeadersNode) {\n  global['Headers'] = HeadersNode;\n}\n\nif (!isBrowser && !('Response' in global) && ResponseNode) {\n  global['Response'] = ResponseNode;\n}\n\nif (!isBrowser && !('fetch' in global) && fetchNode) {\n  global['fetch'] = fetchNode;\n}\n\nif (!isBrowser && !('_encodeImageNode' in global) && encodeImageNode) {\n  global['_encodeImageNode'] = encodeImageNode;\n}\n\nif (!isBrowser && !('_parseImageNode' in global) && parseImageNode) {\n  global['_parseImageNode'] = parseImageNode;\n}","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '@luma.gl/webgl';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import {Matrix4} from 'math.gl';\nimport {log} from '@luma.gl/webgl';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class GroupNode extends ScenegraphNode {\n  constructor(props = {}) {\n    props = Array.isArray(props) ? {children: props} : props;\n    const {children = []} = props;\n    log.assert(\n      children.every(child => child instanceof ScenegraphNode),\n      'every child must an instance of ScenegraphNode'\n    );\n    super(props);\n    this.children = children;\n  }\n\n  // Unpacks arrays and nested arrays of children\n  add(...children) {\n    for (const child of children) {\n      if (Array.isArray(child)) {\n        this.add(...child);\n      } else {\n        this.children.push(child);\n      }\n    }\n    return this;\n  }\n\n  remove(child) {\n    const children = this.children;\n    const indexOf = children.indexOf(child);\n    if (indexOf > -1) {\n      children.splice(indexOf, 1);\n    }\n    return this;\n  }\n\n  removeAll() {\n    this.children = [];\n    return this;\n  }\n\n  delete() {\n    this.children.forEach(child => child.delete());\n    this.removeAll();\n    super.delete();\n  }\n\n  traverse(visitor, {worldMatrix = new Matrix4()} = {}) {\n    const modelMatrix = new Matrix4(worldMatrix).multiplyRight(this.matrix);\n\n    for (const child of this.children) {\n      if (child instanceof GroupNode) {\n        child.traverse(visitor, {worldMatrix: modelMatrix});\n      } else {\n        visitor(child, {worldMatrix: modelMatrix});\n      }\n    }\n  }\n}\n","import {assert, log} from '@luma.gl/webgl';\nimport {Matrix4, Quaternion} from 'math.gl';\n\n// TODO: import from loaders.gl?\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\n//\n\nfunction accessorToJsArray(accessor) {\n  if (!accessor._animation) {\n    const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n    const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n    const length = components * accessor.count;\n    const {buffer, byteOffset} = accessor.bufferView.data;\n\n    const array = new ArrayType(buffer, byteOffset + (accessor.byteOffset || 0), length);\n\n    if (components === 1) {\n      accessor._animation = Array.from(array);\n    } else {\n      // Slice array\n      const slicedArray = [];\n      for (let i = 0; i < array.length; i += components) {\n        slicedArray.push(Array.from(array.slice(i, i + components)));\n      }\n      accessor._animation = slicedArray;\n    }\n  }\n\n  return accessor._animation;\n}\n\n// TODO: share with GLTFInstantiator\nconst helperMatrix = new Matrix4();\nfunction applyTranslationRotationScale(gltfNode, node) {\n  node.matrix.identity();\n\n  if (gltfNode.translation) {\n    node.matrix.translate(gltfNode.translation);\n  }\n\n  if (gltfNode.rotation) {\n    const rotationMatrix = helperMatrix.fromQuaternion(gltfNode.rotation);\n    node.matrix.multiplyRight(rotationMatrix);\n  }\n\n  if (gltfNode.scale) {\n    node.matrix.scale(gltfNode.scale);\n  }\n}\n\nconst quaternion = new Quaternion();\nfunction linearInterpolate(target, path, start, stop, ratio) {\n  if (path === 'rotation') {\n    // SLERP when path is rotation\n    quaternion.slerp({start, target: stop, ratio});\n    for (let i = 0; i < quaternion.length; i++) {\n      target[path][i] = quaternion[i];\n    }\n  } else {\n    // regular interpolation\n    for (let i = 0; i < start.length; i++) {\n      target[path][i] = ratio * stop[i] + (1 - ratio) * start[i];\n    }\n  }\n}\n\nfunction cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio: t}) {\n  // TODO: Quaternion might need normalization\n  for (let i = 0; i < target[path].length; i++) {\n    const m0 = outTangent0[i] * tDiff;\n    const m1 = inTangent1[i] * tDiff;\n    target[path][i] =\n      (2 * Math.pow(t, 3) - 3 * Math.pow(t, 2) + 1) * p0[i] +\n      (Math.pow(t, 3) - 2 * Math.pow(t, 2) + t) * m0 +\n      (-2 * Math.pow(t, 3) + 3 * Math.pow(t, 2)) * p1[i] +\n      (Math.pow(t, 3) - Math.pow(t, 2)) * m1;\n  }\n}\n\nfunction stepInterpolate(target, path, value) {\n  for (let i = 0; i < value.length; i++) {\n    target[path][i] = value[i];\n  }\n}\n\nfunction interpolate(time, {input, interpolation, output}, target, path) {\n  const maxTime = input[input.length - 1];\n  const animationTime = time % maxTime;\n\n  const nextIndex = input.findIndex(t => t >= animationTime);\n  const previousIndex = Math.max(0, nextIndex - 1);\n\n  if (!Array.isArray(target[path])) {\n    switch (path) {\n      case 'translation':\n        target[path] = [0, 0, 0];\n        break;\n\n      case 'rotation':\n        target[path] = [0, 0, 0, 1];\n        break;\n\n      case 'scale':\n        target[path] = [1, 1, 1];\n        break;\n\n      default:\n        log.warn(`Bad animation path ${path}`)();\n    }\n  }\n\n  assert(target[path].length === output[previousIndex].length);\n  const previousTime = input[previousIndex];\n  const nextTime = input[nextIndex];\n\n  switch (interpolation) {\n    case 'STEP':\n      stepInterpolate(target, path, output[previousIndex]);\n      break;\n\n    case 'LINEAR':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        linearInterpolate(target, path, output[previousIndex], output[nextIndex], ratio);\n      }\n      break;\n\n    case 'CUBICSPLINE':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        const tDiff = nextTime - previousTime;\n\n        const p0 = output[3 * previousIndex + 1];\n        const outTangent0 = output[3 * previousIndex + 2];\n        const inTangent1 = output[3 * nextIndex + 0];\n        const p1 = output[3 * nextIndex + 1];\n\n        cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio});\n      }\n      break;\n\n    default:\n      log.warn(`Interpolation ${interpolation} not supported`)();\n      break;\n  }\n}\n\nclass GLTFAnimation {\n  constructor(props) {\n    this.startTime = 0;\n    this.playing = true;\n    this.speed = 1;\n\n    Object.assign(this, props);\n  }\n\n  animate(timeMs) {\n    if (!this.playing) {\n      return;\n    }\n\n    const absTime = timeMs / 1000;\n    const time = (absTime - this.startTime) * this.speed;\n\n    this.channels.forEach(({sampler, target, path}) => {\n      interpolate(time, sampler, target, path);\n      applyTranslationRotationScale(target, target._node);\n    });\n  }\n}\n\nexport default class GLTFAnimator {\n  constructor(gltf) {\n    this.animations = gltf.animations.map((animation, index) => {\n      const name = animation.name || `Animation-${index}`;\n      const samplers = animation.samplers.map(({input, interpolation = 'LINEAR', output}) => ({\n        input: accessorToJsArray(gltf.accessors[input]),\n        interpolation,\n        output: accessorToJsArray(gltf.accessors[output])\n      }));\n      const channels = animation.channels.map(({sampler, target}) => ({\n        sampler: samplers[sampler],\n        target: gltf.nodes[target.node],\n        path: target.path\n      }));\n      return new GLTFAnimation({name, channels});\n    });\n  }\n\n  // TODO(Tarek): This should be removed? (deck.gl is using this)\n  animate(time) {\n    this.setTime(time);\n  }\n\n  setTime(time) {\n    this.animations.forEach(animation => animation.animate(time));\n  }\n\n  getAnimations() {\n    return this.animations;\n  }\n}\n","import lights from '../lights/lights';\n\nimport vs from './pbr-vertex.glsl';\nimport fs from './pbr-fragment.glsl';\n\nexport default {\n  name: 'pbr',\n  vs,\n  fs,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  dependencies: [lights]\n};\n","export default `\\\nuniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else // HAS_TANGENTS != 1\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n`;\n","// This fragment shader defines a reference implementation for Physically Based Shading of\n// a microfacet surface material defined by a glTF model.\n//\n// Attribution:\n// MIT license, Copyright (c) 2016-2017 Mohamad Moneimne and Contributors\n\nexport default `\\\n#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n// WebGL 1.0 does not support non-constant in for loops\n// This provides an easy way to handle these cases\n// and still take advantage of WebGL 2.0\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n\n// debugging flags used for shader output of intermediate PBR variables\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n  float NdotL;                  // cos angle between normal and light direction\n  float NdotV;                  // cos angle between normal and view direction\n  float NdotH;                  // cos angle between normal and half vector\n  float LdotH;                  // cos angle between light direction and half vector\n  float VdotH;                  // cos angle between view direction and half vector\n  float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n  float metalness;              // metallic value at the surface\n  vec3 reflectance0;            // full reflectance color (normal incidence angle)\n  vec3 reflectance90;           // reflectance color at grazing angle\n  float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n  vec3 diffuseColor;            // color contribution from diffuse lighting\n  vec3 specularColor;           // color contribution from specular lighting\n  vec3 n;                       // normal at surface point\n  vec3 v;                       // vector from surface point to camera\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else //SRGB_FAST_APPROXIMATION\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif //SRGB_FAST_APPROXIMATION\n  return vec4(linOut,srgbIn.w);;\n#else //MANUAL_SRGB\n  return srgbIn;\n#endif //MANUAL_SRGB\n}\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\nvec3 getNormal()\n{\n  // Retrieve the tangent space matrix\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else // HAS_TANGENTS\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  // The tbn matrix is linearly interpolated, so we need to re-normalize\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0; // resolution of 512x512\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  // retrieve a scale and bias to F0. See [1], Figure 3\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n  // For presentation, this allows us to disable IBL terms\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across\n// the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface\n// for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes\n// from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);             // Vector from surface point to light\n  vec3 h = normalize(l+v);                        // Half vector between both l and v\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  // Calculate the shading terms for the microfacet specular shading model\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n\n  // Calculation of analytical lighting contribution\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n  // Metallic and Roughness material properties are packed together\n  // In glTF, these factors can be specified by fixed scalar values\n  // or from a metallic-roughness map\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n  // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n  // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n  // Roughness is authored as perceptual roughness; as is convention,\n  // convert to material roughness by squaring the perceptual roughness [2].\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n  // The albedo may be defined from a base texture or a flat color\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n  // Compute reflectance.\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n  // For typical incident reflectance range (between 4% to 100%) set the grazing\n  // reflectance to 100% for typical fresnel effect.\n  // For very low reflectance range on highly diffuse objects (below 4%),\n  // incrementally reduce grazing reflecance to 0%.\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();                          // normal at surface point\n  vec3 v = normalize(u_Camera - pbr_vPosition);  // Vector from surface point to camera\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0, // NdotL\n    NdotV,\n    0.0, // NdotH\n    0.0, // LdotH\n    0.0, // VdotH\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  // Apply ambient light\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n\n  // Apply directional light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n\n  // Apply point light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n\n  // Calculate lighting contribution from image based lighting source (IBL)\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n  // Apply optional PBR terms for additional (optional) shading\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n  // This section uses mix to override final color for reference app visualization\n  // of various parameters in the lighting equation.\n#ifdef PBR_DEBUG\n  // TODO: Figure out how to debug multiple lights\n\n  // color = mix(color, F, u_ScaleFGDSpec.x);\n  // color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n  // color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n  // color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n  // color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n`;\n","import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","import {Texture2D, hasFeature, FEATURES, log} from '@luma.gl/webgl';\n\nexport default class GLTFMaterialParser {\n  constructor(\n    gl,\n    {attributes, material, pbrDebug, imageBasedLightingEnvironment, lights, useTangents}\n  ) {\n    this.gl = gl;\n\n    this.defines = {\n      // TODO: Use EXT_sRGB if available (Standard in WebGL 2.0)\n      MANUAL_SRGB: 1,\n      SRGB_FAST_APPROXIMATION: 1\n    };\n\n    if (hasFeature(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n      this.defines.USE_TEX_LOD = 1;\n    }\n\n    this.uniforms = {\n      // TODO: find better values?\n      u_Camera: [0, 0, 0], // Model should override\n\n      u_MetallicRoughnessValues: [1, 1] // Default is 1 and 1\n    };\n\n    this.parameters = {};\n    this.generatedTextures = [];\n\n    if (imageBasedLightingEnvironment) {\n      this.uniforms.u_DiffuseEnvSampler = imageBasedLightingEnvironment.getDiffuseEnvSampler();\n      this.uniforms.u_SpecularEnvSampler = imageBasedLightingEnvironment.getSpecularEnvSampler();\n      this.uniforms.u_brdfLUT = imageBasedLightingEnvironment.getBrdfTexture();\n      this.uniforms.u_ScaleIBLAmbient = [1, 1];\n    }\n\n    if (pbrDebug) {\n      // Override final color for reference app visualization\n      // of various parameters in the lighting equation.\n      this.uniforms.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n      this.uniforms.u_ScaleFGDSpec = [0, 0, 0, 0];\n    }\n\n    this.defineIfPresent(attributes.NORMAL, 'HAS_NORMALS');\n    this.defineIfPresent(attributes.TANGENT && useTangents, 'HAS_TANGENTS');\n    this.defineIfPresent(attributes.TEXCOORD_0, 'HAS_UV');\n\n    this.defineIfPresent(imageBasedLightingEnvironment, 'USE_IBL');\n    this.defineIfPresent(lights, 'USE_LIGHTS');\n    this.defineIfPresent(pbrDebug, 'PBR_DEBUG');\n\n    if (material) {\n      this.parseMaterial(material);\n    }\n  }\n\n  defineIfPresent(value, name) {\n    if (value) {\n      this.defines[name] = 1;\n    }\n  }\n\n  parseTexture(gltfTexture, name, define = null) {\n    const parameters =\n      (gltfTexture.texture &&\n        gltfTexture.texture.sampler &&\n        gltfTexture.texture.sampler.parameters) ||\n      {};\n\n    const texture = new Texture2D(this.gl, {\n      id: gltfTexture.name || gltfTexture.id,\n      parameters,\n      pixelStore: {\n        [this.gl.UNPACK_FLIP_Y_WEBGL]: false\n      },\n      // Texture2D accepts a promise that returns an image as data (Async Textures)\n      data: gltfTexture.texture.source.image\n    });\n    this.uniforms[name] = texture;\n    this.defineIfPresent(define, define);\n    this.generatedTextures.push(texture);\n  }\n\n  parsePbrMetallicRoughness(pbrMetallicRoughness) {\n    if (pbrMetallicRoughness.baseColorTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.baseColorTexture,\n        'u_BaseColorSampler',\n        'HAS_BASECOLORMAP'\n      );\n    }\n    this.uniforms.u_BaseColorFactor = pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1];\n\n    if (pbrMetallicRoughness.metallicRoughnessTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.metallicRoughnessTexture,\n        'u_MetallicRoughnessSampler',\n        'HAS_METALROUGHNESSMAP'\n      );\n    }\n    const {metallicFactor = 1, roughnessFactor = 1} = pbrMetallicRoughness;\n    this.uniforms.u_MetallicRoughnessValues = [metallicFactor, roughnessFactor];\n  }\n\n  parseMaterial(material) {\n    if (material.pbrMetallicRoughness) {\n      this.parsePbrMetallicRoughness(material.pbrMetallicRoughness);\n    }\n    if (material.normalTexture) {\n      this.parseTexture(material.normalTexture, 'u_NormalSampler', 'HAS_NORMALMAP');\n\n      const {scale = 1} = material.normalTexture;\n      this.uniforms.u_NormalScale = scale;\n    }\n    if (material.occlusionTexture) {\n      this.parseTexture(material.occlusionTexture, 'u_OcclusionSampler', 'HAS_OCCLUSIONMAP');\n\n      const {strength = 1} = material.occlusionTexture;\n      this.uniforms.u_OcclusionStrength = strength;\n    }\n    if (material.emissiveTexture) {\n      this.parseTexture(material.emissiveTexture, 'u_EmissiveSampler', 'HAS_EMISSIVEMAP');\n      this.uniforms.u_EmissiveFactor = material.emissiveFactor || [0, 0, 0];\n    }\n    if (material.alphaMode === 'MASK') {\n      const {alphaCutoff = 0.5} = material;\n      this.defines.ALPHA_CUTOFF = 1;\n      this.uniforms.u_AlphaCutoff = alphaCutoff;\n    } else if (material.alphaMode === 'BLEND') {\n      log.warn('BLEND alphaMode might not work well because it requires mesh sorting')();\n      Object.assign(this.parameters, {\n        blend: true,\n        blendEquation: this.gl.FUNC_ADD,\n        blendFunc: [\n          this.gl.SRC_ALPHA,\n          this.gl.ONE_MINUS_SRC_ALPHA,\n          this.gl.ONE,\n          this.gl.ONE_MINUS_SRC_ALPHA\n        ]\n      });\n    }\n  }\n}\n","import {isWebGL2} from '@luma.gl/gltools';\nimport {log} from '@luma.gl/webgl';\nimport {pbr} from '@luma.gl/shadertools';\nimport {ModelNode} from '../scenegraph';\nimport GLTFMaterialParser from './gltf-material-parser';\n\nconst vs = `\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n`;\n\nconst fs = `\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n`;\n\nfunction addVersionToShader(gl, source) {\n  if (isWebGL2(gl)) {\n    return `#version 300 es\\n${source}`;\n  }\n\n  return source;\n}\n\nexport default function createGLTFModel(gl, options) {\n  const {id, drawMode, vertexCount, attributes, modelOptions} = options;\n  const materialParser = new GLTFMaterialParser(gl, options);\n\n  log.info(4, 'createGLTFModel defines: ', materialParser.defines)();\n\n  // Calculate managedResources\n  // TODO: Implement resource management logic that will\n  // not deallocate resources/textures/buffers that are shared\n  const managedResources = [];\n  managedResources.push(...materialParser.generatedTextures);\n  managedResources.push(...Object.values(attributes).map(attribute => attribute.buffer));\n\n  const model = new ModelNode(\n    gl,\n    Object.assign(\n      {\n        id,\n        drawMode,\n        vertexCount,\n        modules: [pbr],\n        defines: materialParser.defines,\n        parameters: materialParser.parameters,\n        vs: addVersionToShader(gl, vs),\n        fs: addVersionToShader(gl, fs),\n        managedResources\n      },\n      modelOptions\n    )\n  );\n\n  model.setProps({attributes});\n  model.setUniforms(materialParser.uniforms);\n\n  return model;\n}\n","import {Matrix4} from 'math.gl';\nimport {Buffer, Accessor, log} from '@luma.gl/webgl';\nimport {GroupNode} from '../scenegraph/';\n\nimport GLTFAnimator from './gltf-animator';\nimport createGLTFModel from './create-gltf-model';\n\n// TODO: import {ATTRIBUTE_TYPE_TO_COMPONENTS} from '@loaders.gl/gltf';\nconst ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nconst DEFAULT_OPTIONS = {\n  modelOptions: {},\n  pbrDebug: false,\n  imageBasedLightingEnvironment: null,\n  lights: true,\n  useTangents: false\n};\n\n// GLTF instantiator for luma.gl\n// Walks the parsed and resolved glTF structure and builds a luma.gl scenegraph\nexport default class GLTFInstantiator {\n  constructor(gl, options = {}) {\n    this.gl = gl;\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  instantiate(gltf) {\n    this.gltf = gltf;\n    const scenes = (gltf.scenes || []).map(scene => this.createScene(scene));\n    return scenes;\n  }\n\n  createAnimator() {\n    if (Array.isArray(this.gltf.animations)) {\n      return new GLTFAnimator(this.gltf);\n    }\n\n    return null;\n  }\n\n  createScene(gltfScene) {\n    const gltfNodes = gltfScene.nodes || [];\n    const nodes = gltfNodes.map(node => this.createNode(node));\n    const scene = new GroupNode({\n      id: gltfScene.name || gltfScene.id,\n      children: nodes\n    });\n    return scene;\n  }\n\n  createNode(gltfNode) {\n    if (!gltfNode._node) {\n      const gltfChildren = gltfNode.children || [];\n      const children = gltfChildren.map(child => this.createNode(child));\n\n      // Node can have children nodes and meshes at the same time\n      if (gltfNode.mesh) {\n        children.push(this.createMesh(gltfNode.mesh));\n      }\n\n      const node = new GroupNode({\n        id: gltfNode.name || gltfNode.id,\n        children\n      });\n\n      if (gltfNode.matrix) {\n        node.setMatrix(gltfNode.matrix);\n      } else {\n        node.matrix.identity();\n\n        if (gltfNode.translation) {\n          node.matrix.translate(gltfNode.translation);\n        }\n\n        if (gltfNode.rotation) {\n          const rotationMatrix = new Matrix4().fromQuaternion(gltfNode.rotation);\n          node.matrix.multiplyRight(rotationMatrix);\n        }\n\n        if (gltfNode.scale) {\n          node.matrix.scale(gltfNode.scale);\n        }\n      }\n      gltfNode._node = node;\n    }\n\n    return gltfNode._node;\n  }\n\n  createMesh(gltfMesh) {\n    // TODO: avoid changing the gltf\n    if (!gltfMesh._mesh) {\n      const gltfPrimitives = gltfMesh.primitives || [];\n      const primitives = gltfPrimitives.map((gltfPrimitive, i) =>\n        this.createPrimitive(gltfPrimitive, i, gltfMesh)\n      );\n      const mesh = new GroupNode({\n        id: gltfMesh.name || gltfMesh.id,\n        children: primitives\n      });\n      gltfMesh._mesh = mesh;\n    }\n\n    return gltfMesh._mesh;\n  }\n\n  getVertexCount(attributes) {\n    // TODO: implement this\n    log.warn('getVertexCount() not found')();\n  }\n\n  createPrimitive(gltfPrimitive, i, gltfMesh) {\n    return createGLTFModel(\n      this.gl,\n      Object.assign(\n        {\n          id: gltfPrimitive.name || `${gltfMesh.name || gltfMesh.id}-primitive-${i}`,\n          drawMode: gltfPrimitive.mode || 4,\n          vertexCount: gltfPrimitive.indices\n            ? gltfPrimitive.indices.count\n            : this.getVertexCount(gltfPrimitive.attributes),\n          attributes: this.createAttributes(gltfPrimitive.attributes, gltfPrimitive.indices),\n          material: gltfPrimitive.material\n        },\n        this.options\n      )\n    );\n  }\n\n  createAttributes(attributes, indices) {\n    const loadedAttributes = {};\n\n    Object.keys(attributes).forEach(attrName => {\n      loadedAttributes[attrName] = this.createAccessor(\n        attributes[attrName],\n        this.createBuffer(attributes[attrName], this.gl.ARRAY_BUFFER)\n      );\n    });\n\n    if (indices) {\n      loadedAttributes.indices = this.createAccessor(\n        indices,\n        this.createBuffer(indices, this.gl.ELEMENT_ARRAY_BUFFER)\n      );\n    }\n\n    log.info(4, 'glTF Attributes', {attributes, indices, generated: loadedAttributes})();\n\n    return loadedAttributes;\n  }\n\n  createBuffer(attribute, target) {\n    if (!attribute.bufferView) {\n      // Draco decoded files do not have a bufferView\n      attribute.bufferView = {};\n    }\n\n    const {bufferView} = attribute;\n    if (!bufferView.lumaBuffers) {\n      bufferView.lumaBuffers = {};\n    }\n\n    if (!bufferView.lumaBuffers[target]) {\n      bufferView.lumaBuffers[target] = new Buffer(this.gl, {\n        id: `from-${bufferView.id}`,\n        // Draco decoded files have attribute.value\n        data: bufferView.data || attribute.value,\n        target\n      });\n    }\n\n    return bufferView.lumaBuffers[target];\n  }\n\n  createAccessor(accessor, buffer) {\n    return new Accessor({\n      buffer,\n      offset: accessor.byteOffset || 0,\n      stride: accessor.bufferView.byteStride || 0,\n      type: accessor.componentType,\n      size: ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type]\n    });\n  }\n\n  // TODO - create sampler in WebGL2\n  createSampler(gltfSampler) {\n    return gltfSampler;\n  }\n\n  // Helper methods (move to GLTFLoader.resolve...?)\n\n  needsPOT() {\n    // Has a wrapping mode (either wrapS or wrapT) equal to REPEAT or MIRRORED_REPEAT, or\n    // Has a minification filter (minFilter) that uses mipmapping\n    // (NEAREST_MIPMAP_NEAREST, NEAREST_MIPMAP_LINEAR,\n    // LINEAR_MIPMAP_NEAREST, or LINEAR_MIPMAP_LINEAR).\n    return false;\n  }\n}\n","import GLTFInstantiator from './gltf-instantiator';\n\nexport default function createGLTFObjects(gl, gltf, options) {\n  const instantiator = new GLTFInstantiator(gl, options);\n  const scenes = instantiator.instantiate(gltf);\n  const animator = instantiator.createAnimator();\n\n  return {scenes, animator};\n}\n","import \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n    case 'ndarray':\n      return {\n        width: image.width,\n        height: image.height\n      };\n\n    case 'html':\n      return {\n        width: image.naturalWidth,\n        height: image.naturalHeight\n      };\n\n    default:\n      return assert(false);\n  }\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n    case 'html':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      var imageData = context.getImageData(0, 0, image.width, image.height);\n      return imageData.data;\n\n    case 'ndarray':\n      return image.data;\n\n    default:\n      return assert(false);\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'html';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'ndarray';\n  }\n\n  if (Array.isArray(image)) {\n    return 'ndarray';\n  }\n\n  return null;\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nexport function generateUrl(getUrl, options, urlOptions) {\n  var url = getUrl;\n\n  if (typeof getUrl === 'function') {\n    url = getUrl(_objectSpread({}, options, {}, urlOptions));\n  }\n\n  assert(typeof url === 'string');\n  var baseUrl = options.baseUrl;\n\n  if (baseUrl) {\n    url = baseUrl[baseUrl.length - 1] === '/' ? \"\".concat(baseUrl).concat(url) : \"\".concat(baseUrl, \"/\").concat(url);\n  }\n\n  return url;\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isObject = function isObject(value) {\n  return value && _typeof(value) === 'object';\n};\n\nexport function asyncDeepMap(tree, func) {\n  var options,\n      _args = arguments;\n  return _regeneratorRuntime.async(function asyncDeepMap$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(mapSubtree(tree, func, options));\n\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function mapSubtree(object, func, options) {\n  var url;\n  return _regeneratorRuntime.async(function mapSubtree$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!Array.isArray(object)) {\n            _context2.next = 4;\n            break;\n          }\n\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(mapArray(object, func, options));\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 4:\n          if (!isObject(object)) {\n            _context2.next = 8;\n            break;\n          }\n\n          _context2.next = 7;\n          return _regeneratorRuntime.awrap(mapObject(object, func, options));\n\n        case 7:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 8:\n          url = object;\n          _context2.next = 11;\n          return _regeneratorRuntime.awrap(func(url, options));\n\n        case 11:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction mapObject(object, func, options) {\n  var promises, values, _loop, key;\n\n  return _regeneratorRuntime.async(function mapObject$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          promises = [];\n          values = {};\n\n          _loop = function _loop(key) {\n            var url = object[key];\n            var promise = mapSubtree(url, func, options).then(function (value) {\n              values[key] = value;\n            });\n            promises.push(promise);\n          };\n\n          for (key in object) {\n            _loop(key);\n          }\n\n          _context3.next = 6;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 6:\n          return _context3.abrupt(\"return\", values);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nfunction mapArray(urlArray, func) {\n  var options,\n      promises,\n      _args4 = arguments;\n  return _regeneratorRuntime.async(function mapArray$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          options = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n          promises = urlArray.map(function (url) {\n            return mapSubtree(url, func, options);\n          });\n          _context4.next = 4;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 4:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  });\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { asyncDeepMap } from './async-deep-map';\nexport function deepLoad(urlTree, load, options) {\n  return _regeneratorRuntime.async(function deepLoad$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(asyncDeepMap(urlTree, function (url) {\n            return shallowLoad(url, load, options);\n          }));\n\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function shallowLoad(url, load, options) {\n  var response, arrayBuffer;\n  return _regeneratorRuntime.async(function shallowLoad$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(fetch(url, options.fetch));\n\n        case 2:\n          response = _context2.sent;\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(response.arrayBuffer());\n\n        case 5:\n          arrayBuffer = _context2.sent;\n          _context2.next = 8;\n          return _regeneratorRuntime.awrap(load(arrayBuffer, options));\n\n        case 8:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport parseImage from '../parsers/parse-image';\nimport { getImageSize } from '../parsed-image-api/parsed-image-api';\nimport { generateUrl } from './generate-url';\nimport { deepLoad, shallowLoad } from './deep-load';\nexport function loadImage(getUrl) {\n  var options,\n      imageUrls,\n      _args = arguments;\n  return _regeneratorRuntime.async(function loadImage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(getImageUrls(getUrl, options));\n\n        case 3:\n          imageUrls = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(deepLoad(imageUrls, parseImage, options));\n\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function getImageUrls(getUrl, options) {\n  var urlOptions,\n      mipLevels,\n      _args2 = arguments;\n  return _regeneratorRuntime.async(function getImageUrls$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          urlOptions = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n          mipLevels = options && options.image && options.image.mipLevels || 0;\n\n          if (!(mipLevels !== 0)) {\n            _context2.next = 8;\n            break;\n          }\n\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions));\n\n        case 5:\n          _context2.t0 = _context2.sent;\n          _context2.next = 9;\n          break;\n\n        case 8:\n          _context2.t0 = generateUrl(getUrl, options, urlOptions);\n\n        case 9:\n          return _context2.abrupt(\"return\", _context2.t0);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions) {\n  var urls, url, image, _getImageSize, width, height, mipLevel, _url;\n\n  return _regeneratorRuntime.async(function getMipmappedImageUrls$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          urls = [];\n\n          if (!(mipLevels === 'auto')) {\n            _context3.next = 9;\n            break;\n          }\n\n          url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n            lod: 0\n          }));\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(shallowLoad(url, parseImage, options));\n\n        case 5:\n          image = _context3.sent;\n          _getImageSize = getImageSize(image), width = _getImageSize.width, height = _getImageSize.height;\n          mipLevels = getMipLevels({\n            width: width,\n            height: height\n          });\n          urls.push(url);\n\n        case 9:\n          assert(mipLevels > 0);\n\n          for (mipLevel = urls.length; mipLevel < mipLevels; ++mipLevel) {\n            _url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n              lod: mipLevel\n            }));\n            urls.push(_url);\n          }\n\n          return _context3.abrupt(\"return\", urls);\n\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  });\n}\n\nexport function getMipLevels(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n  return 1 + Math.floor(Math.log2(Math.max(width, height)));\n}","import GL from '@luma.gl/constants';\nimport {Texture2D, TextureCube} from '@luma.gl/webgl';\nimport {loadImage} from '@loaders.gl/images';\n\nexport default class GLTFEnvironment {\n  constructor(gl, {brdfLutUrl, getTexUrl, specularMipLevels = 10}) {\n    this.gl = gl;\n    this.brdfLutUrl = brdfLutUrl;\n    this.getTexUrl = getTexUrl;\n    this.specularMipLevels = specularMipLevels;\n  }\n\n  makeCube({id, getTextureForFace, parameters}) {\n    const pixels = {};\n    TextureCube.FACES.forEach(face => {\n      pixels[face] = getTextureForFace(face);\n    });\n    return new TextureCube(this.gl, {\n      id,\n      mipmaps: false,\n      parameters,\n      pixels\n    });\n  }\n\n  getDiffuseEnvSampler() {\n    if (!this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler = this.makeCube({\n        id: 'DiffuseEnvSampler',\n        getTextureForFace: dir => loadImage(this.getTexUrl('diffuse', dir, 0)),\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._DiffuseEnvSampler;\n  }\n\n  getSpecularEnvSampler() {\n    if (!this._SpecularEnvSampler) {\n      this._SpecularEnvSampler = this.makeCube({\n        id: 'SpecularEnvSampler',\n        getTextureForFace: dir => {\n          const imageArray = [];\n          for (let lod = 0; lod <= this.specularMipLevels - 1; lod++) {\n            imageArray.push(loadImage(this.getTexUrl('specular', dir, lod)));\n          }\n          return imageArray;\n        },\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR_MIPMAP_LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._SpecularEnvSampler;\n  }\n\n  getBrdfTexture() {\n    if (!this._BrdfTexture) {\n      this._BrdfTexture = new Texture2D(this.gl, {\n        id: 'brdfLUT',\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        },\n        // Texture2D accepts a promise that returns an image as data (Async Textures)\n        data: loadImage(this.brdfLutUrl)\n      });\n    }\n\n    return this._BrdfTexture;\n  }\n\n  delete() {\n    if (this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler.delete();\n      this._DiffuseEnvSampler = null;\n    }\n\n    if (this._SpecularEnvSampler) {\n      this._SpecularEnvSampler.delete();\n      this._SpecularEnvSampler = null;\n    }\n\n    if (this._BrdfTexture) {\n      this._BrdfTexture.delete();\n      this._BrdfTexture = null;\n    }\n  }\n}\n","/* eslint-disable camelcase */\n/* global document, window */\nimport {parse} from '@loaders.gl/core';\n// eslint-disable-next-line import/no-unresolved\nimport {GLTFLoader} from '@loaders.gl/gltf';\nimport {DracoLoader} from '@loaders.gl/draco';\nimport '@loaders.gl/polyfills'; // text-encoding polyfill for older MS browsers\nimport GL from '@luma.gl/constants';\nimport {AnimationLoop, Timeline} from '@luma.gl/engine';\nimport {clear, log, lumaStats} from '@luma.gl/webgl';\nimport {setParameters} from '@luma.gl/gltools';\nimport {createGLTFObjects, GLTFEnvironment, VRDisplay} from '@luma.gl/experimental';\nimport {Matrix4, radians} from 'math.gl';\n\nconst CUBE_FACE_TO_DIRECTION = {\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_X]: 'right',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_X]: 'left',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Y]: 'top',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Y]: 'bottom',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Z]: 'front',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Z]: 'back'\n};\n\n// Damaged helmet model used under creative commons: https://github.com/KhronosGroup/glTF-Sample-Models/tree/1ba47770292486e66ca1e1161857a6e5695c2631/2.0/DamagedHelmet\n// Papermill textures used under Apache 2.0: https://github.com/KhronosGroup/glTF-Sample-Viewer/blob/e2d487693fa2e6148bd29d05bc82586f5a002a45/LICENSE.md\n\nconst GLTF_BASE_URL =\n  'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/';\nconst GLTF_DEFAULT_MODEL = 'DamagedHelmet.glb';\n\n// URL for animated model\n// 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/InterpolationTest/glTF-Binary/InterpolationTest.glb';\n\nconst INFO_HTML = `\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Show\n  <select id=\"showSelector\">\n    <option value=\"0 0 0 0 0 0 0 0\">Final Result</option>\n\n    <option value=\"0 1 0 0 0 0 0 0\">Base Color</option>\n    <option value=\"0 0 1 0 0 0 0 0\">Metallic</option>\n    <option value=\"0 0 0 1 0 0 0 0\">Roughness</option>\n    <option value=\"1 0 0 0 0 0 0 0\">Diffuse</option>\n\n    <option value=\"0 0 0 0 1 0 0 0\">Specular Reflection</option>\n    <option value=\"0 0 0 0 0 1 0 0\">Geometric Occlusion</option>\n    <option value=\"0 0 0 0 0 0 1 0\">Microfacet Distribution</option>\n    <option value=\"0 0 0 0 0 0 0 1\">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights\n  <select id=\"lightSelector\">\n    <option value=\"default\">Default</option>\n    <option value=\"ambient\">Ambient Only</option>\n    <option value=\"directional1\">1x Directional (Red) + Ambient</option>\n    <option value=\"directional3\">3x Directional (RGB)</option>\n    <option value=\"point1far\">1x Point Light Far (Red) + Ambient</option>\n    <option value=\"point1near\">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light\n  <select id=\"iblSelector\">\n    <option value=\"exclusive\">On (Exclusive)</option>\n    <option value=\"addition\">On (Addition to Regular)</option>\n    <option value=\"off\">Off (Only Regular)</option>\n  </select>\n  <br>\n</div>\n<p><img src=\"https://img.shields.io/badge/WebVR-Supported-orange.svg\" /></p>\n`;\n\nconst LIGHT_SOURCES = {\n  default: {\n    directionalLights: [\n      {\n        color: [255, 255, 255],\n        direction: [0.0, 0.5, 0.5],\n        intensity: 1.0\n      }\n    ]\n  },\n  ambient: {\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional1: {\n    directionalLights: [\n      {\n        color: [255, 0, 0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional3: {\n    directionalLights: [\n      {\n        color: [255, 0.0, 0.0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 0.0, 255],\n        direction: [0.0, 0.0, 1.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 255, 0.0],\n        direction: [0.0, 1.0, 0.0],\n        intensity: 1.0\n      }\n    ]\n  },\n  point1far: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [200.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  point1near: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [10.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  }\n};\n\nconst DEFAULT_OPTIONS = {\n  pbrDebug: true,\n  imageBasedLightingEnvironment: null,\n  lights: false\n};\n\nasync function loadGLTF(urlOrPromise, gl, options) {\n  const data = typeof urlOrPromise === 'string' ? window.fetch(urlOrPromise) : urlOrPromise;\n  const gltf = await parse(data, GLTFLoader, {\n    ...options,\n    gl,\n    DracoLoader\n  });\n  const {scenes, animator} = createGLTFObjects(gl, gltf, options);\n\n  scenes[0].traverse((node, {worldMatrix}) => log.info(4, 'Using model: ', node)());\n  return {scenes, animator, gltf};\n}\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n  constructor(opts = {}) {\n    super({\n      ...opts,\n      glOptions: {\n        // Use to test gltf with webgl 1.0 and 2.0\n        webgl1: true,\n        webgl2: true,\n        // alpha causes issues with some glTF demos\n        alpha: false\n      }\n    });\n\n    const {modelFile = null, initialZoom = 2} = opts;\n    this.scenes = [];\n    this.animator = null;\n    this.gl = null;\n    this.modelFile = modelFile;\n\n    this.mouse = {\n      lastX: 0,\n      lastY: 0\n    };\n\n    this.translate = initialZoom;\n    this.rotation = [0, 0];\n    this.rotationStart = [0, 0];\n\n    this.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n    this.u_ScaleFGDSpec = [0, 0, 0, 0];\n\n    this.attachTimeline(new Timeline());\n    this.timeline.play();\n    this.timelineChannel = this.timeline.addChannel({\n      rate: 0.5\n    });\n    this.animationHandle = null;\n\n    this.onInitialize = this.onInitialize.bind(this);\n    this.onRender = this.onRender.bind(this);\n    this._setDisplay(new VRDisplay());\n  }\n\n  initalizeEventHandling(canvas) {\n    let pointerIsDown = false;\n\n    const pointerDown = (x, y) => {\n      this.mouse.lastX = x;\n      this.mouse.lastY = y;\n\n      this.rotationStart[0] = this.rotation[0];\n      this.rotationStart[1] = this.rotation[1];\n\n      pointerIsDown = true;\n    };\n\n    const pointerMove = (x, y) => {\n      if (!pointerIsDown) {\n        return;\n      }\n\n      const dX = x - this.mouse.lastX;\n      const dY = y - this.mouse.lastY;\n\n      this.rotation[0] = this.rotationStart[0] + dY / 100;\n      this.rotation[1] = this.rotationStart[1] + dX / 100;\n    };\n\n    canvas.addEventListener('wheel', e => {\n      this.translate += e.deltaY / 10;\n      if (this.translate < 0.5) {\n        this.translate = 0.5;\n      }\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mousedown', e => {\n      pointerDown(e.clientX, e.clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mouseup', e => {\n      pointerIsDown = false;\n    });\n\n    canvas.addEventListener('mousemove', e => {\n      pointerMove(e.clientX, e.clientY);\n    });\n\n    canvas.addEventListener('touchstart', e => {\n      pointerDown(e.touches[0].clientX, e.touches[0].clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('touchmove', e => {\n      pointerMove(e.touches[0].clientX, e.touches[0].clientY);\n    });\n\n    canvas.addEventListener('touchend', e => {\n      if (e.touches.length === 0) {\n        pointerIsDown = false;\n      }\n    });\n\n    canvas.addEventListener('dragover', e => {\n      e.dataTransfer.dropEffect = 'link';\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('drop', e => {\n      e.preventDefault();\n      if (e.dataTransfer.files && e.dataTransfer.files.length === 1) {\n        this._deleteScenes();\n        const readPromise = new Promise(resolve => {\n          const reader = new window.FileReader();\n          reader.onload = ev => resolve(ev.target.result);\n          reader.readAsArrayBuffer(e.dataTransfer.files[0]);\n        });\n\n        loadGLTF(readPromise, this.gl, this.loadOptions).then(result => this._fileLoaded(result));\n      }\n    });\n  }\n\n  _fileLoaded(loadResult) {\n    if (this.animationHandle !== null) {\n      this.timeline.detachAnimation(this.animationHandle);\n      this.animationHandle = null;\n    }\n    this.animator = null;\n\n    Object.assign(this, loadResult);\n    if (this.animator) {\n      this.animationHandle = this.timeline.attachAnimation(this.animator, this.timelineChannel);\n    }\n  }\n\n  onInitialize({gl, canvas}) {\n    setParameters(gl, {\n      depthTest: true,\n      blend: false\n    });\n\n    this.loadOptions = DEFAULT_OPTIONS;\n    this.environment = new GLTFEnvironment(gl, {\n      brdfLutUrl: `${GLTF_BASE_URL}/brdfLUT.png`,\n      getTexUrl: (type, dir, mipLevel) =>\n        `${GLTF_BASE_URL}/papermill/${type}/${type}_${CUBE_FACE_TO_DIRECTION[dir]}_${mipLevel}.jpg`\n    });\n    this.loadOptions.imageBasedLightingEnvironment = this.environment;\n\n    this.gl = gl;\n    if (this.modelFile) {\n      // options for unit testing\n      const options = {\n        pbrDebug: false,\n        imageBasedLightingEnvironment: null,\n        lights: true\n      };\n      loadGLTF(this.modelFile, this.gl, options).then(result => this._fileLoaded(result));\n    } else {\n      const modelUrl = GLTF_DEFAULT_MODEL;\n      loadGLTF(GLTF_BASE_URL + modelUrl, this.gl, this.loadOptions).then(result =>\n        this._fileLoaded(result)\n      );\n    }\n\n    const showSelector = document.getElementById('showSelector');\n    if (showSelector) {\n      showSelector.onchange = event => {\n        const value = showSelector.value.split(' ').map(x => parseFloat(x));\n        this.u_ScaleDiffBaseMR = value.slice(0, 4);\n        this.u_ScaleFGDSpec = value.slice(4);\n      };\n    }\n\n    const lightSelector = document.getElementById('lightSelector');\n    if (lightSelector) {\n      lightSelector.onchange = event => {\n        this.light = lightSelector.value;\n      };\n    }\n\n    const iblSelector = document.getElementById('iblSelector');\n    if (iblSelector) {\n      iblSelector.onchange = event => {\n        this._updateLightSettings(iblSelector.value);\n        this._rebuildModel();\n      };\n    }\n\n    this.initalizeEventHandling(canvas);\n  }\n\n  _updateLightSettings(value) {\n    switch (value) {\n      case 'exclusive':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: false\n        });\n        break;\n\n      case 'addition':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: true\n        });\n        break;\n\n      case 'off':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: null,\n          lights: true\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _rebuildModel() {\n    // Clean and regenerate model so we have new \"#defines\"\n    // TODO: Find better way to do this\n    (this.gltf.meshes || []).forEach(mesh => delete mesh._mesh);\n    (this.gltf.nodes || []).forEach(node => delete node._node);\n    (this.gltf.bufferViews || []).forEach(bufferView => delete bufferView.lumaBuffers);\n\n    this._deleteScenes();\n    Object.assign(this, createGLTFObjects(this.gl, this.gltf, this.loadOptions));\n  }\n\n  _deleteScenes() {\n    this.scenes.forEach(scene => scene.delete());\n    this.scenes = [];\n\n    lumaStats.get('Resource Counts').forEach(({name, count}) => {\n      log.info(3, `${name}: ${count}`)();\n    });\n  }\n\n  applyLight(model) {\n    // TODO: only do this when light changes\n    model.updateModuleSettings({\n      lightSources: LIGHT_SOURCES[this.light || 'default']\n    });\n  }\n\n  onRender({gl, time, aspect, viewMatrix, projectionMatrix}) {\n    clear(gl, {color: [0.2, 0.2, 0.2, 1.0], depth: true});\n\n    const [pitch, roll] = this.rotation;\n    const cameraPos = [\n      -this.translate * Math.sin(roll) * Math.cos(-pitch),\n      -this.translate * Math.sin(-pitch),\n      this.translate * Math.cos(roll) * Math.cos(-pitch)\n    ];\n\n    // TODO: find how to avoid using Array.from() to convert TypedArray to regular array\n    const uView = new Matrix4(viewMatrix ? Array.from(viewMatrix) : null)\n      .translate([0, 0, -this.translate])\n      .rotateX(pitch)\n      .rotateY(roll);\n\n    const uProjection = projectionMatrix\n      ? new Matrix4(Array.from(projectionMatrix))\n      : new Matrix4().perspective({fov: radians(40), aspect, near: 0.1, far: 9000});\n\n    if (!this.scenes.length) return false;\n\n    let success = true;\n\n    this.scenes[0].traverse((model, {worldMatrix}) => {\n      // In glTF, meshes and primitives do no have their own matrix.\n      const u_MVPMatrix = new Matrix4(uProjection).multiplyRight(uView).multiplyRight(worldMatrix);\n      this.applyLight(model);\n      success =\n        success &&\n        model.draw({\n          uniforms: {\n            u_Camera: cameraPos,\n            u_MVPMatrix,\n            u_ModelMatrix: worldMatrix,\n            u_NormalMatrix: new Matrix4(worldMatrix).invert().transpose(),\n\n            u_ScaleDiffBaseMR: this.u_ScaleDiffBaseMR,\n            u_ScaleFGDSpec: this.u_ScaleFGDSpec\n          },\n          parameters: model.props.parameters\n        });\n    });\n\n    return success;\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n\n  const infoDiv = document.createElement('div');\n  infoDiv.innerHTML = AppAnimationLoop.getInfo();\n  document.body.appendChild(infoDiv);\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/showcase/gltf/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function atob(string) {\n  return Buffer.from(string).toString('base64');\n}\nexport function btoa(base64) {\n  return Buffer.from(base64, 'base64').toString('ascii');\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.typed.uint8-array\";\nexport function bufferToArrayBuffer(buffer) {\n  if (Buffer.isBuffer(buffer)) {\n    var typedArray = new Uint8Array(buffer);\n    return typedArray.buffer;\n  }\n\n  return buffer;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './base/math-array';\nimport { checkNumber, checkVector } from '../lib/validators';\nimport assert from '../lib/assert';\nimport * as quat from 'gl-matrix/quat';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY_QUATERNION = [0, 0, 0, 1];\n\nvar Quaternion = function (_MathArray) {\n  _inherits(Quaternion, _MathArray);\n\n  function Quaternion() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Quaternion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Quaternion).call(this, -0, -0, -0, -0));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z, w);\n    }\n\n    return _this;\n  }\n\n  _createClass(Quaternion, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      this[3] = w;\n      return this.check();\n    }\n  }, {\n    key: \"fromMatrix3\",\n    value: function fromMatrix3(m) {\n      quat.fromMat3(this, m);\n      return this.check();\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      quat.identity(this);\n      return this.check();\n    }\n  }, {\n    key: \"fromAxisRotation\",\n    value: function fromAxisRotation(axis, rad) {\n      quat.setAxisAngle(this, axis, rad);\n      return this.check();\n    }\n  }, {\n    key: \"setAxisAngle\",\n    value: function setAxisAngle(axis, rad) {\n      return this.fromAxisRotation(axis, rad);\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return quat.length(this);\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared(a) {\n      return quat.squaredLength(this);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.dot only takes one argument');\n      }\n\n      return quat.dot(this, a);\n    }\n  }, {\n    key: \"rotationTo\",\n    value: function rotationTo(vectorA, vectorB) {\n      quat.rotationTo(this, vectorA, vectorB);\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.add only takes one argument');\n      }\n\n      quat.add(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"calculateW\",\n    value: function calculateW() {\n      quat.calculateW(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"conjugate\",\n    value: function conjugate() {\n      quat.conjugate(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      quat.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      quat.lerp(this, a, b, t);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a, b) {\n      assert(!b);\n      quat.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a, b) {\n      assert(!b);\n      quat.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.len();\n      var l = length > 0 ? 1 / length : 0;\n      this[0] = this[0] * l;\n      this[1] = this[1] * l;\n      this[2] = this[2] * l;\n      this[3] = this[3] * l;\n\n      if (length === 0) {\n        this[3] = 1;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(rad) {\n      quat.rotateX(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(rad) {\n      quat.rotateY(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(rad) {\n      quat.rotateZ(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(b) {\n      quat.scale(this, this, b);\n      return this.check();\n    }\n  }, {\n    key: \"slerp\",\n    value: function slerp(start, target, ratio) {\n      switch (arguments.length) {\n        case 1:\n          var _arguments$ = arguments[0];\n          var _arguments$$start = _arguments$.start;\n          start = _arguments$$start === void 0 ? IDENTITY_QUATERNION : _arguments$$start;\n          target = _arguments$.target;\n          ratio = _arguments$.ratio;\n          break;\n\n        case 2:\n          var _arguments = Array.prototype.slice.call(arguments);\n\n          target = _arguments[0];\n          ratio = _arguments[1];\n          start = this;\n          break;\n\n        default:\n      }\n\n      quat.slerp(this, start, target, ratio);\n      return this.check();\n    }\n  }, {\n    key: \"transformVector4\",\n    value: function transformVector4(vector) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : vector;\n      vec4.transformQuat(result, vector, this);\n      return checkVector(result, 4);\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"setFromAxisAngle\",\n    value: function setFromAxisAngle(axis, rad) {\n      return this.setAxisAngle(axis, rad);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(a, b) {\n      return this.multiplyLeft(a, b);\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      return this.multiplyRight(a, b);\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 4;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(value) {\n      return this[3] = checkNumber(value);\n    }\n  }]);\n\n  return Quaternion;\n}(MathArray);\n\nexport { Quaternion as default };","import setPrototypeOf from \"./setPrototypeOf\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport fs from 'fs';\nimport http from 'http';\nimport https from 'https';\nimport util from 'util';\nimport { toArrayBuffer } from './utils/to-array-buffer.node';\nimport decodeDataUri from './utils/decode-data-uri.node';\nimport { concatenateReadStream } from './utils/stream-utils.node';\nvar DEFAULT_OPTIONS = {\n  dataType: 'arraybuffer'\n};\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nexport function readFile(url) {\n  var options,\n      _decodeDataUri,\n      arrayBuffer,\n      queryIndex,\n      readFileAsync,\n      buffer,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function readFile$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          options = getReadFileOptions(options);\n\n          if (!isDataURL(url)) {\n            _context.next = 5;\n            break;\n          }\n\n          _decodeDataUri = decodeDataUri(url), arrayBuffer = _decodeDataUri.arrayBuffer;\n          return _context.abrupt(\"return\", Promise.resolve(arrayBuffer));\n\n        case 5:\n          if (!isRequestURL(url)) {\n            _context.next = 7;\n            break;\n          }\n\n          return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n            options = _objectSpread({}, new URL(url), {}, options);\n            var request = url.startsWith('https:') ? https.request : http.request;\n            request(url, function (response) {\n              return concatenateReadStream(response).then(resolve, reject);\n            });\n          }));\n\n        case 7:\n          queryIndex = url && url.lastIndexOf('?');\n          url = queryIndex >= 0 ? url.substr(0, queryIndex) : url;\n          readFileAsync = util.promisify(fs.readFile);\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(readFileAsync(url, options));\n\n        case 12:\n          buffer = _context.sent;\n          return _context.abrupt(\"return\", buffer instanceof Buffer ? toArrayBuffer(buffer) : buffer);\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\nexport function createReadStream(url, options) {\n  return _regeneratorRuntime.async(function createReadStream$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!isDataURL(url)) {\n            _context2.next = 2;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", decodeDataUri(url));\n\n        case 2:\n          if (isRequestURL(url)) {\n            _context2.next = 4;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", fs.createReadStream(url, options));\n\n        case 4:\n          return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n            options = _objectSpread({}, new URL(url), {}, options);\n            var request = url.startsWith('https:') ? https.request : http.request;\n            request(url, function (response) {\n              return resolve(response);\n            });\n          }));\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}\n\nfunction getReadFileOptions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  options = Object.assign({}, DEFAULT_OPTIONS, options);\n  options.responseType = options.responseType || options.dataType;\n\n  if (fs) {\n    options.encoding = options.encoding || (options.dataType === 'text' ? 'utf8' : null);\n  }\n\n  return options;\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nexport { isBrowser, global_ as global };","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","import { config } from 'math.gl';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon as _withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\nexport { default as _Polygon } from './addons/polygon';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate(this)) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport getPixels from 'get-pixels';\nimport util from 'util';\nexport function parseImageNode(arrayBuffer, mimeType, options) {\n  var getPixelsAsync, buffer, ndarray, shape, layers;\n  return _regeneratorRuntime.async(function parseImageNode$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          getPixelsAsync = util.promisify(getPixels);\n          buffer = arrayBuffer instanceof Buffer ? arrayBuffer : Buffer.from(arrayBuffer);\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(getPixelsAsync(buffer, mimeType));\n\n        case 4:\n          ndarray = _context.sent;\n          shape = _toConsumableArray(ndarray.shape);\n          layers = ndarray.shape.length === 4 ? ndarray.shape.shift() : 1;\n          return _context.abrupt(\"return\", {\n            shape: shape,\n            data: ndarray.data,\n            width: ndarray.shape[0],\n            height: ndarray.shape[1],\n            components: ndarray.shape[2],\n            layers: layers\n          });\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName) {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName | '', \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Matrix).apply(this, arguments));\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0));\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          fovy = _ref4.fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.index-of\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nglobal['encoding-indexes'] = {};\n\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nvar floor = Math.floor;\n\nfunction ToDictionary(o) {\n  if (o === undefined) return {};\n  if (o === Object(o)) return o;\n  throw TypeError('Could not convert argument to dictionary');\n}\n\nfunction stringToCodePoints(string) {\n  var s = String(string);\n  var n = s.length;\n  var i = 0;\n  var u = [];\n\n  while (i < n) {\n    var c = s.charCodeAt(i);\n\n    if (c < 0xd800 || c > 0xdfff) {\n      u.push(c);\n    } else if (0xdc00 <= c && c <= 0xdfff) {\n      u.push(0xfffd);\n    } else if (0xd800 <= c && c <= 0xdbff) {\n      if (i === n - 1) {\n        u.push(0xfffd);\n      } else {\n        var d = s.charCodeAt(i + 1);\n\n        if (0xdc00 <= d && d <= 0xdfff) {\n          var a = c & 0x3ff;\n          var b = d & 0x3ff;\n          u.push(0x10000 + (a << 10) + b);\n          i += 1;\n        } else {\n          u.push(0xfffd);\n        }\n      }\n    }\n\n    i += 1;\n  }\n\n  return u;\n}\n\nfunction codePointsToString(code_points) {\n  var s = '';\n\n  for (var i = 0; i < code_points.length; ++i) {\n    var cp = code_points[i];\n\n    if (cp <= 0xffff) {\n      s += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      s += String.fromCharCode((cp >> 10) + 0xd800, (cp & 0x3ff) + 0xdc00);\n    }\n  }\n\n  return s;\n}\n\nfunction isASCIIByte(a) {\n  return 0x00 <= a && a <= 0x7f;\n}\n\nvar isASCIICodePoint = isASCIIByte;\nvar end_of_stream = -1;\n\nfunction Stream(tokens) {\n  this.tokens = [].slice.call(tokens);\n  this.tokens.reverse();\n}\n\nStream.prototype = {\n  endOfStream: function endOfStream() {\n    return !this.tokens.length;\n  },\n  read: function read() {\n    if (!this.tokens.length) return end_of_stream;\n    return this.tokens.pop();\n  },\n  prepend: function prepend(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.push(tokens.pop());\n      }\n    } else {\n      this.tokens.push(token);\n    }\n  },\n  push: function push(token) {\n    if (Array.isArray(token)) {\n      var tokens = token;\n\n      while (tokens.length) {\n        this.tokens.unshift(tokens.shift());\n      }\n    } else {\n      this.tokens.unshift(token);\n    }\n  }\n};\nvar finished = -1;\n\nfunction decoderError(fatal, opt_code_point) {\n  if (fatal) throw TypeError('Decoder error');\n  return opt_code_point || 0xfffd;\n}\n\nfunction encoderError(code_point) {\n  throw TypeError('The code point ' + code_point + ' could not be encoded.');\n}\n\nfunction Decoder() {}\n\nDecoder.prototype = {\n  handler: function handler(stream, bite) {}\n};\n\nfunction Encoder() {}\n\nEncoder.prototype = {\n  handler: function handler(stream, code_point) {}\n};\n\nfunction getEncoding(label) {\n  label = String(label).trim().toLowerCase();\n\n  if (Object.prototype.hasOwnProperty.call(label_to_encoding, label)) {\n    return label_to_encoding[label];\n  }\n\n  return null;\n}\n\nvar encodings = [{\n  encodings: [{\n    labels: ['unicode-1-1-utf-8', 'utf-8', 'utf8'],\n    name: 'UTF-8'\n  }],\n  heading: 'The Encoding'\n}, {\n  encodings: [{\n    labels: ['866', 'cp866', 'csibm866', 'ibm866'],\n    name: 'IBM866'\n  }, {\n    labels: ['csisolatin2', 'iso-8859-2', 'iso-ir-101', 'iso8859-2', 'iso88592', 'iso_8859-2', 'iso_8859-2:1987', 'l2', 'latin2'],\n    name: 'ISO-8859-2'\n  }, {\n    labels: ['csisolatin3', 'iso-8859-3', 'iso-ir-109', 'iso8859-3', 'iso88593', 'iso_8859-3', 'iso_8859-3:1988', 'l3', 'latin3'],\n    name: 'ISO-8859-3'\n  }, {\n    labels: ['csisolatin4', 'iso-8859-4', 'iso-ir-110', 'iso8859-4', 'iso88594', 'iso_8859-4', 'iso_8859-4:1988', 'l4', 'latin4'],\n    name: 'ISO-8859-4'\n  }, {\n    labels: ['csisolatincyrillic', 'cyrillic', 'iso-8859-5', 'iso-ir-144', 'iso8859-5', 'iso88595', 'iso_8859-5', 'iso_8859-5:1988'],\n    name: 'ISO-8859-5'\n  }, {\n    labels: ['arabic', 'asmo-708', 'csiso88596e', 'csiso88596i', 'csisolatinarabic', 'ecma-114', 'iso-8859-6', 'iso-8859-6-e', 'iso-8859-6-i', 'iso-ir-127', 'iso8859-6', 'iso88596', 'iso_8859-6', 'iso_8859-6:1987'],\n    name: 'ISO-8859-6'\n  }, {\n    labels: ['csisolatingreek', 'ecma-118', 'elot_928', 'greek', 'greek8', 'iso-8859-7', 'iso-ir-126', 'iso8859-7', 'iso88597', 'iso_8859-7', 'iso_8859-7:1987', 'sun_eu_greek'],\n    name: 'ISO-8859-7'\n  }, {\n    labels: ['csiso88598e', 'csisolatinhebrew', 'hebrew', 'iso-8859-8', 'iso-8859-8-e', 'iso-ir-138', 'iso8859-8', 'iso88598', 'iso_8859-8', 'iso_8859-8:1988', 'visual'],\n    name: 'ISO-8859-8'\n  }, {\n    labels: ['csiso88598i', 'iso-8859-8-i', 'logical'],\n    name: 'ISO-8859-8-I'\n  }, {\n    labels: ['csisolatin6', 'iso-8859-10', 'iso-ir-157', 'iso8859-10', 'iso885910', 'l6', 'latin6'],\n    name: 'ISO-8859-10'\n  }, {\n    labels: ['iso-8859-13', 'iso8859-13', 'iso885913'],\n    name: 'ISO-8859-13'\n  }, {\n    labels: ['iso-8859-14', 'iso8859-14', 'iso885914'],\n    name: 'ISO-8859-14'\n  }, {\n    labels: ['csisolatin9', 'iso-8859-15', 'iso8859-15', 'iso885915', 'iso_8859-15', 'l9'],\n    name: 'ISO-8859-15'\n  }, {\n    labels: ['iso-8859-16'],\n    name: 'ISO-8859-16'\n  }, {\n    labels: ['cskoi8r', 'koi', 'koi8', 'koi8-r', 'koi8_r'],\n    name: 'KOI8-R'\n  }, {\n    labels: ['koi8-ru', 'koi8-u'],\n    name: 'KOI8-U'\n  }, {\n    labels: ['csmacintosh', 'mac', 'macintosh', 'x-mac-roman'],\n    name: 'macintosh'\n  }, {\n    labels: ['dos-874', 'iso-8859-11', 'iso8859-11', 'iso885911', 'tis-620', 'windows-874'],\n    name: 'windows-874'\n  }, {\n    labels: ['cp1250', 'windows-1250', 'x-cp1250'],\n    name: 'windows-1250'\n  }, {\n    labels: ['cp1251', 'windows-1251', 'x-cp1251'],\n    name: 'windows-1251'\n  }, {\n    labels: ['ansi_x3.4-1968', 'ascii', 'cp1252', 'cp819', 'csisolatin1', 'ibm819', 'iso-8859-1', 'iso-ir-100', 'iso8859-1', 'iso88591', 'iso_8859-1', 'iso_8859-1:1987', 'l1', 'latin1', 'us-ascii', 'windows-1252', 'x-cp1252'],\n    name: 'windows-1252'\n  }, {\n    labels: ['cp1253', 'windows-1253', 'x-cp1253'],\n    name: 'windows-1253'\n  }, {\n    labels: ['cp1254', 'csisolatin5', 'iso-8859-9', 'iso-ir-148', 'iso8859-9', 'iso88599', 'iso_8859-9', 'iso_8859-9:1989', 'l5', 'latin5', 'windows-1254', 'x-cp1254'],\n    name: 'windows-1254'\n  }, {\n    labels: ['cp1255', 'windows-1255', 'x-cp1255'],\n    name: 'windows-1255'\n  }, {\n    labels: ['cp1256', 'windows-1256', 'x-cp1256'],\n    name: 'windows-1256'\n  }, {\n    labels: ['cp1257', 'windows-1257', 'x-cp1257'],\n    name: 'windows-1257'\n  }, {\n    labels: ['cp1258', 'windows-1258', 'x-cp1258'],\n    name: 'windows-1258'\n  }, {\n    labels: ['x-mac-cyrillic', 'x-mac-ukrainian'],\n    name: 'x-mac-cyrillic'\n  }],\n  heading: 'Legacy single-byte encodings'\n}, {\n  encodings: [{\n    labels: ['chinese', 'csgb2312', 'csiso58gb231280', 'gb2312', 'gb_2312', 'gb_2312-80', 'gbk', 'iso-ir-58', 'x-gbk'],\n    name: 'GBK'\n  }, {\n    labels: ['gb18030'],\n    name: 'gb18030'\n  }],\n  heading: 'Legacy multi-byte Chinese (simplified) encodings'\n}, {\n  encodings: [{\n    labels: ['big5', 'big5-hkscs', 'cn-big5', 'csbig5', 'x-x-big5'],\n    name: 'Big5'\n  }],\n  heading: 'Legacy multi-byte Chinese (traditional) encodings'\n}, {\n  encodings: [{\n    labels: ['cseucpkdfmtjapanese', 'euc-jp', 'x-euc-jp'],\n    name: 'EUC-JP'\n  }, {\n    labels: ['csiso2022jp', 'iso-2022-jp'],\n    name: 'ISO-2022-JP'\n  }, {\n    labels: ['csshiftjis', 'ms932', 'ms_kanji', 'shift-jis', 'shift_jis', 'sjis', 'windows-31j', 'x-sjis'],\n    name: 'Shift_JIS'\n  }],\n  heading: 'Legacy multi-byte Japanese encodings'\n}, {\n  encodings: [{\n    labels: ['cseuckr', 'csksc56011987', 'euc-kr', 'iso-ir-149', 'korean', 'ks_c_5601-1987', 'ks_c_5601-1989', 'ksc5601', 'ksc_5601', 'windows-949'],\n    name: 'EUC-KR'\n  }],\n  heading: 'Legacy multi-byte Korean encodings'\n}, {\n  encodings: [{\n    labels: ['csiso2022kr', 'hz-gb-2312', 'iso-2022-cn', 'iso-2022-cn-ext', 'iso-2022-kr'],\n    name: 'replacement'\n  }, {\n    labels: ['utf-16be'],\n    name: 'UTF-16BE'\n  }, {\n    labels: ['utf-16', 'utf-16le'],\n    name: 'UTF-16LE'\n  }, {\n    labels: ['x-user-defined'],\n    name: 'x-user-defined'\n  }],\n  heading: 'Legacy miscellaneous encodings'\n}];\nvar label_to_encoding = {};\nencodings.forEach(function (category) {\n  category.encodings.forEach(function (encoding) {\n    encoding.labels.forEach(function (label) {\n      label_to_encoding[label] = encoding;\n    });\n  });\n});\nvar encoders = {};\nvar decoders = {};\n\nfunction indexCodePointFor(pointer, index) {\n  if (!index) return null;\n  return index[pointer] || null;\n}\n\nfunction indexPointerFor(code_point, index) {\n  var pointer = index.indexOf(code_point);\n  return pointer === -1 ? null : pointer;\n}\n\nfunction index(name) {\n  if (!('encoding-indexes' in global)) {\n    throw Error('Indexes missing.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  return global['encoding-indexes'][name];\n}\n\nfunction indexGB18030RangesCodePointFor(pointer) {\n  if (pointer > 39419 && pointer < 189000 || pointer > 1237575) return null;\n  if (pointer === 7457) return 0xe7c7;\n  var offset = 0;\n  var code_point_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[0] <= pointer) {\n      offset = entry[0];\n      code_point_offset = entry[1];\n    } else {\n      break;\n    }\n  }\n\n  return code_point_offset + pointer - offset;\n}\n\nfunction indexGB18030RangesPointerFor(code_point) {\n  if (code_point === 0xe7c7) return 7457;\n  var offset = 0;\n  var pointer_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    var entry = idx[i];\n\n    if (entry[1] <= code_point) {\n      offset = entry[1];\n      pointer_offset = entry[0];\n    } else {\n      break;\n    }\n  }\n\n  return pointer_offset + code_point - offset;\n}\n\nfunction indexShiftJISPointerFor(code_point) {\n  shift_jis_index = shift_jis_index || index('jis0208').map(function (code_point, pointer) {\n    return inRange(pointer, 8272, 8835) ? null : code_point;\n  });\n  var index_ = shift_jis_index;\n  return index_.indexOf(code_point);\n}\n\nvar shift_jis_index;\n\nfunction indexBig5PointerFor(code_point) {\n  big5_index_no_hkscs = big5_index_no_hkscs || index('big5').map(function (code_point, pointer) {\n    return pointer < (0xa1 - 0x81) * 157 ? null : code_point;\n  });\n  var index_ = big5_index_no_hkscs;\n\n  if (code_point === 0x2550 || code_point === 0x255e || code_point === 0x2561 || code_point === 0x256a || code_point === 0x5341 || code_point === 0x5345) {\n    return index_.lastIndexOf(code_point);\n  }\n\n  return indexPointerFor(code_point, index_);\n}\n\nvar big5_index_no_hkscs;\nvar DEFAULT_ENCODING = 'utf-8';\n\nfunction TextDecoder(label, options) {\n  if (!(this instanceof TextDecoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._decoder = null;\n  this._ignoreBOM = false;\n  this._BOMseen = false;\n  this._error_mode = 'replacement';\n  this._do_not_flush = false;\n  var encoding = getEncoding(label);\n  if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n  if (!decoders[encoding.name]) {\n    throw Error('Decoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  var dec = this;\n  dec._encoding = encoding;\n  if (Boolean(options['fatal'])) dec._error_mode = 'fatal';\n  if (Boolean(options['ignoreBOM'])) dec._ignoreBOM = true;\n\n  if (!Object.defineProperty) {\n    this.encoding = dec._encoding.name.toLowerCase();\n    this.fatal = dec._error_mode === 'fatal';\n    this.ignoreBOM = dec._ignoreBOM;\n  }\n\n  return dec;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextDecoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'fatal', {\n    get: function get() {\n      return this._error_mode === 'fatal';\n    }\n  });\n  Object.defineProperty(TextDecoder.prototype, 'ignoreBOM', {\n    get: function get() {\n      return this._ignoreBOM;\n    }\n  });\n}\n\nTextDecoder.prototype.decode = function decode(input, options) {\n  var bytes;\n\n  if (_typeof(input) === 'object' && input instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input);\n  } else if (_typeof(input) === 'object' && 'buffer' in input && input.buffer instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input.buffer, input.byteOffset, input.byteLength);\n  } else {\n    bytes = new Uint8Array(0);\n  }\n\n  options = ToDictionary(options);\n\n  if (!this._do_not_flush) {\n    this._decoder = decoders[this._encoding.name]({\n      fatal: this._error_mode === 'fatal'\n    });\n    this._BOMseen = false;\n  }\n\n  this._do_not_flush = Boolean(options['stream']);\n  var input_stream = new Stream(bytes);\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input_stream.read();\n    if (token === end_of_stream) break;\n    result = this._decoder.handler(input_stream, token);\n    if (result === finished) break;\n\n    if (result !== null) {\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n  }\n\n  if (!this._do_not_flush) {\n    do {\n      result = this._decoder.handler(input_stream, input_stream.read());\n      if (result === finished) break;\n      if (result === null) continue;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    } while (!input_stream.endOfStream());\n\n    this._decoder = null;\n  }\n\n  function serializeStream(stream) {\n    if (includes(['UTF-8', 'UTF-16LE', 'UTF-16BE'], this._encoding.name) && !this._ignoreBOM && !this._BOMseen) {\n      if (stream.length > 0 && stream[0] === 0xfeff) {\n        this._BOMseen = true;\n        stream.shift();\n      } else if (stream.length > 0) {\n        this._BOMseen = true;\n      } else {}\n    }\n\n    return codePointsToString(stream);\n  }\n\n  return serializeStream.call(this, output);\n};\n\nfunction TextEncoder(label, options) {\n  if (!(this instanceof TextEncoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  options = ToDictionary(options);\n  this._encoding = null;\n  this._encoder = null;\n  this._do_not_flush = false;\n  this._fatal = Boolean(options['fatal']) ? 'fatal' : 'replacement';\n  var enc = this;\n\n  if (Boolean(options['NONSTANDARD_allowLegacyEncoding'])) {\n    label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n    var encoding = getEncoding(label);\n    if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n    if (!encoders[encoding.name]) {\n      throw Error('Encoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n    }\n\n    enc._encoding = encoding;\n  } else {\n    enc._encoding = getEncoding('utf-8');\n\n    if (label !== undefined && 'console' in global) {\n      console.warn('TextEncoder constructor called with encoding label, ' + 'which is ignored.');\n    }\n  }\n\n  if (!Object.defineProperty) this.encoding = enc._encoding.name.toLowerCase();\n  return enc;\n}\n\nif (Object.defineProperty) {\n  Object.defineProperty(TextEncoder.prototype, 'encoding', {\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n}\n\nTextEncoder.prototype.encode = function encode(opt_string, options) {\n  opt_string = opt_string === undefined ? '' : String(opt_string);\n  options = ToDictionary(options);\n  if (!this._do_not_flush) this._encoder = encoders[this._encoding.name]({\n    fatal: this._fatal === 'fatal'\n  });\n  this._do_not_flush = Boolean(options['stream']);\n  var input = new Stream(stringToCodePoints(opt_string));\n  var output = [];\n  var result;\n\n  while (true) {\n    var token = input.read();\n    if (token === end_of_stream) break;\n    result = this._encoder.handler(input, token);\n    if (result === finished) break;\n    if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n  }\n\n  if (!this._do_not_flush) {\n    while (true) {\n      result = this._encoder.handler(input, input.read());\n      if (result === finished) break;\n      if (Array.isArray(result)) output.push.apply(output, result);else output.push(result);\n    }\n\n    this._encoder = null;\n  }\n\n  return new Uint8Array(output);\n};\n\nfunction UTF8Decoder(options) {\n  var fatal = options.fatal;\n  var utf8_code_point = 0,\n      utf8_bytes_seen = 0,\n      utf8_bytes_needed = 0,\n      utf8_lower_boundary = 0x80,\n      utf8_upper_boundary = 0xbf;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && utf8_bytes_needed !== 0) {\n      utf8_bytes_needed = 0;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream) return finished;\n\n    if (utf8_bytes_needed === 0) {\n      if (inRange(bite, 0x00, 0x7f)) {\n        return bite;\n      } else if (inRange(bite, 0xc2, 0xdf)) {\n        utf8_bytes_needed = 1;\n        utf8_code_point = bite & 0x1f;\n      } else if (inRange(bite, 0xe0, 0xef)) {\n        if (bite === 0xe0) utf8_lower_boundary = 0xa0;\n        if (bite === 0xed) utf8_upper_boundary = 0x9f;\n        utf8_bytes_needed = 2;\n        utf8_code_point = bite & 0xf;\n      } else if (inRange(bite, 0xf0, 0xf4)) {\n        if (bite === 0xf0) utf8_lower_boundary = 0x90;\n        if (bite === 0xf4) utf8_upper_boundary = 0x8f;\n        utf8_bytes_needed = 3;\n        utf8_code_point = bite & 0x7;\n      } else {\n        return decoderError(fatal);\n      }\n\n      return null;\n    }\n\n    if (!inRange(bite, utf8_lower_boundary, utf8_upper_boundary)) {\n      utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n      utf8_lower_boundary = 0x80;\n      utf8_upper_boundary = 0xbf;\n      stream.prepend(bite);\n      return decoderError(fatal);\n    }\n\n    utf8_lower_boundary = 0x80;\n    utf8_upper_boundary = 0xbf;\n    utf8_code_point = utf8_code_point << 6 | bite & 0x3f;\n    utf8_bytes_seen += 1;\n    if (utf8_bytes_seen !== utf8_bytes_needed) return null;\n    var code_point = utf8_code_point;\n    utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n    return code_point;\n  };\n}\n\nfunction UTF8Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var count, offset;\n\n    if (inRange(code_point, 0x0080, 0x07ff)) {\n      count = 1;\n      offset = 0xc0;\n    } else if (inRange(code_point, 0x0800, 0xffff)) {\n      count = 2;\n      offset = 0xe0;\n    } else if (inRange(code_point, 0x10000, 0x10ffff)) {\n      count = 3;\n      offset = 0xf0;\n    }\n\n    var bytes = [(code_point >> 6 * count) + offset];\n\n    while (count > 0) {\n      var temp = code_point >> 6 * (count - 1);\n      bytes.push(0x80 | temp & 0x3f);\n      count -= 1;\n    }\n\n    return bytes;\n  };\n}\n\nencoders['UTF-8'] = function (options) {\n  return new UTF8Encoder(options);\n};\n\ndecoders['UTF-8'] = function (options) {\n  return new UTF8Decoder(options);\n};\n\nfunction SingleByteDecoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    var code_point = index[bite - 0x80];\n    if (code_point === null) return decoderError(fatal);\n    return code_point;\n  };\n}\n\nfunction SingleByteEncoder(index, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index);\n    if (pointer === null) encoderError(code_point);\n    return pointer + 0x80;\n  };\n}\n\n(function () {\n  if (!('encoding-indexes' in global)) return;\n  encodings.forEach(function (category) {\n    if (category.heading !== 'Legacy single-byte encodings') return;\n    category.encodings.forEach(function (encoding) {\n      var name = encoding.name;\n      var idx = index(name.toLowerCase());\n\n      decoders[name] = function (options) {\n        return new SingleByteDecoder(idx, options);\n      };\n\n      encoders[name] = function (options) {\n        return new SingleByteEncoder(idx, options);\n      };\n    });\n  });\n})();\n\ndecoders['GBK'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nencoders['GBK'] = function (options) {\n  return new GB18030Encoder(options, true);\n};\n\nfunction GB18030Decoder(options) {\n  var fatal = options.fatal;\n  var gb18030_first = 0x00,\n      gb18030_second = 0x00,\n      gb18030_third = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && gb18030_first === 0x00 && gb18030_second === 0x00 && gb18030_third === 0x00) {\n      return finished;\n    }\n\n    if (bite === end_of_stream && (gb18030_first !== 0x00 || gb18030_second !== 0x00 || gb18030_third !== 0x00)) {\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n      decoderError(fatal);\n    }\n\n    var code_point;\n\n    if (gb18030_third !== 0x00) {\n      code_point = null;\n\n      if (inRange(bite, 0x30, 0x39)) {\n        code_point = indexGB18030RangesCodePointFor((((gb18030_first - 0x81) * 10 + gb18030_second - 0x30) * 126 + gb18030_third - 0x81) * 10 + bite - 0x30);\n      }\n\n      var buffer = [gb18030_second, gb18030_third, bite];\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n\n      if (code_point === null) {\n        stream.prepend(buffer);\n        return decoderError(fatal);\n      }\n\n      return code_point;\n    }\n\n    if (gb18030_second !== 0x00) {\n      if (inRange(bite, 0x81, 0xfe)) {\n        gb18030_third = bite;\n        return null;\n      }\n\n      stream.prepend([gb18030_second, bite]);\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (gb18030_first !== 0x00) {\n      if (inRange(bite, 0x30, 0x39)) {\n        gb18030_second = bite;\n        return null;\n      }\n\n      var lead = gb18030_first;\n      var pointer = null;\n      gb18030_first = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - offset);\n      code_point = pointer === null ? null : indexCodePointFor(pointer, index('gb18030'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n    if (bite === 0x80) return 0x20ac;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      gb18030_first = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction GB18030Encoder(options, gbk_flag) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0xe5e5) return encoderError(code_point);\n    if (gbk_flag && code_point === 0x20ac) return 0x80;\n    var pointer = indexPointerFor(code_point, index('gb18030'));\n\n    if (pointer !== null) {\n      var lead = floor(pointer / 190) + 0x81;\n      var trail = pointer % 190;\n      var offset = trail < 0x3f ? 0x40 : 0x41;\n      return [lead, trail + offset];\n    }\n\n    if (gbk_flag) return encoderError(code_point);\n    pointer = indexGB18030RangesPointerFor(code_point);\n    var byte1 = floor(pointer / 10 / 126 / 10);\n    pointer = pointer - byte1 * 10 * 126 * 10;\n    var byte2 = floor(pointer / 10 / 126);\n    pointer = pointer - byte2 * 10 * 126;\n    var byte3 = floor(pointer / 10);\n    var byte4 = pointer - byte3 * 10;\n    return [byte1 + 0x81, byte2 + 0x30, byte3 + 0x81, byte4 + 0x30];\n  };\n}\n\nencoders['gb18030'] = function (options) {\n  return new GB18030Encoder(options);\n};\n\ndecoders['gb18030'] = function (options) {\n  return new GB18030Decoder(options);\n};\n\nfunction Big5Decoder(options) {\n  var fatal = options.fatal;\n  var Big5_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Big5_lead !== 0x00) {\n      Big5_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Big5_lead === 0x00) return finished;\n\n    if (Big5_lead !== 0x00) {\n      var lead = Big5_lead;\n      var pointer = null;\n      Big5_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x62;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0xa1, 0xfe)) pointer = (lead - 0x81) * 157 + (bite - offset);\n\n      switch (pointer) {\n        case 1133:\n          return [0x00ca, 0x0304];\n\n        case 1135:\n          return [0x00ca, 0x030c];\n\n        case 1164:\n          return [0x00ea, 0x0304];\n\n        case 1166:\n          return [0x00ea, 0x030c];\n      }\n\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('big5'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      Big5_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction Big5Encoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexBig5PointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 157) + 0x81;\n    if (lead < 0xa1) return encoderError(code_point);\n    var trail = pointer % 157;\n    var offset = trail < 0x3f ? 0x40 : 0x62;\n    return [lead, trail + offset];\n  };\n}\n\nencoders['Big5'] = function (options) {\n  return new Big5Encoder(options);\n};\n\ndecoders['Big5'] = function (options) {\n  return new Big5Decoder(options);\n};\n\nfunction EUCJPDecoder(options) {\n  var fatal = options.fatal;\n  var eucjp_jis0212_flag = false,\n      eucjp_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && eucjp_lead !== 0x00) {\n      eucjp_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && eucjp_lead === 0x00) return finished;\n\n    if (eucjp_lead === 0x8e && inRange(bite, 0xa1, 0xdf)) {\n      eucjp_lead = 0x00;\n      return 0xff61 - 0xa1 + bite;\n    }\n\n    if (eucjp_lead === 0x8f && inRange(bite, 0xa1, 0xfe)) {\n      eucjp_jis0212_flag = true;\n      eucjp_lead = bite;\n      return null;\n    }\n\n    if (eucjp_lead !== 0x00) {\n      var lead = eucjp_lead;\n      eucjp_lead = 0x00;\n      var code_point = null;\n\n      if (inRange(lead, 0xa1, 0xfe) && inRange(bite, 0xa1, 0xfe)) {\n        code_point = indexCodePointFor((lead - 0xa1) * 94 + (bite - 0xa1), index(!eucjp_jis0212_flag ? 'jis0208' : 'jis0212'));\n      }\n\n      eucjp_jis0212_flag = false;\n      if (!inRange(bite, 0xa1, 0xfe)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (bite === 0x8e || bite === 0x8f || inRange(bite, 0xa1, 0xfe)) {\n      eucjp_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCJPEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return [0x8e, code_point - 0xff61 + 0xa1];\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 94) + 0xa1;\n    var trail = pointer % 94 + 0xa1;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-JP'] = function (options) {\n  return new EUCJPEncoder(options);\n};\n\ndecoders['EUC-JP'] = function (options) {\n  return new EUCJPDecoder(options);\n};\n\nfunction ISO2022JPDecoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    Katakana: 2,\n    LeadByte: 3,\n    TrailByte: 4,\n    EscapeStart: 5,\n    Escape: 6\n  };\n  var iso2022jp_decoder_state = states.ASCII,\n      iso2022jp_decoder_output_state = states.ASCII,\n      iso2022jp_lead = 0x00,\n      iso2022jp_output_flag = false;\n\n  this.handler = function (stream, bite) {\n    switch (iso2022jp_decoder_state) {\n      default:\n      case states.ASCII:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Roman:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (bite === 0x5c) {\n          iso2022jp_output_flag = false;\n          return 0x00a5;\n        }\n\n        if (bite === 0x7e) {\n          iso2022jp_output_flag = false;\n          return 0x203e;\n        }\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b && bite !== 0x5c && bite !== 0x7e) {\n          iso2022jp_output_flag = false;\n          return bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Katakana:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x5f)) {\n          iso2022jp_output_flag = false;\n          return 0xff61 - 0x21 + bite;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.LeadByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_output_flag = false;\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.TrailByte;\n          return null;\n        }\n\n        if (bite === end_of_stream) {\n          return finished;\n        }\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.TrailByte:\n        if (bite === 0x1b) {\n          iso2022jp_decoder_state = states.EscapeStart;\n          return decoderError(fatal);\n        }\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          iso2022jp_decoder_state = states.LeadByte;\n          var pointer = (iso2022jp_lead - 0x21) * 94 + bite - 0x21;\n          var code_point = indexCodePointFor(pointer, index('jis0208'));\n          if (code_point === null) return decoderError(fatal);\n          return code_point;\n        }\n\n        if (bite === end_of_stream) {\n          iso2022jp_decoder_state = states.LeadByte;\n          stream.prepend(bite);\n          return decoderError(fatal);\n        }\n\n        iso2022jp_decoder_state = states.LeadByte;\n        return decoderError(fatal);\n\n      case states.EscapeStart:\n        if (bite === 0x24 || bite === 0x28) {\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.Escape;\n          return null;\n        }\n\n        stream.prepend(bite);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n\n      case states.Escape:\n        var lead = iso2022jp_lead;\n        iso2022jp_lead = 0x00;\n        var state = null;\n        if (lead === 0x28 && bite === 0x42) state = states.ASCII;\n        if (lead === 0x28 && bite === 0x4a) state = states.Roman;\n        if (lead === 0x28 && bite === 0x49) state = states.Katakana;\n        if (lead === 0x24 && (bite === 0x40 || bite === 0x42)) state = states.LeadByte;\n\n        if (state !== null) {\n          iso2022jp_decoder_state = iso2022jp_decoder_state = state;\n          var output_flag = iso2022jp_output_flag;\n          iso2022jp_output_flag = true;\n          return !output_flag ? null : decoderError(fatal);\n        }\n\n        stream.prepend([lead, bite]);\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n    }\n  };\n}\n\nfunction ISO2022JPEncoder(options) {\n  var fatal = options.fatal;\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    jis0208: 2\n  };\n  var iso2022jp_state = states.ASCII;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if (code_point === end_of_stream && iso2022jp_state === states.ASCII) return finished;\n\n    if ((iso2022jp_state === states.ASCII || iso2022jp_state === states.Roman) && (code_point === 0x000e || code_point === 0x000f || code_point === 0x001b)) {\n      return encoderError(0xfffd);\n    }\n\n    if (iso2022jp_state === states.ASCII && isASCIICodePoint(code_point)) return code_point;\n\n    if (iso2022jp_state === states.Roman && (isASCIICodePoint(code_point) && code_point !== 0x005c && code_point !== 0x007e || code_point == 0x00a5 || code_point == 0x203e)) {\n      if (isASCIICodePoint(code_point)) return code_point;\n      if (code_point === 0x00a5) return 0x5c;\n      if (code_point === 0x203e) return 0x7e;\n    }\n\n    if (isASCIICodePoint(code_point) && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    }\n\n    if ((code_point === 0x00a5 || code_point === 0x203e) && iso2022jp_state !== states.Roman) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.Roman;\n      return [0x1b, 0x28, 0x4a];\n    }\n\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexPointerFor(code_point, index('jis0208'));\n    if (pointer === null) return encoderError(code_point);\n\n    if (iso2022jp_state !== states.jis0208) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.jis0208;\n      return [0x1b, 0x24, 0x42];\n    }\n\n    var lead = floor(pointer / 94) + 0x21;\n    var trail = pointer % 94 + 0x21;\n    return [lead, trail];\n  };\n}\n\nencoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPEncoder(options);\n};\n\ndecoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPDecoder(options);\n};\n\nfunction ShiftJISDecoder(options) {\n  var fatal = options.fatal;\n  var Shift_JIS_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && Shift_JIS_lead !== 0x00) {\n      Shift_JIS_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && Shift_JIS_lead === 0x00) return finished;\n\n    if (Shift_JIS_lead !== 0x00) {\n      var lead = Shift_JIS_lead;\n      var pointer = null;\n      Shift_JIS_lead = 0x00;\n      var offset = bite < 0x7f ? 0x40 : 0x41;\n      var lead_offset = lead < 0xa0 ? 0x81 : 0xc1;\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfc)) pointer = (lead - lead_offset) * 188 + bite - offset;\n      if (inRange(pointer, 8836, 10715)) return 0xe000 - 8836 + pointer;\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('jis0208'));\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite) || bite === 0x80) return bite;\n    if (inRange(bite, 0xa1, 0xdf)) return 0xff61 - 0xa1 + bite;\n\n    if (inRange(bite, 0x81, 0x9f) || inRange(bite, 0xe0, 0xfc)) {\n      Shift_JIS_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction ShiftJISEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point) || code_point === 0x0080) return code_point;\n    if (code_point === 0x00a5) return 0x5c;\n    if (code_point === 0x203e) return 0x7e;\n    if (inRange(code_point, 0xff61, 0xff9f)) return code_point - 0xff61 + 0xa1;\n    if (code_point === 0x2212) code_point = 0xff0d;\n    var pointer = indexShiftJISPointerFor(code_point);\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 188);\n    var lead_offset = lead < 0x1f ? 0x81 : 0xc1;\n    var trail = pointer % 188;\n    var offset = trail < 0x3f ? 0x40 : 0x41;\n    return [lead + lead_offset, trail + offset];\n  };\n}\n\nencoders['Shift_JIS'] = function (options) {\n  return new ShiftJISEncoder(options);\n};\n\ndecoders['Shift_JIS'] = function (options) {\n  return new ShiftJISDecoder(options);\n};\n\nfunction EUCKRDecoder(options) {\n  var fatal = options.fatal;\n  var euckr_lead = 0x00;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && euckr_lead !== 0) {\n      euckr_lead = 0x00;\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && euckr_lead === 0) return finished;\n\n    if (euckr_lead !== 0x00) {\n      var lead = euckr_lead;\n      var pointer = null;\n      euckr_lead = 0x00;\n      if (inRange(bite, 0x41, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - 0x41);\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('euc-kr'));\n      if (pointer === null && isASCIIByte(bite)) stream.prepend(bite);\n      if (code_point === null) return decoderError(fatal);\n      return code_point;\n    }\n\n    if (isASCIIByte(bite)) return bite;\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      euckr_lead = bite;\n      return null;\n    }\n\n    return decoderError(fatal);\n  };\n}\n\nfunction EUCKREncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    var pointer = indexPointerFor(code_point, index('euc-kr'));\n    if (pointer === null) return encoderError(code_point);\n    var lead = floor(pointer / 190) + 0x81;\n    var trail = pointer % 190 + 0x41;\n    return [lead, trail];\n  };\n}\n\nencoders['EUC-KR'] = function (options) {\n  return new EUCKREncoder(options);\n};\n\ndecoders['EUC-KR'] = function (options) {\n  return new EUCKRDecoder(options);\n};\n\nfunction convertCodeUnitToBytes(code_unit, utf16be) {\n  var byte1 = code_unit >> 8;\n  var byte2 = code_unit & 0x00ff;\n  if (utf16be) return [byte1, byte2];\n  return [byte2, byte1];\n}\n\nfunction UTF16Decoder(utf16_be, options) {\n  var fatal = options.fatal;\n  var utf16_lead_byte = null,\n      utf16_lead_surrogate = null;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream && (utf16_lead_byte !== null || utf16_lead_surrogate !== null)) {\n      return decoderError(fatal);\n    }\n\n    if (bite === end_of_stream && utf16_lead_byte === null && utf16_lead_surrogate === null) {\n      return finished;\n    }\n\n    if (utf16_lead_byte === null) {\n      utf16_lead_byte = bite;\n      return null;\n    }\n\n    var code_unit;\n\n    if (utf16_be) {\n      code_unit = (utf16_lead_byte << 8) + bite;\n    } else {\n      code_unit = (bite << 8) + utf16_lead_byte;\n    }\n\n    utf16_lead_byte = null;\n\n    if (utf16_lead_surrogate !== null) {\n      var lead_surrogate = utf16_lead_surrogate;\n      utf16_lead_surrogate = null;\n\n      if (inRange(code_unit, 0xdc00, 0xdfff)) {\n        return 0x10000 + (lead_surrogate - 0xd800) * 0x400 + (code_unit - 0xdc00);\n      }\n\n      stream.prepend(convertCodeUnitToBytes(code_unit, utf16_be));\n      return decoderError(fatal);\n    }\n\n    if (inRange(code_unit, 0xd800, 0xdbff)) {\n      utf16_lead_surrogate = code_unit;\n      return null;\n    }\n\n    if (inRange(code_unit, 0xdc00, 0xdfff)) return decoderError(fatal);\n    return code_unit;\n  };\n}\n\nfunction UTF16Encoder(utf16_be, options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (inRange(code_point, 0x0000, 0xffff)) return convertCodeUnitToBytes(code_point, utf16_be);\n    var lead = convertCodeUnitToBytes((code_point - 0x10000 >> 10) + 0xd800, utf16_be);\n    var trail = convertCodeUnitToBytes((code_point - 0x10000 & 0x3ff) + 0xdc00, utf16_be);\n    return lead.concat(trail);\n  };\n}\n\nencoders['UTF-16BE'] = function (options) {\n  return new UTF16Encoder(true, options);\n};\n\ndecoders['UTF-16BE'] = function (options) {\n  return new UTF16Decoder(true, options);\n};\n\nencoders['UTF-16LE'] = function (options) {\n  return new UTF16Encoder(false, options);\n};\n\ndecoders['UTF-16LE'] = function (options) {\n  return new UTF16Decoder(false, options);\n};\n\nfunction XUserDefinedDecoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, bite) {\n    if (bite === end_of_stream) return finished;\n    if (isASCIIByte(bite)) return bite;\n    return 0xf780 + bite - 0x80;\n  };\n}\n\nfunction XUserDefinedEncoder(options) {\n  var fatal = options.fatal;\n\n  this.handler = function (stream, code_point) {\n    if (code_point === end_of_stream) return finished;\n    if (isASCIICodePoint(code_point)) return code_point;\n    if (inRange(code_point, 0xf780, 0xf7ff)) return code_point - 0xf780 + 0x80;\n    return encoderError(code_point);\n  };\n}\n\nencoders['x-user-defined'] = function (options) {\n  return new XUserDefinedEncoder(options);\n};\n\ndecoders['x-user-defined'] = function (options) {\n  return new XUserDefinedDecoder(options);\n};\n\nexport { TextEncoder, TextDecoder };","'use strict';\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar $native = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n    // convert -0 to +0\n    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;\n    var O = toIObject(this);\n    var length = toLength(O.length);\n    var index = length - 1;\n    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));\n    if (index < 0) index = length + index;\n    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;\n    return -1;\n  }\n});\n","import \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.index-of\";\nimport { toArrayBuffer } from './to-array-buffer.node';\nexport default function decodeDataUri(uri) {\n  var dataIndex = uri.indexOf(',');\n  var buffer;\n  var mimeType;\n\n  if (uri.slice(dataIndex - 7, dataIndex) === ';base64') {\n    buffer = new Buffer(uri.slice(dataIndex + 1), 'base64');\n    mimeType = uri.slice(5, dataIndex - 7).trim();\n  } else {\n    buffer = new Buffer(decodeURIComponent(uri.slice(dataIndex + 1)));\n    mimeType = uri.slice(5, dataIndex).trim();\n  }\n\n  if (!mimeType) {\n    mimeType = 'text/plain;charset=US-ASCII';\n  } else if (mimeType[0] === ';') {\n    mimeType = \"text/plain\".concat(mimeType);\n  }\n\n  return {\n    arrayBuffer: toArrayBuffer(buffer),\n    mimeType: mimeType\n  };\n}","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../../utils/assert';\n\nvar isArrayBuffer = function isArrayBuffer(x) {\n  return x && x instanceof ArrayBuffer;\n};\n\nvar isBuffer = function isBuffer(x) {\n  return x && x instanceof Buffer;\n};\n\nexport function toArrayBuffer(data) {\n  if (isArrayBuffer(data)) {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    var typedArray = new Uint8Array(data);\n    return typedArray.buffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport savePixels from 'save-pixels';\nimport ndarray from 'ndarray';\nimport { bufferToArrayBuffer } from '../utils/to-array-buffer.node';\nexport function encodeImageToStreamNode(image, options) {\n  var type = options.type ? options.type.replace('image/', '') : 'jpeg';\n  var pixels = ndarray(image.data, [image.width, image.height, 4], [4, image.width * 4, 1], 0);\n  return savePixels(pixels, type, options);\n}\nexport function encodeImageNode(image, options) {\n  var imageStream = encodeImageToStreamNode(image, options);\n  return new Promise(function (resolve) {\n    var buffers = [];\n    imageStream.on('data', function (buffer) {\n      return buffers.push(buffer);\n    });\n    imageStream.on('end', function () {\n      var buffer = Buffer.concat(buffers);\n      resolve(bufferToArrayBuffer(buffer));\n    });\n  });\n}","export default `\\\n#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n\n // Constant-Linear-Exponential\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n`;\n","import lightingShader from './lights.glsl';\n\nexport default {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\n\nconst INITIAL_MODULE_OPTIONS = {};\n\n// Take color 0-255 and intensity as input and output 0.0-1.0 range\nfunction convertColor({color = [0, 0, 0], intensity = 1.0} = {}) {\n  return color.map(component => (component * intensity) / 255.0);\n}\n\nfunction getLightSourceUniforms({ambientLight, pointLights = [], directionalLights = []}) {\n  const lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach((pointLight, index) => {\n    lightSourceUniforms[`lighting_uPointLight[${index}].color`] = convertColor(pointLight);\n    lightSourceUniforms[`lighting_uPointLight[${index}].position`] = pointLight.position;\n    lightSourceUniforms[`lighting_uPointLight[${index}].attenuation`] = pointLight.attenuation || [\n      1,\n      0,\n      0\n    ];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n\n  directionalLights.forEach((directionalLight, index) => {\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].color`] = convertColor(\n      directionalLight\n    );\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].direction`] =\n      directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n\n  return lightSourceUniforms;\n}\n\n// eslint-disable-next-line complexity\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  // Specify lights separately\n  if ('lightSources' in opts) {\n    const {ambientLight, pointLights, directionalLights} = opts.lightSources || {};\n    const hasLights =\n      ambientLight ||\n      (pointLights && pointLights.length > 0) ||\n      (directionalLights && directionalLights.length > 0);\n\n    if (!hasLights) {\n      return {lighting_uEnabled: false};\n    }\n\n    return Object.assign(\n      {},\n      getLightSourceUniforms({ambientLight, pointLights, directionalLights}),\n      {\n        lighting_uEnabled: true\n      }\n    );\n  }\n\n  // Support for array of lights. Type of light is detected by type field\n  if ('lights' in opts) {\n    const lightSources = {pointLights: [], directionalLights: []};\n    for (const light of opts.lights || []) {\n      switch (light.type) {\n        case 'ambient':\n          // Note: Only uses last ambient light\n          // TODO - add ambient light sources on CPU?\n          lightSources.ambientLight = light;\n          break;\n        case 'directional':\n          lightSources.directionalLights.push(light);\n          break;\n        case 'point':\n          lightSources.pointLights.push(light);\n          break;\n        default:\n        // eslint-disable-next-line\n        // console.warn(light.type);\n      }\n    }\n\n    // Call the `opts.lightSources`` version\n    return getUniforms({lightSources});\n  }\n\n  return {};\n}\n","import \"core-js/modules/es6.typed.float32-array\";\n\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && value.length !== undefined;\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}"],"sourceRoot":""}