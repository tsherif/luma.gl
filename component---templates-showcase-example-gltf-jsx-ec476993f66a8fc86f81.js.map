{"version":3,"sources":["webpack:///../node_modules/math.gl/dist/esm/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/isarray/index.js","webpack:///../modules/engine/src/animation/timeline.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/stream-utils.node.js","webpack:///../node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/core-js/modules/es6.date.to-json.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/validate-loader-version.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/constants.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/merge-options.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack:///./node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/iterator-utils/stream-iteration.js","webpack:///./node_modules/@babel/runtime/helpers/esm/asyncIterator.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/memory-copy-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/iterator-utils/chunk-iteration.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.browser.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/check-errors.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-error-message.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-loader-context.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/javascript-utils/binary-utils.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/get-worker-url.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-thread.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-pool.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-farm.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/register-loaders.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/select-loader.js","webpack:///../node_modules/@loaders.gl/core/dist/esm/lib/parse.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/image-type.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsed-image-api/parsed-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/get-blob.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-parsers.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/binary-image-api/binary-image-api.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/get-first-characters.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/parser-utils/parse-json.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/memory-copy-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/utils/assert.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/resolve-url.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/get-typed-array.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-scenegraph.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-attribute-utils.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_draco_mesh_compression.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-constants.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_lights_punctual.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_materials_unlit.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_techniques_webgl.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/gltf-extensions.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-glb.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/post-process-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/lib/parse-gltf.js","webpack:///../node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/library-utils/library-utils.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-module-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/categories/mesh/mesh-utils.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/lib/draco-parser.js","webpack:///./node_modules/@loaders.gl/draco/dist/esm/draco-loader.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/headers.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/response.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/fetch.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/index.js","webpack:///../modules/experimental/src/scenegraph/nodes/scenegraph-node.js","webpack:///../modules/experimental/src/scenegraph/nodes/group-node.js","webpack:///../modules/experimental/src/gltf/gltf-animator.js","webpack:///../modules/shadertools/src/modules/pbr/pbr.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-vertex.glsl.js","webpack:///../modules/shadertools/src/modules/pbr/pbr-fragment.glsl.js","webpack:///../modules/experimental/src/scenegraph/nodes/model-node.js","webpack:///../modules/experimental/src/gltf/gltf-material-parser.js","webpack:///../modules/experimental/src/gltf/create-gltf-model.js","webpack:///../modules/experimental/src/gltf/gltf-instantiator.js","webpack:///../modules/experimental/src/gltf/create-gltf-objects.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/generate-url.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/async-deep-map.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/deep-load.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/texture-loading-api/load-image.js","webpack:///../modules/experimental/src/gltf/gltf-environment.js","webpack:///../examples/showcase/gltf/app.js","webpack:///./templates/showcase/example-gltf.jsx","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/text-encoding/btoa.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/to-array-buffer.node.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../node_modules/gl-matrix/esm/mat3.js","webpack:///../node_modules/gl-matrix/esm/quat.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/quaternion.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/read-file.node.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/assert.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/utils/globals.js","webpack:///./node_modules/core-js/modules/es6.object.define-properties.js","webpack:///../node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/parse-image.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/validators.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./node_modules/ieee754/index.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/vec2.js","webpack:///../node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/decode-data-uri.node.js","webpack:///./node_modules/core-js/modules/_own-keys.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///../node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/core-js/modules/es6.math.log2.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/libs/encoding.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/fetch-node/utils/to-array-buffer.node.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@loaders.gl/polyfills/dist/esm/images-node/encode-image.node.js","webpack:///../modules/shadertools/src/modules/lights/lights.glsl.js","webpack:///../modules/shadertools/src/modules/lights/lights.js","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/@math.gl/core/dist/esm/lib/common.js"],"names":["assert","condition","message","Error","concat","toString","module","exports","Array","isArray","arr","call","channelHandles","animationHandles","Timeline","this","time","channels","animations","playing","lastEngineTime","addChannel","props","delay","duration","Number","rate","handle","channel","repeat","_setChannelTime","set","removeChannel","delete","animationHandle","animation","detachAnimation","isFinished","get","getTime","setTime","Math","animationData","play","pause","reset","attachAnimation","channelHandle","update","engineTime","offsetTime","concatenateReadStream","readStream","arrayBuffer","ArrayBuffer","string","Promise","resolve","reject","data","chunk","source1","source2","sourceArray1","sourceArray2","temp","Uint8Array","byteLength","on","error","complete","clone","a","out","fromValues","x","y","z","w","copy","add","b","scale","length","sqrt","squaredLength","normalize","len","dot","lerp","t","ax","ay","az","aw","transformMat4","m","transformQuat","q","qx","qy","qz","qw","ix","iy","iz","iw","exactEquals","equals","a0","a1","a2","a3","b0","b1","b2","b3","abs","max","vec","Float32Array","$export","toObject","toPrimitive","P","F","Date","NaN","toJSON","prototype","toISOString","key","O","pv","isFinite","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","i","Arr","_byteLength","curByte","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","parts","len2","push","encodeChunk","lookup","join","code","indexOf","start","end","num","output","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","from","value","TypeError","array","byteOffset","undefined","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","write","slice","fromString","obj","isBuffer","checked","buffer","val","type","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","e","typedArraySupport","poolSize","_augment","Symbol","species","Object","defineProperty","configurable","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","arguments","inspect","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","trim","replace","stringtrim","base64clean","src","dst","asyncGeneratorStep","gen","_next","_throw","info","done","then","_asyncToGenerator","fn","self","args","err","$find","KEY","forced","findIndex","callbackfn","globals","window","document","global_","isBrowser","process","browser","isWorker","importScripts","matches","version","parseFloat","validateLoaderVersion","loader","coreVersion","loaderVersion","parseVersion","split","map","major","minor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","source","forEach","getOwnPropertyDescriptors","defineProperties","isLoaderObject","hasParser","parseTextSync","parseSync","parse","parseStream","parseInBatches","loaderOptions","options","id","workerUrl","normalizeLoader","extension","extensions","text","binary","NullLog","_","DEFAULT_LOADER_OPTIONS","CDN","worker","log","ConsoleLog","console","_this$console$log","_len","_key","bind","_this$console$info","_len2","_key2","_this$console$warn","_len3","_key3","warn","_this$console$error","_len4","_key4","dataType","constructor","globalOptions","mergeOptions","url","mergedOptions","defaultOptions","baseUri","addUrlOptions","mergeNestedFields","isBoolean","isFunction","isIterable","iterator","isAsyncIterable","asyncIterator","isFetchResponse","Response","json","isFileReadable","File","isFile","Blob","isBlob","isReadableStream","ReadableStream","tee","cancel","getReader","isReadableDOMStream","pipe","readable","isReadableNodeStream","_AwaitValue","wrapped","_awaitAsyncGenerator","AsyncGenerator","front","back","resume","result","wrappedAwait","settle","next","_invoke","request","_wrapAsyncGenerator","makeStreamIterator","stream","getIterator","_x","_makeBrowserStreamIterator","makeBrowserStreamIterator","_x2","_makeNodeStreamIterator","makeNodeStreamIterator","mark","_callee","reader","_ref","wrap","_context","prev","sent","abrupt","t0","releaseLock","stop","_callee2","_context2","_readableState","ended","onceReadable","_x3","_onceReadable","_callee3","_context3","once","_asyncIterator","iterable","method","concatenateArrayBuffers","_marked","bigArrayBufferOrString","_args","delegateYield","makeStringChunkIterator","makeArrayBufferChunkIterator","_marked2","_marked3","concatenateChunksAsync","_concatenateChunksAsync","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_value","_context4","finish","_options$chunkSize","chunkSize","chunkByteLength","sourceArray","_args2","_options$chunkSize2","chunkLength","_args3","FileReadableResponse","fileOrBlob","_fileOrBlob","bodyUsed","_json","_text","_arrayBuffer","_this$_getFileReader","promise","_getFileReader","readAsArrayBuffer","_this$_getFileReader2","readAsText","JSON","FileReader","onerror","onabort","onload","Headers","name","fetchFileReadable","checkFetchResponseStatus","_checkFetchResponseStatus","response","errorMessage","ok","status","ERR_DATA","getUrlFromData","getArrayBufferOrStringFromDataSync","TextDecoder","decode","getArrayBufferOrStringFromData","_getArrayBufferOrStringFromData","isArrayBuffer","pathPrefix","fileAliases","resolvePath","filename","alias","startsWith","replacement","getErrorMessageFromResponse","_getErrorMessageFromResponse","headers","statusText","t1","fetchFile","_fetchFile","fetch","getLoaderContext","context","previousContext","loaders","getLoaders","candidateLoaders","contextLoaders","toArrayBuffer","TextEncoder","encode","workerURLCache","Map","buildScript","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","MessagePort","ImageBitmap","OffscreenCanvas","defaultOnMessage","WorkerThread","_ref2","_ref2$name","onMessage","workerSource","endsWith","workerURL","blob","URL","createObjectURL","getWorkerURL","Worker","_process","_this","onmessage","event","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","jobQueue","idleQueue","count","isDestroyed","destroy","jobName","_startQueuedJob","_this2","_getAvailableWorker","job","shift","backlog","_onWorkerDone","WorkerFarm","workerPools","workerPool","workerName","_getWorkerPool","canParseWithWorker","isSupported","localWorkerUrl","useWorker","parseWithWorker","workerFarm","_workerFarm","onWorkerMessage","setProps","getWorkerFarm","stringify","warning","arraybuffer","_onWorkerMessage","registeredLoaders","getRegisteredLoaders","EXT_PATTERN","DATA_URL_PATTERN","selectLoader","_ref$nothrow","nothrow","_loader","normalizeLoaders","findLoaderByUrl","findLoaderByContentType","findLoaderByExamingInitialData","getFirstCharacters","mimeType","findLoaderByMimeType","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","findLoaderByExtension","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","mimeTypes","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","testText","testBinary","test","some","getMagicString","dataView","DataView","magic","getUint8","_x4","_parse","autoUrl","parseWithLoader","_x5","_x6","_x7","_x8","_parseWithLoader","_parseImageNode","IMAGE_SUPPORTED","Image","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","Boolean","isImageTypeSupported","getImageType","image","format","getImageTypeOrNull","getImageData","canvas","createElement","getContext","width","height","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","getBlob","isSVG","getBlobOrDataUrl","xmlText","btoa","parseToImage","_parseToImage","blobOrDataUrl","objectUrl","webkitURL","loadToImage","revokeObjectURL","_loadToImage","imagebitmapOptionsSupported","parseToImageBitmap","_parseToImageBitmap","imagebitmapOptions","isEmptyObject","imagebitmap","createImageBitmap","EMPTY_OBJECT","mimeTypeMap","isPng","getSize","getUint32","isJpeg","getUint16","_getJpegMarkers","tableMarkers","sofMarkers","getJpegMarkers","marker","has","isGif","isBmp","getBinaryImageMIMEType","toDataView","entries","_step$value","parseToNodeImage","parseImage","_parseImage","imageOptions","imageType","loadType","getLoadableImageType","getDefaultImageType","parseJSON","padTo4Bytes","getZeroOffsetArrayBuffer","subArray","copyToArray","targetOffset","srcByteOffset","srcByteLength","resolveUrl","baseUrl","uri","buffers","bufferViewIndex","bufferView","bufferViews","binChunk","TYPES","ARRAY_TO_COMPONENT_TYPE","Int8Array","Int16Array","Uint16Array","Uint32Array","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5120","5121","5122","5123","5125","5126","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","getAccessorTypeFromSize","getComponentTypeFromArray","typedArray","componentType","getAccessorArrayTypeAndLength","accessor","ArrayType","components","bytesPerComponent","GLTFScenegraph","gltf","extras","extensionName","isExtension","getUsedExtensions","find","getRequiredExtensions","getExtension","extensionsRequired","extensionsUsed","index","getObject","bufferIndex","getBufferView","getAccessor","getBuffer","_getAccessorArrayType","registerUsedExtension","extensionData","addExtension","registerRequiredExtension","_removeStringFromArray","attributes","indices","mode","accessors","_addAttributes","glTFMesh","primitives","meshes","imageData","glTFImage","addBufferView","images","sourceBuffers","glTFBufferView","glTFAccessor","sourceBuffer","accessorDefaults","round","addAccessor","assign","totalByteLength","targetArray","dstByteOffset","splice","getGLTFAccessors","attribute","getGLTFAccessor","gltfAttributeName","_getAccessorData","attributeName","convertTypedArrays","toTypedArray","getAccessorData","meshPrimitiveIterator","_decode","gltfData","scenegraph","promises","primitive","decompressMeshes","getObjectExtension","decompressPrimitive","all","removeExtension","mesh","compressMesh","addRequiredExtension","_decompressPrimitive","compressedPrimitive","bufferCopy","decodedData","getTypedArrayForBufferView","checkPrimitive","DracoWriter","DracoLoader","compressedData","encodeSync","fauxAccessors","_addFauxAttributes","gltfScenegraph","lights","nodes","node","nodeExtension","light","removeObjectExtension","addObjectExtension","materials","material","KHR_materials_unlit","unlit","techniques","_ref$programs","programs","_ref$shaders","shaders","_ref$techniques","textDecoder","shader","program","fragmentShader","vertexShader","technique","resolveTechniques","materialExtension","values","resolveValues","uniforms","uniform","texture","getTexture","KHR_draco_mesh_compression","KHR_lights_punctual","KHR_techniques_webgl","decodeExtensions","_decodeExtensions","excludes","excludeExtensions","_DEFAULT_SAMPLER","isGLB","_options$magic","magic1","parseGLBChunksSync","glb","header","chunkFormat","parseJSONChunk","parseBINChunk","strict","jsonChunk","jsonText","hasBinChunk","binChunks","GL_SAMPLER","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","REPEAT","LINEAR","NEAREST_MIPMAP_LINEAR","SAMPLER_PARAMETER_GLTF_TO_GL","magFilter","minFilter","wrapS","wrapT","DEFAULT_SAMPLER","TEXTURE_WRAP_","GLTFPostProcessor","_gltf$buffers","_gltf$images","_gltf$baseUri","_resolveTree","bufView","_resolveBufferView","_resolveImage","samplers","sampler","_resolveSampler","textures","_resolveTexture","_resolveAccessor","_resolveMaterial","_resolveMesh","_resolveNode","skins","skin","_resolveSkin","scenes","scene","_resolveScene","_get","getNode","_this3","children","child","getMesh","camera","getCamera","getSkin","inverseBindMatrices","_this4","getMaterial","normalTexture","occlusionTexture","occlustionTexture","emissiveTexture","emmisiveTexture","pbrMetallicRoughness","mr","baseColorTexture","metallicRoughnessTexture","bytesPerElement","getSampler","getImage","parameters","glEnum","_enumSamplerParameter","preloadedImage","perspective","orthographic","postProcessGLTF","postProcess","parseGLTF","_parseGLTF","arrayBufferOrString","_promise","parseGLTFContainerSync","loadImages","loadBuffers","GLB_FILE_HEADER_SIZE","parseGLBSync","_glb","_loadBuffers","_loadImages","loadImage","_x9","_x10","_x11","_x12","_x13","_loadImage","_callee4","parsedImage","GLTFLoader","_options$byteOffset","addDeprecatedGLTFOptions","fetchImages","createImages","fetchBuffers","fetchLinkedResources","decompress","loadDecoderPromise","loadLibraryPromises","loadLibrary","_loadLibrary","libraryUrl","moduleName","getLibraryUrl","loadLibraryFromFile","library","modules","_loadLibraryFromFile","_response","scriptSource","loadLibraryFromString","eval","script","appendChild","createTextNode","body","loadDracoDecoderModule","_loadDracoDecoderModule","draco3d","draco","createDecoderModule","loadDracoDecoder","_loadDracoDecoder","DracoDecoderModule","wasmBinary","decoderType","t2","t3","t4","initializeDracoDecoder","onModuleLoaded","getMeshBoundingBox","POSITION","minX","minY","minZ","maxX","maxY","maxZ","positions","GEOMETRY_TYPE","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","NORMAL","COLOR","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","1","2","3","4","5","Int32Array","6","9","DracoParser","dracoGeometry","DecoderBuffer","Init","dracoStatus","decoder","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeBufferToMesh","faceCount","num_faces","attributeCount","num_attributes","vertexCount","num_points","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ptr","error_msg","loaderData","extractDRACOGeometry","boundingBox","geometry","getAttributes","positionAttribute","getPositionAttributeMetadata","drawMode","getMeshStripIndices","getMeshFaceIndices","metadata","posTransform","AttributeQuantizationTransform","InitFromAttribute","position","isQuantized","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","numPoints","attributeType","attributeId","GetAttributeId","dracoAttribute","GetAttribute","getAttributeTypedArray","numFaces","dracoArray","DracoInt32Array","GetFaceFromMesh","GetValue","GetTriangleStripsFromMesh","data_type","numComponents","num_components","numValues","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","DracoInt16Array","GetAttributeInt16ForAllPoints","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","WebAssembly","libraryPath","dracoParser","append","getOwnPropertyNames","normalizeName","normalizeValue","oldValue","hasOwnProperty","callback","thisArg","items","iteratorFor","NodeFetchResponse","_url","_ok","_status","_headers","httpResponse","httpHeaders","getHeaders","contentLength","_getContentLength","isDataURL","statSync","_getHeaders","fetchNode","ScenegraphNode","uid","display","rotation","matrix","userData","_setScenegraphNodeProps","setPosition","setRotation","setScale","setMatrix","copyMatrix","setMatrixComponents","updateMatrix","rot","identity","translate","rotateXYZ","getCoordinateUniforms","modelMatrix","worldMatrix","worldInverse","worldInverseTranspose","viewMatrix","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","GroupNode","remove","removeAll","traverse","visitor","accessorToJsArray","slicedArray","helperMatrix","quaternion","interpolate","input","interpolation","animationTime","nextIndex","previousIndex","previousTime","nextTime","stepInterpolate","ratio","path","linearInterpolate","tDiff","p0","outTangent0","inTangent1","p1","m0","m1","cubicsplineInterpolate","GLTFAnimation","startTime","speed","animate","timeMs","gltfNode","rotationMatrix","applyTranslationRotationScale","GLTFAnimator","getAnimations","vs","fs","defines","LIGHTING_FRAGMENT","dependencies","ModelNode","gl","_setModelNodeProps","model","managedResources","resource","draw","setUniforms","setAttributes","updateModuleSettings","GLTFMaterialParser","pbrDebug","imageBasedLightingEnvironment","useTangents","MANUAL_SRGB","SRGB_FAST_APPROXIMATION","hasFeature","FEATURES","USE_TEX_LOD","u_Camera","u_MetallicRoughnessValues","generatedTextures","u_DiffuseEnvSampler","u_SpecularEnvSampler","u_brdfLUT","u_ScaleIBLAmbient","u_ScaleDiffBaseMR","u_ScaleFGDSpec","defineIfPresent","parseMaterial","parseTexture","define","gltfTexture","pixelStore","parsePbrMetallicRoughness","u_BaseColorFactor","metallicFactor","roughnessFactor","u_NormalScale","strength","u_OcclusionStrength","u_EmissiveFactor","alphaCutoff","ALPHA_CUTOFF","u_AlphaCutoff","blend","blendEquation","blendFunc","addVersionToShader","isWebGL2","DEFAULT_OPTIONS","modelOptions","GLTFInstantiator","instantiate","createAnimator","createScene","gltfScene","createNode","createMesh","gltfMesh","getVertexCount","createPrimitive","materialParser","createGLTFModel","gltfPrimitive","createAttributes","loadedAttributes","attrName","createAccessor","generated","stride","createSampler","gltfSampler","needsPOT","createGLTFObjects","instantiator","animator","generateUrl","getUrl","urlOptions","asyncDeepMap","_asyncDeepMap","tree","func","mapSubtree","_mapSubtree","mapArray","mapObject","_mapObject","_loop","_mapArray","urlArray","_args4","deepLoad","_deepLoad","urlTree","load","shallowLoad","_shallowLoad","imageUrls","getImageUrls","_getImageUrls","mipLevels","getMipmappedImageUrls","_getMipmappedImageUrls","urls","_getImageSize","mipLevel","lod","getMipLevels","log2","GLTFEnvironment","brdfLutUrl","getTexUrl","specularMipLevels","makeCube","getTextureForFace","pixels","TextureCube","face","mipmaps","getDiffuseEnvSampler","_DiffuseEnvSampler","GL","getSpecularEnvSampler","_SpecularEnvSampler","imageArray","getBrdfTexture","_BrdfTexture","CUBE_FACE_TO_DIRECTION","GLTF_BASE_URL","LIGHT_SOURCES","default","directionalLights","color","direction","intensity","ambient","ambientLight","directional1","directional3","point1far","pointLights","attenuation","point1near","loadGLTF","urlOrPromise","AppAnimationLoop","opts","glOptions","webgl1","webgl2","alpha","modelFile","initialZoom","lastX","lastY","getInfo","initalizeEventHandling","pointerIsDown","pointerDown","pointerMove","dX","dY","ev","_fileLoaded","timeline","onInitialize","setParameters","depthTest","loadOptions","environment","showSelector","lightSelector","iblSelector","_updateLightSettings","_rebuildModel","_deleteScenes","lumaStats","applyLight","lightSources","onRender","aspect","projectionMatrix","clear","depth","pitch","roll","cameraPos","uView","uProjection","fov","radians","near","far","success","u_MVPMatrix","u_ModelMatrix","u_NormalMatrix","AnimationLoop","animationLoop","infoDiv","Example","render","exampleConfig","pageContext","React","Component","atob","_inherits","subClass","superClass","create","writable","cross","bx","by","bz","transformMat3","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","p","r","cos","sin","rotateY","rotateZ","angle","tempA","tempB","cosine","PI","acos","bufferToArrayBuffer","_slicedToArray","_n","_d","_e","_s","_i","setAxisAngle","axis","rad","s","bw","omega","cosom","sinom","scale0","scale1","fromMat3","fRoot","fTrace","k","vec4","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","vec3","IDENTITY_QUATERNION","_MathArray","Quaternion","check","fromAxisRotation","vectorA","vectorB","invDot","l","_arguments$","_arguments$$start","_arguments","vector","lengthSquared","multiplyLeft","multiplyRight","isNativeReflectConstruct","Reflect","construct","sham","Proxy","_construct","Parent","Class","instance","Function","Vector","ELEMENTS","mathArray","distanceSquared","dist","product","magnitude","vectors","_vectors","_i2","_vectors2","distance","subtract","multiply","multiplyScalar","ORIGIN","_Vector","Vector3","debug","_ref$origin","origin","_ref2$origin","_ref3","_ref3$origin","matrix4","transformAsPoint","matrix3","matrix2","isRequestURL","readFile","_readFile","_decodeDataUri","queryIndex","readFileAsync","getReadFileOptions","promisify","createReadStream","_createReadStream","responseType","S","mathgl","config","_cache","Wrapper","getPrototypeOf","setPrototypeOf","_Array","MathArray","arrayOrObject","toArray","to","formatString","printTypes","ai","minVector","maxVector","_scale","addScalar","scalar","validate","valid","parseImageNode","getPixelsAsync","ndarray","shape","layers","checkNumber","checkVector","v","callerName","validateVector","deprecated","_getPrototypeOf","o","toIObject","gOPD","createProperty","desc","getDesc","f","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","rt","LN2","Matrix","printRowMajor","row","RANK","col","columnIndex","firstIndex","columnVector","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","fovy","nf","tan","eye","center","up","x0","x1","x2","y0","y1","y2","z0","z1","z2","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","_Matrix","Matrix4","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","xx","yx","yy","zx","zy","zz","wx","wy","wz","left","right","bottom","top","_computeInfinitePerspectiveOffCenter","rl","tb","_eye","_ref2$near","_ref2$far","lr","bt","_ref3$fovy","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","ortho","_ref4","_ref4$fov","_ref4$aspect","_ref4$near","_ref4$far","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","_ref5","_ref6","rx","ry","rz","b12","b20","b21","b22","factor","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column3Row2","decodeDataUri","dataIndex","decodeURIComponent","gOPN","gOPS","anObject","it","getSymbols","_possibleConstructorReturn","ReferenceError","nodeVersion","inRange","ToDictionary","isASCIIByte","isASCIICodePoint","Stream","tokens","reverse","endOfStream","pop","prepend","token","unshift","decoderError","fatal","opt_code_point","encoderError","code_point","getEncoding","label","label_to_encoding","encodings","labels","heading","category","shift_jis_index","big5_index_no_hkscs","encoders","decoders","indexCodePointFor","pointer","indexPointerFor","_encoding","_decoder","_ignoreBOM","_BOMseen","_error_mode","_do_not_flush","ignoreBOM","_encoder","_fatal","UTF8Decoder","utf8_code_point","utf8_bytes_seen","utf8_bytes_needed","utf8_lower_boundary","utf8_upper_boundary","handler","bite","UTF8Encoder","SingleByteDecoder","SingleByteEncoder","GB18030Decoder","gb18030_first","gb18030_second","gb18030_third","code_point_offset","idx","entry","indexGB18030RangesCodePointFor","lead","GB18030Encoder","gbk_flag","trail","pointer_offset","indexGB18030RangesPointerFor","byte1","byte2","byte3","Big5Decoder","Big5_lead","Big5Encoder","index_","indexBig5PointerFor","EUCJPDecoder","eucjp_jis0212_flag","eucjp_lead","EUCJPEncoder","ISO2022JPDecoder","states","iso2022jp_decoder_state","iso2022jp_decoder_output_state","iso2022jp_lead","iso2022jp_output_flag","state","output_flag","ISO2022JPEncoder","iso2022jp_state","ShiftJISDecoder","Shift_JIS_lead","lead_offset","ShiftJISEncoder","indexShiftJISPointerFor","EUCKRDecoder","euckr_lead","EUCKREncoder","convertCodeUnitToBytes","code_unit","utf16be","UTF16Decoder","utf16_be","utf16_lead_byte","utf16_lead_surrogate","lead_surrogate","UTF16Encoder","XUserDefinedDecoder","XUserDefinedEncoder","input_stream","item","code_points","cp","codePointsToString","opt_string","u","stringToCodePoints","_setPrototypeOf","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","encodeImageNode","imageStream","encodeImageToStreamNode","INITIAL_MODULE_OPTIONS","getUniforms","lightSourceUniforms","convertColor","pointLight","directionalLight","getLightSourceUniforms","lighting_uEnabled","MAX_LIGHTS","component","EPSILON","ARRAY_TYPE","RANDOM","random","DEGREES_TO_RADIANS","formatValue","_ref$precision","precision","toPrecision","degrees","epsilon","oldEpsilon","printDegrees"],"mappings":"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","file":"component---templates-showcase-example-gltf-jsx-ec476993f66a8fc86f81.js","sourcesContent":["export * from '@math.gl/core';","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}","require(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","let channelHandles = 1;\nlet animationHandles = 1;\n\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {delay = 0, duration = Number.POSITIVE_INFINITY, rate = 1, repeat = 1} = props;\n\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n    this._setChannelTime(channel, this.time);\n    this.channels.set(handle, channel);\n\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n\n    const channels = this.channels.values();\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n    for (const animationData of animations) {\n      const {animation, channel} = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n\n    animation.setTime(this.getTime(channelHandle));\n\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n    // Note(Tarek): Don't loop on final repeat.\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n}\n","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function concatenateReadStream(readStream) {\n  var arrayBuffer = new ArrayBuffer(0);\n  var string = '';\n  return new Promise(function (resolve, reject) {\n    readStream.data(function (chunk) {\n      if (typeof chunk === 'string') {\n        string += chunk;\n      } else {\n        arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n      }\n    });\n    readStream.on('error', function (error) {\n      return reject(error);\n    });\n    readStream.on('end', function () {\n      if (readStream.complete) {\n        resolve(arrayBuffer || string);\n      } else {\n        reject('The connection was terminated while the message was still being sent');\n      }\n    });\n  });\n}\n\nfunction concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {vec4} result the receiving vector\r\n * @param {vec4} U the first vector\r\n * @param {vec4} V the second vector\r\n * @param {vec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n;\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.map\";\nimport assert from './env-utils/assert';\nvar VERSION = typeof \"2.1.1\" !== 'undefined' ? \"2.1.1\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread({}, loader, {\n      options: _objectSpread({}, loader.options, {}, options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}","import \"core-js/modules/es6.function.bind\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();","import { ConsoleLog } from './loader-utils/loggers';\nexport var DEFAULT_LOADER_OPTIONS = {\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  dataType: 'arraybuffer'\n};","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { DEFAULT_LOADER_OPTIONS } from '../constants';\nimport { NullLog } from './loggers';\n\nvar isPureObject = function isPureObject(value) {\n  return value && _typeof(value) === 'object' && value.constructor === {}.constructor;\n};\n\nvar globalOptions = _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n\nexport function setGlobalOptions(options) {\n  globalOptions = mergeOptions(globalOptions, options);\n}\nexport function mergeOptions(loader, options, url) {\n  var loaderDefaultOptions = loader && (loader.DEFAULT_LOADER_OPTIONS || loader.defaultOptions || loader.options || {});\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, globalOptions);\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread({}, mergedOptions[key], {}, options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nvar isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\n\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isFetchResponse = function isFetchResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isFileReadable = function isFileReadable(x) {\n  return isFile(x) || isBlob(x);\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\n};\nexport var isBuffer = function isBuffer(x) {\n  return x && _typeof(x) === 'object' && x.isBuffer;\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue\";\nexport default function _awaitAsyncGenerator(value) {\n  return new AwaitValue(value);\n}","import AwaitValue from \"./AwaitValue\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import AsyncGenerator from \"./AsyncGenerator\";\nexport default function _wrapAsyncGenerator(fn) {\n  return function () {\n    return new AsyncGenerator(fn.apply(this, arguments));\n  };\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nimport { isBrowser, nodeVersion } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream) {\n  if (isBrowser || nodeVersion >= 10) {\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return stream;\n    }\n\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\n\nfunction makeBrowserStreamIterator(_x) {\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction _makeBrowserStreamIterator() {\n  _makeBrowserStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(stream) {\n    var reader, _ref, done, value;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            reader = stream.getReader();\n            _context.prev = 1;\n\n          case 2:\n            if (!true) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 5;\n            return _awaitAsyncGenerator(reader.read());\n\n          case 5:\n            _ref = _context.sent;\n            done = _ref.done;\n            value = _ref.value;\n\n            if (!done) {\n              _context.next = 10;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 10:\n            _context.next = 12;\n            return value;\n\n          case 12:\n            _context.next = 2;\n            break;\n\n          case 14:\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](1);\n            reader.releaseLock();\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 16]]);\n  }));\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction makeNodeStreamIterator(_x2) {\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction _makeNodeStreamIterator() {\n  _makeNodeStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee2(stream) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _awaitAsyncGenerator(stream);\n\n          case 2:\n            stream = _context2.sent;\n\n          case 3:\n            if (!true) {\n              _context2.next = 15;\n              break;\n            }\n\n            data = stream.read();\n\n            if (!(data !== null)) {\n              _context2.next = 9;\n              break;\n            }\n\n            _context2.next = 8;\n            return data;\n\n          case 8:\n            return _context2.abrupt(\"continue\", 3);\n\n          case 9:\n            if (!stream._readableState.ended) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 11:\n            _context2.next = 13;\n            return _awaitAsyncGenerator(onceReadable(stream));\n\n          case 13:\n            _context2.next = 3;\n            break;\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction onceReadable(_x3) {\n  return _onceReadable.apply(this, arguments);\n}\n\nfunction _onceReadable() {\n  _onceReadable = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(stream) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              stream.once('readable', resolve);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _onceReadable.apply(this, arguments);\n}","export default function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol !== \"undefined\") {\n    if (Symbol.asyncIterator) {\n      method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      method = iterable[Symbol.iterator];\n      if (method != null) return method.call(iterable);\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\n\nvar _marked = _regeneratorRuntime.mark(makeChunkIterator),\n    _marked2 = _regeneratorRuntime.mark(makeArrayBufferChunkIterator),\n    _marked3 = _regeneratorRuntime.mark(makeStringChunkIterator);\n\nimport { concatenateArrayBuffers } from '../javascript-utils/memory-copy-utils';\nexport function concatenateChunksAsync(_x) {\n  return _concatenateChunksAsync.apply(this, arguments);\n}\n\nfunction _concatenateChunksAsync() {\n  _concatenateChunksAsync = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(asyncIterator) {\n    var arrayBuffer, string, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            arrayBuffer = new ArrayBuffer(0);\n            string = '';\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context4.prev = 4;\n            _iterator = _asyncIterator(asyncIterator);\n\n          case 6:\n            _context4.next = 8;\n            return _iterator.next();\n\n          case 8:\n            _step = _context4.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context4.next = 12;\n            return _step.value;\n\n          case 12:\n            _value = _context4.sent;\n\n            if (_iteratorNormalCompletion) {\n              _context4.next = 19;\n              break;\n            }\n\n            chunk = _value;\n\n            if (typeof chunk === 'string') {\n              string += chunk;\n            } else {\n              arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n            }\n\n          case 16:\n            _iteratorNormalCompletion = true;\n            _context4.next = 6;\n            break;\n\n          case 19:\n            _context4.next = 25;\n            break;\n\n          case 21:\n            _context4.prev = 21;\n            _context4.t0 = _context4[\"catch\"](4);\n            _didIteratorError = true;\n            _iteratorError = _context4.t0;\n\n          case 25:\n            _context4.prev = 25;\n            _context4.prev = 26;\n\n            if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n              _context4.next = 30;\n              break;\n            }\n\n            _context4.next = 30;\n            return _iterator[\"return\"]();\n\n          case 30:\n            _context4.prev = 30;\n\n            if (!_didIteratorError) {\n              _context4.next = 33;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 33:\n            return _context4.finish(30);\n\n          case 34:\n            return _context4.finish(25);\n\n          case 35:\n            return _context4.abrupt(\"return\", string || arrayBuffer);\n\n          case 36:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee, null, [[4, 21, 25, 35], [26,, 30, 34]]);\n  }));\n  return _concatenateChunksAsync.apply(this, arguments);\n}\n\nexport function makeChunkIterator(bigArrayBufferOrString) {\n  var options,\n      _args = arguments;\n  return _regeneratorRuntime.wrap(function makeChunkIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n          if (!(typeof bigArrayBufferOrString === 'string')) {\n            _context.next = 4;\n            break;\n          }\n\n          return _context.delegateYield(makeStringChunkIterator(bigArrayBufferOrString, options), \"t0\", 3);\n\n        case 3:\n          return _context.abrupt(\"return\");\n\n        case 4:\n          if (!(bigArrayBufferOrString instanceof ArrayBuffer)) {\n            _context.next = 7;\n            break;\n          }\n\n          return _context.delegateYield(makeArrayBufferChunkIterator(bigArrayBufferOrString, options), \"t1\", 6);\n\n        case 6:\n          return _context.abrupt(\"return\");\n\n        case 7:\n          throw new Error('assert');\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nfunction makeArrayBufferChunkIterator(arrayBuffer) {\n  var options,\n      _options$chunkSize,\n      chunkSize,\n      byteOffset,\n      chunkByteLength,\n      chunk,\n      sourceArray,\n      chunkArray,\n      _args2 = arguments;\n\n  return _regeneratorRuntime.wrap(function makeArrayBufferChunkIterator$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          options = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {};\n          _options$chunkSize = options.chunkSize, chunkSize = _options$chunkSize === void 0 ? 256 * 1024 : _options$chunkSize;\n          byteOffset = 0;\n\n        case 3:\n          if (!(byteOffset < arrayBuffer.byteLength)) {\n            _context2.next = 14;\n            break;\n          }\n\n          chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n          chunk = new ArrayBuffer(chunkByteLength);\n          sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n          chunkArray = new Uint8Array(chunk);\n          chunkArray.set(sourceArray);\n          byteOffset += chunkByteLength;\n          _context2.next = 12;\n          return chunk;\n\n        case 12:\n          _context2.next = 3;\n          break;\n\n        case 14:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction makeStringChunkIterator(string) {\n  var options,\n      _options$chunkSize2,\n      chunkSize,\n      offset,\n      chunkLength,\n      chunk,\n      _args3 = arguments;\n\n  return _regeneratorRuntime.wrap(function makeStringChunkIterator$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          options = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : {};\n          _options$chunkSize2 = options.chunkSize, chunkSize = _options$chunkSize2 === void 0 ? 256 * 1024 : _options$chunkSize2;\n          offset = 0;\n\n        case 3:\n          if (!(offset < string.length)) {\n            _context3.next = 11;\n            break;\n          }\n\n          chunkLength = Math.min(string.length - offset, chunkSize);\n          chunk = string.slice(offset, offset + chunkLength);\n          offset += chunkLength;\n          _context3.next = 9;\n          return chunk;\n\n        case 9:\n          _context3.next = 3;\n          break;\n\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}","import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar FileReadableResponse = function () {\n  function FileReadableResponse(fileOrBlob, options) {\n    _classCallCheck(this, FileReadableResponse);\n\n    this._fileOrBlob = fileOrBlob;\n    this.bodyUsed = false;\n  }\n\n  _createClass(FileReadableResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var _this$_getFileReader, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$_getFileReader = this._getFileReader(), reader = _this$_getFileReader.reader, promise = _this$_getFileReader.promise;\n                reader.readAsArrayBuffer(this._fileOrBlob);\n                return _context.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var _this$_getFileReader2, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$_getFileReader2 = this._getFileReader(), reader = _this$_getFileReader2.reader, promise = _this$_getFileReader2.promise;\n                reader.readAsText(this._fileOrBlob);\n                return _context2.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getFileReader\",\n    value: function _getFileReader() {\n      assert(!this.bodyUsed);\n      this.bodyUsed = true;\n      var reader = new FileReader();\n      var promise = new Promise(function (resolve, reject) {\n        try {\n          reader.onerror = function (_) {\n            return reject(new Error('Read error'));\n          };\n\n          reader.onabort = function () {\n            return reject(new Error('Read aborted.'));\n          };\n\n          reader.onload = function () {\n            return resolve(reader.result);\n          };\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return {\n        reader: reader,\n        promise: promise\n      };\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return new Headers({\n        'Content-Length': this._fileOrBlob.size,\n        'Content-Type': this._fileOrBlob.type\n      });\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return 200;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._fileOrBlob.name || '';\n    }\n  }]);\n\n  return FileReadableResponse;\n}();\n\nexport default function fetchFileReadable(fileOrBlob, options) {\n  return Promise.resolve(new FileReadableResponse(fileOrBlob, options));\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function checkFetchResponseStatus(_x) {\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nfunction _checkFetchResponseStatus() {\n  _checkFetchResponseStatus = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var errorMessage, text;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (response.ok) {\n              _context.next = 12;\n              break;\n            }\n\n            errorMessage = \"fetch failed \".concat(response.status, \" \");\n            _context.prev = 2;\n            _context.next = 5;\n            return response.text();\n\n          case 5:\n            text = _context.sent;\n            errorMessage += text;\n            _context.next = 11;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 11:\n            throw new Error(errorMessage);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 9]]);\n  }));\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(\"fetch failed \".concat(response.status));\n  }\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isFetchResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isFileReadable, isBuffer } from '../../javascript-utils/is-type';\nimport { makeStreamIterator } from '../../iterator-utils/stream-iteration';\nimport { concatenateChunksAsync } from '../../iterator-utils/chunk-iteration';\nimport fetchFileReadable from '../fetch/fetch-file.browser';\nimport { checkFetchResponseStatus, checkFetchResponseStatusSync } from './check-errors';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getUrlFromData(data, url) {\n  if (isFetchResponse(data)) {\n    url = url || data.url;\n  } else if (isFileReadable(url)) {\n    url = url.name;\n  }\n\n  return typeof url === 'string' ? url.replace(/\\?.*/, '') : url;\n}\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    var arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data) || isBuffer(data)) {\n    if (loader.text && !loader.binary) {\n      var _textDecoder = new TextDecoder('utf8');\n\n      return _textDecoder.decode(data);\n    }\n\n    var _arrayBuffer = data.buffer;\n    var byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== _arrayBuffer.byteLength) {\n      _arrayBuffer = _arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return _arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(_x, _x2) {\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nfunction _getArrayBufferOrStringFromData() {\n  _getArrayBufferOrStringFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loader) {\n    var isArrayBuffer, response;\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return data;\n\n          case 2:\n            data = _context2.sent;\n            isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n            if (!(typeof data === 'string' || isArrayBuffer)) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n          case 6:\n            if (!isFileReadable(data)) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 9;\n            return fetchFileReadable(data);\n\n          case 9:\n            data = _context2.sent;\n\n          case 10:\n            if (!isFetchResponse(data)) {\n              _context2.next = 24;\n              break;\n            }\n\n            response = data;\n            _context2.next = 14;\n            return checkFetchResponseStatus(response);\n\n          case 14:\n            if (!loader.binary) {\n              _context2.next = 20;\n              break;\n            }\n\n            _context2.next = 17;\n            return response.arrayBuffer();\n\n          case 17:\n            _context2.t0 = _context2.sent;\n            _context2.next = 23;\n            break;\n\n          case 20:\n            _context2.next = 22;\n            return response.text();\n\n          case 22:\n            _context2.t0 = _context2.sent;\n\n          case 23:\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 24:\n            if (isReadableStream(data)) {\n              data = makeStreamIterator(data);\n            }\n\n            if (!(isIterable(data) || isAsyncIterable(data))) {\n              _context2.next = 27;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", concatenateChunksAsync(data));\n\n          case 27:\n            throw new Error(ERR_DATA);\n\n          case 28:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nexport function getAsyncIteratorFromData(data) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isFetchResponse(data) && data.body) {\n    checkFetchResponseStatusSync(data);\n    return makeStreamIterator(data.body);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIteratorFromData(data);\n}\nexport function getIteratorFromData(data) {\n  if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return data.buffer || data;\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.assign\";\nvar pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      return filename.replace(alias, replacement);\n    }\n  }\n\n  filename += pathPrefix;\n  return filename;\n}","import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function getErrorMessageFromResponseSync(response) {\n  return \"Failed to fetch resource \".concat(response.url, \"(\").concat(response.status, \"): \").concat(response.statusText, \" \");\n}\nexport function getErrorMessageFromResponse(_x) {\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}\n\nfunction _getErrorMessageFromResponse() {\n  _getErrorMessageFromResponse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var message, contentType;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n            _context.prev = 1;\n            contentType = response.headers.get('Content-Type');\n\n            if (!contentType.includes('application/json')) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.t0 = message;\n            _context.next = 7;\n            return response.text();\n\n          case 7:\n            message = _context.t0 += _context.sent;\n            _context.next = 11;\n            break;\n\n          case 10:\n            message += response.statusText;\n\n          case 11:\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](1);\n            return _context.abrupt(\"return\", message);\n\n          case 16:\n            return _context.abrupt(\"return\", message);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 13]]);\n  }));\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { isFileReadable } from '../../javascript-utils/is-type';\nimport fetchFileReadable from './fetch-file.browser';\nimport { getErrorMessageFromResponse } from './fetch-error-message';\nexport function fetchFile(_x, _x2) {\n  return _fetchFile.apply(this, arguments);\n}\n\nfunction _fetchFile() {\n  _fetchFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url, options) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isFileReadable(url)) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetchFileReadable(url, options));\n\n          case 2:\n            url = resolvePath(url);\n            _context.next = 5;\n            return fetch(url, options);\n\n          case 5:\n            response = _context.sent;\n\n            if (!(!response.ok && options[\"throws\"])) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.t0 = Error;\n            _context.next = 10;\n            return getErrorMessageFromResponse(response);\n\n          case 10:\n            _context.t1 = _context.sent;\n            throw new _context.t0(_context.t1);\n\n          case 12:\n            return _context.abrupt(\"return\", response);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchFile.apply(this, arguments);\n}","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { fetchFile } from '../fetch/fetch-file';\nexport function getLoaderContext(context, options, previousContext) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: context.fetch || fetchFile\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}","import { assert } from '@loaders.gl/loader-utils';\nimport { toArrayBuffer as bufferToArrayBuffer } from '../node/utils/to-array-buffer.node';\nexport function toArrayBuffer(data) {\n  if (bufferToArrayBuffer) {\n    data = bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport { assert } from '@loaders.gl/loader-utils';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}","import \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 ? arguments[2] : undefined;\n  var transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : null;\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    return _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = getTransferList(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, jobName) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.jobQueue.push({\n                    data: data,\n                    jobName: jobName,\n                    resolve: resolve,\n                    reject: reject\n                  });\n\n                  _this._startQueuedJob();\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x, _x2) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_startQueuedJob\",\n    value: function _startQueuedJob() {\n      var _this2 = this;\n\n      if (!this.jobQueue.length) {\n        return;\n      }\n\n      var worker = this._getAvailableWorker();\n\n      if (!worker) {\n        return;\n      }\n\n      var job = this.jobQueue.shift();\n      this.onDebug({\n        message: 'processing',\n        worker: worker.name,\n        job: job.jobName,\n        backlog: this.jobQueue.length\n      });\n      worker.process(job.data).then(function (result) {\n        return job.resolve(result);\n      })[\"catch\"](function (error) {\n        return job.reject(error);\n      }).then(function () {\n        return _this2._onWorkerDone(worker);\n      });\n    }\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n      } else {\n        this.idleQueue.push(worker);\n\n        this._startQueuedJob();\n      }\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };","import \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(workerSource, workerName, data) {\n        var workerPool;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerPool = this._getWorkerPool(workerSource, workerName);\n                return _context.abrupt(\"return\", workerPool.process(data));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function process(_x, _x2, _x3) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: this.onMessage,\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };","import \"core-js/modules/es6.function.name\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { toArrayBuffer } from '../../javascript-utils/binary-utils';\nimport WorkerFarm from '../../worker-utils/worker-farm';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nimport { parse } from '../parse';\nvar VERSION = typeof \"2.1.1\" !== 'undefined' ? \"2.1.1\" : 'latest';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  var warning = loader.version !== VERSION ? \"(core version \".concat(VERSION, \")\") : '';\n  return workerFarm.process(workerSource, \"\".concat(workerName, \"-worker@\").concat(loader.version).concat(warning), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(VERSION),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return parse(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, getTransferList(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.is-array\";\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nvar registeredLoaders = [];\nexport function registerLoaders(loaders) {\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!registeredLoaders.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        registeredLoaders.unshift(normalizedLoader);\n      }\n    };\n\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return registeredLoaders;\n}\nexport function _unregisterLoaders() {\n  registeredLoaders = [];\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es6.array.some\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { getRegisteredLoaders } from './register-loaders';\nimport { normalizeLoader } from './loader-utils/normalize-loader';\nimport { isFetchResponse } from '../javascript-utils/is-type';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nvar DATA_URL_PATTERN = /^data:(.*?)(;|,)/;\nexport function selectLoader(loaders) {\n  var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n      _ref$nothrow = _ref.nothrow,\n      nothrow = _ref$nothrow === void 0 ? false : _ref$nothrow;\n\n  url = url || '';\n\n  if (loaders && !Array.isArray(loaders)) {\n    var _loader = loaders;\n    normalizeLoader(_loader);\n    return _loader;\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n  url = url.replace(/\\?.*/, '');\n  var loader = findLoaderByUrl(loaders, url);\n  loader = loader || findLoaderByContentType(loaders, data);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader) {\n    if (nothrow) {\n      return null;\n    }\n\n    var message = 'No valid loader found';\n\n    if (data) {\n      message += \" for data starting with \\\"\".concat(getFirstCharacters(data), \"\\\"\");\n    }\n\n    if (url) {\n      message += \" for \".concat(url);\n    }\n\n    throw new Error(message);\n  }\n\n  return loader;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = loaders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url.match(DATA_URL_PATTERN);\n  var mimeType = match && match[1];\n\n  if (mimeType) {\n    return findLoaderByMimeType(loaders, mimeType);\n  }\n\n  match = url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  return extension && findLoaderByExtension(loaders, extension);\n}\n\nfunction findLoaderByMimeType(loaders, mimeType) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = loaders[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var loader = _step2.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = loaders[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var loader = _step3.value;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = loader.extensions[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var loaderExtension = _step4.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n        _iterator3[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, data) {\n  if (!data || !isFetchResponse(data) || !data.headers) {\n    return null;\n  }\n\n  var contentType = data.headers.get('content-type');\n  return findLoaderByMimeType(loaders, contentType);\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = loaders[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n        _iterator5[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testBinary(data, byteOffset, loader) {\n  var type = Array.isArray(loader.test) ? 'array' : _typeof(loader.test);\n\n  switch (type) {\n    case 'function':\n      return loader.test(data, loader);\n\n    case 'string':\n    case 'array':\n      var tests = Array.isArray(loader.test) ? loader.test : [loader.test];\n      return tests.some(function (test) {\n        var magic = getMagicString(data, byteOffset, test.length);\n        return test === magic;\n      });\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from './loader-utils/normalize-loader';\nimport { mergeOptions } from './loader-utils/merge-options';\nimport { getUrlFromData } from './loader-utils/get-data';\nimport { getArrayBufferOrStringFromData } from './loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from './loader-utils/get-loader-context';\nimport parseWithWorker, { canParseWithWorker } from './loader-utils/parse-with-worker';\nimport { selectLoader } from './select-loader';\nexport function parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loaders, options, context) {\n    var url, autoUrl, candidateLoaders, loader;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              context = options;\n              options = loaders;\n              loaders = null;\n            }\n\n            url = '';\n\n            if (typeof context === 'string') {\n              url = context;\n              context = null;\n            }\n\n            options = options || {};\n            autoUrl = getUrlFromData(data, url);\n            candidateLoaders = getLoaders(loaders, context);\n            loader = selectLoader(candidateLoaders, autoUrl, data);\n\n            if (loader) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            options = mergeOptions(loader, options, autoUrl);\n            context = getLoaderContext({\n              url: autoUrl,\n              parse: parse,\n              loaders: candidateLoaders\n            }, options, context);\n            _context.next = 13;\n            return parseWithLoader(loader, data, options, context);\n\n          case 13:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction parseWithLoader(_x5, _x6, _x7, _x8) {\n  return _parseWithLoader.apply(this, arguments);\n}\n\nfunction _parseWithLoader() {\n  _parseWithLoader = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(loader, data, options, context) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            validateLoaderVersion(loader);\n            _context2.next = 3;\n            return getArrayBufferOrStringFromData(data, loader);\n\n          case 3:\n            data = _context2.sent;\n\n            if (!(loader.parseTextSync && typeof data === 'string')) {\n              _context2.next = 7;\n              break;\n            }\n\n            options.dataType = 'text';\n            return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n          case 7:\n            if (!canParseWithWorker(loader, data, options, context)) {\n              _context2.next = 11;\n              break;\n            }\n\n            _context2.next = 10;\n            return parseWithWorker(loader, data, options, context);\n\n          case 10:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 11:\n            if (!loader.parse) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 14;\n            return loader.parse(data, options, context, loader);\n\n          case 14:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 15:\n            assert(!loader.parseSync);\n            return _context2.abrupt(\"return\", assert(false));\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseWithLoader.apply(this, arguments);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}","import { global, isBrowser } from '../utils/globals';\nvar _parseImageNode = global._parseImageNode;\nvar IMAGE_SUPPORTED = typeof Image !== 'undefined';\nvar IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nvar NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || NODE_IMAGE_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'html':\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'ndarray':\n    case 'data':\n      return isBrowser ? true : NODE_IMAGE_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (isImageTypeSupported('image')) {\n    return 'image';\n  }\n\n  if (isImageTypeSupported('imagebitmap')) {\n    return 'imagebitmap';\n  }\n\n  if (isImageTypeSupported('data')) {\n    return 'data';\n  }\n\n  throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      var imageData = context.getImageData(0, 0, image.width, image.height);\n      return imageData;\n\n    default:\n      return assert(false);\n  }\n}\nexport { getImageData as getImageSize };\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nvar SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nvar SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    console.warn('SVG cannot be parsed to imagebitmap');\n    return new Blob([new Uint8Array(arrayBuffer)], {\n      type: 'image/svg+xml'\n    });\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\nexport function getBlobOrDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    var textDecoder = new TextDecoder();\n    var xmlText = textDecoder.decode(arrayBuffer);\n    var src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\n\nfunction isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getBlobOrDataUrl } from './get-blob';\nexport default function parseToImage(_x, _x2, _x3) {\n  return _parseToImage.apply(this, arguments);\n}\n\nfunction _parseToImage() {\n  _parseToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blobOrDataUrl, URL, objectUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            blobOrDataUrl = getBlobOrDataUrl(arrayBuffer, url);\n            URL = self.URL || self.webkitURL;\n            objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n            _context.prev = 3;\n            _context.next = 6;\n            return loadToImage(objectUrl || blobOrDataUrl, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n            _context.prev = 7;\n\n            if (objectUrl) {\n              URL.revokeObjectURL(objectUrl);\n            }\n\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3,, 7, 10]]);\n  }));\n  return _parseToImage.apply(this, arguments);\n}\n\nexport function loadToImage(_x4, _x5) {\n  return _loadToImage.apply(this, arguments);\n}\n\nfunction _loadToImage() {\n  _loadToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    var image;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            image = new Image();\n            image.src = url;\n\n            if (!(options.image && options.image.decode && image.decode)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 5;\n            return image.decode();\n\n          case 5:\n            return _context2.abrupt(\"return\", image);\n\n          case 6:\n            _context2.next = 8;\n            return new Promise(function (resolve, reject) {\n              try {\n                image.onload = function () {\n                  return resolve(image);\n                };\n\n                image.onerror = function (err) {\n                  return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n                };\n              } catch (error) {\n                reject(error);\n              }\n            });\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadToImage.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getBlob } from './get-blob';\nvar imagebitmapOptionsSupported = true;\nexport default function parseToImageBitmap(_x, _x2, _x3) {\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction _parseToImageBitmap() {\n  _parseToImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blob, imagebitmapOptions;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            blob = getBlob(arrayBuffer, url);\n            imagebitmapOptions = options && options.imagebitmap;\n\n            if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n              imagebitmapOptions = null;\n            }\n\n            if (!imagebitmapOptions) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.prev = 4;\n            _context.next = 7;\n            return createImageBitmap(blob, imagebitmapOptions);\n\n          case 7:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](4);\n            console.warn(_context.t0);\n            imagebitmapOptionsSupported = false;\n\n          case 14:\n            _context.next = 16;\n            return createImageBitmap(blob);\n\n          case 16:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 10]]);\n  }));\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nvar EMPTY_OBJECT = {};\n\nfunction isEmptyObject(object) {\n  for (var key in object || EMPTY_OBJECT) {\n    return true;\n  }\n\n  return false;\n}","import \"core-js/modules/es6.set\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nvar BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport var mimeTypeMap = new Map([['image/png', {\n  test: isPng,\n  getSize: getPngSize\n}], ['image/jpeg', {\n  test: isJpeg,\n  getSize: getJpegSize\n}], ['image/gif', {\n  test: isGif,\n  getSize: getGifSize\n}], ['image/bmp', {\n  test: isBmp,\n  getSize: getBmpSize\n}]]);\nexport function isPng(dataView) {\n  return dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n}\n\nfunction getPngSize(dataView) {\n  return {\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nexport function isGif(dataView) {\n  return dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n}\n\nfunction getGifSize(dataView) {\n  return {\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function isBmp(dataView) {\n  return dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n}\n\nfunction getBmpSize(dataView) {\n  return {\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nexport function isJpeg(dataView) {\n  return dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2, BIG_ENDIAN) === 0xff;\n}\n\nfunction getJpegSize(dataView) {\n  if (dataView.byteLength < 2 || dataView.getUint16(0, BIG_ENDIAN) !== 0xffd8) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}","import \"core-js/modules/es6.typed.data-view\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { mimeTypeMap } from './binary-image-parsers';\nvar ERR_INVALID_MIME_TYPE = \"Invalid MIME type. Supported MIME types are: \".concat(Array.from(mimeTypeMap.keys()).join(', '));\nexport function isBinaryImage(arrayBuffer, mimeType) {\n  if (mimeType) {\n    var _getBinaryImageTypeHa = getBinaryImageTypeHandlers(mimeType),\n        test = _getBinaryImageTypeHa.test;\n\n    var dataView = toDataView(arrayBuffer);\n    return test(dataView);\n  }\n\n  return Boolean(getBinaryImageMIMEType(arrayBuffer));\n}\nexport function getBinaryImageMIMEType(arrayBuffer) {\n  var dataView = toDataView(arrayBuffer);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = mimeTypeMap.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          mimeType = _step$value[0],\n          test = _step$value[1].test;\n\n      if (test(dataView)) {\n        return mimeType;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return null;\n}\nexport function getBinaryImageSize(arrayBuffer) {\n  var mimeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  mimeType = mimeType || getBinaryImageMIMEType(arrayBuffer);\n\n  var _getBinaryImageTypeHa2 = getBinaryImageTypeHandlers(mimeType),\n      getSize = _getBinaryImageTypeHa2.getSize;\n\n  var dataView = toDataView(arrayBuffer);\n  var size = getSize(dataView);\n\n  if (!size) {\n    throw new Error(\"invalid image data for type: \".concat(mimeType));\n  }\n\n  return size;\n}\n\nfunction getBinaryImageTypeHandlers(mimeType) {\n  var handlers = mimeTypeMap.get(mimeType);\n\n  if (!handlers) {\n    throw new Error(ERR_INVALID_MIME_TYPE);\n  }\n\n  return handlers;\n}\n\nfunction toDataView(data) {\n  data = data.buffer || data;\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  throw new Error('toDataView');\n}","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMIMEType } from '../binary-image-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  var mimeType = getBinaryImageMIMEType(arrayBuffer);\n  var _parseImageNode = global._parseImageNode;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport assert from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../parsed-image-api/image-type';\nimport { getImageData } from '../parsed-image-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default function parseImage(_x, _x2, _x3) {\n  return _parseImage.apply(this, arguments);\n}\n\nfunction _parseImage() {\n  _parseImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var imageOptions, imageType, _ref, url, loadType, image;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = options || {};\n            imageOptions = options.image || {};\n            imageType = imageOptions.type || 'auto';\n            _ref = context || {}, url = _ref.url;\n            loadType = getLoadableImageType(imageType);\n            _context.t0 = loadType;\n            _context.next = _context.t0 === 'imagebitmap' ? 8 : _context.t0 === 'image' ? 12 : _context.t0 === 'data' ? 16 : 20;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return parseToImageBitmap(arrayBuffer, options, url);\n\n          case 10:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 12:\n            _context.next = 14;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 14:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 16:\n            _context.next = 18;\n            return parseToNodeImage(arrayBuffer, options);\n\n          case 18:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 20:\n            assert(false);\n\n          case 21:\n            if (imageType === 'data') {\n              image = getImageData(image);\n            }\n\n            return _context.abrupt(\"return\", image);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImage.apply(this, arguments);\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}","import \"core-js/modules/es6.typed.data-view\";\nimport parseImage from './lib/parsers/parse-image';\nimport { isPng, isGif, isBmp, isJpeg } from './lib/binary-image-api/binary-image-parsers';\nvar VERSION = typeof \"2.1.1\" !== 'undefined' ? \"2.1.1\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vndmicrosofticon', 'image/svg+xml'];\nvar ImageLoader = {\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  test: function test(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    return isJpeg(dataView) || isBmp(dataView) || isGif(dataView) || isPng(dataView);\n  },\n  options: {\n    image: {\n      format: 'auto',\n      decode: true\n    }\n  }\n};\nexport default ImageLoader;","import \"core-js/modules/es6.typed.data-view\";\nexport function getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\nexport function getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","import { getFirstCharacters } from '../binary-utils/get-first-characters';\nexport function parseJSON(string) {\n  try {\n    return JSON.parse(string);\n  } catch (_) {\n    throw new Error(\"Failed to parse JSON from data starting with \\\"\".concat(getFirstCharacters(string), \"\\\"\"));\n  }\n}","import \"core-js/modules/es6.typed.uint8-array\";\nexport function padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3;\n}\nexport function getZeroOffsetArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  var subArray = byteLength ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  var arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\nexport function copyArrayBuffer(targetBuffer, sourceBuffer, byteOffset) {\n  var byteLength = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : sourceBuffer.byteLength;\n  var targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  var sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\nexport function copyToArray(source, target, targetOffset) {\n  var sourceArray;\n\n  if (source instanceof ArrayBuffer) {\n    sourceArray = new Uint8Array(source);\n  } else {\n    var srcByteOffset = source.byteOffset;\n    var srcByteLength = source.byteLength;\n    sourceArray = new Uint8Array(source.buffer, srcByteOffset, srcByteLength);\n  }\n\n  target.set(sourceArray, targetOffset);\n  return targetOffset + padTo4Bytes(sourceArray.byteLength);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'assert failed: gltf');\n  }\n}","import \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.string.starts-with\";\nexport function resolveUrl(url, options) {\n  var absolute = url.startsWith('data:') || url.startsWith('http:') || url.startsWith('https:');\n\n  if (absolute) {\n    return url;\n  }\n\n  var baseUrl = options.baseUri || options.uri;\n\n  if (!baseUrl) {\n    throw new Error(\"'baseUri' must be provided to resolve relative url \".concat(url));\n  }\n\n  return baseUrl.substr(0, baseUrl.lastIndexOf('/') + 1) + url;\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../utils/assert';\nexport function getTypedArrayForBufferView(json, buffers, bufferViewIndex) {\n  var bufferView = json.bufferViews[bufferViewIndex];\n  assert(bufferView);\n  var bufferIndex = bufferView.buffer;\n  var binChunk = buffers[bufferIndex];\n  assert(binChunk);\n  var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n  return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n}\nexport function getTypedArrayForImageData(json, buffers, imageIndex) {\n  var image = json.images[imageIndex];\n  var bufferViewIndex = json.bufferViews[image.bufferView];\n  return getTypedArrayForBufferView(json, buffers, bufferViewIndex);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport assert from '../utils/assert';\nvar TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nvar ARRAY_TO_COMPONENT_TYPE = new Map([[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126]]);\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  var type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  var componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  var bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  var length = accessor.count * components;\n  var byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType: ArrayType,\n    length: length,\n    byteLength: byteLength\n  };\n}","import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.find\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getBinaryImageMIMEType } from '@loaders.gl/images';\nimport { padTo4Bytes, copyToArray } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength, getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils/gltf-utils';\n\nvar GLTFScenegraph = function () {\n  function GLTFScenegraph(gltf) {\n    _classCallCheck(this, GLTFScenegraph);\n\n    if (gltf instanceof GLTFScenegraph) {\n      return gltf;\n    }\n\n    if (!gltf) {\n      gltf = {\n        json: {\n          version: 2,\n          buffers: []\n        },\n        buffers: []\n      };\n    }\n\n    this.gltf = gltf;\n    assert(this.gltf.json);\n  }\n\n  _createClass(GLTFScenegraph, [{\n    key: \"getApplicationData\",\n    value: function getApplicationData(key) {\n      var data = this.json[key];\n      return data;\n    }\n  }, {\n    key: \"getExtraData\",\n    value: function getExtraData(key) {\n      var extras = this.json.extras || {};\n      return extras[key];\n    }\n  }, {\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      var isExtension = this.getUsedExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      var extensions = this.json.extensions || {};\n      return isExtension ? extensions[extensionName] || true : null;\n    }\n  }, {\n    key: \"getRequiredExtension\",\n    value: function getRequiredExtension(extensionName) {\n      var isRequired = this.getRequiredExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      return isRequired ? this.getExtension(extensionName) : null;\n    }\n  }, {\n    key: \"getRequiredExtensions\",\n    value: function getRequiredExtensions() {\n      return this.json.extensionsRequired || [];\n    }\n  }, {\n    key: \"getUsedExtensions\",\n    value: function getUsedExtensions() {\n      return this.json.extensionsUsed || [];\n    }\n  }, {\n    key: \"getObjectExtension\",\n    value: function getObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      return extensions[extensionName];\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this.getObject('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this.getObject('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this.getObject('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this.getObject('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this.getObject('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this.getObject('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this.getObject('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this.getObject('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this.getObject('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this.getObject('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this.getObject('buffers', index);\n    }\n  }, {\n    key: \"getObject\",\n    value: function getObject(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        throw new Error(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"getTypedArrayForBufferView\",\n    value: function getTypedArrayForBufferView(bufferView) {\n      bufferView = this.getBufferView(bufferView);\n      var bufferIndex = bufferView.buffer;\n      var binChunk = this.gltf.buffers[bufferIndex];\n      assert(binChunk);\n      var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n      return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"getTypedArrayForAccessor\",\n    value: function getTypedArrayForAccessor(accessor) {\n      accessor = this.getAccessor(accessor);\n      var bufferView = this.getBufferView(accessor.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n\n      var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, bufferView),\n          ArrayType = _getAccessorArrayType.ArrayType,\n          length = _getAccessorArrayType.length;\n\n      var byteOffset = bufferView.byteOffset + accessor.byteOffset;\n      return new ArrayType(arrayBuffer, byteOffset, length);\n    }\n  }, {\n    key: \"getTypedArrayForImageData\",\n    value: function getTypedArrayForImageData(image) {\n      image = this.getAccessor(image);\n      var bufferView = this.getBufferView(image.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n      var byteOffset = bufferView.byteOffset || 0;\n      return new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"addApplicationData\",\n    value: function addApplicationData(key, data) {\n      this.json[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addExtraData\",\n    value: function addExtraData(key, data) {\n      this.json.extras = this.json.extras || {};\n      this.json.extras[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addObjectExtension\",\n    value: function addObjectExtension(object, extensionName, data) {\n      assert(data);\n      object.extensions = object.extensions || {};\n      object.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"removeObjectExtension\",\n    value: function removeObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      delete extensions[extensionName];\n      return this;\n    }\n  }, {\n    key: \"addExtension\",\n    value: function addExtension(extensionName) {\n      var extensionData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(extensionData);\n      this.json.extensions = this.json.extensions || {};\n      this.json.extensions[extensionName] = extensionData;\n      this.registerUsedExtension(extensionName);\n      return extensionData;\n    }\n  }, {\n    key: \"addRequiredExtension\",\n    value: function addRequiredExtension(extensionName) {\n      var extensionData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(extensionData);\n      this.addExtension(extensionName, extensionData);\n      this.registerRequiredExtension(extensionName);\n      return extensionData;\n    }\n  }, {\n    key: \"registerUsedExtension\",\n    value: function registerUsedExtension(extensionName) {\n      this.json.extensionsUsed = this.json.extensionsUsed || [];\n\n      if (!this.json.extensionsUsed.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsUsed.push(extensionName);\n      }\n    }\n  }, {\n    key: \"registerRequiredExtension\",\n    value: function registerRequiredExtension(extensionName) {\n      this.registerUsedExtension(extensionName);\n      this.json.extensionsRequired = this.json.extensionsRequired || [];\n\n      if (!this.json.extensionsRequired.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsRequired.push(extensionName);\n      }\n    }\n  }, {\n    key: \"removeExtension\",\n    value: function removeExtension(extensionName) {\n      if (this.json.extensionsRequired) {\n        this._removeStringFromArray(this.json.extensionsRequired, extensionName);\n      }\n\n      if (this.json.extensionsUsed) {\n        this._removeStringFromArray(this.json.extensionsUsed, extensionName);\n      }\n\n      if (this.json.extensions) {\n        delete this.json.extensions[extensionName];\n      }\n    }\n  }, {\n    key: \"setObjectExtension\",\n    value: function setObjectExtension(object, extensionName, data) {\n      var extensions = object.extensions || {};\n      extensions[extensionName] = data;\n    }\n  }, {\n    key: \"addMesh\",\n    value: function addMesh(attributes, indices) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n\n      var accessors = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessors,\n          indices: indices,\n          mode: mode\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addPointCloud\",\n    value: function addPointCloud(attributes) {\n      var accessorIndices = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessorIndices,\n          mode: 0\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(imageData, mimeType) {\n      mimeType = mimeType || getBinaryImageMIMEType(imageData);\n      var bufferViewIndex = this.addBufferView(imageData);\n      var glTFImage = {\n        bufferView: bufferViewIndex,\n        mimeType: mimeType\n      };\n      this.json.images = this.json.images || [];\n      this.json.images.push(glTFImage);\n      return this.json.images.length - 1;\n    }\n  }, {\n    key: \"addBufferView\",\n    value: function addBufferView(buffer) {\n      var byteLength = buffer.byteLength;\n      assert(Number.isFinite(byteLength));\n      this.sourceBuffers = this.sourceBuffers || [];\n      this.sourceBuffers.push(buffer);\n      var glTFBufferView = {\n        buffer: 0,\n        byteOffset: this.byteLength,\n        byteLength: byteLength\n      };\n      this.byteLength += padTo4Bytes(byteLength);\n      this.json.bufferViews = this.json.bufferViews || [];\n      this.json.bufferViews.push(glTFBufferView);\n      return this.json.bufferViews.length - 1;\n    }\n  }, {\n    key: \"addAccessor\",\n    value: function addAccessor(bufferViewIndex, accessor) {\n      var glTFAccessor = {\n        bufferView: bufferViewIndex,\n        type: getAccessorTypeFromSize(accessor.size),\n        componentType: accessor.componentType,\n        count: accessor.count\n      };\n      this.json.accessors = this.json.accessors || [];\n      this.json.accessors.push(glTFAccessor);\n      return this.json.accessors.length - 1;\n    }\n  }, {\n    key: \"addBinaryBuffer\",\n    value: function addBinaryBuffer(sourceBuffer) {\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        size: 3\n      };\n      var bufferViewIndex = this.addBufferView(sourceBuffer);\n      var accessorDefaults = {\n        size: accessor.size,\n        componentType: getComponentTypeFromArray(sourceBuffer),\n        count: Math.round(sourceBuffer.length / accessor.size)\n      };\n      return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n    }\n  }, {\n    key: \"createBinaryChunk\",\n    value: function createBinaryChunk() {\n      if (this.arrayBuffer) {\n        return;\n      }\n\n      var totalByteLength = this.byteLength;\n      var arrayBuffer = new ArrayBuffer(totalByteLength);\n      var targetArray = new Uint8Array(arrayBuffer);\n      var dstByteOffset = 0;\n\n      for (var i = 0; i < this.sourceBuffers.length; i++) {\n        var sourceBuffer = this.sourceBuffers[i];\n        dstByteOffset = copyToArray(sourceBuffer, targetArray, dstByteOffset);\n      }\n\n      this.json.buffers[0].byteLength = totalByteLength;\n      this.arrayBuffer = arrayBuffer;\n      this.sourceBuffers = [];\n    }\n  }, {\n    key: \"_removeStringFromArray\",\n    value: function _removeStringFromArray(array, string) {\n      var found = true;\n\n      while (found) {\n        var index = array.indexOf(string);\n\n        if (index > -1) {\n          array.splice(index, 1);\n        } else {\n          found = false;\n        }\n      }\n    }\n  }, {\n    key: \"json\",\n    get: function get() {\n      return this.gltf.json;\n    }\n  }]);\n\n  return GLTFScenegraph;\n}();\n\nexport { GLTFScenegraph as default };","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport { getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils';\nexport function getGLTFAccessors(attributes) {\n  var accessors = {};\n\n  for (var name in attributes) {\n    var attribute = attributes[name];\n\n    if (name !== 'indices') {\n      var glTFAccessor = getGLTFAccessor(attribute);\n      accessors[name] = glTFAccessor;\n    }\n  }\n\n  return accessors;\n}\nexport function getGLTFAccessor(attribute, gltfAttributeName) {\n  var _getAccessorData = getAccessorData(attribute, gltfAttributeName),\n      buffer = _getAccessorData.buffer,\n      size = _getAccessorData.size,\n      count = _getAccessorData.count;\n\n  var glTFAccessor = {\n    value: buffer,\n    size: size,\n    bufferView: null,\n    byteOffset: 0,\n    count: count,\n    type: getAccessorTypeFromSize(size),\n    componentType: getComponentTypeFromArray(buffer)\n  };\n  return glTFAccessor;\n}\nexport function getGLTFAttribute(data, gltfAttributeName) {\n  return data.attributes[data.glTFAttributeMap[gltfAttributeName]];\n}\n\nfunction getAccessorData(attribute, attributeName) {\n  var buffer = attribute;\n  var size = 1;\n  var count = 0;\n\n  if (attribute && attribute.value) {\n    buffer = attribute.value;\n    size = attribute.size || 1;\n  }\n\n  if (buffer) {\n    if (!ArrayBuffer.isView(buffer)) {\n      buffer = toTypedArray(buffer, Float32Array);\n    }\n\n    count = buffer.length / size;\n  }\n\n  return {\n    buffer: buffer,\n    size: size,\n    count: count\n  };\n}\n\nfunction toTypedArray(array, ArrayType) {\n  var convertTypedArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!array) {\n    return null;\n  }\n\n  if (Array.isArray(array)) {\n    return new ArrayType(array);\n  }\n\n  if (convertTypedArrays && !(array instanceof ArrayType)) {\n    return new ArrayType(array);\n  }\n\n  return array;\n}","import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _marked = _regeneratorRuntime.mark(meshPrimitiveIterator);\n\nimport { getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_DRACO_MESH_COMPRESSION } from '../gltf-constants';\nimport { getGLTFAccessors, getGLTFAccessor } from '../gltf-utils/gltf-attribute-utils';\nexport function decode(_x, _x2, _x3) {\n  return _decode.apply(this, arguments);\n}\n\nfunction _decode() {\n  _decode = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltfData, options, context) {\n    var scenegraph, promises, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, primitive;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (options.gltf.decompressMeshes) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            scenegraph = new GLTFScenegraph(gltfData);\n            promises = [];\n            _iteratorNormalCompletion4 = true;\n            _didIteratorError4 = false;\n            _iteratorError4 = undefined;\n            _context2.prev = 7;\n\n            for (_iterator4 = meshPrimitiveIterator(scenegraph)[Symbol.iterator](); !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n              primitive = _step4.value;\n\n              if (scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION)) {\n                promises.push(decompressPrimitive(primitive, scenegraph, options, context));\n              }\n            }\n\n            _context2.next = 15;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](7);\n            _didIteratorError4 = true;\n            _iteratorError4 = _context2.t0;\n\n          case 15:\n            _context2.prev = 15;\n            _context2.prev = 16;\n\n            if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n              _iterator4[\"return\"]();\n            }\n\n          case 18:\n            _context2.prev = 18;\n\n            if (!_didIteratorError4) {\n              _context2.next = 21;\n              break;\n            }\n\n            throw _iteratorError4;\n\n          case 21:\n            return _context2.finish(18);\n\n          case 22:\n            return _context2.finish(15);\n\n          case 23:\n            _context2.next = 25;\n            return Promise.all(promises);\n\n          case 25:\n            scenegraph.removeExtension(KHR_DRACO_MESH_COMPRESSION);\n\n          case 26:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee, null, [[7, 11, 15, 23], [16,, 18, 22]]);\n  }));\n  return _decode.apply(this, arguments);\n}\n\nexport function encode(gltfData) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scenegraph = new GLTFScenegraph(gltfData);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (scenegraph.json.meshes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var mesh = _step.value;\n      compressMesh(mesh, options);\n      scenegraph.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction decompressPrimitive(_x4, _x5, _x6, _x7) {\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction _decompressPrimitive() {\n  _decompressPrimitive = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(primitive, scenegraph, options, context) {\n    var compressedPrimitive, buffer, bufferCopy, parse, decodedData;\n    return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            compressedPrimitive = scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION);\n            buffer = scenegraph.getTypedArrayForBufferView(compressedPrimitive.bufferView);\n            bufferCopy = getZeroOffsetArrayBuffer(buffer.buffer, buffer.byteOffset);\n            parse = context.parse;\n            _context3.next = 6;\n            return parse(bufferCopy, [], options, context);\n\n          case 6:\n            decodedData = _context3.sent;\n            primitive.attributes = getGLTFAccessors(decodedData.attributes);\n\n            if (decodedData.indices) {\n              primitive.indices = getGLTFAccessor(decodedData.indices);\n            }\n\n            checkPrimitive(primitive);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction compressMesh(attributes, indices) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n  var options = arguments.length > 3 ? arguments[3] : undefined;\n  var context = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (!options.DracoWriter || !options.DracoLoader) {\n    throw new Error('DracoWriter/DracoLoader not available');\n  }\n\n  var compressedData = options.DracoWriter.encodeSync({\n    attributes: attributes\n  });\n  var parseSync = context.parseSync;\n  var decodedData = parseSync({\n    attributes: attributes\n  });\n\n  var fauxAccessors = options._addFauxAttributes(decodedData.attributes);\n\n  var bufferViewIndex = options.addBufferView(compressedData);\n  var glTFMesh = {\n    primitives: [{\n      attributes: fauxAccessors,\n      mode: mode,\n      extensions: _defineProperty({}, KHR_DRACO_MESH_COMPRESSION, {\n        bufferView: bufferViewIndex,\n        attributes: fauxAccessors\n      })\n    }]\n  };\n  return glTFMesh;\n}\n\nfunction checkPrimitive(primitive) {\n  if (!primitive.attributes && Object.keys(primitive.attributes).length > 0) {\n    throw new Error('Empty glTF primitive detected: Draco decompression failure?');\n  }\n}\n\nfunction meshPrimitiveIterator(scenegraph) {\n  var _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, mesh, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, primitive;\n\n  return _regeneratorRuntime.wrap(function meshPrimitiveIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _iteratorNormalCompletion2 = true;\n          _didIteratorError2 = false;\n          _iteratorError2 = undefined;\n          _context.prev = 3;\n          _iterator2 = (scenegraph.json.meshes || [])[Symbol.iterator]();\n\n        case 5:\n          if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n            _context.next = 36;\n            break;\n          }\n\n          mesh = _step2.value;\n          _iteratorNormalCompletion3 = true;\n          _didIteratorError3 = false;\n          _iteratorError3 = undefined;\n          _context.prev = 10;\n          _iterator3 = mesh.primitives[Symbol.iterator]();\n\n        case 12:\n          if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n            _context.next = 19;\n            break;\n          }\n\n          primitive = _step3.value;\n          _context.next = 16;\n          return primitive;\n\n        case 16:\n          _iteratorNormalCompletion3 = true;\n          _context.next = 12;\n          break;\n\n        case 19:\n          _context.next = 25;\n          break;\n\n        case 21:\n          _context.prev = 21;\n          _context.t0 = _context[\"catch\"](10);\n          _didIteratorError3 = true;\n          _iteratorError3 = _context.t0;\n\n        case 25:\n          _context.prev = 25;\n          _context.prev = 26;\n\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n\n        case 28:\n          _context.prev = 28;\n\n          if (!_didIteratorError3) {\n            _context.next = 31;\n            break;\n          }\n\n          throw _iteratorError3;\n\n        case 31:\n          return _context.finish(28);\n\n        case 32:\n          return _context.finish(25);\n\n        case 33:\n          _iteratorNormalCompletion2 = true;\n          _context.next = 5;\n          break;\n\n        case 36:\n          _context.next = 42;\n          break;\n\n        case 38:\n          _context.prev = 38;\n          _context.t1 = _context[\"catch\"](3);\n          _didIteratorError2 = true;\n          _iteratorError2 = _context.t1;\n\n        case 42:\n          _context.prev = 42;\n          _context.prev = 43;\n\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n\n        case 45:\n          _context.prev = 45;\n\n          if (!_didIteratorError2) {\n            _context.next = 48;\n            break;\n          }\n\n          throw _iteratorError2;\n\n        case 48:\n          return _context.finish(45);\n\n        case 49:\n          return _context.finish(42);\n\n        case 50:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[3, 38, 42, 50], [10, 21, 25, 33], [26,, 28, 32], [43,, 45, 49]]);\n}","export var KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nexport var UBER_POINT_CLOUD_EXTENSION = 'UBER_draco_point_cloud_compression';\nexport var KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nexport var KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nexport var KHR_TECHNIQUES_WEBGL = 'KHR_techniques_webgl';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport function getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\nexport function getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\nexport function getGLEnumFromSamplerParameter(parameter) {\n  var GL_TEXTURE_MAG_FILTER = 0x2800;\n  var GL_TEXTURE_MIN_FILTER = 0x2801;\n  var GL_TEXTURE_WRAP_S = 0x2802;\n  var GL_TEXTURE_WRAP_T = 0x2803;\n  var PARAMETER_MAP = {\n    magFilter: GL_TEXTURE_MAG_FILTER,\n    minFilter: GL_TEXTURE_MIN_FILTER,\n    wrapS: GL_TEXTURE_WRAP_S,\n    wrapT: GL_TEXTURE_WRAP_T\n  };\n  return PARAMETER_MAP[parameter];\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport assert from '../utils/assert';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_LIGHTS_PUNCTUAL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_LIGHTS_PUNCTUAL);\n\n  if (extension) {\n    gltfScenegraph.json.lights = extension.lights;\n    gltfScenegraph.removeExtension(KHR_LIGHTS_PUNCTUAL);\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.nodes || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var node = _step.value;\n      var nodeExtension = gltfScenegraph.getObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n\n      if (nodeExtension) {\n        node.light = nodeExtension.light;\n      }\n\n      gltfScenegraph.removeObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (json.lights) {\n    var extension = gltfScenegraph.addExtension(KHR_LIGHTS_PUNCTUAL);\n    assert(!extension.lights);\n    extension.lights = json.lights;\n    delete json.lights;\n  }\n\n  if (gltfScenegraph.json.lights) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = gltfScenegraph.json.lights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var light = _step2.value;\n        var node = light.node;\n        gltfScenegraph.addObjectExtension(node, KHR_LIGHTS_PUNCTUAL, light);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    delete gltfScenegraph.json.lights;\n  }\n}","import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_MATERIALS_UNLIT } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = (json.materials || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var material = _step.value;\n      var extension = material.extensions && material.extensions.KHR_materials_unlit;\n\n      if (extension) {\n        material.unlit = true;\n      }\n\n      gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (gltfScenegraph.materials) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = json.materials[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var material = _step2.value;\n\n        if (material.unlit) {\n          delete material.unlit;\n          gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT);\n          gltfScenegraph.addExtension(KHR_MATERIALS_UNLIT);\n        }\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n}","import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_TECHNIQUES_WEBGL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_TECHNIQUES_WEBGL);\n\n  if (extension) {\n    var techniques = resolveTechniques(extension, gltfScenegraph);\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = (json.materials || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var material = _step.value;\n        var materialExtension = gltfScenegraph.getObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n\n        if (materialExtension) {\n          material.technique = Object.assign({}, materialExtension, techniques[materialExtension.technique]);\n          material.technique.values = resolveValues(material.technique, gltfScenegraph);\n        }\n\n        gltfScenegraph.removeObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    gltfScenegraph.removeExtension(KHR_TECHNIQUES_WEBGL);\n  }\n}\nexport function encode(gltfData, options) {}\n\nfunction resolveTechniques(_ref, gltfScenegraph) {\n  var _ref$programs = _ref.programs,\n      programs = _ref$programs === void 0 ? [] : _ref$programs,\n      _ref$shaders = _ref.shaders,\n      shaders = _ref$shaders === void 0 ? [] : _ref$shaders,\n      _ref$techniques = _ref.techniques,\n      techniques = _ref$techniques === void 0 ? [] : _ref$techniques;\n  var textDecoder = new TextDecoder();\n  shaders.forEach(function (shader) {\n    if (Number.isFinite(shader.bufferView)) {\n      shader.code = textDecoder.decode(gltfScenegraph.getTypedArrayForBufferView(shader.bufferView));\n    } else {\n      throw new Error('KHR_techniques_webgl: no shader code');\n    }\n  });\n  programs.forEach(function (program) {\n    program.fragmentShader = shaders[program.fragmentShader];\n    program.vertexShader = shaders[program.vertexShader];\n  });\n  techniques.forEach(function (technique) {\n    technique.program = programs[technique.program];\n  });\n  return techniques;\n}\n\nfunction resolveValues(technique, gltfScenegraph) {\n  var values = Object.assign({}, technique.values);\n  Object.keys(technique.uniforms || {}).forEach(function (uniform) {\n    if (technique.uniforms[uniform].value && !(uniform in values)) {\n      values[uniform] = technique.uniforms[uniform].value;\n    }\n  });\n  Object.keys(values).forEach(function (uniform) {\n    if (_typeof(values[uniform]) === 'object' && values[uniform].index !== undefined) {\n      values[uniform].texture = gltfScenegraph.getTexture(values[uniform].index);\n    }\n  });\n  return values;\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as KHR_draco_mesh_compression from './KHR_draco_mesh_compression';\nimport * as KHR_lights_punctual from './KHR_lights_punctual';\nimport * as KHR_materials_unlit from './KHR_materials_unlit';\nimport * as KHR_techniques_webgl from './KHR_techniques_webgl';\nexport var EXTENSIONS = {\n  KHR_draco_mesh_compression: KHR_draco_mesh_compression,\n  KHR_lights_punctual: KHR_lights_punctual,\n  KHR_materials_unlit: KHR_materials_unlit,\n  KHR_techniques_webgl: KHR_techniques_webgl\n};\nexport function decodeExtensions(_x) {\n  return _decodeExtensions.apply(this, arguments);\n}\n\nfunction _decodeExtensions() {\n  _decodeExtensions = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf) {\n    var options,\n        context,\n        extensionName,\n        excludes,\n        exclude,\n        extension,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options.gltf = options.gltf || {};\n            _context.t0 = _regeneratorRuntime.keys(EXTENSIONS);\n\n          case 4:\n            if ((_context.t1 = _context.t0()).done) {\n              _context.next = 14;\n              break;\n            }\n\n            extensionName = _context.t1.value;\n            excludes = options.gltf.excludeExtensions || {};\n            exclude = extensionName in excludes && !excludes[extensionName];\n\n            if (exclude) {\n              _context.next = 12;\n              break;\n            }\n\n            extension = EXTENSIONS[extensionName];\n            _context.next = 12;\n            return extension.decode(gltf, options, context);\n\n          case 12:\n            _context.next = 4;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _decodeExtensions.apply(this, arguments);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport { padTo4Bytes, assert } from '@loaders.gl/loader-utils';\nvar MAGIC_glTF = 0x676c5446;\nvar GLB_FILE_HEADER_SIZE = 12;\nvar GLB_CHUNK_HEADER_SIZE = 8;\nvar GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nvar GLB_CHUNK_TYPE_BIN = 0x004e4942;\nvar GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED = 0;\nvar GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED = 1;\nvar LE = true;\n\nfunction getMagicString(dataView) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n\nexport function isGLB(arrayBuffer) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var dataView = new DataView(arrayBuffer);\n  var _options$magic = options.magic,\n      magic = _options$magic === void 0 ? MAGIC_glTF : _options$magic;\n  var magic1 = dataView.getUint32(byteOffset, false);\n  return magic1 === magic || magic1 === MAGIC_glTF;\n}\nexport default function parseGLBSync(glb, arrayBuffer) {\n  var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var dataView = new DataView(arrayBuffer);\n  glb.type = getMagicString(dataView, byteOffset + 0);\n  glb.version = dataView.getUint32(byteOffset + 4, LE);\n  var byteLength = dataView.getUint32(byteOffset + 8, LE);\n  glb.header = {\n    byteOffset: byteOffset,\n    byteLength: byteLength\n  };\n  assert(glb.version === 2, \"Invalid GLB version \".concat(glb.version, \". Only supports v2.\"));\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  glb.json = {};\n  glb.binChunks = [];\n  parseGLBChunksSync(glb, dataView, byteOffset + GLB_FILE_HEADER_SIZE, options);\n  return byteOffset + glb.header.byteLength;\n}\n\nfunction parseGLBChunksSync(glb, dataView, byteOffset, options) {\n  while (byteOffset + 8 <= glb.header.byteLength) {\n    var chunkLength = dataView.getUint32(byteOffset + 0, LE);\n    var chunkFormat = dataView.getUint32(byteOffset + 4, LE);\n    byteOffset += GLB_CHUNK_HEADER_SIZE;\n\n    switch (chunkFormat) {\n      case GLB_CHUNK_TYPE_JSON:\n        parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_BIN:\n        parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    byteOffset += padTo4Bytes(chunkLength);\n  }\n\n  return byteOffset;\n}\n\nfunction parseJSONChunk(glb, dataView, byteOffset, chunkLength, options) {\n  var jsonChunk = new Uint8Array(dataView.buffer, byteOffset, chunkLength);\n  var textDecoder = new TextDecoder('utf8');\n  var jsonText = textDecoder.decode(jsonChunk);\n  glb.json = JSON.parse(jsonText);\n}\n\nfunction parseBINChunk(glb, dataView, byteOffset, chunkLength, options) {\n  glb.header.hasBinChunk = true;\n  glb.binChunks.push({\n    byteOffset: byteOffset,\n    byteLength: chunkLength,\n    arrayBuffer: dataView.buffer\n  });\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _DEFAULT_SAMPLER;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength } from './gltf-utils/gltf-utils';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nvar GL_SAMPLER = {\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  REPEAT: 0x2901,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_LINEAR: 0x2702\n};\nvar SAMPLER_PARAMETER_GLTF_TO_GL = {\n  magFilter: GL_SAMPLER.TEXTURE_MAG_FILTER,\n  minFilter: GL_SAMPLER.TEXTURE_MIN_FILTER,\n  wrapS: GL_SAMPLER.TEXTURE_WRAP_S,\n  wrapT: GL_SAMPLER.TEXTURE_WRAP_T\n};\nvar DEFAULT_SAMPLER = (_DEFAULT_SAMPLER = {}, _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MAG_FILTER, GL_SAMPLER.LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MIN_FILTER, GL_SAMPLER.NEAREST_MIPMAP_LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_S, GL_SAMPLER.REPEAT), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_, GL_SAMPLER.REPEAT), _DEFAULT_SAMPLER);\n\nfunction getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\n\nfunction getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\n\nvar GLTFPostProcessor = function () {\n  function GLTFPostProcessor() {\n    _classCallCheck(this, GLTFPostProcessor);\n  }\n\n  _createClass(GLTFPostProcessor, [{\n    key: \"postProcess\",\n    value: function postProcess(gltf) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var json = gltf.json,\n          _gltf$buffers = gltf.buffers,\n          buffers = _gltf$buffers === void 0 ? [] : _gltf$buffers,\n          _gltf$images = gltf.images,\n          images = _gltf$images === void 0 ? [] : _gltf$images,\n          _gltf$baseUri = gltf.baseUri,\n          baseUri = _gltf$baseUri === void 0 ? '' : _gltf$baseUri;\n      assert(json);\n      this.baseUri = baseUri;\n      this.json = json;\n      this.buffers = buffers;\n      this.images = images;\n\n      this._resolveTree(this.json, options);\n\n      return this.json;\n    }\n  }, {\n    key: \"_resolveTree\",\n    value: function _resolveTree(json) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (json.bufferViews) {\n        json.bufferViews = json.bufferViews.map(function (bufView, i) {\n          return _this._resolveBufferView(bufView, i);\n        });\n      }\n\n      if (json.images) {\n        json.images = json.images.map(function (image, i) {\n          return _this._resolveImage(image, i);\n        });\n      }\n\n      if (json.samplers) {\n        json.samplers = json.samplers.map(function (sampler, i) {\n          return _this._resolveSampler(sampler, i);\n        });\n      }\n\n      if (json.textures) {\n        json.textures = json.textures.map(function (texture, i) {\n          return _this._resolveTexture(texture, i);\n        });\n      }\n\n      if (json.accessors) {\n        json.accessors = json.accessors.map(function (accessor, i) {\n          return _this._resolveAccessor(accessor, i);\n        });\n      }\n\n      if (json.materials) {\n        json.materials = json.materials.map(function (material, i) {\n          return _this._resolveMaterial(material, i);\n        });\n      }\n\n      if (json.meshes) {\n        json.meshes = json.meshes.map(function (mesh, i) {\n          return _this._resolveMesh(mesh, i);\n        });\n      }\n\n      if (json.nodes) {\n        json.nodes = json.nodes.map(function (node, i) {\n          return _this._resolveNode(node, i);\n        });\n      }\n\n      if (json.skins) {\n        json.skins = json.skins.map(function (skin, i) {\n          return _this._resolveSkin(skin, i);\n        });\n      }\n\n      if (json.scenes) {\n        json.scenes = json.scenes.map(function (scene, i) {\n          return _this._resolveScene(scene, i);\n        });\n      }\n\n      if (json.scene !== undefined) {\n        json.scene = json.scenes[this.json.scene];\n      }\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this._get('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this._get('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this._get('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this._get('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this._get('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this._get('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this._get('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this._get('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this._get('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this._get('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this._get('buffers', index);\n    }\n  }, {\n    key: \"_get\",\n    value: function _get(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        console.warn(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"_resolveScene\",\n    value: function _resolveScene(scene, index) {\n      var _this2 = this;\n\n      scene.id = scene.id || \"scene-\".concat(index);\n      scene.nodes = (scene.nodes || []).map(function (node) {\n        return _this2.getNode(node);\n      });\n      return scene;\n    }\n  }, {\n    key: \"_resolveNode\",\n    value: function _resolveNode(node, index) {\n      var _this3 = this;\n\n      node.id = node.id || \"node-\".concat(index);\n\n      if (node.children) {\n        node.children = node.children.map(function (child) {\n          return _this3.getNode(child);\n        });\n      }\n\n      if (node.mesh !== undefined) {\n        node.mesh = this.getMesh(node.mesh);\n      }\n\n      if (node.camera !== undefined) {\n        node.camera = this.getCamera(node.camera);\n      }\n\n      if (node.skin !== undefined) {\n        node.skin = this.getSkin(node.skin);\n      }\n\n      return node;\n    }\n  }, {\n    key: \"_resolveSkin\",\n    value: function _resolveSkin(skin, index) {\n      skin.id = skin.id || \"skin-\".concat(index);\n      skin.inverseBindMatrices = this.getAccessor(skin.inverseBindMatrices);\n      return skin;\n    }\n  }, {\n    key: \"_resolveMesh\",\n    value: function _resolveMesh(mesh, index) {\n      var _this4 = this;\n\n      mesh.id = mesh.id || \"mesh-\".concat(index);\n\n      if (mesh.primitives) {\n        mesh.primitives = mesh.primitives.map(function (primitive) {\n          primitive = _objectSpread({}, primitive);\n          var attributes = primitive.attributes;\n          primitive.attributes = {};\n\n          for (var attribute in attributes) {\n            primitive.attributes[attribute] = _this4.getAccessor(attributes[attribute]);\n          }\n\n          if (primitive.indices !== undefined) {\n            primitive.indices = _this4.getAccessor(primitive.indices);\n          }\n\n          if (primitive.material !== undefined) {\n            primitive.material = _this4.getMaterial(primitive.material);\n          }\n\n          return primitive;\n        });\n      }\n\n      return mesh;\n    }\n  }, {\n    key: \"_resolveMaterial\",\n    value: function _resolveMaterial(material, index) {\n      material.id = material.id || \"material-\".concat(index);\n\n      if (material.normalTexture) {\n        material.normalTexture = _objectSpread({}, material.normalTexture);\n        material.normalTexture.texture = this.getTexture(material.normalTexture.index);\n      }\n\n      if (material.occlusionTexture) {\n        material.occlustionTexture = _objectSpread({}, material.occlustionTexture);\n        material.occlusionTexture.texture = this.getTexture(material.occlusionTexture.index);\n      }\n\n      if (material.emissiveTexture) {\n        material.emmisiveTexture = _objectSpread({}, material.emmisiveTexture);\n        material.emissiveTexture.texture = this.getTexture(material.emissiveTexture.index);\n      }\n\n      if (material.pbrMetallicRoughness) {\n        material.pbrMetallicRoughness = _objectSpread({}, material.pbrMetallicRoughness);\n        var mr = material.pbrMetallicRoughness;\n\n        if (mr.baseColorTexture) {\n          mr.baseColorTexture = _objectSpread({}, mr.baseColorTexture);\n          mr.baseColorTexture.texture = this.getTexture(mr.baseColorTexture.index);\n        }\n\n        if (mr.metallicRoughnessTexture) {\n          mr.metallicRoughnessTexture = _objectSpread({}, mr.metallicRoughnessTexture);\n          mr.metallicRoughnessTexture.texture = this.getTexture(mr.metallicRoughnessTexture.index);\n        }\n      }\n\n      return material;\n    }\n  }, {\n    key: \"_resolveAccessor\",\n    value: function _resolveAccessor(accessor, index) {\n      accessor.id = accessor.id || \"accessor-\".concat(index);\n\n      if (accessor.bufferView !== undefined) {\n        accessor.bufferView = this.getBufferView(accessor.bufferView);\n      }\n\n      accessor.bytesPerComponent = getBytesFromComponentType(accessor.componentType);\n      accessor.components = getSizeFromAccessorType(accessor.type);\n      accessor.bytesPerElement = accessor.bytesPerComponent * accessor.components;\n\n      if (accessor.bufferView) {\n        var buffer = accessor.bufferView.buffer;\n\n        var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, accessor.bufferView),\n            ArrayType = _getAccessorArrayType.ArrayType,\n            length = _getAccessorArrayType.length;\n\n        var byteOffset = (accessor.bufferView.byteOffset || 0) + buffer.byteOffset;\n        accessor.value = new ArrayType(buffer.arrayBuffer, byteOffset, length);\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"_resolveTexture\",\n    value: function _resolveTexture(texture, index) {\n      texture.id = texture.id || \"texture-\".concat(index);\n      texture.sampler = 'sampler' in texture ? this.getSampler(texture.sampler) : DEFAULT_SAMPLER;\n      texture.source = this.getImage(texture.source);\n      return texture;\n    }\n  }, {\n    key: \"_resolveSampler\",\n    value: function _resolveSampler(sampler, index) {\n      sampler.id = sampler.id || \"sampler-\".concat(index);\n      sampler.parameters = {};\n\n      for (var key in sampler) {\n        var glEnum = this._enumSamplerParameter(key);\n\n        if (glEnum !== undefined) {\n          sampler.parameters[glEnum] = sampler[key];\n        }\n      }\n\n      return sampler;\n    }\n  }, {\n    key: \"_enumSamplerParameter\",\n    value: function _enumSamplerParameter(key) {\n      return SAMPLER_PARAMETER_GLTF_TO_GL[key];\n    }\n  }, {\n    key: \"_resolveImage\",\n    value: function _resolveImage(image, index) {\n      image.id = image.id || \"image-\".concat(index);\n\n      if (image.bufferView !== undefined) {\n        image.bufferView = this.getBufferView(image.bufferView);\n      }\n\n      var preloadedImage = this.images[index];\n\n      if (preloadedImage) {\n        image.image = preloadedImage;\n      }\n\n      return image;\n    }\n  }, {\n    key: \"_resolveBufferView\",\n    value: function _resolveBufferView(bufferView, index) {\n      bufferView.id = bufferView.id || \"bufferView-\".concat(index);\n      var bufferIndex = bufferView.buffer;\n      bufferView.buffer = this.buffers[bufferIndex];\n      var arrayBuffer = this.buffers[bufferIndex].arrayBuffer;\n      var byteOffset = this.buffers[bufferIndex].byteOffset || 0;\n\n      if ('byteOffset' in bufferView) {\n        byteOffset += bufferView.byteOffset;\n      }\n\n      bufferView.data = new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n      return bufferView;\n    }\n  }, {\n    key: \"_resolveCamera\",\n    value: function _resolveCamera(camera, index) {\n      camera.id = camera.id || \"camera-\".concat(index);\n\n      if (camera.perspective) {}\n\n      if (camera.orthographic) {}\n\n      return camera;\n    }\n  }]);\n\n  return GLTFPostProcessor;\n}();\n\nexport default function postProcessGLTF(gltf, options) {\n  return new GLTFPostProcessor().postProcess(gltf, options);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.typed.data-view\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { ImageLoader } from '@loaders.gl/images';\nimport { parseJSON, getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { resolveUrl } from './gltf-utils/resolve-url';\nimport { getTypedArrayForBufferView } from './gltf-utils/get-typed-array';\nimport { decodeExtensions } from './extensions/gltf-extensions';\nimport parseGLBSync, { isGLB } from './parse-glb';\nimport postProcessGLTF from './post-process-gltf';\nexport function isGLTF(arrayBuffer) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var dataView = new DataView(arrayBuffer);\n  var byteOffset = 0;\n  return isGLB(dataView, byteOffset);\n}\nexport function parseGLTF(_x, _x2) {\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction _parseGLTF() {\n  _parseGLTF = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf, arrayBufferOrString) {\n    var byteOffset,\n        options,\n        context,\n        promises,\n        _promise,\n        promise,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n            options = _args.length > 3 ? _args[3] : undefined;\n            context = _args.length > 4 ? _args[4] : undefined;\n            parseGLTFContainerSync(gltf, arrayBufferOrString, byteOffset, options);\n            promises = [];\n\n            if (options.gltf.loadImages) {\n              _promise = loadImages(gltf, options, context);\n              promises.push(_promise);\n            }\n\n            if (!options.gltf.loadBuffers) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 9;\n            return loadBuffers(gltf, options, context);\n\n          case 9:\n            promise = decodeExtensions(gltf, options, context);\n            promises.push(promise);\n            _context.next = 13;\n            return Promise.all(promises);\n\n          case 13:\n            return _context.abrupt(\"return\", options.gltf.postProcess ? postProcessGLTF(gltf, options) : gltf);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction parseGLTFContainerSync(gltf, data, byteOffset, options) {\n  if (options.uri) {\n    gltf.baseUri = options.uri;\n  }\n\n  if (data instanceof ArrayBuffer && !isGLB(data, byteOffset, options)) {\n    var textDecoder = new TextDecoder();\n    data = textDecoder.decode(data);\n  }\n\n  if (typeof data === 'string') {\n    gltf.json = parseJSON(data);\n  } else if (data instanceof ArrayBuffer) {\n    var glb = {};\n    byteOffset = parseGLBSync(glb, data, byteOffset, options);\n    assert(glb.type === 'glTF', \"Invalid GLB magic string \".concat(glb.type));\n    gltf._glb = glb;\n    gltf.json = glb.json;\n  } else {\n    assert(false, \"GLTF: must be ArrayBuffer or string\");\n  }\n\n  var buffers = gltf.json.buffers || [];\n  gltf.buffers = new Array(buffers.length).fill(null);\n\n  if (gltf._glb && gltf._glb.header.hasBinChunk) {\n    var binChunks = gltf._glb.binChunks;\n    gltf.buffers[0] = {\n      arrayBuffer: binChunks[0].arrayBuffer,\n      byteOffset: binChunks[0].byteOffset,\n      byteLength: binChunks[0].byteLength\n    };\n  }\n\n  var images = gltf.json.images || [];\n  gltf.images = new Array(images.length).fill({});\n}\n\nfunction loadBuffers(_x3, _x4, _x5) {\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction _loadBuffers() {\n  _loadBuffers = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(gltf, options, context) {\n    var i, buffer, fetch, uri, response, arrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            i = 0;\n\n          case 1:\n            if (!(i < gltf.json.buffers.length)) {\n              _context2.next = 18;\n              break;\n            }\n\n            buffer = gltf.json.buffers[i];\n\n            if (!buffer.uri) {\n              _context2.next = 15;\n              break;\n            }\n\n            fetch = context.fetch;\n            assert(fetch);\n            uri = resolveUrl(buffer.uri, options);\n            _context2.next = 9;\n            return fetch(uri);\n\n          case 9:\n            response = _context2.sent;\n            _context2.next = 12;\n            return response.arrayBuffer();\n\n          case 12:\n            arrayBuffer = _context2.sent;\n            gltf.buffers[i] = {\n              arrayBuffer: arrayBuffer,\n              byteOffset: 0,\n              byteLength: arrayBuffer.byteLength\n            };\n            delete buffer.uri;\n\n          case 15:\n            ++i;\n            _context2.next = 1;\n            break;\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction loadImages(_x6, _x7, _x8) {\n  return _loadImages.apply(this, arguments);\n}\n\nfunction _loadImages() {\n  _loadImages = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(gltf, options, context) {\n    var images, promises, i;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            images = gltf.json.images || [];\n            promises = [];\n\n            for (i = 0; i < images.length; ++i) {\n              promises.push(loadImage(gltf, images[i], i, options, context));\n            }\n\n            _context3.next = 5;\n            return Promise.all(promises);\n\n          case 5:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadImages.apply(this, arguments);\n}\n\nfunction loadImage(_x9, _x10, _x11, _x12, _x13) {\n  return _loadImage.apply(this, arguments);\n}\n\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(gltf, image, i, options, context) {\n    var fetch, parse, arrayBuffer, uri, response, array, parsedImage;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            fetch = context.fetch, parse = context.parse;\n\n            if (!image.uri) {\n              _context4.next = 9;\n              break;\n            }\n\n            uri = resolveUrl(image.uri, options);\n            _context4.next = 5;\n            return fetch(uri);\n\n          case 5:\n            response = _context4.sent;\n            _context4.next = 8;\n            return response.arrayBuffer();\n\n          case 8:\n            arrayBuffer = _context4.sent;\n\n          case 9:\n            if (Number.isFinite(image.bufferView)) {\n              array = getTypedArrayForBufferView(gltf.json, gltf.buffers, image.bufferView);\n              arrayBuffer = getZeroOffsetArrayBuffer(array.buffer, array.byteOffset, array.byteLength);\n            }\n\n            assert(arrayBuffer, 'glTF image has no data');\n            _context4.next = 13;\n            return parse(arrayBuffer, ImageLoader, {}, context);\n\n          case 13:\n            parsedImage = _context4.sent;\n            gltf.images[i] = parsedImage;\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadImage.apply(this, arguments);\n}","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { parseGLTF } from './lib/parse-gltf';\nvar VERSION = typeof \"2.1.1\" !== 'undefined' ? \"2.1.1\" : 'latest';\nvar GLTFLoader = {\n  id: 'gltf',\n  name: 'glTF',\n  version: VERSION,\n  extensions: ['gltf', 'glb'],\n  mimeType: 'model/gltf+json',\n  text: true,\n  binary: true,\n  test: 'glTF',\n  parse: parse,\n  options: {\n    gltf: {\n      loadBuffers: true,\n      loadImages: true,\n      decompressMeshes: true,\n      postProcess: true\n    },\n    uri: '',\n    log: console\n  }\n};\nexport default GLTFLoader;\nexport function parse(_x) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer) {\n    var options,\n        context,\n        _options,\n        _options$byteOffset,\n        byteOffset,\n        gltf,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options = _objectSpread({}, GLTFLoader.options, {}, options);\n            options.gltf = _objectSpread({}, GLTFLoader.options.gltf, {}, options.gltf);\n            addDeprecatedGLTFOptions(options);\n            _options = options, _options$byteOffset = _options.byteOffset, byteOffset = _options$byteOffset === void 0 ? 0 : _options$byteOffset;\n            gltf = {};\n            _context.next = 9;\n            return parseGLTF(gltf, arrayBuffer, byteOffset, options, context);\n\n          case 9:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction addDeprecatedGLTFOptions(options) {\n  if ('fetchImages' in options) {\n    options.gltf.loadImages = options.fetchImages;\n  }\n\n  if ('createImages' in options) {\n    options.gltf.loadImages = options.createImages;\n  }\n\n  if ('fetchLinkedResources' in options) {\n    options.gltf.fetchBuffers = options.fetchLinkedResources;\n  }\n\n  if ('decompress' in options) {\n    options.gltf.decompressMeshes = options.decompress;\n  }\n\n  if ('decompress' in options.gltf) {\n    options.gltf.decompressMeshes = options.gltf.decompress;\n  }\n\n  if ('postProcess' in options) {\n    options.gltf.postProcess = options.postProcess;\n  }\n}","import \"core-js/modules/es6.string.ends-with\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { global, isBrowser, isWorker } from '../env-utils/globals';\nimport { requireFromFile, requireFromString } from './require-utils.node';\nimport assert from '../env-utils/assert';\nvar LATEST = 'beta';\nvar VERSION = typeof \"2.1.1\" !== 'undefined' ? \"2.1.1\" : LATEST;\nvar loadLibraryPromises = {};\nexport function loadLibrary(_x) {\n  return _loadLibrary.apply(this, arguments);\n}\n\nfunction _loadLibrary() {\n  _loadLibrary = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(libraryUrl) {\n    var moduleName,\n        options,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            moduleName = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n            if (moduleName) {\n              libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n            }\n\n            loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n            _context.next = 6;\n            return loadLibraryPromises[libraryUrl];\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadLibrary.apply(this, arguments);\n}\n\nexport function getLibraryUrl(library, moduleName, options) {\n  var modules = options.modules || {};\n\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  if (!isBrowser) {\n    return \"modules/\".concat(moduleName, \"/dist/libs/\").concat(library);\n  }\n\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\n\nfunction loadLibraryFromFile(_x2) {\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction _loadLibraryFromFile() {\n  _loadLibraryFromFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(libraryUrl) {\n    var _response, response, scriptSource;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!libraryUrl.endsWith('wasm')) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 3;\n            return fetch(libraryUrl);\n\n          case 3:\n            _response = _context2.sent;\n            _context2.next = 6;\n            return _response.arrayBuffer();\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n            if (isBrowser) {\n              _context2.next = 9;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", requireFromFile(libraryUrl));\n\n          case 9:\n            if (!isWorker) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", importScripts(libraryUrl));\n\n          case 11:\n            _context2.next = 13;\n            return fetch(libraryUrl);\n\n          case 13:\n            response = _context2.sent;\n            _context2.next = 16;\n            return response.text();\n\n          case 16:\n            scriptSource = _context2.sent;\n            return _context2.abrupt(\"return\", loadLibraryFromString(scriptSource, libraryUrl));\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n\n  var script = document.createElement('script');\n  script.id = id;\n\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n\n  document.body.appendChild(script);\n  return null;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadLibrary, global } from '@loaders.gl/loader-utils';\nvar loadDecoderPromise;\nvar loadEncoderPromise;\nexport function loadDracoDecoderModule(_x) {\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoDecoderModule() {\n  _loadDracoDecoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              draco: modules.draco3d.createDecoderModule()\n            });\n\n          case 3:\n            loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n            _context.next = 6;\n            return loadDecoderPromise;\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nexport function loadDracoEncoderModule(_x2) {\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoEncoderModule() {\n  _loadDracoEncoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              draco: modules.draco3d.createEncoderModule()\n            });\n\n          case 3:\n            loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n            _context2.next = 6;\n            return loadEncoderPromise;\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction loadDracoDecoder(_x3) {\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction _loadDracoDecoder() {\n  _loadDracoDecoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(options) {\n    var DracoDecoderModule, wasmBinary, _ref, _ref2;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.t0 = options.draco && options.draco.decoderType;\n            _context3.next = _context3.t0 === 'js' ? 3 : _context3.t0 === 'wasm' ? 7 : 7;\n            break;\n\n          case 3:\n            _context3.next = 5;\n            return loadLibrary('draco_decoder.js', 'draco', options);\n\n          case 5:\n            DracoDecoderModule = _context3.sent;\n            return _context3.abrupt(\"break\", 21);\n\n          case 7:\n            _context3.t1 = Promise;\n            _context3.next = 10;\n            return loadLibrary('draco_wasm_wrapper.js', 'draco', options);\n\n          case 10:\n            _context3.t2 = _context3.sent;\n            _context3.next = 13;\n            return loadLibrary('draco_decoder.wasm', 'draco', options);\n\n          case 13:\n            _context3.t3 = _context3.sent;\n            _context3.t4 = [_context3.t2, _context3.t3];\n            _context3.next = 17;\n            return _context3.t1.all.call(_context3.t1, _context3.t4);\n\n          case 17:\n            _ref = _context3.sent;\n            _ref2 = _slicedToArray(_ref, 2);\n            DracoDecoderModule = _ref2[0];\n            wasmBinary = _ref2[1];\n\n          case 21:\n            DracoDecoderModule = DracoDecoderModule || global.DracoDecoderModule;\n            _context3.next = 24;\n            return initializeDracoDecoder(DracoDecoderModule, wasmBinary);\n\n          case 24:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 25:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  var options = {};\n\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise(function (resolve) {\n    DracoDecoderModule(_objectSpread({}, options, {\n      onModuleLoaded: function onModuleLoaded(draco) {\n        return resolve({\n          draco: draco\n        });\n      }\n    }));\n  });\n}\n\nfunction loadDracoEncoder(_x4) {\n  return _loadDracoEncoder.apply(this, arguments);\n}\n\nfunction _loadDracoEncoder() {\n  _loadDracoEncoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(options) {\n    var DracoEncoderModule;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return loadLibrary('draco_encoder.js', 'draco', options);\n\n          case 2:\n            DracoEncoderModule = _context4.sent;\n            DracoEncoderModule = DracoEncoderModule || global.DracoEncoderModule;\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              DracoEncoderModule({\n                onModuleLoaded: function onModuleLoaded(draco) {\n                  return resolve({\n                    draco: draco\n                  });\n                }\n              });\n            }));\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadDracoEncoder.apply(this, arguments);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}","export function getMeshSize(attributes) {\n  var size = 0;\n\n  for (var attributeName in attributes) {\n    var attribute = attributes[attributeName];\n\n    if (ArrayBuffer.isView(attribute)) {\n      size += attribute.byteLength * attribute.BYTES_PER_ELEMENT;\n    }\n  }\n\n  return size;\n}\nexport function getMeshBoundingBox(attributes) {\n  if (!attributes || !attributes.POSITION) {\n    return null;\n  }\n\n  var minX = Infinity;\n  var minY = Infinity;\n  var minZ = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n  var maxZ = -Infinity;\n  var positions = attributes.POSITION.value;\n  var len = positions && positions.length;\n\n  if (!len) {\n    return null;\n  }\n\n  for (var i = 0; i < len; i += 3) {\n    var x = positions[i];\n    var y = positions[i + 1];\n    var z = positions[i + 2];\n    minX = x < minX ? x : minX;\n    minY = y < minY ? y : minY;\n    minZ = z < minZ ? z : minZ;\n    maxX = x > maxX ? x : maxX;\n    maxY = y > maxY ? y : maxY;\n    maxZ = z > maxZ ? z : maxZ;\n  }\n\n  return [[minX, minY, minZ], [maxX, maxY, maxZ]];\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.typed.uint32-array\";\nimport \"core-js/modules/es6.typed.int32-array\";\nimport \"core-js/modules/es6.typed.uint16-array\";\nimport \"core-js/modules/es6.typed.int16-array\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.typed.int8-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getMeshBoundingBox } from '@loaders.gl/loader-utils';\nvar GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\nvar DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\nvar DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\n\nvar DracoParser = function () {\n  function DracoParser(draco) {\n    _classCallCheck(this, DracoParser);\n\n    this.draco = draco;\n  }\n\n  _createClass(DracoParser, [{\n    key: \"destroy\",\n    value: function destroy() {}\n  }, {\n    key: \"destroyGeometry\",\n    value: function destroyGeometry(dracoGeometry) {\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry.dracoGeometry);\n      }\n    }\n  }, {\n    key: \"parseSync\",\n    value: function parseSync(arrayBuffer) {\n      var buffer = new this.draco.DecoderBuffer();\n      buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n      var decoder = new this.draco.Decoder();\n      var data = {};\n      var dracoStatus;\n      var dracoGeometry;\n      var header;\n\n      try {\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n\n        switch (geometryType) {\n          case this.draco.TRIANGULAR_MESH:\n            dracoGeometry = new this.draco.Mesh();\n            dracoStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.TRIANGULAR_MESH,\n              faceCount: dracoGeometry.num_faces(),\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          case this.draco.POINT_CLOUD:\n            dracoGeometry = new this.draco.PointCloud();\n            dracoStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.POINT_CLOUD,\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          default:\n            throw new Error('Unknown DRACO geometry type.');\n        }\n\n        if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n          var message = \"DRACO decompression failed: \".concat(dracoStatus.error_msg());\n\n          if (dracoGeometry) {\n            this.draco.destroy(dracoGeometry);\n          }\n\n          throw new Error(message);\n        }\n\n        data.loaderData = {\n          header: header\n        };\n        this.extractDRACOGeometry(decoder, dracoGeometry, geometryType, data);\n        data.header = {\n          vertexCount: header.vertexCount,\n          boundingBox: getMeshBoundingBox(data.attributes)\n        };\n      } finally {\n        this.draco.destroy(decoder);\n        this.draco.destroy(buffer);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"extractDRACOGeometry\",\n    value: function extractDRACOGeometry(decoder, dracoGeometry, geometryType, geometry) {\n      var attributes = this.getAttributes(decoder, dracoGeometry);\n      var positionAttribute = attributes.POSITION;\n\n      if (!positionAttribute) {\n        throw new Error('DRACO decompressor: No position attribute found.');\n      }\n\n      this.getPositionAttributeMetadata(positionAttribute);\n\n      if (geometryType === this.draco.TRIANGULAR_MESH) {\n        attributes.indices = this.drawMode === 'TRIANGLE_STRIP' ? this.getMeshStripIndices(decoder, dracoGeometry) : this.getMeshFaceIndices(decoder, dracoGeometry);\n        geometry.mode = this.drawMode === 'TRIANGLE_STRIP' ? 5 : 4;\n      } else {\n        geometry.mode = 0;\n      }\n\n      if (attributes.indices) {\n        geometry.indices = {\n          value: attributes.indices,\n          size: 1\n        };\n        delete attributes.indices;\n      }\n\n      geometry.attributes = attributes;\n      return geometry;\n    }\n  }, {\n    key: \"getPositionAttributeMetadata\",\n    value: function getPositionAttributeMetadata(positionAttribute) {\n      this.metadata = this.metadata || {};\n      this.metadata.attributes = this.metadata.attributes || {};\n      var posTransform = new this.draco.AttributeQuantizationTransform();\n\n      if (posTransform.InitFromAttribute(positionAttribute)) {\n        this.metadata.attributes.position.isQuantized = true;\n        this.metadata.attributes.position.maxRange = posTransform.range();\n        this.metadata.attributes.position.numQuantizationBits = posTransform.quantization_bits();\n        this.metadata.attributes.position.minValues = new Float32Array(3);\n\n        for (var i = 0; i < 3; ++i) {\n          this.metadata.attributes.position.minValues[i] = posTransform.min_value(i);\n        }\n      }\n\n      this.draco.destroy(posTransform);\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(decoder, dracoGeometry) {\n      var attributes = {};\n      var numPoints = dracoGeometry.num_points();\n\n      for (var attributeName in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n        var attributeType = this.draco[attributeName];\n        var attributeId = decoder.GetAttributeId(dracoGeometry, attributeType);\n\n        if (attributeId !== -1) {\n          var dracoAttribute = decoder.GetAttribute(dracoGeometry, attributeId);\n\n          var _this$getAttributeTyp = this.getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName),\n              typedArray = _this$getAttributeTyp.typedArray;\n\n          attributes[DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[attributeName]] = {\n            value: typedArray,\n            size: typedArray.length / numPoints\n          };\n        }\n      }\n\n      return attributes;\n    }\n  }, {\n    key: \"getMeshFaceIndices\",\n    value: function getMeshFaceIndices(decoder, dracoGeometry) {\n      var numFaces = dracoGeometry.num_faces();\n      var numIndices = numFaces * 3;\n      var indices = new Uint32Array(numIndices);\n      var dracoArray = new this.draco.DracoInt32Array();\n\n      for (var i = 0; i < numFaces; ++i) {\n        decoder.GetFaceFromMesh(dracoGeometry, i, dracoArray);\n        var index = i * 3;\n        indices[index] = dracoArray.GetValue(0);\n        indices[index + 1] = dracoArray.GetValue(1);\n        indices[index + 2] = dracoArray.GetValue(2);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getMeshStripIndices\",\n    value: function getMeshStripIndices(decoder, dracoGeometry) {\n      var dracoArray = new this.draco.DracoInt32Array();\n      decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      var indices = new Uint32Array(dracoArray.size());\n\n      for (var i = 0; i < dracoArray.size(); ++i) {\n        indices[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getAttributeTypedArray\",\n    value: function getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName) {\n      if (dracoAttribute.ptr === 0) {\n        var message = \"DRACO decode bad attribute \".concat(attributeName);\n        throw new Error(message);\n      }\n\n      var attributeType = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[dracoAttribute.data_type()];\n      var numComponents = dracoAttribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var dracoArray;\n      var typedArray;\n\n      switch (attributeType) {\n        case Float32Array:\n          dracoArray = new this.draco.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Float32Array(numValues);\n          break;\n\n        case Int8Array:\n          dracoArray = new this.draco.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int8Array(numValues);\n          break;\n\n        case Int16Array:\n          dracoArray = new this.draco.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int16Array(numValues);\n          break;\n\n        case Int32Array:\n          dracoArray = new this.draco.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int32Array(numValues);\n          break;\n\n        case Uint8Array:\n          dracoArray = new this.draco.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint8Array(numValues);\n          break;\n\n        case Uint16Array:\n          dracoArray = new this.draco.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint16Array(numValues);\n          break;\n\n        case Uint32Array:\n          dracoArray = new this.draco.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint32Array(numValues);\n          break;\n\n        default:\n          var errorMsg = 'DRACO decoder: unexpected attribute type.';\n          throw new Error(errorMsg);\n      }\n\n      for (var i = 0; i < numValues; i++) {\n        typedArray[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return {\n        typedArray: typedArray,\n        components: numComponents\n      };\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(arrayBuffer, options) {\n      return this.parseSync(arrayBuffer, options);\n    }\n  }]);\n\n  return DracoParser;\n}();\n\nexport { DracoParser as default };","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadDracoDecoderModule } from './lib/draco-module-loader';\nimport DracoParser from './lib/draco-parser';\nvar VERSION = typeof \"2.1.1\" !== 'undefined' ? \"2.1.1\" : 'latest';\nexport var DracoWorkerLoader = {\n  id: 'draco',\n  name: 'Draco',\n  version: VERSION,\n  extensions: ['drc'],\n  mimeType: 'application/octet-stream',\n  binary: true,\n  test: 'DRACO',\n  options: {\n    draco: {\n      decoderType: (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) === 'object' ? 'wasm' : 'js',\n      libraryPath: \"libs/\",\n      workerUrl: \"https://unpkg.com/@loaders.gl/draco@\".concat(VERSION, \"/dist/draco-loader.worker.js\"),\n      localWorkerUrl: \"modules/draco/dist/draco-loader.worker.dev.js\"\n    }\n  }\n};\nexport var DracoLoader = _objectSpread({}, DracoWorkerLoader, {\n  parse: parse\n});\n\nfunction parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context, loader) {\n    var _ref, draco, dracoParser;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return loadDracoDecoderModule(options);\n\n          case 2:\n            _ref = _context.sent;\n            draco = _ref.draco;\n            dracoParser = new DracoParser(draco);\n            _context.prev = 5;\n            return _context.abrupt(\"return\", dracoParser.parseSync(arrayBuffer));\n\n          case 7:\n            _context.prev = 7;\n            dracoParser.destroy();\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5,, 7, 10]]);\n  }));\n  return _parse.apply(this, arguments);\n}","import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.map\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Headers = function () {\n  function Headers(headers) {\n    _classCallCheck(this, Headers);\n\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function (value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function (header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function (name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  _createClass(Headers, [{\n    key: \"append\",\n    value: function append(name, value) {\n      name = normalizeName(name);\n      value = normalizeValue(value);\n      var oldValue = this.map[name];\n      this.map[name] = oldValue ? \"\".concat(oldValue, \", \").concat(value) : value;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(name) {\n      delete this.map[normalizeName(name)];\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      name = normalizeName(name);\n      return this.has(name) ? this.map[name] : null;\n    }\n  }, {\n    key: \"has\",\n    value: function has(name) {\n      return this.map.hasOwnProperty(normalizeName(name));\n    }\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      this.map[normalizeName(name)] = normalizeValue(value);\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback, thisArg) {\n      for (var name in this.map) {\n        if (this.map.hasOwnProperty(name)) {\n          callback.call(thisArg, this.map[name], name, this);\n        }\n      }\n    }\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push(name);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      var items = [];\n      this.forEach(function (value) {\n        items.push(value);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: \"entries\",\n    value: function entries() {\n      var items = [];\n      this.forEach(function (value, name) {\n        items.push([name, value]);\n      });\n      return iteratorFor(items);\n    }\n  }, {\n    key: Symbol.iterator,\n    value: _regeneratorRuntime.mark(function value() {\n      return _regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.delegateYield(this.entries(), \"t0\", 1);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this);\n    })\n  }]);\n\n  return Headers;\n}();\n\nexport { Headers as default };\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name);\n  }\n\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name');\n  }\n\n  return name.toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value);\n  }\n\n  return value;\n}\n\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function next() {\n      var value = items.shift();\n      return {\n        done: value === undefined,\n        value: value\n      };\n    }\n  };\n\n  iterator[Symbol.iterator] = function () {\n    return iterator;\n  };\n\n  return iterator;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport fs from 'fs';\nimport Headers from './headers.node';\nimport { readFile, createReadStream } from './read-file.node';\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nvar NodeFetchResponse = function () {\n  function NodeFetchResponse(url, options) {\n    _classCallCheck(this, NodeFetchResponse);\n\n    this._url = url;\n    this._ok = true;\n    this._status = 200;\n    this.options = options;\n    this.bodyUsed = false;\n    this._headers = null;\n    this.httpResponse = null;\n  }\n\n  _createClass(NodeFetchResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.bodyUsed = true;\n                _context.next = 3;\n                return readFile(this.url, this.options);\n\n              case 3:\n                data = _context.sent;\n                return _context.abrupt(\"return\", data);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var arrayBuffer, textDecoder;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.arrayBuffer();\n\n              case 2:\n                arrayBuffer = _context2.sent;\n                textDecoder = new TextDecoder();\n                return _context2.abrupt(\"return\", textDecoder.decode(arrayBuffer));\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getHeaders\",\n    value: function _getHeaders() {\n      var headers = {};\n\n      if (this.httpResponse) {\n        var httpHeaders = this.httpResponse.getHeaders();\n\n        for (var name in httpHeaders) {\n          var header = headers[name];\n          headers[name] = String(header);\n        }\n      } else {\n        var contentLength = this._getContentLength();\n\n        if (Number.isFinite(contentLength)) {\n          headers['Content-Length'] = contentLength;\n        }\n      }\n\n      return new Headers(headers);\n    }\n  }, {\n    key: \"_getContentLength\",\n    value: function _getContentLength() {\n      if (isRequestURL(this.url)) {\n        return null;\n      } else if (isDataURL(this.url)) {\n        return this.url.length - 'data:'.length;\n      }\n\n      var stats = fs.statSync(this.url);\n      return stats.size;\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return this._ok;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return this._status;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._url;\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      this._headers = this._headers || this._getHeaders();\n      return this._headers;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      var url = this.url,\n          options = this.options;\n      this.bodyUsed = true;\n      return createReadStream(url, options);\n    }\n  }]);\n\n  return NodeFetchResponse;\n}();\n\nexport { NodeFetchResponse as default };","import NodeFetchResponse from './response.node';\nexport default function fetchNode(url, options) {\n  return new NodeFetchResponse(url, options);\n}","import { isBrowser, global } from './utils/globals';\nimport { TextDecoder, TextEncoder } from './libs/encoding';\nimport * as base64 from './text-encoding/btoa.node';\nimport HeadersNode from './fetch-node/headers.node';\nimport ResponseNode from './fetch-node/response.node';\nimport fetchNode from './fetch-node/fetch.node';\nimport { encodeImageNode } from './images-node/encode-image.node';\nimport { parseImageNode } from './images-node/parse-image.node';\n\nif (!('TextEncoder' in global) && TextEncoder) {\n  global['TextEncoder'] = TextEncoder;\n}\n\nif (!('TextDecoder' in global) && TextDecoder) {\n  global['TextDecoder'] = TextDecoder;\n}\n\nif (!isBrowser && !('atob' in global) && base64.atob) {\n  global['atob'] = base64.atob;\n}\n\nif (!isBrowser && !('btoa' in global) && base64.btoa) {\n  global['btoa'] = base64.btoa;\n}\n\nif (!isBrowser && !('Headers' in global) && HeadersNode) {\n  global['Headers'] = HeadersNode;\n}\n\nif (!isBrowser && !('Response' in global) && ResponseNode) {\n  global['Response'] = ResponseNode;\n}\n\nif (!isBrowser && !('fetch' in global) && fetchNode) {\n  global['fetch'] = fetchNode;\n}\n\nif (!isBrowser && !('_encodeImageNode' in global) && encodeImageNode) {\n  global['_encodeImageNode'] = encodeImageNode;\n}\n\nif (!isBrowser && !('_parseImageNode' in global) && parseImageNode) {\n  global['_parseImageNode'] = parseImageNode;\n}","import {Vector3, Matrix4} from 'math.gl';\nimport {assert, uid} from '@luma.gl/webgl';\n\nexport default class ScenegraphNode {\n  constructor(props = {}) {\n    const {id} = props;\n\n    this.id = id || uid(this.constructor.name);\n\n    this.display = true; // whether to display the object at all\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n\n    this.props = {};\n    this._setScenegraphNodeProps(props);\n  }\n\n  delete() {}\n\n  setProps(props) {\n    this._setScenegraphNodeProps(props);\n    return this;\n  }\n\n  toString() {\n    return `{type: ScenegraphNode, id: ${this.id})}`;\n  }\n\n  setPosition(position) {\n    assert(position.length === 3, 'setPosition requires vector argument');\n    this.position = position;\n    return this;\n  }\n\n  setRotation(rotation) {\n    assert(rotation.length === 3, 'setRotation requires vector argument');\n    this.rotation = rotation;\n    return this;\n  }\n\n  setScale(scale) {\n    assert(scale.length === 3, 'setScale requires vector argument');\n    this.scale = scale;\n    return this;\n  }\n\n  setMatrix(matrix, copyMatrix = true) {\n    if (copyMatrix) {\n      this.matrix.copy(matrix);\n    } else {\n      this.matrix = matrix;\n    }\n  }\n\n  setMatrixComponents({position, rotation, scale, update = true}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    if (update) {\n      this.updateMatrix();\n    }\n    return this;\n  }\n\n  updateMatrix() {\n    const pos = this.position;\n    const rot = this.rotation;\n    const scale = this.scale;\n\n    this.matrix.identity();\n    this.matrix.translate(pos);\n    this.matrix.rotateXYZ(rot);\n    this.matrix.scale(scale);\n    return this;\n  }\n\n  update({position, rotation, scale} = {}) {\n    if (position) {\n      this.setPosition(position);\n    }\n    if (rotation) {\n      this.setRotation(rotation);\n    }\n    if (scale) {\n      this.setScale(scale);\n    }\n    this.updateMatrix();\n    return this;\n  }\n\n  getCoordinateUniforms(viewMatrix, modelMatrix) {\n    // TODO - solve multiple class problem\n    // assert(viewMatrix instanceof Matrix4);\n    assert(viewMatrix);\n    modelMatrix = modelMatrix || this.matrix;\n    const worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n    const worldInverse = worldMatrix.invert();\n    const worldInverseTranspose = worldInverse.transpose();\n\n    return {\n      viewMatrix,\n      modelMatrix,\n      objectMatrix: modelMatrix,\n      worldMatrix,\n      worldInverseMatrix: worldInverse,\n      worldInverseTransposeMatrix: worldInverseTranspose\n    };\n  }\n\n  // TODO - copied code, not yet vetted\n  /*\n  transform() {\n    if (!this.parent) {\n      this.endPosition.set(this.position);\n      this.endRotation.set(this.rotation);\n      this.endScale.set(this.scale);\n    } else {\n      const parent = this.parent;\n      this.endPosition.set(this.position.add(parent.endPosition));\n      this.endRotation.set(this.rotation.add(parent.endRotation));\n      this.endScale.set(this.scale.add(parent.endScale));\n    }\n\n    const ch = this.children;\n    for (let i = 0; i < ch.length; ++i) {\n      ch[i].transform();\n    }\n\n    return this;\n  }\n  */\n\n  _setScenegraphNodeProps(props) {\n    if ('display' in props) {\n      this.display = props.display;\n    }\n\n    if ('position' in props) {\n      this.setPosition(props.position);\n    }\n    if ('rotation' in props) {\n      this.setRotation(props.rotation);\n    }\n    if ('scale' in props) {\n      this.setScale(props.scale);\n    }\n\n    // Matrix overwrites other props\n    if ('matrix' in props) {\n      this.setMatrix(props.matrix);\n    }\n\n    Object.assign(this.props, props);\n  }\n}\n","import {Matrix4} from 'math.gl';\nimport {log} from '@luma.gl/webgl';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class GroupNode extends ScenegraphNode {\n  constructor(props = {}) {\n    props = Array.isArray(props) ? {children: props} : props;\n    const {children = []} = props;\n    log.assert(\n      children.every(child => child instanceof ScenegraphNode),\n      'every child must an instance of ScenegraphNode'\n    );\n    super(props);\n    this.children = children;\n  }\n\n  // Unpacks arrays and nested arrays of children\n  add(...children) {\n    for (const child of children) {\n      if (Array.isArray(child)) {\n        this.add(...child);\n      } else {\n        this.children.push(child);\n      }\n    }\n    return this;\n  }\n\n  remove(child) {\n    const children = this.children;\n    const indexOf = children.indexOf(child);\n    if (indexOf > -1) {\n      children.splice(indexOf, 1);\n    }\n    return this;\n  }\n\n  removeAll() {\n    this.children = [];\n    return this;\n  }\n\n  delete() {\n    this.children.forEach(child => child.delete());\n    this.removeAll();\n    super.delete();\n  }\n\n  traverse(visitor, {worldMatrix = new Matrix4()} = {}) {\n    const modelMatrix = new Matrix4(worldMatrix).multiplyRight(this.matrix);\n\n    for (const child of this.children) {\n      if (child instanceof GroupNode) {\n        child.traverse(visitor, {worldMatrix: modelMatrix});\n      } else {\n        visitor(child, {worldMatrix: modelMatrix});\n      }\n    }\n  }\n}\n","import {assert, log} from '@luma.gl/webgl';\nimport {Matrix4, Quaternion} from 'math.gl';\n\n// TODO: import from loaders.gl?\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\n//\n\nfunction accessorToJsArray(accessor) {\n  if (!accessor._animation) {\n    const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n    const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n    const length = components * accessor.count;\n    const {buffer, byteOffset} = accessor.bufferView.data;\n\n    const array = new ArrayType(buffer, byteOffset + (accessor.byteOffset || 0), length);\n\n    if (components === 1) {\n      accessor._animation = Array.from(array);\n    } else {\n      // Slice array\n      const slicedArray = [];\n      for (let i = 0; i < array.length; i += components) {\n        slicedArray.push(Array.from(array.slice(i, i + components)));\n      }\n      accessor._animation = slicedArray;\n    }\n  }\n\n  return accessor._animation;\n}\n\n// TODO: share with GLTFInstantiator\nconst helperMatrix = new Matrix4();\nfunction applyTranslationRotationScale(gltfNode, node) {\n  node.matrix.identity();\n\n  if (gltfNode.translation) {\n    node.matrix.translate(gltfNode.translation);\n  }\n\n  if (gltfNode.rotation) {\n    const rotationMatrix = helperMatrix.fromQuaternion(gltfNode.rotation);\n    node.matrix.multiplyRight(rotationMatrix);\n  }\n\n  if (gltfNode.scale) {\n    node.matrix.scale(gltfNode.scale);\n  }\n}\n\nconst quaternion = new Quaternion();\nfunction linearInterpolate(target, path, start, stop, ratio) {\n  if (path === 'rotation') {\n    // SLERP when path is rotation\n    quaternion.slerp({start, target: stop, ratio});\n    for (let i = 0; i < quaternion.length; i++) {\n      target[path][i] = quaternion[i];\n    }\n  } else {\n    // regular interpolation\n    for (let i = 0; i < start.length; i++) {\n      target[path][i] = ratio * stop[i] + (1 - ratio) * start[i];\n    }\n  }\n}\n\nfunction cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio: t}) {\n  // TODO: Quaternion might need normalization\n  for (let i = 0; i < target[path].length; i++) {\n    const m0 = outTangent0[i] * tDiff;\n    const m1 = inTangent1[i] * tDiff;\n    target[path][i] =\n      (2 * Math.pow(t, 3) - 3 * Math.pow(t, 2) + 1) * p0[i] +\n      (Math.pow(t, 3) - 2 * Math.pow(t, 2) + t) * m0 +\n      (-2 * Math.pow(t, 3) + 3 * Math.pow(t, 2)) * p1[i] +\n      (Math.pow(t, 3) - Math.pow(t, 2)) * m1;\n  }\n}\n\nfunction stepInterpolate(target, path, value) {\n  for (let i = 0; i < value.length; i++) {\n    target[path][i] = value[i];\n  }\n}\n\nfunction interpolate(time, {input, interpolation, output}, target, path) {\n  const maxTime = input[input.length - 1];\n  const animationTime = time % maxTime;\n\n  const nextIndex = input.findIndex(t => t >= animationTime);\n  const previousIndex = Math.max(0, nextIndex - 1);\n\n  if (!Array.isArray(target[path])) {\n    switch (path) {\n      case 'translation':\n        target[path] = [0, 0, 0];\n        break;\n\n      case 'rotation':\n        target[path] = [0, 0, 0, 1];\n        break;\n\n      case 'scale':\n        target[path] = [1, 1, 1];\n        break;\n\n      default:\n        log.warn(`Bad animation path ${path}`)();\n    }\n  }\n\n  assert(target[path].length === output[previousIndex].length);\n  const previousTime = input[previousIndex];\n  const nextTime = input[nextIndex];\n\n  switch (interpolation) {\n    case 'STEP':\n      stepInterpolate(target, path, output[previousIndex]);\n      break;\n\n    case 'LINEAR':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        linearInterpolate(target, path, output[previousIndex], output[nextIndex], ratio);\n      }\n      break;\n\n    case 'CUBICSPLINE':\n      if (nextTime > previousTime) {\n        const ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        const tDiff = nextTime - previousTime;\n\n        const p0 = output[3 * previousIndex + 1];\n        const outTangent0 = output[3 * previousIndex + 2];\n        const inTangent1 = output[3 * nextIndex + 0];\n        const p1 = output[3 * nextIndex + 1];\n\n        cubicsplineInterpolate(target, path, {p0, outTangent0, inTangent1, p1, tDiff, ratio});\n      }\n      break;\n\n    default:\n      log.warn(`Interpolation ${interpolation} not supported`)();\n      break;\n  }\n}\n\nclass GLTFAnimation {\n  constructor(props) {\n    this.startTime = 0;\n    this.playing = true;\n    this.speed = 1;\n\n    Object.assign(this, props);\n  }\n\n  animate(timeMs) {\n    if (!this.playing) {\n      return;\n    }\n\n    const absTime = timeMs / 1000;\n    const time = (absTime - this.startTime) * this.speed;\n\n    this.channels.forEach(({sampler, target, path}) => {\n      interpolate(time, sampler, target, path);\n      applyTranslationRotationScale(target, target._node);\n    });\n  }\n}\n\nexport default class GLTFAnimator {\n  constructor(gltf) {\n    this.animations = gltf.animations.map((animation, index) => {\n      const name = animation.name || `Animation-${index}`;\n      const samplers = animation.samplers.map(({input, interpolation = 'LINEAR', output}) => ({\n        input: accessorToJsArray(gltf.accessors[input]),\n        interpolation,\n        output: accessorToJsArray(gltf.accessors[output])\n      }));\n      const channels = animation.channels.map(({sampler, target}) => ({\n        sampler: samplers[sampler],\n        target: gltf.nodes[target.node],\n        path: target.path\n      }));\n      return new GLTFAnimation({name, channels});\n    });\n  }\n\n  // TODO(Tarek): This should be removed? (deck.gl is using this)\n  animate(time) {\n    this.setTime(time);\n  }\n\n  setTime(time) {\n    this.animations.forEach(animation => animation.animate(time));\n  }\n\n  getAnimations() {\n    return this.animations;\n  }\n}\n","import lights from '../lights/lights';\n\nimport vs from './pbr-vertex.glsl';\nimport fs from './pbr-fragment.glsl';\n\nexport default {\n  name: 'pbr',\n  vs,\n  fs,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  dependencies: [lights]\n};\n","export default `\\\nuniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else // HAS_TANGENTS != 1\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n`;\n","// This fragment shader defines a reference implementation for Physically Based Shading of\n// a microfacet surface material defined by a glTF model.\n//\n// Attribution:\n// MIT license, Copyright (c) 2016-2017 Mohamad Moneimne and Contributors\n\nexport default `\\\n#if (__VERSION__ < 300)\n#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n// WebGL 1.0 does not support non-constant in for loops\n// This provides an easy way to handle these cases\n// and still take advantage of WebGL 2.0\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n\n// debugging flags used for shader output of intermediate PBR variables\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n  float NdotL;                  // cos angle between normal and light direction\n  float NdotV;                  // cos angle between normal and view direction\n  float NdotH;                  // cos angle between normal and half vector\n  float LdotH;                  // cos angle between light direction and half vector\n  float VdotH;                  // cos angle between view direction and half vector\n  float perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n  float metalness;              // metallic value at the surface\n  vec3 reflectance0;            // full reflectance color (normal incidence angle)\n  vec3 reflectance90;           // reflectance color at grazing angle\n  float alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n  vec3 diffuseColor;            // color contribution from diffuse lighting\n  vec3 specularColor;           // color contribution from specular lighting\n  vec3 n;                       // normal at surface point\n  vec3 v;                       // vector from surface point to camera\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else //SRGB_FAST_APPROXIMATION\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif //SRGB_FAST_APPROXIMATION\n  return vec4(linOut,srgbIn.w);;\n#else //MANUAL_SRGB\n  return srgbIn;\n#endif //MANUAL_SRGB\n}\n\n// Find the normal for this fragment, pulling either from a predefined normal map\n// or from the interpolated mesh normal and tangent attributes.\nvec3 getNormal()\n{\n  // Retrieve the tangent space matrix\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else // HAS_TANGENTS\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  // The tbn matrix is linearly interpolated, so we need to re-normalize\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n// Calculation of the lighting contribution from an optional Image Based Light source.\n// Precomputed Environment Maps are required uniform inputs and are computed as outlined in [1].\n// See our README.md on Environment Maps [3] for additional discussion.\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0; // resolution of 512x512\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  // retrieve a scale and bias to F0. See [1], Figure 3\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n  // For presentation, this allows us to disable IBL terms\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n// Basic Lambertian diffuse\n// Implementation from Lambert's Photometria https://archive.org/details/lambertsphotome00lambgoog\n// See also [1], Equation 1\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\n// The following equation models the Fresnel reflectance term of the spec equation (aka F())\n// Implementation of fresnel from [4], Equation 15\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n// This calculates the specular geometric attenuation (aka G()),\n// where rougher material will reflect less light back to the viewer.\n// This implementation is based on [1] Equation 4, and we adopt their modifications to\n// alphaRoughness as input as originally proposed in [2].\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n// The following equation(s) model the distribution of microfacet normals across\n// the area being drawn (aka D())\n// Implementation from \"Average Irregularity Representation of a Roughened Surface\n// for Ray Reflection\" by T. S. Trowbridge, and K. P. Reitz\n// Follows the distribution function recommended in the SIGGRAPH 2013 course notes\n// from EPIC Games [1], Equation 3.\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);             // Vector from surface point to light\n  vec3 h = normalize(l+v);                        // Half vector between both l and v\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  // Calculate the shading terms for the microfacet specular shading model\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n\n  // Calculation of analytical lighting contribution\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n  // Metallic and Roughness material properties are packed together\n  // In glTF, these factors can be specified by fixed scalar values\n  // or from a metallic-roughness map\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n  // Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n  // This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n  // Roughness is authored as perceptual roughness; as is convention,\n  // convert to material roughness by squaring the perceptual roughness [2].\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n  // The albedo may be defined from a base texture or a flat color\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n\n  // Compute reflectance.\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n  // For typical incident reflectance range (between 4% to 100%) set the grazing\n  // reflectance to 100% for typical fresnel effect.\n  // For very low reflectance range on highly diffuse objects (below 4%),\n  // incrementally reduce grazing reflecance to 0%.\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();                          // normal at surface point\n  vec3 v = normalize(u_Camera - pbr_vPosition);  // Vector from surface point to camera\n\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  PBRInfo pbrInputs = PBRInfo(\n    0.0, // NdotL\n    NdotV,\n    0.0, // NdotH\n    0.0, // LdotH\n    0.0, // VdotH\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor,\n    n,\n    v\n  );\n\n  vec3 color = vec3(0, 0, 0);\n\n#ifdef USE_LIGHTS\n  // Apply ambient light\n  PBRInfo_setAmbientLight(pbrInputs);\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n\n  // Apply directional light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n    if (i < lighting_uDirectionalLightCount) {\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n    }\n  }\n\n  // Apply point light\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n    if (i < lighting_uPointLightCount) {\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n    }\n  }\n#endif\n\n  // Calculate lighting contribution from image based lighting source (IBL)\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n  // Apply optional PBR terms for additional (optional) shading\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n  // This section uses mix to override final color for reference app visualization\n  // of various parameters in the lighting equation.\n#ifdef PBR_DEBUG\n  // TODO: Figure out how to debug multiple lights\n\n  // color = mix(color, F, u_ScaleFGDSpec.x);\n  // color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n  // color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n  // color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n  // color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n`;\n","import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n","import {Texture2D, hasFeature, FEATURES, log} from '@luma.gl/webgl';\n\nexport default class GLTFMaterialParser {\n  constructor(\n    gl,\n    {attributes, material, pbrDebug, imageBasedLightingEnvironment, lights, useTangents}\n  ) {\n    this.gl = gl;\n\n    this.defines = {\n      // TODO: Use EXT_sRGB if available (Standard in WebGL 2.0)\n      MANUAL_SRGB: 1,\n      SRGB_FAST_APPROXIMATION: 1\n    };\n\n    if (hasFeature(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n      this.defines.USE_TEX_LOD = 1;\n    }\n\n    this.uniforms = {\n      // TODO: find better values?\n      u_Camera: [0, 0, 0], // Model should override\n\n      u_MetallicRoughnessValues: [1, 1] // Default is 1 and 1\n    };\n\n    this.parameters = {};\n    this.generatedTextures = [];\n\n    if (imageBasedLightingEnvironment) {\n      this.uniforms.u_DiffuseEnvSampler = imageBasedLightingEnvironment.getDiffuseEnvSampler();\n      this.uniforms.u_SpecularEnvSampler = imageBasedLightingEnvironment.getSpecularEnvSampler();\n      this.uniforms.u_brdfLUT = imageBasedLightingEnvironment.getBrdfTexture();\n      this.uniforms.u_ScaleIBLAmbient = [1, 1];\n    }\n\n    if (pbrDebug) {\n      // Override final color for reference app visualization\n      // of various parameters in the lighting equation.\n      this.uniforms.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n      this.uniforms.u_ScaleFGDSpec = [0, 0, 0, 0];\n    }\n\n    this.defineIfPresent(attributes.NORMAL, 'HAS_NORMALS');\n    this.defineIfPresent(attributes.TANGENT && useTangents, 'HAS_TANGENTS');\n    this.defineIfPresent(attributes.TEXCOORD_0, 'HAS_UV');\n\n    this.defineIfPresent(imageBasedLightingEnvironment, 'USE_IBL');\n    this.defineIfPresent(lights, 'USE_LIGHTS');\n    this.defineIfPresent(pbrDebug, 'PBR_DEBUG');\n\n    if (material) {\n      this.parseMaterial(material);\n    }\n  }\n\n  defineIfPresent(value, name) {\n    if (value) {\n      this.defines[name] = 1;\n    }\n  }\n\n  parseTexture(gltfTexture, name, define = null) {\n    const parameters =\n      (gltfTexture.texture &&\n        gltfTexture.texture.sampler &&\n        gltfTexture.texture.sampler.parameters) ||\n      {};\n\n    const texture = new Texture2D(this.gl, {\n      id: gltfTexture.name || gltfTexture.id,\n      parameters,\n      pixelStore: {\n        [this.gl.UNPACK_FLIP_Y_WEBGL]: false\n      },\n      // Texture2D accepts a promise that returns an image as data (Async Textures)\n      data: gltfTexture.texture.source.image\n    });\n    this.uniforms[name] = texture;\n    this.defineIfPresent(define, define);\n    this.generatedTextures.push(texture);\n  }\n\n  parsePbrMetallicRoughness(pbrMetallicRoughness) {\n    if (pbrMetallicRoughness.baseColorTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.baseColorTexture,\n        'u_BaseColorSampler',\n        'HAS_BASECOLORMAP'\n      );\n    }\n    this.uniforms.u_BaseColorFactor = pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1];\n\n    if (pbrMetallicRoughness.metallicRoughnessTexture) {\n      this.parseTexture(\n        pbrMetallicRoughness.metallicRoughnessTexture,\n        'u_MetallicRoughnessSampler',\n        'HAS_METALROUGHNESSMAP'\n      );\n    }\n    const {metallicFactor = 1, roughnessFactor = 1} = pbrMetallicRoughness;\n    this.uniforms.u_MetallicRoughnessValues = [metallicFactor, roughnessFactor];\n  }\n\n  parseMaterial(material) {\n    if (material.pbrMetallicRoughness) {\n      this.parsePbrMetallicRoughness(material.pbrMetallicRoughness);\n    }\n    if (material.normalTexture) {\n      this.parseTexture(material.normalTexture, 'u_NormalSampler', 'HAS_NORMALMAP');\n\n      const {scale = 1} = material.normalTexture;\n      this.uniforms.u_NormalScale = scale;\n    }\n    if (material.occlusionTexture) {\n      this.parseTexture(material.occlusionTexture, 'u_OcclusionSampler', 'HAS_OCCLUSIONMAP');\n\n      const {strength = 1} = material.occlusionTexture;\n      this.uniforms.u_OcclusionStrength = strength;\n    }\n    if (material.emissiveTexture) {\n      this.parseTexture(material.emissiveTexture, 'u_EmissiveSampler', 'HAS_EMISSIVEMAP');\n      this.uniforms.u_EmissiveFactor = material.emissiveFactor || [0, 0, 0];\n    }\n    if (material.alphaMode === 'MASK') {\n      const {alphaCutoff = 0.5} = material;\n      this.defines.ALPHA_CUTOFF = 1;\n      this.uniforms.u_AlphaCutoff = alphaCutoff;\n    } else if (material.alphaMode === 'BLEND') {\n      log.warn('BLEND alphaMode might not work well because it requires mesh sorting')();\n      Object.assign(this.parameters, {\n        blend: true,\n        blendEquation: this.gl.FUNC_ADD,\n        blendFunc: [\n          this.gl.SRC_ALPHA,\n          this.gl.ONE_MINUS_SRC_ALPHA,\n          this.gl.ONE,\n          this.gl.ONE_MINUS_SRC_ALPHA\n        ]\n      });\n    }\n  }\n}\n","import {isWebGL2} from '@luma.gl/gltools';\nimport {log} from '@luma.gl/webgl';\nimport {pbr} from '@luma.gl/shadertools';\nimport {ModelNode} from '../scenegraph';\nimport GLTFMaterialParser from './gltf-material-parser';\n\nconst vs = `\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n`;\n\nconst fs = `\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n`;\n\nfunction addVersionToShader(gl, source) {\n  if (isWebGL2(gl)) {\n    return `#version 300 es\\n${source}`;\n  }\n\n  return source;\n}\n\nexport default function createGLTFModel(gl, options) {\n  const {id, drawMode, vertexCount, attributes, modelOptions} = options;\n  const materialParser = new GLTFMaterialParser(gl, options);\n\n  log.info(4, 'createGLTFModel defines: ', materialParser.defines)();\n\n  // Calculate managedResources\n  // TODO: Implement resource management logic that will\n  // not deallocate resources/textures/buffers that are shared\n  const managedResources = [];\n  managedResources.push(...materialParser.generatedTextures);\n  managedResources.push(...Object.values(attributes).map(attribute => attribute.buffer));\n\n  const model = new ModelNode(\n    gl,\n    Object.assign(\n      {\n        id,\n        drawMode,\n        vertexCount,\n        modules: [pbr],\n        defines: materialParser.defines,\n        parameters: materialParser.parameters,\n        vs: addVersionToShader(gl, vs),\n        fs: addVersionToShader(gl, fs),\n        managedResources\n      },\n      modelOptions\n    )\n  );\n\n  model.setProps({attributes});\n  model.setUniforms(materialParser.uniforms);\n\n  return model;\n}\n","import {Matrix4} from 'math.gl';\nimport {Buffer, Accessor, log} from '@luma.gl/webgl';\nimport {GroupNode} from '../scenegraph/';\n\nimport GLTFAnimator from './gltf-animator';\nimport createGLTFModel from './create-gltf-model';\n\n// TODO: import {ATTRIBUTE_TYPE_TO_COMPONENTS} from '@loaders.gl/gltf';\nconst ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nconst DEFAULT_OPTIONS = {\n  modelOptions: {},\n  pbrDebug: false,\n  imageBasedLightingEnvironment: null,\n  lights: true,\n  useTangents: false\n};\n\n// GLTF instantiator for luma.gl\n// Walks the parsed and resolved glTF structure and builds a luma.gl scenegraph\nexport default class GLTFInstantiator {\n  constructor(gl, options = {}) {\n    this.gl = gl;\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  instantiate(gltf) {\n    this.gltf = gltf;\n    const scenes = (gltf.scenes || []).map(scene => this.createScene(scene));\n    return scenes;\n  }\n\n  createAnimator() {\n    if (Array.isArray(this.gltf.animations)) {\n      return new GLTFAnimator(this.gltf);\n    }\n\n    return null;\n  }\n\n  createScene(gltfScene) {\n    const gltfNodes = gltfScene.nodes || [];\n    const nodes = gltfNodes.map(node => this.createNode(node));\n    const scene = new GroupNode({\n      id: gltfScene.name || gltfScene.id,\n      children: nodes\n    });\n    return scene;\n  }\n\n  createNode(gltfNode) {\n    if (!gltfNode._node) {\n      const gltfChildren = gltfNode.children || [];\n      const children = gltfChildren.map(child => this.createNode(child));\n\n      // Node can have children nodes and meshes at the same time\n      if (gltfNode.mesh) {\n        children.push(this.createMesh(gltfNode.mesh));\n      }\n\n      const node = new GroupNode({\n        id: gltfNode.name || gltfNode.id,\n        children\n      });\n\n      if (gltfNode.matrix) {\n        node.setMatrix(gltfNode.matrix);\n      } else {\n        node.matrix.identity();\n\n        if (gltfNode.translation) {\n          node.matrix.translate(gltfNode.translation);\n        }\n\n        if (gltfNode.rotation) {\n          const rotationMatrix = new Matrix4().fromQuaternion(gltfNode.rotation);\n          node.matrix.multiplyRight(rotationMatrix);\n        }\n\n        if (gltfNode.scale) {\n          node.matrix.scale(gltfNode.scale);\n        }\n      }\n      gltfNode._node = node;\n    }\n\n    return gltfNode._node;\n  }\n\n  createMesh(gltfMesh) {\n    // TODO: avoid changing the gltf\n    if (!gltfMesh._mesh) {\n      const gltfPrimitives = gltfMesh.primitives || [];\n      const primitives = gltfPrimitives.map((gltfPrimitive, i) =>\n        this.createPrimitive(gltfPrimitive, i, gltfMesh)\n      );\n      const mesh = new GroupNode({\n        id: gltfMesh.name || gltfMesh.id,\n        children: primitives\n      });\n      gltfMesh._mesh = mesh;\n    }\n\n    return gltfMesh._mesh;\n  }\n\n  getVertexCount(attributes) {\n    // TODO: implement this\n    log.warn('getVertexCount() not found')();\n  }\n\n  createPrimitive(gltfPrimitive, i, gltfMesh) {\n    return createGLTFModel(\n      this.gl,\n      Object.assign(\n        {\n          id: gltfPrimitive.name || `${gltfMesh.name || gltfMesh.id}-primitive-${i}`,\n          drawMode: gltfPrimitive.mode || 4,\n          vertexCount: gltfPrimitive.indices\n            ? gltfPrimitive.indices.count\n            : this.getVertexCount(gltfPrimitive.attributes),\n          attributes: this.createAttributes(gltfPrimitive.attributes, gltfPrimitive.indices),\n          material: gltfPrimitive.material\n        },\n        this.options\n      )\n    );\n  }\n\n  createAttributes(attributes, indices) {\n    const loadedAttributes = {};\n\n    Object.keys(attributes).forEach(attrName => {\n      loadedAttributes[attrName] = this.createAccessor(\n        attributes[attrName],\n        this.createBuffer(attributes[attrName], this.gl.ARRAY_BUFFER)\n      );\n    });\n\n    if (indices) {\n      loadedAttributes.indices = this.createAccessor(\n        indices,\n        this.createBuffer(indices, this.gl.ELEMENT_ARRAY_BUFFER)\n      );\n    }\n\n    log.info(4, 'glTF Attributes', {attributes, indices, generated: loadedAttributes})();\n\n    return loadedAttributes;\n  }\n\n  createBuffer(attribute, target) {\n    if (!attribute.bufferView) {\n      // Draco decoded files do not have a bufferView\n      attribute.bufferView = {};\n    }\n\n    const {bufferView} = attribute;\n    if (!bufferView.lumaBuffers) {\n      bufferView.lumaBuffers = {};\n    }\n\n    if (!bufferView.lumaBuffers[target]) {\n      bufferView.lumaBuffers[target] = new Buffer(this.gl, {\n        id: `from-${bufferView.id}`,\n        // Draco decoded files have attribute.value\n        data: bufferView.data || attribute.value,\n        target\n      });\n    }\n\n    return bufferView.lumaBuffers[target];\n  }\n\n  createAccessor(accessor, buffer) {\n    return new Accessor({\n      buffer,\n      offset: accessor.byteOffset || 0,\n      stride: accessor.bufferView.byteStride || 0,\n      type: accessor.componentType,\n      size: ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type]\n    });\n  }\n\n  // TODO - create sampler in WebGL2\n  createSampler(gltfSampler) {\n    return gltfSampler;\n  }\n\n  // Helper methods (move to GLTFLoader.resolve...?)\n\n  needsPOT() {\n    // Has a wrapping mode (either wrapS or wrapT) equal to REPEAT or MIRRORED_REPEAT, or\n    // Has a minification filter (minFilter) that uses mipmapping\n    // (NEAREST_MIPMAP_NEAREST, NEAREST_MIPMAP_LINEAR,\n    // LINEAR_MIPMAP_NEAREST, or LINEAR_MIPMAP_LINEAR).\n    return false;\n  }\n}\n","import GLTFInstantiator from './gltf-instantiator';\n\nexport default function createGLTFObjects(gl, gltf, options) {\n  const instantiator = new GLTFInstantiator(gl, options);\n  const scenes = instantiator.instantiate(gltf);\n  const animator = instantiator.createAnimator();\n\n  return {scenes, animator};\n}\n","import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport assert from '../utils/assert';\nexport function generateUrl(getUrl, options, urlOptions) {\n  var url = getUrl;\n\n  if (typeof getUrl === 'function') {\n    url = getUrl(_objectSpread({}, options, {}, urlOptions));\n  }\n\n  assert(typeof url === 'string');\n  var baseUrl = options.baseUrl;\n\n  if (baseUrl) {\n    url = baseUrl[baseUrl.length - 1] === '/' ? \"\".concat(baseUrl).concat(url) : \"\".concat(baseUrl, \"/\").concat(url);\n  }\n\n  return resolvePath(url);\n}","import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isObject = function isObject(value) {\n  return value && _typeof(value) === 'object';\n};\n\nexport function asyncDeepMap(_x, _x2) {\n  return _asyncDeepMap.apply(this, arguments);\n}\n\nfunction _asyncDeepMap() {\n  _asyncDeepMap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tree, func) {\n    var options,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n            _context.next = 3;\n            return mapSubtree(tree, func, options);\n\n          case 3:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _asyncDeepMap.apply(this, arguments);\n}\n\nexport function mapSubtree(_x3, _x4, _x5) {\n  return _mapSubtree.apply(this, arguments);\n}\n\nfunction _mapSubtree() {\n  _mapSubtree = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(object, func, options) {\n    var url;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!Array.isArray(object)) {\n              _context2.next = 4;\n              break;\n            }\n\n            _context2.next = 3;\n            return mapArray(object, func, options);\n\n          case 3:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 4:\n            if (!isObject(object)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 7;\n            return mapObject(object, func, options);\n\n          case 7:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 8:\n            url = object;\n            _context2.next = 11;\n            return func(url, options);\n\n          case 11:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _mapSubtree.apply(this, arguments);\n}\n\nfunction mapObject(_x6, _x7, _x8) {\n  return _mapObject.apply(this, arguments);\n}\n\nfunction _mapObject() {\n  _mapObject = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(object, func, options) {\n    var promises, values, _loop, key;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            promises = [];\n            values = {};\n\n            _loop = function _loop(key) {\n              var url = object[key];\n              var promise = mapSubtree(url, func, options).then(function (value) {\n                values[key] = value;\n              });\n              promises.push(promise);\n            };\n\n            for (key in object) {\n              _loop(key);\n            }\n\n            _context3.next = 6;\n            return Promise.all(promises);\n\n          case 6:\n            return _context3.abrupt(\"return\", values);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _mapObject.apply(this, arguments);\n}\n\nfunction mapArray(_x9, _x10) {\n  return _mapArray.apply(this, arguments);\n}\n\nfunction _mapArray() {\n  _mapArray = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(urlArray, func) {\n    var options,\n        promises,\n        _args4 = arguments;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            options = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n            promises = urlArray.map(function (url) {\n              return mapSubtree(url, func, options);\n            });\n            _context4.next = 4;\n            return Promise.all(promises);\n\n          case 4:\n            return _context4.abrupt(\"return\", _context4.sent);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _mapArray.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { asyncDeepMap } from './async-deep-map';\nexport function deepLoad(_x, _x2, _x3) {\n  return _deepLoad.apply(this, arguments);\n}\n\nfunction _deepLoad() {\n  _deepLoad = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(urlTree, load, options) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return asyncDeepMap(urlTree, function (url) {\n              return shallowLoad(url, load, options);\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _deepLoad.apply(this, arguments);\n}\n\nexport function shallowLoad(_x4, _x5, _x6) {\n  return _shallowLoad.apply(this, arguments);\n}\n\nfunction _shallowLoad() {\n  _shallowLoad = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, load, options) {\n    var response, arrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(url, options.fetch);\n\n          case 2:\n            response = _context2.sent;\n            _context2.next = 5;\n            return response.arrayBuffer();\n\n          case 5:\n            arrayBuffer = _context2.sent;\n            _context2.next = 8;\n            return load(arrayBuffer, options);\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _shallowLoad.apply(this, arguments);\n}","import \"core-js/modules/es6.math.log2\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from '../utils/assert';\nimport parseImage from '../parsers/parse-image';\nimport { getImageSize } from '../parsed-image-api/parsed-image-api';\nimport { generateUrl } from './generate-url';\nimport { deepLoad, shallowLoad } from './deep-load';\nexport function loadImage(_x) {\n  return _loadImage.apply(this, arguments);\n}\n\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(getUrl) {\n    var options,\n        imageUrls,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            _context.next = 3;\n            return getImageUrls(getUrl, options);\n\n          case 3:\n            imageUrls = _context.sent;\n            _context.next = 6;\n            return deepLoad(imageUrls, parseImage, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadImage.apply(this, arguments);\n}\n\nexport function getImageUrls(_x2, _x3) {\n  return _getImageUrls.apply(this, arguments);\n}\n\nfunction _getImageUrls() {\n  _getImageUrls = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(getUrl, options) {\n    var urlOptions,\n        mipLevels,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            urlOptions = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n            mipLevels = options && options.image && options.image.mipLevels || 0;\n\n            if (!(mipLevels !== 0)) {\n              _context2.next = 8;\n              break;\n            }\n\n            _context2.next = 5;\n            return getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions);\n\n          case 5:\n            _context2.t0 = _context2.sent;\n            _context2.next = 9;\n            break;\n\n          case 8:\n            _context2.t0 = generateUrl(getUrl, options, urlOptions);\n\n          case 9:\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getImageUrls.apply(this, arguments);\n}\n\nfunction getMipmappedImageUrls(_x4, _x5, _x6, _x7) {\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\n\nfunction _getMipmappedImageUrls() {\n  _getMipmappedImageUrls = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(getUrl, mipLevels, options, urlOptions) {\n    var urls, url, image, _getImageSize, width, height, mipLevel, _url;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            urls = [];\n\n            if (!(mipLevels === 'auto')) {\n              _context3.next = 9;\n              break;\n            }\n\n            url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n              lod: 0\n            }));\n            _context3.next = 5;\n            return shallowLoad(url, parseImage, options);\n\n          case 5:\n            image = _context3.sent;\n            _getImageSize = getImageSize(image), width = _getImageSize.width, height = _getImageSize.height;\n            mipLevels = getMipLevels({\n              width: width,\n              height: height\n            });\n            urls.push(url);\n\n          case 9:\n            assert(mipLevels > 0);\n\n            for (mipLevel = urls.length; mipLevel < mipLevels; ++mipLevel) {\n              _url = generateUrl(getUrl, options, _objectSpread({}, urlOptions, {\n                lod: mipLevel\n              }));\n              urls.push(_url);\n            }\n\n            return _context3.abrupt(\"return\", urls);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\n\nexport function getMipLevels(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n  return 1 + Math.floor(Math.log2(Math.max(width, height)));\n}","import GL from '@luma.gl/constants';\nimport {Texture2D, TextureCube} from '@luma.gl/webgl';\nimport {loadImage} from '@loaders.gl/images';\n\nexport default class GLTFEnvironment {\n  constructor(gl, {brdfLutUrl, getTexUrl, specularMipLevels = 10}) {\n    this.gl = gl;\n    this.brdfLutUrl = brdfLutUrl;\n    this.getTexUrl = getTexUrl;\n    this.specularMipLevels = specularMipLevels;\n  }\n\n  makeCube({id, getTextureForFace, parameters}) {\n    const pixels = {};\n    TextureCube.FACES.forEach(face => {\n      pixels[face] = getTextureForFace(face);\n    });\n    return new TextureCube(this.gl, {\n      id,\n      mipmaps: false,\n      parameters,\n      pixels\n    });\n  }\n\n  getDiffuseEnvSampler() {\n    if (!this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler = this.makeCube({\n        id: 'DiffuseEnvSampler',\n        getTextureForFace: dir => loadImage(this.getTexUrl('diffuse', dir, 0)),\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._DiffuseEnvSampler;\n  }\n\n  getSpecularEnvSampler() {\n    if (!this._SpecularEnvSampler) {\n      this._SpecularEnvSampler = this.makeCube({\n        id: 'SpecularEnvSampler',\n        getTextureForFace: dir => {\n          const imageArray = [];\n          for (let lod = 0; lod <= this.specularMipLevels - 1; lod++) {\n            imageArray.push(loadImage(this.getTexUrl('specular', dir, lod)));\n          }\n          return imageArray;\n        },\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR_MIPMAP_LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        }\n      });\n    }\n\n    return this._SpecularEnvSampler;\n  }\n\n  getBrdfTexture() {\n    if (!this._BrdfTexture) {\n      this._BrdfTexture = new Texture2D(this.gl, {\n        id: 'brdfLUT',\n        parameters: {\n          [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n          [GL.TEXTURE_MIN_FILTER]: GL.LINEAR,\n          [GL.TEXTURE_MAG_FILTER]: GL.LINEAR\n        },\n        // Texture2D accepts a promise that returns an image as data (Async Textures)\n        data: loadImage(this.brdfLutUrl)\n      });\n    }\n\n    return this._BrdfTexture;\n  }\n\n  delete() {\n    if (this._DiffuseEnvSampler) {\n      this._DiffuseEnvSampler.delete();\n      this._DiffuseEnvSampler = null;\n    }\n\n    if (this._SpecularEnvSampler) {\n      this._SpecularEnvSampler.delete();\n      this._SpecularEnvSampler = null;\n    }\n\n    if (this._BrdfTexture) {\n      this._BrdfTexture.delete();\n      this._BrdfTexture = null;\n    }\n  }\n}\n","/* eslint-disable camelcase */\n/* global document, window */\nimport {parse} from '@loaders.gl/core';\n// eslint-disable-next-line import/no-unresolved\nimport {GLTFLoader} from '@loaders.gl/gltf';\nimport {DracoLoader} from '@loaders.gl/draco';\nimport '@loaders.gl/polyfills'; // text-encoding polyfill for older MS browsers\nimport GL from '@luma.gl/constants';\nimport {AnimationLoop, Timeline} from '@luma.gl/engine';\nimport {clear, log, lumaStats} from '@luma.gl/webgl';\nimport {setParameters} from '@luma.gl/gltools';\nimport {createGLTFObjects, GLTFEnvironment, VRDisplay} from '@luma.gl/experimental';\nimport {Matrix4, radians} from 'math.gl';\n\nconst CUBE_FACE_TO_DIRECTION = {\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_X]: 'right',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_X]: 'left',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Y]: 'top',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Y]: 'bottom',\n  [GL.TEXTURE_CUBE_MAP_POSITIVE_Z]: 'front',\n  [GL.TEXTURE_CUBE_MAP_NEGATIVE_Z]: 'back'\n};\n\n// Damaged helmet model used under creative commons: https://github.com/KhronosGroup/glTF-Sample-Models/tree/1ba47770292486e66ca1e1161857a6e5695c2631/2.0/DamagedHelmet\n// Papermill textures used under Apache 2.0: https://github.com/KhronosGroup/glTF-Sample-Viewer/blob/e2d487693fa2e6148bd29d05bc82586f5a002a45/LICENSE.md\n\nconst GLTF_BASE_URL =\n  'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/luma.gl/examples/gltf/';\nconst GLTF_DEFAULT_MODEL = 'DamagedHelmet.glb';\n\n// URL for animated model\n// 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/InterpolationTest/glTF-Binary/InterpolationTest.glb';\n\nconst INFO_HTML = `\n<p><b>glTF Loader</b>.</p>\n<p>Rendered using luma.gl.</p>\n<div>\n  Show\n  <select id=\"showSelector\">\n    <option value=\"0 0 0 0 0 0 0 0\">Final Result</option>\n\n    <option value=\"0 1 0 0 0 0 0 0\">Base Color</option>\n    <option value=\"0 0 1 0 0 0 0 0\">Metallic</option>\n    <option value=\"0 0 0 1 0 0 0 0\">Roughness</option>\n    <option value=\"1 0 0 0 0 0 0 0\">Diffuse</option>\n\n    <option value=\"0 0 0 0 1 0 0 0\">Specular Reflection</option>\n    <option value=\"0 0 0 0 0 1 0 0\">Geometric Occlusion</option>\n    <option value=\"0 0 0 0 0 0 1 0\">Microfacet Distribution</option>\n    <option value=\"0 0 0 0 0 0 0 1\">Specular</option>\n  </select>\n  <br>\n</div>\n<div>\n  Regular Lights\n  <select id=\"lightSelector\">\n    <option value=\"default\">Default</option>\n    <option value=\"ambient\">Ambient Only</option>\n    <option value=\"directional1\">1x Directional (Red) + Ambient</option>\n    <option value=\"directional3\">3x Directional (RGB)</option>\n    <option value=\"point1far\">1x Point Light Far (Red) + Ambient</option>\n    <option value=\"point1near\">1x Point Light Near (Red) + Ambient</option>\n  </select>\n  <br>\n</div>\n<div>\n  Image-Based Light\n  <select id=\"iblSelector\">\n    <option value=\"exclusive\">On (Exclusive)</option>\n    <option value=\"addition\">On (Addition to Regular)</option>\n    <option value=\"off\">Off (Only Regular)</option>\n  </select>\n  <br>\n</div>\n<p><img src=\"https://img.shields.io/badge/WebVR-Supported-orange.svg\" /></p>\n`;\n\nconst LIGHT_SOURCES = {\n  default: {\n    directionalLights: [\n      {\n        color: [255, 255, 255],\n        direction: [0.0, 0.5, 0.5],\n        intensity: 1.0\n      }\n    ]\n  },\n  ambient: {\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional1: {\n    directionalLights: [\n      {\n        color: [255, 0, 0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  directional3: {\n    directionalLights: [\n      {\n        color: [255, 0.0, 0.0],\n        direction: [1.0, 0.0, 0.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 0.0, 255],\n        direction: [0.0, 0.0, 1.0],\n        intensity: 1.0\n      },\n      {\n        color: [0.0, 255, 0.0],\n        direction: [0.0, 1.0, 0.0],\n        intensity: 1.0\n      }\n    ]\n  },\n  point1far: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [200.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  },\n  point1near: {\n    pointLights: [\n      {\n        color: [255, 0, 0],\n        position: [10.0, 0.0, 0.0],\n        attenuation: [0, 0, 0.01],\n        intensity: 1.0\n      }\n    ],\n    ambientLight: {\n      color: [255, 255, 255],\n      intensity: 1.0\n    }\n  }\n};\n\nconst DEFAULT_OPTIONS = {\n  pbrDebug: true,\n  imageBasedLightingEnvironment: null,\n  lights: false\n};\n\nasync function loadGLTF(urlOrPromise, gl, options) {\n  const data = typeof urlOrPromise === 'string' ? window.fetch(urlOrPromise) : urlOrPromise;\n  const gltf = await parse(data, GLTFLoader, {\n    ...options,\n    gl,\n    DracoLoader\n  });\n  const {scenes, animator} = createGLTFObjects(gl, gltf, options);\n\n  scenes[0].traverse((node, {worldMatrix}) => log.info(4, 'Using model: ', node)());\n  return {scenes, animator, gltf};\n}\n\nexport default class AppAnimationLoop extends AnimationLoop {\n  static getInfo() {\n    return INFO_HTML;\n  }\n  constructor(opts = {}) {\n    super({\n      ...opts,\n      glOptions: {\n        // Use to test gltf with webgl 1.0 and 2.0\n        webgl1: true,\n        webgl2: true,\n        // alpha causes issues with some glTF demos\n        alpha: false\n      }\n    });\n\n    const {modelFile = null, initialZoom = 2} = opts;\n    this.scenes = [];\n    this.animator = null;\n    this.gl = null;\n    this.modelFile = modelFile;\n\n    this.mouse = {\n      lastX: 0,\n      lastY: 0\n    };\n\n    this.translate = initialZoom;\n    this.rotation = [0, 0];\n    this.rotationStart = [0, 0];\n\n    this.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n    this.u_ScaleFGDSpec = [0, 0, 0, 0];\n\n    this.attachTimeline(new Timeline());\n    this.timeline.play();\n    this.timelineChannel = this.timeline.addChannel({\n      rate: 0.5\n    });\n    this.animationHandle = null;\n\n    this.onInitialize = this.onInitialize.bind(this);\n    this.onRender = this.onRender.bind(this);\n    this._setDisplay(new VRDisplay());\n  }\n\n  initalizeEventHandling(canvas) {\n    let pointerIsDown = false;\n\n    const pointerDown = (x, y) => {\n      this.mouse.lastX = x;\n      this.mouse.lastY = y;\n\n      this.rotationStart[0] = this.rotation[0];\n      this.rotationStart[1] = this.rotation[1];\n\n      pointerIsDown = true;\n    };\n\n    const pointerMove = (x, y) => {\n      if (!pointerIsDown) {\n        return;\n      }\n\n      const dX = x - this.mouse.lastX;\n      const dY = y - this.mouse.lastY;\n\n      this.rotation[0] = this.rotationStart[0] + dY / 100;\n      this.rotation[1] = this.rotationStart[1] + dX / 100;\n    };\n\n    canvas.addEventListener('wheel', e => {\n      this.translate += e.deltaY / 10;\n      if (this.translate < 0.5) {\n        this.translate = 0.5;\n      }\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mousedown', e => {\n      pointerDown(e.clientX, e.clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('mouseup', e => {\n      pointerIsDown = false;\n    });\n\n    canvas.addEventListener('mousemove', e => {\n      pointerMove(e.clientX, e.clientY);\n    });\n\n    canvas.addEventListener('touchstart', e => {\n      pointerDown(e.touches[0].clientX, e.touches[0].clientY);\n\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('touchmove', e => {\n      pointerMove(e.touches[0].clientX, e.touches[0].clientY);\n    });\n\n    canvas.addEventListener('touchend', e => {\n      if (e.touches.length === 0) {\n        pointerIsDown = false;\n      }\n    });\n\n    canvas.addEventListener('dragover', e => {\n      e.dataTransfer.dropEffect = 'link';\n      e.preventDefault();\n    });\n\n    canvas.addEventListener('drop', e => {\n      e.preventDefault();\n      if (e.dataTransfer.files && e.dataTransfer.files.length === 1) {\n        this._deleteScenes();\n        const readPromise = new Promise(resolve => {\n          const reader = new window.FileReader();\n          reader.onload = ev => resolve(ev.target.result);\n          reader.readAsArrayBuffer(e.dataTransfer.files[0]);\n        });\n\n        loadGLTF(readPromise, this.gl, this.loadOptions).then(result => this._fileLoaded(result));\n      }\n    });\n  }\n\n  _fileLoaded(loadResult) {\n    if (this.animationHandle !== null) {\n      this.timeline.detachAnimation(this.animationHandle);\n      this.animationHandle = null;\n    }\n    this.animator = null;\n\n    Object.assign(this, loadResult);\n    if (this.animator) {\n      this.animationHandle = this.timeline.attachAnimation(this.animator, this.timelineChannel);\n    }\n  }\n\n  onInitialize({gl, canvas}) {\n    setParameters(gl, {\n      depthTest: true,\n      blend: false\n    });\n\n    this.loadOptions = DEFAULT_OPTIONS;\n    this.environment = new GLTFEnvironment(gl, {\n      brdfLutUrl: `${GLTF_BASE_URL}/brdfLUT.png`,\n      getTexUrl: (type, dir, mipLevel) =>\n        `${GLTF_BASE_URL}/papermill/${type}/${type}_${CUBE_FACE_TO_DIRECTION[dir]}_${mipLevel}.jpg`\n    });\n    this.loadOptions.imageBasedLightingEnvironment = this.environment;\n\n    this.gl = gl;\n    if (this.modelFile) {\n      // options for unit testing\n      const options = {\n        pbrDebug: false,\n        imageBasedLightingEnvironment: null,\n        lights: true\n      };\n      loadGLTF(this.modelFile, this.gl, options).then(result => this._fileLoaded(result));\n    } else {\n      const modelUrl = GLTF_DEFAULT_MODEL;\n      loadGLTF(GLTF_BASE_URL + modelUrl, this.gl, this.loadOptions).then(result =>\n        this._fileLoaded(result)\n      );\n    }\n\n    const showSelector = document.getElementById('showSelector');\n    if (showSelector) {\n      showSelector.onchange = event => {\n        const value = showSelector.value.split(' ').map(x => parseFloat(x));\n        this.u_ScaleDiffBaseMR = value.slice(0, 4);\n        this.u_ScaleFGDSpec = value.slice(4);\n      };\n    }\n\n    const lightSelector = document.getElementById('lightSelector');\n    if (lightSelector) {\n      lightSelector.onchange = event => {\n        this.light = lightSelector.value;\n      };\n    }\n\n    const iblSelector = document.getElementById('iblSelector');\n    if (iblSelector) {\n      iblSelector.onchange = event => {\n        this._updateLightSettings(iblSelector.value);\n        this._rebuildModel();\n      };\n    }\n\n    this.initalizeEventHandling(canvas);\n  }\n\n  _updateLightSettings(value) {\n    switch (value) {\n      case 'exclusive':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: false\n        });\n        break;\n\n      case 'addition':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: this.environment,\n          lights: true\n        });\n        break;\n\n      case 'off':\n        Object.assign(this.loadOptions, {\n          imageBasedLightingEnvironment: null,\n          lights: true\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _rebuildModel() {\n    // Clean and regenerate model so we have new \"#defines\"\n    // TODO: Find better way to do this\n    (this.gltf.meshes || []).forEach(mesh => delete mesh._mesh);\n    (this.gltf.nodes || []).forEach(node => delete node._node);\n    (this.gltf.bufferViews || []).forEach(bufferView => delete bufferView.lumaBuffers);\n\n    this._deleteScenes();\n    Object.assign(this, createGLTFObjects(this.gl, this.gltf, this.loadOptions));\n  }\n\n  _deleteScenes() {\n    this.scenes.forEach(scene => scene.delete());\n    this.scenes = [];\n\n    lumaStats.get('Resource Counts').forEach(({name, count}) => {\n      log.info(3, `${name}: ${count}`)();\n    });\n  }\n\n  applyLight(model) {\n    // TODO: only do this when light changes\n    model.updateModuleSettings({\n      lightSources: LIGHT_SOURCES[this.light || 'default']\n    });\n  }\n\n  onRender({gl, time, aspect, viewMatrix, projectionMatrix}) {\n    clear(gl, {color: [0.2, 0.2, 0.2, 1.0], depth: true});\n\n    const [pitch, roll] = this.rotation;\n    const cameraPos = [\n      -this.translate * Math.sin(roll) * Math.cos(-pitch),\n      -this.translate * Math.sin(-pitch),\n      this.translate * Math.cos(roll) * Math.cos(-pitch)\n    ];\n\n    // TODO: find how to avoid using Array.from() to convert TypedArray to regular array\n    const uView = new Matrix4(viewMatrix ? Array.from(viewMatrix) : null)\n      .translate([0, 0, -this.translate])\n      .rotateX(pitch)\n      .rotateY(roll);\n\n    const uProjection = projectionMatrix\n      ? new Matrix4(Array.from(projectionMatrix))\n      : new Matrix4().perspective({fov: radians(40), aspect, near: 0.1, far: 9000});\n\n    if (!this.scenes.length) return false;\n\n    let success = true;\n\n    this.scenes[0].traverse((model, {worldMatrix}) => {\n      // In glTF, meshes and primitives do no have their own matrix.\n      const u_MVPMatrix = new Matrix4(uProjection).multiplyRight(uView).multiplyRight(worldMatrix);\n      this.applyLight(model);\n      success =\n        success &&\n        model.draw({\n          uniforms: {\n            u_Camera: cameraPos,\n            u_MVPMatrix,\n            u_ModelMatrix: worldMatrix,\n            u_NormalMatrix: new Matrix4(worldMatrix).invert().transpose(),\n\n            u_ScaleDiffBaseMR: this.u_ScaleDiffBaseMR,\n            u_ScaleFGDSpec: this.u_ScaleFGDSpec\n          },\n          parameters: model.props.parameters\n        });\n    });\n\n    return success;\n  }\n}\n\nif (typeof window !== 'undefined' && !window.website) {\n  const animationLoop = new AppAnimationLoop();\n  animationLoop.start();\n\n  const infoDiv = document.createElement('div');\n  infoDiv.innerHTML = AppAnimationLoop.getInfo();\n  document.body.appendChild(infoDiv);\n}\n","import React from 'react';\nimport AnimationLoopExamplePage from '../../src/components/animation-loop-example-page';\nimport AnimationLoop from '../../../examples/showcase/gltf/app';\n\nexport default class Example extends React.Component {\n  render() {\n    return (\n      <AnimationLoopExamplePage AnimationLoop={AnimationLoop} exampleConfig={this.props.pageContext.exampleConfig} />\n    );\n  }\n}\n","import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.object.to-string\";\nexport function atob(string) {\n  return Buffer.from(string).toString('base64');\n}\nexport function btoa(base64) {\n  return Buffer.from(base64, 'base64').toString('ascii');\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.typed.uint8-array\";\nexport function bufferToArrayBuffer(buffer) {\n  if (Buffer.isBuffer(buffer)) {\n    var typedArray = new Uint8Array(buffer);\n    return typedArray.buffer;\n  }\n\n  return buffer;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\n\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n;\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\n}\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\r\n * Quaternion\r\n * @module quat\r\n */\n\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var clone = vec4.clone;\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\n\nexport var fromValues = vec4.fromValues;\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var copy = vec4.copy;\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var set = vec4.set;\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var add = vec4.add;\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var scale = vec4.scale;\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\n\nexport var dot = vec4.dot;\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var lerp = vec4.lerp;\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport var length = vec4.length;\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\n\nexport var normalize = vec4.normalize;\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport var equals = vec4.equals;\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './base/math-array';\nimport { checkNumber, checkVector } from '../lib/validators';\nimport assert from '../lib/assert';\nimport * as quat from 'gl-matrix/quat';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY_QUATERNION = [0, 0, 0, 1];\n\nvar Quaternion = function (_MathArray) {\n  _inherits(Quaternion, _MathArray);\n\n  function Quaternion() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var w = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n    _classCallCheck(this, Quaternion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Quaternion).call(this, -0, -0, -0, -0));\n\n    if (Array.isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      _this.set(x, y, z, w);\n    }\n\n    return _this;\n  }\n\n  _createClass(Quaternion, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, z, w) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      this[3] = w;\n      return this.check();\n    }\n  }, {\n    key: \"fromMatrix3\",\n    value: function fromMatrix3(m) {\n      quat.fromMat3(this, m);\n      return this.check();\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      quat.identity(this);\n      return this.check();\n    }\n  }, {\n    key: \"fromAxisRotation\",\n    value: function fromAxisRotation(axis, rad) {\n      quat.setAxisAngle(this, axis, rad);\n      return this.check();\n    }\n  }, {\n    key: \"setAxisAngle\",\n    value: function setAxisAngle(axis, rad) {\n      return this.fromAxisRotation(axis, rad);\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return quat.length(this);\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared(a) {\n      return quat.squaredLength(this);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.dot only takes one argument');\n      }\n\n      return quat.dot(this, a);\n    }\n  }, {\n    key: \"rotationTo\",\n    value: function rotationTo(vectorA, vectorB) {\n      quat.rotationTo(this, vectorA, vectorB);\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add(a, b) {\n      if (b !== undefined) {\n        throw new Error('Quaternion.add only takes one argument');\n      }\n\n      quat.add(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"calculateW\",\n    value: function calculateW() {\n      quat.calculateW(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"conjugate\",\n    value: function conjugate() {\n      quat.conjugate(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      quat.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      quat.lerp(this, a, b, t);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a, b) {\n      assert(!b);\n      quat.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a, b) {\n      assert(!b);\n      quat.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.len();\n      var l = length > 0 ? 1 / length : 0;\n      this[0] = this[0] * l;\n      this[1] = this[1] * l;\n      this[2] = this[2] * l;\n      this[3] = this[3] * l;\n\n      if (length === 0) {\n        this[3] = 1;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(rad) {\n      quat.rotateX(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(rad) {\n      quat.rotateY(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(rad) {\n      quat.rotateZ(this, this, rad);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(b) {\n      quat.scale(this, this, b);\n      return this.check();\n    }\n  }, {\n    key: \"slerp\",\n    value: function slerp(start, target, ratio) {\n      switch (arguments.length) {\n        case 1:\n          var _arguments$ = arguments[0];\n          var _arguments$$start = _arguments$.start;\n          start = _arguments$$start === void 0 ? IDENTITY_QUATERNION : _arguments$$start;\n          target = _arguments$.target;\n          ratio = _arguments$.ratio;\n          break;\n\n        case 2:\n          var _arguments = Array.prototype.slice.call(arguments);\n\n          target = _arguments[0];\n          ratio = _arguments[1];\n          start = this;\n          break;\n\n        default:\n      }\n\n      quat.slerp(this, start, target, ratio);\n      return this.check();\n    }\n  }, {\n    key: \"transformVector4\",\n    value: function transformVector4(vector) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : vector;\n      vec4.transformQuat(result, vector, this);\n      return checkVector(result, 4);\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"setFromAxisAngle\",\n    value: function setFromAxisAngle(axis, rad) {\n      return this.setAxisAngle(axis, rad);\n    }\n  }, {\n    key: \"premultiply\",\n    value: function premultiply(a, b) {\n      return this.multiplyLeft(a, b);\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      return this.multiplyRight(a, b);\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 4;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(value) {\n      return this[3] = checkNumber(value);\n    }\n  }]);\n\n  return Quaternion;\n}(MathArray);\n\nexport { Quaternion as default };","import setPrototypeOf from \"./setPrototypeOf\";\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      return this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      return this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      return this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport fs from 'fs';\nimport http from 'http';\nimport https from 'https';\nimport util from 'util';\nimport { toArrayBuffer } from './utils/to-array-buffer.node';\nimport decodeDataUri from './utils/decode-data-uri.node';\nimport { concatenateReadStream } from './utils/stream-utils.node';\nvar DEFAULT_OPTIONS = {\n  dataType: 'arraybuffer'\n};\n\nvar isDataURL = function isDataURL(url) {\n  return url.startsWith('data:');\n};\n\nvar isRequestURL = function isRequestURL(url) {\n  return url.startsWith('http:') || url.startsWith('https:');\n};\n\nexport function readFile(_x) {\n  return _readFile.apply(this, arguments);\n}\n\nfunction _readFile() {\n  _readFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url) {\n    var options,\n        _decodeDataUri,\n        arrayBuffer,\n        queryIndex,\n        readFileAsync,\n        buffer,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            options = getReadFileOptions(options);\n\n            if (!isDataURL(url)) {\n              _context.next = 5;\n              break;\n            }\n\n            _decodeDataUri = decodeDataUri(url), arrayBuffer = _decodeDataUri.arrayBuffer;\n            return _context.abrupt(\"return\", Promise.resolve(arrayBuffer));\n\n          case 5:\n            if (!isRequestURL(url)) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              options = _objectSpread({}, new URL(url), {}, options);\n              var request = url.startsWith('https:') ? https.request : http.request;\n              request(url, function (response) {\n                return concatenateReadStream(response).then(resolve, reject);\n              });\n            }));\n\n          case 7:\n            queryIndex = url && url.lastIndexOf('?');\n            url = queryIndex >= 0 ? url.substr(0, queryIndex) : url;\n            readFileAsync = util.promisify(fs.readFile);\n            _context.next = 12;\n            return readFileAsync(url, options);\n\n          case 12:\n            buffer = _context.sent;\n            return _context.abrupt(\"return\", buffer instanceof Buffer ? toArrayBuffer(buffer) : buffer);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _readFile.apply(this, arguments);\n}\n\nexport function createReadStream(_x2, _x3) {\n  return _createReadStream.apply(this, arguments);\n}\n\nfunction _createReadStream() {\n  _createReadStream = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!isDataURL(url)) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", decodeDataUri(url));\n\n          case 2:\n            if (isRequestURL(url)) {\n              _context2.next = 4;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", fs.createReadStream(url, options));\n\n          case 4:\n            return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n              options = _objectSpread({}, new URL(url), {}, options);\n              var request = url.startsWith('https:') ? https.request : http.request;\n              request(url, function (response) {\n                return resolve(response);\n              });\n            }));\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _createReadStream.apply(this, arguments);\n}\n\nfunction getReadFileOptions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  options = Object.assign({}, DEFAULT_OPTIONS, options);\n  options.responseType = options.responseType || options.dataType;\n\n  if (fs) {\n    options.encoding = options.encoding || (options.dataType === 'text' ? 'utf8' : null);\n  }\n\n  return options;\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"@loaders.gl/polyfills assertion \".concat(message));\n  }\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nexport { isBrowser, global_ as global };","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","import { config } from 'math.gl';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon as _withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\nexport { default as _Polygon } from './addons/polygon';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.typed.float32-array\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate(this)) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport getPixels from 'get-pixels';\nimport util from 'util';\nexport function parseImageNode(_x, _x2, _x3) {\n  return _parseImageNode.apply(this, arguments);\n}\n\nfunction _parseImageNode() {\n  _parseImageNode = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, mimeType, options) {\n    var getPixelsAsync, buffer, ndarray, shape, layers;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            getPixelsAsync = util.promisify(getPixels);\n            buffer = arrayBuffer instanceof Buffer ? arrayBuffer : Buffer.from(arrayBuffer);\n            _context.next = 4;\n            return getPixelsAsync(buffer, mimeType);\n\n          case 4:\n            ndarray = _context.sent;\n            shape = _toConsumableArray(ndarray.shape);\n            layers = ndarray.shape.length === 4 ? ndarray.shape.shift() : 1;\n            return _context.abrupt(\"return\", {\n              shape: shape,\n              data: ndarray.data,\n              width: ndarray.shape[0],\n              height: ndarray.shape[1],\n              components: ndarray.shape[2],\n              layers: layers\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImageNode.apply(this, arguments);\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName) {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName | '', \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Matrix).apply(this, arguments));\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import \"core-js/modules/es6.typed.float32-array\";\nimport * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(c),\n      cosC = Math.cos(c); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1];\n  var len1 = x1 * x1 + y1 * y1;\n\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n\n  var len2 = x2 * x2 + y2 * y2;\n\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0));\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          fovy = _ref4.fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };","import \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.string.trim\";\nimport \"core-js/modules/es6.array.index-of\";\nimport { toArrayBuffer } from './to-array-buffer.node';\nexport default function decodeDataUri(uri) {\n  var dataIndex = uri.indexOf(',');\n  var buffer;\n  var mimeType;\n\n  if (uri.slice(dataIndex - 7, dataIndex) === ';base64') {\n    buffer = new Buffer(uri.slice(dataIndex + 1), 'base64');\n    mimeType = uri.slice(5, dataIndex - 7).trim();\n  } else {\n    buffer = new Buffer(decodeURIComponent(uri.slice(dataIndex + 1)));\n    mimeType = uri.slice(5, dataIndex).trim();\n  }\n\n  if (!mimeType) {\n    mimeType = 'text/plain;charset=US-ASCII';\n  } else if (mimeType.startsWith(';')) {\n    mimeType = \"text/plain\".concat(mimeType);\n  }\n\n  return {\n    arrayBuffer: toArrayBuffer(buffer),\n    mimeType: mimeType\n  };\n}","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","import \"core-js/modules/es6.regexp.match\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n","require(\"core-js/modules/es6.typed.uint8-array\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\n/* eslint-disable */\n// @ts-nocheck\n// Copied from https://github.com/inexorabletash/text-encoding/blob/b4e5bc26e26e51f56e3daa9f13138c79f49d3c34/lib/encoding.js\n//\n// This is free and unencumbered software released into the public domain.\n// See LICENSE.md for more information.\n// FORK: indices add half a megabyte to bundle. Ignore, since we only want the built-in UTF8...\n// global['encoding-indexes'] = require('./encoding-indexes.js')['encoding-indexes'];\nglobal['encoding-indexes'] = {}; //\n// Utilities\n//\n\n/**\n * @param {number} a The number to test.\n * @param {number} min The minimum value in the range, inclusive.\n * @param {number} max The maximum value in the range, inclusive.\n * @return {boolean} True if a >= min and a <= max.\n */\n\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n/**\n * @param {!Array.<*>} array The array to check.\n * @param {*} item The item to look for in the array.\n * @return {boolean} True if the item appears in the array.\n */\n\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}\n\nvar floor = Math.floor;\n/**\n * @param {*} o\n * @return {Object}\n */\n\nfunction ToDictionary(o) {\n  if (o === undefined) return {};\n  if (o === Object(o)) return o;\n  throw TypeError('Could not convert argument to dictionary');\n}\n/**\n * @param {string} string Input string of UTF-16 code units.\n * @return {!Array.<number>} Code points.\n */\n\n\nfunction stringToCodePoints(string) {\n  // https://heycam.github.io/webidl/#dfn-obtain-unicode\n  // 1. Let S be the DOMString value.\n  var s = String(string); // 2. Let n be the length of S.\n\n  var n = s.length; // 3. Initialize i to 0.\n\n  var i = 0; // 4. Initialize U to be an empty sequence of Unicode characters.\n\n  var u = []; // 5. While i < n:\n\n  while (i < n) {\n    // 1. Let c be the code unit in S at index i.\n    var c = s.charCodeAt(i); // 2. Depending on the value of c:\n    // c < 0xD800 or c > 0xDFFF\n\n    if (c < 0xd800 || c > 0xdfff) {\n      // Append to U the Unicode character with code point c.\n      u.push(c);\n    } // 0xDC00 ≤ c ≤ 0xDFFF\n    else if (0xdc00 <= c && c <= 0xdfff) {\n        // Append to U a U+FFFD REPLACEMENT CHARACTER.\n        u.push(0xfffd);\n      } // 0xD800 ≤ c ≤ 0xDBFF\n      else if (0xd800 <= c && c <= 0xdbff) {\n          // 1. If i = n−1, then append to U a U+FFFD REPLACEMENT\n          // CHARACTER.\n          if (i === n - 1) {\n            u.push(0xfffd);\n          } // 2. Otherwise, i < n−1:\n          else {\n              // 1. Let d be the code unit in S at index i+1.\n              var d = s.charCodeAt(i + 1); // 2. If 0xDC00 ≤ d ≤ 0xDFFF, then:\n\n              if (0xdc00 <= d && d <= 0xdfff) {\n                // 1. Let a be c & 0x3FF.\n                var a = c & 0x3ff; // 2. Let b be d & 0x3FF.\n\n                var b = d & 0x3ff; // 3. Append to U the Unicode character with code point\n                // 2^16+2^10*a+b.\n\n                u.push(0x10000 + (a << 10) + b); // 4. Set i to i+1.\n\n                i += 1;\n              } // 3. Otherwise, d < 0xDC00 or d > 0xDFFF. Append to U a\n              // U+FFFD REPLACEMENT CHARACTER.\n              else {\n                  u.push(0xfffd);\n                }\n            }\n        } // 3. Set i to i+1.\n\n\n    i += 1;\n  } // 6. Return U.\n\n\n  return u;\n}\n/**\n * @param {!Array.<number>} code_points Array of code points.\n * @return {string} string String of UTF-16 code units.\n */\n\n\nfunction codePointsToString(code_points) {\n  var s = '';\n\n  for (var i = 0; i < code_points.length; ++i) {\n    var cp = code_points[i];\n\n    if (cp <= 0xffff) {\n      s += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      s += String.fromCharCode((cp >> 10) + 0xd800, (cp & 0x3ff) + 0xdc00);\n    }\n  }\n\n  return s;\n} //\n// Implementation of Encoding specification\n// https://encoding.spec.whatwg.org/\n//\n//\n// 4. Terminology\n//\n\n/**\n * An ASCII byte is a byte in the range 0x00 to 0x7F, inclusive.\n * @param {number} a The number to test.\n * @return {boolean} True if a is in the range 0x00 to 0x7F, inclusive.\n */\n\n\nfunction isASCIIByte(a) {\n  return 0x00 <= a && a <= 0x7f;\n}\n/**\n * An ASCII code point is a code point in the range U+0000 to\n * U+007F, inclusive.\n */\n\n\nvar isASCIICodePoint = isASCIIByte;\n/**\n * End-of-stream is a special token that signifies no more tokens\n * are in the stream.\n * @const\n */\n\nvar end_of_stream = -1;\n/**\n * A stream represents an ordered sequence of tokens.\n *\n * @constructor\n * @param {!(Array.<number>|Uint8Array)} tokens Array of tokens that provide\n * the stream.\n */\n\nfunction Stream(tokens) {\n  /** @type {!Array.<number>} */\n  this.tokens = [].slice.call(tokens); // Reversed as push/pop is more efficient than shift/unshift.\n\n  this.tokens.reverse();\n}\n\nStream.prototype = {\n  /**\n   * @return {boolean} True if end-of-stream has been hit.\n   */\n  endOfStream: function endOfStream() {\n    return !this.tokens.length;\n  },\n\n  /**\n   * When a token is read from a stream, the first token in the\n   * stream must be returned and subsequently removed, and\n   * end-of-stream must be returned otherwise.\n   *\n   * @return {number} Get the next token from the stream, or\n   * end_of_stream.\n   */\n  read: function read() {\n    if (!this.tokens.length) return end_of_stream;\n    return this.tokens.pop();\n  },\n\n  /**\n   * When one or more tokens are prepended to a stream, those tokens\n   * must be inserted, in given order, before the first token in the\n   * stream.\n   *\n   * @param {(number|!Array.<number>)} token The token(s) to prepend to the\n   * stream.\n   */\n  prepend: function prepend(token) {\n    if (Array.isArray(token)) {\n      var tokens =\n      /**@type {!Array.<number>}*/\n      token;\n\n      while (tokens.length) {\n        this.tokens.push(tokens.pop());\n      }\n    } else {\n      this.tokens.push(token);\n    }\n  },\n\n  /**\n   * When one or more tokens are pushed to a stream, those tokens\n   * must be inserted, in given order, after the last token in the\n   * stream.\n   *\n   * @param {(number|!Array.<number>)} token The tokens(s) to push to the\n   * stream.\n   */\n  push: function push(token) {\n    if (Array.isArray(token)) {\n      var tokens =\n      /**@type {!Array.<number>}*/\n      token;\n\n      while (tokens.length) {\n        this.tokens.unshift(tokens.shift());\n      }\n    } else {\n      this.tokens.unshift(token);\n    }\n  }\n}; //\n// 5. Encodings\n//\n// 5.1 Encoders and decoders\n\n/** @const */\n\nvar finished = -1;\n/**\n * @param {boolean} fatal If true, decoding errors raise an exception.\n * @param {number=} opt_code_point Override the standard fallback code point.\n * @return {number} The code point to insert on a decoding error.\n */\n\nfunction decoderError(fatal, opt_code_point) {\n  if (fatal) throw TypeError('Decoder error');\n  return opt_code_point || 0xfffd;\n}\n/**\n * @param {number} code_point The code point that could not be encoded.\n * @return {number} Always throws, no value is actually returned.\n */\n\n\nfunction encoderError(code_point) {\n  throw TypeError('The code point ' + code_point + ' could not be encoded.');\n}\n/** @interface */\n\n\nfunction Decoder() {}\n\nDecoder.prototype = {\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point, or |finished|.\n   */\n  handler: function handler(stream, bite) {}\n};\n/** @interface */\n\nfunction Encoder() {}\n\nEncoder.prototype = {\n  /**\n   * @param {Stream} stream The stream of code points being encoded.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit, or |finished|.\n   */\n  handler: function handler(stream, code_point) {}\n}; // 5.2 Names and labels\n// TODO: Define @typedef for Encoding: {name:string,labels:Array.<string>}\n// https://github.com/google/closure-compiler/issues/247\n\n/**\n * @param {string} label The encoding label.\n * @return {?{name:string,labels:Array.<string>}}\n */\n\nfunction getEncoding(label) {\n  // 1. Remove any leading and trailing ASCII whitespace from label.\n  label = String(label).trim().toLowerCase(); // 2. If label is an ASCII case-insensitive match for any of the\n  // labels listed in the table below, return the corresponding\n  // encoding, and failure otherwise.\n\n  if (Object.prototype.hasOwnProperty.call(label_to_encoding, label)) {\n    return label_to_encoding[label];\n  }\n\n  return null;\n}\n/**\n * Encodings table: https://encoding.spec.whatwg.org/encodings.json\n * @const\n * @type {!Array.<{\n *          heading: string,\n *          encodings: Array.<{name:string,labels:Array.<string>}>\n *        }>}\n */\n\n\nvar encodings = [{\n  encodings: [{\n    labels: ['unicode-1-1-utf-8', 'utf-8', 'utf8'],\n    name: 'UTF-8'\n  }],\n  heading: 'The Encoding'\n}, {\n  encodings: [{\n    labels: ['866', 'cp866', 'csibm866', 'ibm866'],\n    name: 'IBM866'\n  }, {\n    labels: ['csisolatin2', 'iso-8859-2', 'iso-ir-101', 'iso8859-2', 'iso88592', 'iso_8859-2', 'iso_8859-2:1987', 'l2', 'latin2'],\n    name: 'ISO-8859-2'\n  }, {\n    labels: ['csisolatin3', 'iso-8859-3', 'iso-ir-109', 'iso8859-3', 'iso88593', 'iso_8859-3', 'iso_8859-3:1988', 'l3', 'latin3'],\n    name: 'ISO-8859-3'\n  }, {\n    labels: ['csisolatin4', 'iso-8859-4', 'iso-ir-110', 'iso8859-4', 'iso88594', 'iso_8859-4', 'iso_8859-4:1988', 'l4', 'latin4'],\n    name: 'ISO-8859-4'\n  }, {\n    labels: ['csisolatincyrillic', 'cyrillic', 'iso-8859-5', 'iso-ir-144', 'iso8859-5', 'iso88595', 'iso_8859-5', 'iso_8859-5:1988'],\n    name: 'ISO-8859-5'\n  }, {\n    labels: ['arabic', 'asmo-708', 'csiso88596e', 'csiso88596i', 'csisolatinarabic', 'ecma-114', 'iso-8859-6', 'iso-8859-6-e', 'iso-8859-6-i', 'iso-ir-127', 'iso8859-6', 'iso88596', 'iso_8859-6', 'iso_8859-6:1987'],\n    name: 'ISO-8859-6'\n  }, {\n    labels: ['csisolatingreek', 'ecma-118', 'elot_928', 'greek', 'greek8', 'iso-8859-7', 'iso-ir-126', 'iso8859-7', 'iso88597', 'iso_8859-7', 'iso_8859-7:1987', 'sun_eu_greek'],\n    name: 'ISO-8859-7'\n  }, {\n    labels: ['csiso88598e', 'csisolatinhebrew', 'hebrew', 'iso-8859-8', 'iso-8859-8-e', 'iso-ir-138', 'iso8859-8', 'iso88598', 'iso_8859-8', 'iso_8859-8:1988', 'visual'],\n    name: 'ISO-8859-8'\n  }, {\n    labels: ['csiso88598i', 'iso-8859-8-i', 'logical'],\n    name: 'ISO-8859-8-I'\n  }, {\n    labels: ['csisolatin6', 'iso-8859-10', 'iso-ir-157', 'iso8859-10', 'iso885910', 'l6', 'latin6'],\n    name: 'ISO-8859-10'\n  }, {\n    labels: ['iso-8859-13', 'iso8859-13', 'iso885913'],\n    name: 'ISO-8859-13'\n  }, {\n    labels: ['iso-8859-14', 'iso8859-14', 'iso885914'],\n    name: 'ISO-8859-14'\n  }, {\n    labels: ['csisolatin9', 'iso-8859-15', 'iso8859-15', 'iso885915', 'iso_8859-15', 'l9'],\n    name: 'ISO-8859-15'\n  }, {\n    labels: ['iso-8859-16'],\n    name: 'ISO-8859-16'\n  }, {\n    labels: ['cskoi8r', 'koi', 'koi8', 'koi8-r', 'koi8_r'],\n    name: 'KOI8-R'\n  }, {\n    labels: ['koi8-ru', 'koi8-u'],\n    name: 'KOI8-U'\n  }, {\n    labels: ['csmacintosh', 'mac', 'macintosh', 'x-mac-roman'],\n    name: 'macintosh'\n  }, {\n    labels: ['dos-874', 'iso-8859-11', 'iso8859-11', 'iso885911', 'tis-620', 'windows-874'],\n    name: 'windows-874'\n  }, {\n    labels: ['cp1250', 'windows-1250', 'x-cp1250'],\n    name: 'windows-1250'\n  }, {\n    labels: ['cp1251', 'windows-1251', 'x-cp1251'],\n    name: 'windows-1251'\n  }, {\n    labels: ['ansi_x3.4-1968', 'ascii', 'cp1252', 'cp819', 'csisolatin1', 'ibm819', 'iso-8859-1', 'iso-ir-100', 'iso8859-1', 'iso88591', 'iso_8859-1', 'iso_8859-1:1987', 'l1', 'latin1', 'us-ascii', 'windows-1252', 'x-cp1252'],\n    name: 'windows-1252'\n  }, {\n    labels: ['cp1253', 'windows-1253', 'x-cp1253'],\n    name: 'windows-1253'\n  }, {\n    labels: ['cp1254', 'csisolatin5', 'iso-8859-9', 'iso-ir-148', 'iso8859-9', 'iso88599', 'iso_8859-9', 'iso_8859-9:1989', 'l5', 'latin5', 'windows-1254', 'x-cp1254'],\n    name: 'windows-1254'\n  }, {\n    labels: ['cp1255', 'windows-1255', 'x-cp1255'],\n    name: 'windows-1255'\n  }, {\n    labels: ['cp1256', 'windows-1256', 'x-cp1256'],\n    name: 'windows-1256'\n  }, {\n    labels: ['cp1257', 'windows-1257', 'x-cp1257'],\n    name: 'windows-1257'\n  }, {\n    labels: ['cp1258', 'windows-1258', 'x-cp1258'],\n    name: 'windows-1258'\n  }, {\n    labels: ['x-mac-cyrillic', 'x-mac-ukrainian'],\n    name: 'x-mac-cyrillic'\n  }],\n  heading: 'Legacy single-byte encodings'\n}, {\n  encodings: [{\n    labels: ['chinese', 'csgb2312', 'csiso58gb231280', 'gb2312', 'gb_2312', 'gb_2312-80', 'gbk', 'iso-ir-58', 'x-gbk'],\n    name: 'GBK'\n  }, {\n    labels: ['gb18030'],\n    name: 'gb18030'\n  }],\n  heading: 'Legacy multi-byte Chinese (simplified) encodings'\n}, {\n  encodings: [{\n    labels: ['big5', 'big5-hkscs', 'cn-big5', 'csbig5', 'x-x-big5'],\n    name: 'Big5'\n  }],\n  heading: 'Legacy multi-byte Chinese (traditional) encodings'\n}, {\n  encodings: [{\n    labels: ['cseucpkdfmtjapanese', 'euc-jp', 'x-euc-jp'],\n    name: 'EUC-JP'\n  }, {\n    labels: ['csiso2022jp', 'iso-2022-jp'],\n    name: 'ISO-2022-JP'\n  }, {\n    labels: ['csshiftjis', 'ms932', 'ms_kanji', 'shift-jis', 'shift_jis', 'sjis', 'windows-31j', 'x-sjis'],\n    name: 'Shift_JIS'\n  }],\n  heading: 'Legacy multi-byte Japanese encodings'\n}, {\n  encodings: [{\n    labels: ['cseuckr', 'csksc56011987', 'euc-kr', 'iso-ir-149', 'korean', 'ks_c_5601-1987', 'ks_c_5601-1989', 'ksc5601', 'ksc_5601', 'windows-949'],\n    name: 'EUC-KR'\n  }],\n  heading: 'Legacy multi-byte Korean encodings'\n}, {\n  encodings: [{\n    labels: ['csiso2022kr', 'hz-gb-2312', 'iso-2022-cn', 'iso-2022-cn-ext', 'iso-2022-kr'],\n    name: 'replacement'\n  }, {\n    labels: ['utf-16be'],\n    name: 'UTF-16BE'\n  }, {\n    labels: ['utf-16', 'utf-16le'],\n    name: 'UTF-16LE'\n  }, {\n    labels: ['x-user-defined'],\n    name: 'x-user-defined'\n  }],\n  heading: 'Legacy miscellaneous encodings'\n}]; // Label to encoding registry.\n\n/** @type {Object.<string,{name:string,labels:Array.<string>}>} */\n\nvar label_to_encoding = {};\nencodings.forEach(function (category) {\n  category.encodings.forEach(function (encoding) {\n    encoding.labels.forEach(function (label) {\n      label_to_encoding[label] = encoding;\n    });\n  });\n}); // Registry of of encoder/decoder factories, by encoding name.\n\n/** @type {Object.<string, function({fatal:boolean}): Encoder>} */\n\nvar encoders = {};\n/** @type {Object.<string, function({fatal:boolean}): Decoder>} */\n\nvar decoders = {}; //\n// 6. Indexes\n//\n\n/**\n * @param {number} pointer The |pointer| to search for.\n * @param {(!Array.<?number>|undefined)} index The |index| to search within.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in |index|.\n */\n\nfunction indexCodePointFor(pointer, index) {\n  if (!index) return null;\n  return index[pointer] || null;\n}\n/**\n * @param {number} code_point The |code point| to search for.\n * @param {!Array.<?number>} index The |index| to search within.\n * @return {?number} The first pointer corresponding to |code point| in\n *     |index|, or null if |code point| is not in |index|.\n */\n\n\nfunction indexPointerFor(code_point, index) {\n  var pointer = index.indexOf(code_point);\n  return pointer === -1 ? null : pointer;\n}\n/**\n * @param {string} name Name of the index.\n * @return {(!Array.<number>|!Array.<Array.<number>>)}\n *  */\n\n\nfunction index(name) {\n  if (!('encoding-indexes' in global)) {\n    throw Error('Indexes missing.' + ' Did you forget to include encoding-indexes.js first?');\n  }\n\n  return global['encoding-indexes'][name];\n}\n/**\n * @param {number} pointer The |pointer| to search for in the gb18030 index.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in the gb18030 index.\n */\n\n\nfunction indexGB18030RangesCodePointFor(pointer) {\n  // 1. If pointer is greater than 39419 and less than 189000, or\n  // pointer is greater than 1237575, return null.\n  if (pointer > 39419 && pointer < 189000 || pointer > 1237575) return null; // 2. If pointer is 7457, return code point U+E7C7.\n\n  if (pointer === 7457) return 0xe7c7; // 3. Let offset be the last pointer in index gb18030 ranges that\n  // is equal to or less than pointer and let code point offset be\n  // its corresponding code point.\n\n  var offset = 0;\n  var code_point_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    /** @type {!Array.<number>} */\n    var entry = idx[i];\n\n    if (entry[0] <= pointer) {\n      offset = entry[0];\n      code_point_offset = entry[1];\n    } else {\n      break;\n    }\n  } // 4. Return a code point whose value is code point offset +\n  // pointer − offset.\n\n\n  return code_point_offset + pointer - offset;\n}\n/**\n * @param {number} code_point The |code point| to locate in the gb18030 index.\n * @return {number} The first pointer corresponding to |code point| in the\n *     gb18030 index.\n */\n\n\nfunction indexGB18030RangesPointerFor(code_point) {\n  // 1. If code point is U+E7C7, return pointer 7457.\n  if (code_point === 0xe7c7) return 7457; // 2. Let offset be the last code point in index gb18030 ranges\n  // that is equal to or less than code point and let pointer offset\n  // be its corresponding pointer.\n\n  var offset = 0;\n  var pointer_offset = 0;\n  var idx = index('gb18030-ranges');\n  var i;\n\n  for (i = 0; i < idx.length; ++i) {\n    /** @type {!Array.<number>} */\n    var entry = idx[i];\n\n    if (entry[1] <= code_point) {\n      offset = entry[1];\n      pointer_offset = entry[0];\n    } else {\n      break;\n    }\n  } // 3. Return a pointer whose value is pointer offset + code point\n  // − offset.\n\n\n  return pointer_offset + code_point - offset;\n}\n/**\n * @param {number} code_point The |code_point| to search for in the Shift_JIS\n *     index.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in the Shift_JIS index.\n */\n\n\nfunction indexShiftJISPointerFor(code_point) {\n  // 1. Let index be index jis0208 excluding all entries whose\n  // pointer is in the range 8272 to 8835, inclusive.\n  shift_jis_index = shift_jis_index || index('jis0208').map(function (code_point, pointer) {\n    return inRange(pointer, 8272, 8835) ? null : code_point;\n  });\n  var index_ = shift_jis_index; // 2. Return the index pointer for code point in index.\n\n  return index_.indexOf(code_point);\n}\n\nvar shift_jis_index;\n/**\n * @param {number} code_point The |code_point| to search for in the big5\n *     index.\n * @return {?number} The code point corresponding to |pointer| in |index|,\n *     or null if |code point| is not in the big5 index.\n */\n\nfunction indexBig5PointerFor(code_point) {\n  // 1. Let index be index Big5 excluding all entries whose pointer\n  big5_index_no_hkscs = big5_index_no_hkscs || index('big5').map(function (code_point, pointer) {\n    return pointer < (0xa1 - 0x81) * 157 ? null : code_point;\n  });\n  var index_ = big5_index_no_hkscs; // 2. If code point is U+2550, U+255E, U+2561, U+256A, U+5341, or\n  // U+5345, return the last pointer corresponding to code point in\n  // index.\n\n  if (code_point === 0x2550 || code_point === 0x255e || code_point === 0x2561 || code_point === 0x256a || code_point === 0x5341 || code_point === 0x5345) {\n    return index_.lastIndexOf(code_point);\n  } // 3. Return the index pointer for code point in index.\n\n\n  return indexPointerFor(code_point, index_);\n}\n\nvar big5_index_no_hkscs; //\n// 8. API\n//\n\n/** @const */\n\nvar DEFAULT_ENCODING = 'utf-8'; // 8.1 Interface TextDecoder\n\n/**\n * @constructor\n * @param {string=} label The label of the encoding;\n *     defaults to 'utf-8'.\n * @param {Object=} options\n */\n\nfunction TextDecoder(label, options) {\n  // Web IDL conventions\n  if (!(this instanceof TextDecoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n  options = ToDictionary(options); // A TextDecoder object has an associated encoding, decoder,\n  // stream, ignore BOM flag (initially unset), BOM seen flag\n  // (initially unset), error mode (initially replacement), and do\n  // not flush flag (initially unset).\n\n  /** @private */\n\n  this._encoding = null;\n  /** @private @type {?Decoder} */\n\n  this._decoder = null;\n  /** @private @type {boolean} */\n\n  this._ignoreBOM = false;\n  /** @private @type {boolean} */\n\n  this._BOMseen = false;\n  /** @private @type {string} */\n\n  this._error_mode = 'replacement';\n  /** @private @type {boolean} */\n\n  this._do_not_flush = false; // 1. Let encoding be the result of getting an encoding from\n  // label.\n\n  var encoding = getEncoding(label); // 2. If encoding is failure or replacement, throw a RangeError.\n\n  if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n  if (!decoders[encoding.name]) {\n    throw Error('Decoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n  } // 3. Let dec be a new TextDecoder object.\n\n\n  var dec = this; // 4. Set dec's encoding to encoding.\n\n  dec._encoding = encoding; // 5. If options's fatal member is true, set dec's error mode to\n  // fatal.\n\n  if (Boolean(options['fatal'])) dec._error_mode = 'fatal'; // 6. If options's ignoreBOM member is true, set dec's ignore BOM\n  // flag.\n\n  if (Boolean(options['ignoreBOM'])) dec._ignoreBOM = true; // For pre-ES5 runtimes:\n\n  if (!Object.defineProperty) {\n    this.encoding = dec._encoding.name.toLowerCase();\n    this.fatal = dec._error_mode === 'fatal';\n    this.ignoreBOM = dec._ignoreBOM;\n  } // 7. Return dec.\n\n\n  return dec;\n}\n\nif (Object.defineProperty) {\n  // The encoding attribute's getter must return encoding's name.\n  Object.defineProperty(TextDecoder.prototype, 'encoding', {\n    /** @this {TextDecoder} */\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  }); // The fatal attribute's getter must return true if error mode\n  // is fatal, and false otherwise.\n\n  Object.defineProperty(TextDecoder.prototype, 'fatal', {\n    /** @this {TextDecoder} */\n    get: function get() {\n      return this._error_mode === 'fatal';\n    }\n  }); // The ignoreBOM attribute's getter must return true if ignore\n  // BOM flag is set, and false otherwise.\n\n  Object.defineProperty(TextDecoder.prototype, 'ignoreBOM', {\n    /** @this {TextDecoder} */\n    get: function get() {\n      return this._ignoreBOM;\n    }\n  });\n}\n/**\n * @param {BufferSource=} input The buffer of bytes to decode.\n * @param {Object=} options\n * @return {string} The decoded string.\n */\n\n\nTextDecoder.prototype.decode = function decode(input, options) {\n  var bytes;\n\n  if (typeof input === 'object' && input instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input);\n  } else if (typeof input === 'object' && 'buffer' in input && input.buffer instanceof ArrayBuffer) {\n    bytes = new Uint8Array(input.buffer, input.byteOffset, input.byteLength);\n  } else {\n    bytes = new Uint8Array(0);\n  }\n\n  options = ToDictionary(options); // 1. If the do not flush flag is unset, set decoder to a new\n  // encoding's decoder, set stream to a new stream, and unset the\n  // BOM seen flag.\n\n  if (!this._do_not_flush) {\n    this._decoder = decoders[this._encoding.name]({\n      fatal: this._error_mode === 'fatal'\n    });\n    this._BOMseen = false;\n  } // 2. If options's stream is true, set the do not flush flag, and\n  // unset the do not flush flag otherwise.\n\n\n  this._do_not_flush = Boolean(options['stream']); // 3. If input is given, push a copy of input to stream.\n  // TODO: Align with spec algorithm - maintain stream on instance.\n\n  var input_stream = new Stream(bytes); // 4. Let output be a new stream.\n\n  var output = [];\n  /** @type {?(number|!Array.<number>)} */\n\n  var result; // 5. While true:\n\n  while (true) {\n    // 1. Let token be the result of reading from stream.\n    var token = input_stream.read(); // 2. If token is end-of-stream and the do not flush flag is\n    // set, return output, serialized.\n    // TODO: Align with spec algorithm.\n\n    if (token === end_of_stream) break; // 3. Otherwise, run these subsubsteps:\n    // 1. Let result be the result of processing token for decoder,\n    // stream, output, and error mode.\n\n    result = this._decoder.handler(input_stream, token); // 2. If result is finished, return output, serialized.\n\n    if (result === finished) break;\n\n    if (result !== null) {\n      if (Array.isArray(result)) output.push.apply(output,\n      /**@type {!Array.<number>}*/\n      result);else output.push(result);\n    } // 3. Otherwise, if result is error, throw a TypeError.\n    // (Thrown in handler)\n    // 4. Otherwise, do nothing.\n\n  } // TODO: Align with spec algorithm.\n\n\n  if (!this._do_not_flush) {\n    do {\n      result = this._decoder.handler(input_stream, input_stream.read());\n      if (result === finished) break;\n      if (result === null) continue;\n      if (Array.isArray(result)) output.push.apply(output,\n      /**@type {!Array.<number>}*/\n      result);else output.push(result);\n    } while (!input_stream.endOfStream());\n\n    this._decoder = null;\n  } // A TextDecoder object also has an associated serialize stream\n  // algorithm...\n\n  /**\n   * @param {!Array.<number>} stream\n   * @return {string}\n   * @this {TextDecoder}\n   */\n\n\n  function serializeStream(stream) {\n    // 1. Let token be the result of reading from stream.\n    // (Done in-place on array, rather than as a stream)\n    // 2. If encoding is UTF-8, UTF-16BE, or UTF-16LE, and ignore\n    // BOM flag and BOM seen flag are unset, run these subsubsteps:\n    if (includes(['UTF-8', 'UTF-16LE', 'UTF-16BE'], this._encoding.name) && !this._ignoreBOM && !this._BOMseen) {\n      if (stream.length > 0 && stream[0] === 0xfeff) {\n        // 1. If token is U+FEFF, set BOM seen flag.\n        this._BOMseen = true;\n        stream.shift();\n      } else if (stream.length > 0) {\n        // 2. Otherwise, if token is not end-of-stream, set BOM seen\n        // flag and append token to stream.\n        this._BOMseen = true;\n      } else {// 3. Otherwise, if token is not end-of-stream, append token\n        // to output.\n        // (no-op)\n      }\n    } // 4. Otherwise, return output.\n\n\n    return codePointsToString(stream);\n  }\n\n  return serializeStream.call(this, output);\n}; // 8.2 Interface TextEncoder\n\n/**\n * @constructor\n * @param {string=} label The label of the encoding. NONSTANDARD.\n * @param {Object=} options NONSTANDARD.\n */\n\n\nfunction TextEncoder(label, options) {\n  // Web IDL conventions\n  if (!(this instanceof TextEncoder)) throw TypeError(\"Called as a function. Did you forget 'new'?\");\n  options = ToDictionary(options); // A TextEncoder object has an associated encoding and encoder.\n\n  /** @private */\n\n  this._encoding = null;\n  /** @private @type {?Encoder} */\n\n  this._encoder = null; // Non-standard\n\n  /** @private @type {boolean} */\n\n  this._do_not_flush = false;\n  /** @private @type {string} */\n\n  this._fatal = Boolean(options['fatal']) ? 'fatal' : 'replacement'; // 1. Let enc be a new TextEncoder object.\n\n  var enc = this; // 2. Set enc's encoding to UTF-8's encoder.\n\n  if (Boolean(options['NONSTANDARD_allowLegacyEncoding'])) {\n    // NONSTANDARD behavior.\n    label = label !== undefined ? String(label) : DEFAULT_ENCODING;\n    var encoding = getEncoding(label);\n    if (encoding === null || encoding.name === 'replacement') throw RangeError('Unknown encoding: ' + label);\n\n    if (!encoders[encoding.name]) {\n      throw Error('Encoder not present.' + ' Did you forget to include encoding-indexes.js first?');\n    }\n\n    enc._encoding = encoding;\n  } else {\n    // Standard behavior.\n    enc._encoding = getEncoding('utf-8');\n\n    if (label !== undefined && 'console' in global) {\n      console.warn('TextEncoder constructor called with encoding label, ' + 'which is ignored.');\n    }\n  } // For pre-ES5 runtimes:\n\n\n  if (!Object.defineProperty) this.encoding = enc._encoding.name.toLowerCase(); // 3. Return enc.\n\n  return enc;\n}\n\nif (Object.defineProperty) {\n  // The encoding attribute's getter must return encoding's name.\n  Object.defineProperty(TextEncoder.prototype, 'encoding', {\n    /** @this {TextEncoder} */\n    get: function get() {\n      return this._encoding.name.toLowerCase();\n    }\n  });\n}\n/**\n * @param {string=} opt_string The string to encode.\n * @param {Object=} options\n * @return {!Uint8Array} Encoded bytes, as a Uint8Array.\n */\n\n\nTextEncoder.prototype.encode = function encode(opt_string, options) {\n  opt_string = opt_string === undefined ? '' : String(opt_string);\n  options = ToDictionary(options); // NOTE: This option is nonstandard. None of the encodings\n  // permitted for encoding (i.e. UTF-8, UTF-16) are stateful when\n  // the input is a USVString so streaming is not necessary.\n\n  if (!this._do_not_flush) this._encoder = encoders[this._encoding.name]({\n    fatal: this._fatal === 'fatal'\n  });\n  this._do_not_flush = Boolean(options['stream']); // 1. Convert input to a stream.\n\n  var input = new Stream(stringToCodePoints(opt_string)); // 2. Let output be a new stream\n\n  var output = [];\n  /** @type {?(number|!Array.<number>)} */\n\n  var result; // 3. While true, run these substeps:\n\n  while (true) {\n    // 1. Let token be the result of reading from input.\n    var token = input.read();\n    if (token === end_of_stream) break; // 2. Let result be the result of processing token for encoder,\n    // input, output.\n\n    result = this._encoder.handler(input, token);\n    if (result === finished) break;\n    if (Array.isArray(result)) output.push.apply(output,\n    /**@type {!Array.<number>}*/\n    result);else output.push(result);\n  } // TODO: Align with spec algorithm.\n\n\n  if (!this._do_not_flush) {\n    while (true) {\n      result = this._encoder.handler(input, input.read());\n      if (result === finished) break;\n      if (Array.isArray(result)) output.push.apply(output,\n      /**@type {!Array.<number>}*/\n      result);else output.push(result);\n    }\n\n    this._encoder = null;\n  } // 3. If result is finished, convert output into a byte sequence,\n  // and then return a Uint8Array object wrapping an ArrayBuffer\n  // containing output.\n\n\n  return new Uint8Array(output);\n}; //\n// 9. The encoding\n//\n// 9.1 utf-8\n// 9.1.1 utf-8 decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction UTF8Decoder(options) {\n  var fatal = options.fatal; // utf-8's decoder's has an associated utf-8 code point, utf-8\n  // bytes seen, and utf-8 bytes needed (all initially 0), a utf-8\n  // lower boundary (initially 0x80), and a utf-8 upper boundary\n  // (initially 0xBF).\n\n  var\n  /** @type {number} */\n  utf8_code_point = 0,\n\n  /** @type {number} */\n  utf8_bytes_seen = 0,\n\n  /** @type {number} */\n  utf8_bytes_needed = 0,\n\n  /** @type {number} */\n  utf8_lower_boundary = 0x80,\n\n  /** @type {number} */\n  utf8_upper_boundary = 0xbf;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and utf-8 bytes needed is not 0,\n    // set utf-8 bytes needed to 0 and return error.\n    if (bite === end_of_stream && utf8_bytes_needed !== 0) {\n      utf8_bytes_needed = 0;\n      return decoderError(fatal);\n    } // 2. If byte is end-of-stream, return finished.\n\n\n    if (bite === end_of_stream) return finished; // 3. If utf-8 bytes needed is 0, based on byte:\n\n    if (utf8_bytes_needed === 0) {\n      // 0x00 to 0x7F\n      if (inRange(bite, 0x00, 0x7f)) {\n        // Return a code point whose value is byte.\n        return bite;\n      } // 0xC2 to 0xDF\n      else if (inRange(bite, 0xc2, 0xdf)) {\n          // 1. Set utf-8 bytes needed to 1.\n          utf8_bytes_needed = 1; // 2. Set UTF-8 code point to byte & 0x1F.\n\n          utf8_code_point = bite & 0x1f;\n        } // 0xE0 to 0xEF\n        else if (inRange(bite, 0xe0, 0xef)) {\n            // 1. If byte is 0xE0, set utf-8 lower boundary to 0xA0.\n            if (bite === 0xe0) utf8_lower_boundary = 0xa0; // 2. If byte is 0xED, set utf-8 upper boundary to 0x9F.\n\n            if (bite === 0xed) utf8_upper_boundary = 0x9f; // 3. Set utf-8 bytes needed to 2.\n\n            utf8_bytes_needed = 2; // 4. Set UTF-8 code point to byte & 0xF.\n\n            utf8_code_point = bite & 0xf;\n          } // 0xF0 to 0xF4\n          else if (inRange(bite, 0xf0, 0xf4)) {\n              // 1. If byte is 0xF0, set utf-8 lower boundary to 0x90.\n              if (bite === 0xf0) utf8_lower_boundary = 0x90; // 2. If byte is 0xF4, set utf-8 upper boundary to 0x8F.\n\n              if (bite === 0xf4) utf8_upper_boundary = 0x8f; // 3. Set utf-8 bytes needed to 3.\n\n              utf8_bytes_needed = 3; // 4. Set UTF-8 code point to byte & 0x7.\n\n              utf8_code_point = bite & 0x7;\n            } // Otherwise\n            else {\n                // Return error.\n                return decoderError(fatal);\n              } // Return continue.\n\n\n      return null;\n    } // 4. If byte is not in the range utf-8 lower boundary to utf-8\n    // upper boundary, inclusive, run these substeps:\n\n\n    if (!inRange(bite, utf8_lower_boundary, utf8_upper_boundary)) {\n      // 1. Set utf-8 code point, utf-8 bytes needed, and utf-8\n      // bytes seen to 0, set utf-8 lower boundary to 0x80, and set\n      // utf-8 upper boundary to 0xBF.\n      utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0;\n      utf8_lower_boundary = 0x80;\n      utf8_upper_boundary = 0xbf; // 2. Prepend byte to stream.\n\n      stream.prepend(bite); // 3. Return error.\n\n      return decoderError(fatal);\n    } // 5. Set utf-8 lower boundary to 0x80 and utf-8 upper boundary\n    // to 0xBF.\n\n\n    utf8_lower_boundary = 0x80;\n    utf8_upper_boundary = 0xbf; // 6. Set UTF-8 code point to (UTF-8 code point << 6) | (byte &\n    // 0x3F)\n\n    utf8_code_point = utf8_code_point << 6 | bite & 0x3f; // 7. Increase utf-8 bytes seen by one.\n\n    utf8_bytes_seen += 1; // 8. If utf-8 bytes seen is not equal to utf-8 bytes needed,\n    // continue.\n\n    if (utf8_bytes_seen !== utf8_bytes_needed) return null; // 9. Let code point be utf-8 code point.\n\n    var code_point = utf8_code_point; // 10. Set utf-8 code point, utf-8 bytes needed, and utf-8 bytes\n    // seen to 0.\n\n    utf8_code_point = utf8_bytes_needed = utf8_bytes_seen = 0; // 11. Return a code point whose value is code point.\n\n    return code_point;\n  };\n} // 9.1.2 utf-8 encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction UTF8Encoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n\n    if (isASCIICodePoint(code_point)) return code_point; // 3. Set count and offset based on the range code point is in:\n\n    var count, offset; // U+0080 to U+07FF, inclusive:\n\n    if (inRange(code_point, 0x0080, 0x07ff)) {\n      // 1 and 0xC0\n      count = 1;\n      offset = 0xc0;\n    } // U+0800 to U+FFFF, inclusive:\n    else if (inRange(code_point, 0x0800, 0xffff)) {\n        // 2 and 0xE0\n        count = 2;\n        offset = 0xe0;\n      } // U+10000 to U+10FFFF, inclusive:\n      else if (inRange(code_point, 0x10000, 0x10ffff)) {\n          // 3 and 0xF0\n          count = 3;\n          offset = 0xf0;\n        } // 4. Let bytes be a byte sequence whose first byte is (code\n    // point >> (6 × count)) + offset.\n\n\n    var bytes = [(code_point >> 6 * count) + offset]; // 5. Run these substeps while count is greater than 0:\n\n    while (count > 0) {\n      // 1. Set temp to code point >> (6 × (count − 1)).\n      var temp = code_point >> 6 * (count - 1); // 2. Append to bytes 0x80 | (temp & 0x3F).\n\n      bytes.push(0x80 | temp & 0x3f); // 3. Decrease count by one.\n\n      count -= 1;\n    } // 6. Return bytes bytes, in order.\n\n\n    return bytes;\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['UTF-8'] = function (options) {\n  return new UTF8Encoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['UTF-8'] = function (options) {\n  return new UTF8Decoder(options);\n}; //\n// 10. Legacy single-byte encodings\n//\n// 10.1 single-byte decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {!Array.<number>} index The encoding index.\n * @param {{fatal: boolean}} options\n */\n\n\nfunction SingleByteDecoder(index, options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream, return finished.\n    if (bite === end_of_stream) return finished; // 2. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n\n    if (isASCIIByte(bite)) return bite; // 3. Let code point be the index code point for byte − 0x80 in\n    // index single-byte.\n\n    var code_point = index[bite - 0x80]; // 4. If code point is null, return error.\n\n    if (code_point === null) return decoderError(fatal); // 5. Return a code point whose value is code point.\n\n    return code_point;\n  };\n} // 10.2 single-byte encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {!Array.<?number>} index The encoding index.\n * @param {{fatal: boolean}} options\n */\n\n\nfunction SingleByteEncoder(index, options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n\n    if (isASCIICodePoint(code_point)) return code_point; // 3. Let pointer be the index pointer for code point in index\n    // single-byte.\n\n    var pointer = indexPointerFor(code_point, index); // 4. If pointer is null, return error with code point.\n\n    if (pointer === null) encoderError(code_point); // 5. Return a byte whose value is pointer + 0x80.\n\n    return pointer + 0x80;\n  };\n}\n\n(function () {\n  if (!('encoding-indexes' in global)) return;\n  encodings.forEach(function (category) {\n    if (category.heading !== 'Legacy single-byte encodings') return;\n    category.encodings.forEach(function (encoding) {\n      var name = encoding.name;\n      var idx = index(name.toLowerCase());\n      /** @param {{fatal: boolean}} options */\n\n      decoders[name] = function (options) {\n        return new SingleByteDecoder(idx, options);\n      };\n      /** @param {{fatal: boolean}} options */\n\n\n      encoders[name] = function (options) {\n        return new SingleByteEncoder(idx, options);\n      };\n    });\n  });\n})(); //\n// 11. Legacy multi-byte Chinese (simplified) encodings\n//\n// 11.1 gbk\n// 11.1.1 gbk decoder\n// gbk's decoder is gb18030's decoder.\n\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['GBK'] = function (options) {\n  return new GB18030Decoder(options);\n}; // 11.1.2 gbk encoder\n// gbk's encoder is gb18030's encoder with its gbk flag set.\n\n/** @param {{fatal: boolean}} options */\n\n\nencoders['GBK'] = function (options) {\n  return new GB18030Encoder(options, true);\n}; // 11.2 gb18030\n// 11.2.1 gb18030 decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction GB18030Decoder(options) {\n  var fatal = options.fatal; // gb18030's decoder has an associated gb18030 first, gb18030\n  // second, and gb18030 third (all initially 0x00).\n\n  var\n  /** @type {number} */\n  gb18030_first = 0x00,\n\n  /** @type {number} */\n  gb18030_second = 0x00,\n\n  /** @type {number} */\n  gb18030_third = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and gb18030 first, gb18030\n    // second, and gb18030 third are 0x00, return finished.\n    if (bite === end_of_stream && gb18030_first === 0x00 && gb18030_second === 0x00 && gb18030_third === 0x00) {\n      return finished;\n    } // 2. If byte is end-of-stream, and gb18030 first, gb18030\n    // second, or gb18030 third is not 0x00, set gb18030 first,\n    // gb18030 second, and gb18030 third to 0x00, and return error.\n\n\n    if (bite === end_of_stream && (gb18030_first !== 0x00 || gb18030_second !== 0x00 || gb18030_third !== 0x00)) {\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00;\n      decoderError(fatal);\n    }\n\n    var code_point; // 3. If gb18030 third is not 0x00, run these substeps:\n\n    if (gb18030_third !== 0x00) {\n      // 1. Let code point be null.\n      code_point = null; // 2. If byte is in the range 0x30 to 0x39, inclusive, set\n      // code point to the index gb18030 ranges code point for\n      // (((gb18030 first − 0x81) × 10 + gb18030 second − 0x30) ×\n      // 126 + gb18030 third − 0x81) × 10 + byte − 0x30.\n\n      if (inRange(bite, 0x30, 0x39)) {\n        code_point = indexGB18030RangesCodePointFor((((gb18030_first - 0x81) * 10 + gb18030_second - 0x30) * 126 + gb18030_third - 0x81) * 10 + bite - 0x30);\n      } // 3. Let buffer be a byte sequence consisting of gb18030\n      // second, gb18030 third, and byte, in order.\n\n\n      var buffer = [gb18030_second, gb18030_third, bite]; // 4. Set gb18030 first, gb18030 second, and gb18030 third to\n      // 0x00.\n\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      gb18030_third = 0x00; // 5. If code point is null, prepend buffer to stream and\n      // return error.\n\n      if (code_point === null) {\n        stream.prepend(buffer);\n        return decoderError(fatal);\n      } // 6. Return a code point whose value is code point.\n\n\n      return code_point;\n    } // 4. If gb18030 second is not 0x00, run these substeps:\n\n\n    if (gb18030_second !== 0x00) {\n      // 1. If byte is in the range 0x81 to 0xFE, inclusive, set\n      // gb18030 third to byte and return continue.\n      if (inRange(bite, 0x81, 0xfe)) {\n        gb18030_third = bite;\n        return null;\n      } // 2. Prepend gb18030 second followed by byte to stream, set\n      // gb18030 first and gb18030 second to 0x00, and return error.\n\n\n      stream.prepend([gb18030_second, bite]);\n      gb18030_first = 0x00;\n      gb18030_second = 0x00;\n      return decoderError(fatal);\n    } // 5. If gb18030 first is not 0x00, run these substeps:\n\n\n    if (gb18030_first !== 0x00) {\n      // 1. If byte is in the range 0x30 to 0x39, inclusive, set\n      // gb18030 second to byte and return continue.\n      if (inRange(bite, 0x30, 0x39)) {\n        gb18030_second = bite;\n        return null;\n      } // 2. Let lead be gb18030 first, let pointer be null, and set\n      // gb18030 first to 0x00.\n\n\n      var lead = gb18030_first;\n      var pointer = null;\n      gb18030_first = 0x00; // 3. Let offset be 0x40 if byte is less than 0x7F and 0x41\n      // otherwise.\n\n      var offset = bite < 0x7f ? 0x40 : 0x41; // 4. If byte is in the range 0x40 to 0x7E, inclusive, or 0x80\n      // to 0xFE, inclusive, set pointer to (lead − 0x81) × 190 +\n      // (byte − offset).\n\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - offset); // 5. Let code point be null if pointer is null and the index\n      // code point for pointer in index gb18030 otherwise.\n\n      code_point = pointer === null ? null : indexCodePointFor(pointer, index('gb18030')); // 6. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite); // 7. If code point is null, return error.\n\n      if (code_point === null) return decoderError(fatal); // 8. Return a code point whose value is code point.\n\n      return code_point;\n    } // 6. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n\n\n    if (isASCIIByte(bite)) return bite; // 7. If byte is 0x80, return code point U+20AC.\n\n    if (bite === 0x80) return 0x20ac; // 8. If byte is in the range 0x81 to 0xFE, inclusive, set\n    // gb18030 first to byte and return continue.\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      gb18030_first = bite;\n      return null;\n    } // 9. Return error.\n\n\n    return decoderError(fatal);\n  };\n} // 11.2.2 gb18030 encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n * @param {boolean=} gbk_flag\n */\n\n\nfunction GB18030Encoder(options, gbk_flag) {\n  var fatal = options.fatal; // gb18030's decoder has an associated gbk flag (initially unset).\n\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n\n    if (isASCIICodePoint(code_point)) return code_point; // 3. If code point is U+E5E5, return error with code point.\n\n    if (code_point === 0xe5e5) return encoderError(code_point); // 4. If the gbk flag is set and code point is U+20AC, return\n    // byte 0x80.\n\n    if (gbk_flag && code_point === 0x20ac) return 0x80; // 5. Let pointer be the index pointer for code point in index\n    // gb18030.\n\n    var pointer = indexPointerFor(code_point, index('gb18030')); // 6. If pointer is not null, run these substeps:\n\n    if (pointer !== null) {\n      // 1. Let lead be floor(pointer / 190) + 0x81.\n      var lead = floor(pointer / 190) + 0x81; // 2. Let trail be pointer % 190.\n\n      var trail = pointer % 190; // 3. Let offset be 0x40 if trail is less than 0x3F and 0x41 otherwise.\n\n      var offset = trail < 0x3f ? 0x40 : 0x41; // 4. Return two bytes whose values are lead and trail + offset.\n\n      return [lead, trail + offset];\n    } // 7. If gbk flag is set, return error with code point.\n\n\n    if (gbk_flag) return encoderError(code_point); // 8. Set pointer to the index gb18030 ranges pointer for code\n    // point.\n\n    pointer = indexGB18030RangesPointerFor(code_point); // 9. Let byte1 be floor(pointer / 10 / 126 / 10).\n\n    var byte1 = floor(pointer / 10 / 126 / 10); // 10. Set pointer to pointer − byte1 × 10 × 126 × 10.\n\n    pointer = pointer - byte1 * 10 * 126 * 10; // 11. Let byte2 be floor(pointer / 10 / 126).\n\n    var byte2 = floor(pointer / 10 / 126); // 12. Set pointer to pointer − byte2 × 10 × 126.\n\n    pointer = pointer - byte2 * 10 * 126; // 13. Let byte3 be floor(pointer / 10).\n\n    var byte3 = floor(pointer / 10); // 14. Let byte4 be pointer − byte3 × 10.\n\n    var byte4 = pointer - byte3 * 10; // 15. Return four bytes whose values are byte1 + 0x81, byte2 +\n    // 0x30, byte3 + 0x81, byte4 + 0x30.\n\n    return [byte1 + 0x81, byte2 + 0x30, byte3 + 0x81, byte4 + 0x30];\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['gb18030'] = function (options) {\n  return new GB18030Encoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['gb18030'] = function (options) {\n  return new GB18030Decoder(options);\n}; //\n// 12. Legacy multi-byte Chinese (traditional) encodings\n//\n// 12.1 Big5\n// 12.1.1 Big5 decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction Big5Decoder(options) {\n  var fatal = options.fatal; // Big5's decoder has an associated Big5 lead (initially 0x00).\n\n  var\n  /** @type {number} */\n  Big5_lead = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and Big5 lead is not 0x00, set\n    // Big5 lead to 0x00 and return error.\n    if (bite === end_of_stream && Big5_lead !== 0x00) {\n      Big5_lead = 0x00;\n      return decoderError(fatal);\n    } // 2. If byte is end-of-stream and Big5 lead is 0x00, return\n    // finished.\n\n\n    if (bite === end_of_stream && Big5_lead === 0x00) return finished; // 3. If Big5 lead is not 0x00, let lead be Big5 lead, let\n    // pointer be null, set Big5 lead to 0x00, and then run these\n    // substeps:\n\n    if (Big5_lead !== 0x00) {\n      var lead = Big5_lead;\n      var pointer = null;\n      Big5_lead = 0x00; // 1. Let offset be 0x40 if byte is less than 0x7F and 0x62\n      // otherwise.\n\n      var offset = bite < 0x7f ? 0x40 : 0x62; // 2. If byte is in the range 0x40 to 0x7E, inclusive, or 0xA1\n      // to 0xFE, inclusive, set pointer to (lead − 0x81) × 157 +\n      // (byte − offset).\n\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0xa1, 0xfe)) pointer = (lead - 0x81) * 157 + (bite - offset); // 3. If there is a row in the table below whose first column\n      // is pointer, return the two code points listed in its second\n      // column\n      // Pointer | Code points\n      // --------+--------------\n      // 1133    | U+00CA U+0304\n      // 1135    | U+00CA U+030C\n      // 1164    | U+00EA U+0304\n      // 1166    | U+00EA U+030C\n\n      switch (pointer) {\n        case 1133:\n          return [0x00ca, 0x0304];\n\n        case 1135:\n          return [0x00ca, 0x030c];\n\n        case 1164:\n          return [0x00ea, 0x0304];\n\n        case 1166:\n          return [0x00ea, 0x030c];\n      } // 4. Let code point be null if pointer is null and the index\n      // code point for pointer in index Big5 otherwise.\n\n\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('big5')); // 5. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite); // 6. If code point is null, return error.\n\n      if (code_point === null) return decoderError(fatal); // 7. Return a code point whose value is code point.\n\n      return code_point;\n    } // 4. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n\n\n    if (isASCIIByte(bite)) return bite; // 5. If byte is in the range 0x81 to 0xFE, inclusive, set Big5\n    // lead to byte and return continue.\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      Big5_lead = bite;\n      return null;\n    } // 6. Return error.\n\n\n    return decoderError(fatal);\n  };\n} // 12.1.2 Big5 encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction Big5Encoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n\n    if (isASCIICodePoint(code_point)) return code_point; // 3. Let pointer be the index Big5 pointer for code point.\n\n    var pointer = indexBig5PointerFor(code_point); // 4. If pointer is null, return error with code point.\n\n    if (pointer === null) return encoderError(code_point); // 5. Let lead be floor(pointer / 157) + 0x81.\n\n    var lead = floor(pointer / 157) + 0x81; // 6. If lead is less than 0xA1, return error with code point.\n\n    if (lead < 0xa1) return encoderError(code_point); // 7. Let trail be pointer % 157.\n\n    var trail = pointer % 157; // 8. Let offset be 0x40 if trail is less than 0x3F and 0x62\n    // otherwise.\n\n    var offset = trail < 0x3f ? 0x40 : 0x62; // Return two bytes whose values are lead and trail + offset.\n\n    return [lead, trail + offset];\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['Big5'] = function (options) {\n  return new Big5Encoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['Big5'] = function (options) {\n  return new Big5Decoder(options);\n}; //\n// 13. Legacy multi-byte Japanese encodings\n//\n// 13.1 euc-jp\n// 13.1.1 euc-jp decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction EUCJPDecoder(options) {\n  var fatal = options.fatal; // euc-jp's decoder has an associated euc-jp jis0212 flag\n  // (initially unset) and euc-jp lead (initially 0x00).\n\n  var\n  /** @type {boolean} */\n  eucjp_jis0212_flag = false,\n\n  /** @type {number} */\n  eucjp_lead = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and euc-jp lead is not 0x00, set\n    // euc-jp lead to 0x00, and return error.\n    if (bite === end_of_stream && eucjp_lead !== 0x00) {\n      eucjp_lead = 0x00;\n      return decoderError(fatal);\n    } // 2. If byte is end-of-stream and euc-jp lead is 0x00, return\n    // finished.\n\n\n    if (bite === end_of_stream && eucjp_lead === 0x00) return finished; // 3. If euc-jp lead is 0x8E and byte is in the range 0xA1 to\n    // 0xDF, inclusive, set euc-jp lead to 0x00 and return a code\n    // point whose value is 0xFF61 − 0xA1 + byte.\n\n    if (eucjp_lead === 0x8e && inRange(bite, 0xa1, 0xdf)) {\n      eucjp_lead = 0x00;\n      return 0xff61 - 0xa1 + bite;\n    } // 4. If euc-jp lead is 0x8F and byte is in the range 0xA1 to\n    // 0xFE, inclusive, set the euc-jp jis0212 flag, set euc-jp lead\n    // to byte, and return continue.\n\n\n    if (eucjp_lead === 0x8f && inRange(bite, 0xa1, 0xfe)) {\n      eucjp_jis0212_flag = true;\n      eucjp_lead = bite;\n      return null;\n    } // 5. If euc-jp lead is not 0x00, let lead be euc-jp lead, set\n    // euc-jp lead to 0x00, and run these substeps:\n\n\n    if (eucjp_lead !== 0x00) {\n      var lead = eucjp_lead;\n      eucjp_lead = 0x00; // 1. Let code point be null.\n\n      var code_point = null; // 2. If lead and byte are both in the range 0xA1 to 0xFE,\n      // inclusive, set code point to the index code point for (lead\n      // − 0xA1) × 94 + byte − 0xA1 in index jis0208 if the euc-jp\n      // jis0212 flag is unset and in index jis0212 otherwise.\n\n      if (inRange(lead, 0xa1, 0xfe) && inRange(bite, 0xa1, 0xfe)) {\n        code_point = indexCodePointFor((lead - 0xa1) * 94 + (bite - 0xa1), index(!eucjp_jis0212_flag ? 'jis0208' : 'jis0212'));\n      } // 3. Unset the euc-jp jis0212 flag.\n\n\n      eucjp_jis0212_flag = false; // 4. If byte is not in the range 0xA1 to 0xFE, inclusive,\n      // prepend byte to stream.\n\n      if (!inRange(bite, 0xa1, 0xfe)) stream.prepend(bite); // 5. If code point is null, return error.\n\n      if (code_point === null) return decoderError(fatal); // 6. Return a code point whose value is code point.\n\n      return code_point;\n    } // 6. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n\n\n    if (isASCIIByte(bite)) return bite; // 7. If byte is 0x8E, 0x8F, or in the range 0xA1 to 0xFE,\n    // inclusive, set euc-jp lead to byte and return continue.\n\n    if (bite === 0x8e || bite === 0x8f || inRange(bite, 0xa1, 0xfe)) {\n      eucjp_lead = bite;\n      return null;\n    } // 8. Return error.\n\n\n    return decoderError(fatal);\n  };\n} // 13.1.2 euc-jp encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction EUCJPEncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n\n    if (isASCIICodePoint(code_point)) return code_point; // 3. If code point is U+00A5, return byte 0x5C.\n\n    if (code_point === 0x00a5) return 0x5c; // 4. If code point is U+203E, return byte 0x7E.\n\n    if (code_point === 0x203e) return 0x7e; // 5. If code point is in the range U+FF61 to U+FF9F, inclusive,\n    // return two bytes whose values are 0x8E and code point −\n    // 0xFF61 + 0xA1.\n\n    if (inRange(code_point, 0xff61, 0xff9f)) return [0x8e, code_point - 0xff61 + 0xa1]; // 6. If code point is U+2212, set it to U+FF0D.\n\n    if (code_point === 0x2212) code_point = 0xff0d; // 7. Let pointer be the index pointer for code point in index\n    // jis0208.\n\n    var pointer = indexPointerFor(code_point, index('jis0208')); // 8. If pointer is null, return error with code point.\n\n    if (pointer === null) return encoderError(code_point); // 9. Let lead be floor(pointer / 94) + 0xA1.\n\n    var lead = floor(pointer / 94) + 0xa1; // 10. Let trail be pointer % 94 + 0xA1.\n\n    var trail = pointer % 94 + 0xa1; // 11. Return two bytes whose values are lead and trail.\n\n    return [lead, trail];\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['EUC-JP'] = function (options) {\n  return new EUCJPEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['EUC-JP'] = function (options) {\n  return new EUCJPDecoder(options);\n}; // 13.2 iso-2022-jp\n// 13.2.1 iso-2022-jp decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction ISO2022JPDecoder(options) {\n  var fatal = options.fatal;\n  /** @enum */\n\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    Katakana: 2,\n    LeadByte: 3,\n    TrailByte: 4,\n    EscapeStart: 5,\n    Escape: 6\n  }; // iso-2022-jp's decoder has an associated iso-2022-jp decoder\n  // state (initially ASCII), iso-2022-jp decoder output state\n  // (initially ASCII), iso-2022-jp lead (initially 0x00), and\n  // iso-2022-jp output flag (initially unset).\n\n  var\n  /** @type {number} */\n  iso2022jp_decoder_state = states.ASCII,\n\n  /** @type {number} */\n  iso2022jp_decoder_output_state = states.ASCII,\n\n  /** @type {number} */\n  iso2022jp_lead = 0x00,\n\n  /** @type {boolean} */\n  iso2022jp_output_flag = false;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // switching on iso-2022-jp decoder state:\n    switch (iso2022jp_decoder_state) {\n      default:\n      case states.ASCII:\n        // ASCII\n        // Based on byte:\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        } // 0x00 to 0x7F, excluding 0x0E, 0x0F, and 0x1B\n\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b) {\n          // Unset the iso-2022-jp output flag and return a code point\n          // whose value is byte.\n          iso2022jp_output_flag = false;\n          return bite;\n        } // end-of-stream\n\n\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        } // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Roman:\n        // Roman\n        // Based on byte:\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        } // 0x5C\n\n\n        if (bite === 0x5c) {\n          // Unset the iso-2022-jp output flag and return code point\n          // U+00A5.\n          iso2022jp_output_flag = false;\n          return 0x00a5;\n        } // 0x7E\n\n\n        if (bite === 0x7e) {\n          // Unset the iso-2022-jp output flag and return code point\n          // U+203E.\n          iso2022jp_output_flag = false;\n          return 0x203e;\n        } // 0x00 to 0x7F, excluding 0x0E, 0x0F, 0x1B, 0x5C, and 0x7E\n\n\n        if (inRange(bite, 0x00, 0x7f) && bite !== 0x0e && bite !== 0x0f && bite !== 0x1b && bite !== 0x5c && bite !== 0x7e) {\n          // Unset the iso-2022-jp output flag and return a code point\n          // whose value is byte.\n          iso2022jp_output_flag = false;\n          return bite;\n        } // end-of-stream\n\n\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        } // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.Katakana:\n        // Katakana\n        // Based on byte:\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        } // 0x21 to 0x5F\n\n\n        if (inRange(bite, 0x21, 0x5f)) {\n          // Unset the iso-2022-jp output flag and return a code point\n          // whose value is 0xFF61 − 0x21 + byte.\n          iso2022jp_output_flag = false;\n          return 0xff61 - 0x21 + bite;\n        } // end-of-stream\n\n\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        } // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.LeadByte:\n        // Lead byte\n        // Based on byte:\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return null;\n        } // 0x21 to 0x7E\n\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          // Unset the iso-2022-jp output flag, set iso-2022-jp lead\n          // to byte, iso-2022-jp decoder state to trail byte, and\n          // return continue.\n          iso2022jp_output_flag = false;\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.TrailByte;\n          return null;\n        } // end-of-stream\n\n\n        if (bite === end_of_stream) {\n          // Return finished.\n          return finished;\n        } // Otherwise\n        // Unset the iso-2022-jp output flag and return error.\n\n\n        iso2022jp_output_flag = false;\n        return decoderError(fatal);\n\n      case states.TrailByte:\n        // Trail byte\n        // Based on byte:\n        // 0x1B\n        if (bite === 0x1b) {\n          // Set iso-2022-jp decoder state to escape start and return\n          // continue.\n          iso2022jp_decoder_state = states.EscapeStart;\n          return decoderError(fatal);\n        } // 0x21 to 0x7E\n\n\n        if (inRange(bite, 0x21, 0x7e)) {\n          // 1. Set the iso-2022-jp decoder state to lead byte.\n          iso2022jp_decoder_state = states.LeadByte; // 2. Let pointer be (iso-2022-jp lead − 0x21) × 94 + byte − 0x21.\n\n          var pointer = (iso2022jp_lead - 0x21) * 94 + bite - 0x21; // 3. Let code point be the index code point for pointer in\n          // index jis0208.\n\n          var code_point = indexCodePointFor(pointer, index('jis0208')); // 4. If code point is null, return error.\n\n          if (code_point === null) return decoderError(fatal); // 5. Return a code point whose value is code point.\n\n          return code_point;\n        } // end-of-stream\n\n\n        if (bite === end_of_stream) {\n          // Set the iso-2022-jp decoder state to lead byte, prepend\n          // byte to stream, and return error.\n          iso2022jp_decoder_state = states.LeadByte;\n          stream.prepend(bite);\n          return decoderError(fatal);\n        } // Otherwise\n        // Set iso-2022-jp decoder state to lead byte and return\n        // error.\n\n\n        iso2022jp_decoder_state = states.LeadByte;\n        return decoderError(fatal);\n\n      case states.EscapeStart:\n        // Escape start\n        // 1. If byte is either 0x24 or 0x28, set iso-2022-jp lead to\n        // byte, iso-2022-jp decoder state to escape, and return\n        // continue.\n        if (bite === 0x24 || bite === 0x28) {\n          iso2022jp_lead = bite;\n          iso2022jp_decoder_state = states.Escape;\n          return null;\n        } // 2. Prepend byte to stream.\n\n\n        stream.prepend(bite); // 3. Unset the iso-2022-jp output flag, set iso-2022-jp\n        // decoder state to iso-2022-jp decoder output state, and\n        // return error.\n\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n\n      case states.Escape:\n        // Escape\n        // 1. Let lead be iso-2022-jp lead and set iso-2022-jp lead to\n        // 0x00.\n        var lead = iso2022jp_lead;\n        iso2022jp_lead = 0x00; // 2. Let state be null.\n\n        var state = null; // 3. If lead is 0x28 and byte is 0x42, set state to ASCII.\n\n        if (lead === 0x28 && bite === 0x42) state = states.ASCII; // 4. If lead is 0x28 and byte is 0x4A, set state to Roman.\n\n        if (lead === 0x28 && bite === 0x4a) state = states.Roman; // 5. If lead is 0x28 and byte is 0x49, set state to Katakana.\n\n        if (lead === 0x28 && bite === 0x49) state = states.Katakana; // 6. If lead is 0x24 and byte is either 0x40 or 0x42, set\n        // state to lead byte.\n\n        if (lead === 0x24 && (bite === 0x40 || bite === 0x42)) state = states.LeadByte; // 7. If state is non-null, run these substeps:\n\n        if (state !== null) {\n          // 1. Set iso-2022-jp decoder state and iso-2022-jp decoder\n          // output state to states.\n          iso2022jp_decoder_state = iso2022jp_decoder_state = state; // 2. Let output flag be the iso-2022-jp output flag.\n\n          var output_flag = iso2022jp_output_flag; // 3. Set the iso-2022-jp output flag.\n\n          iso2022jp_output_flag = true; // 4. Return continue, if output flag is unset, and error\n          // otherwise.\n\n          return !output_flag ? null : decoderError(fatal);\n        } // 8. Prepend lead and byte to stream.\n\n\n        stream.prepend([lead, bite]); // 9. Unset the iso-2022-jp output flag, set iso-2022-jp\n        // decoder state to iso-2022-jp decoder output state and\n        // return error.\n\n        iso2022jp_output_flag = false;\n        iso2022jp_decoder_state = iso2022jp_decoder_output_state;\n        return decoderError(fatal);\n    }\n  };\n} // 13.2.2 iso-2022-jp encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction ISO2022JPEncoder(options) {\n  var fatal = options.fatal; // iso-2022-jp's encoder has an associated iso-2022-jp encoder\n  // state which is one of ASCII, Roman, and jis0208 (initially\n  // ASCII).\n\n  /** @enum */\n\n  var states = {\n    ASCII: 0,\n    Roman: 1,\n    jis0208: 2\n  };\n  var\n  /** @type {number} */\n  iso2022jp_state = states.ASCII;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream and iso-2022-jp encoder\n    // state is not ASCII, prepend code point to stream, set\n    // iso-2022-jp encoder state to ASCII, and return three bytes\n    // 0x1B 0x28 0x42.\n    if (code_point === end_of_stream && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    } // 2. If code point is end-of-stream and iso-2022-jp encoder\n    // state is ASCII, return finished.\n\n\n    if (code_point === end_of_stream && iso2022jp_state === states.ASCII) return finished; // 3. If ISO-2022-JP encoder state is ASCII or Roman, and code\n    // point is U+000E, U+000F, or U+001B, return error with U+FFFD.\n\n    if ((iso2022jp_state === states.ASCII || iso2022jp_state === states.Roman) && (code_point === 0x000e || code_point === 0x000f || code_point === 0x001b)) {\n      return encoderError(0xfffd);\n    } // 4. If iso-2022-jp encoder state is ASCII and code point is an\n    // ASCII code point, return a byte whose value is code point.\n\n\n    if (iso2022jp_state === states.ASCII && isASCIICodePoint(code_point)) return code_point; // 5. If iso-2022-jp encoder state is Roman and code point is an\n    // ASCII code point, excluding U+005C and U+007E, or is U+00A5\n    // or U+203E, run these substeps:\n\n    if (iso2022jp_state === states.Roman && (isASCIICodePoint(code_point) && code_point !== 0x005c && code_point !== 0x007e || code_point == 0x00a5 || code_point == 0x203e)) {\n      // 1. If code point is an ASCII code point, return a byte\n      // whose value is code point.\n      if (isASCIICodePoint(code_point)) return code_point; // 2. If code point is U+00A5, return byte 0x5C.\n\n      if (code_point === 0x00a5) return 0x5c; // 3. If code point is U+203E, return byte 0x7E.\n\n      if (code_point === 0x203e) return 0x7e;\n    } // 6. If code point is an ASCII code point, and iso-2022-jp\n    // encoder state is not ASCII, prepend code point to stream, set\n    // iso-2022-jp encoder state to ASCII, and return three bytes\n    // 0x1B 0x28 0x42.\n\n\n    if (isASCIICodePoint(code_point) && iso2022jp_state !== states.ASCII) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.ASCII;\n      return [0x1b, 0x28, 0x42];\n    } // 7. If code point is either U+00A5 or U+203E, and iso-2022-jp\n    // encoder state is not Roman, prepend code point to stream, set\n    // iso-2022-jp encoder state to Roman, and return three bytes\n    // 0x1B 0x28 0x4A.\n\n\n    if ((code_point === 0x00a5 || code_point === 0x203e) && iso2022jp_state !== states.Roman) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.Roman;\n      return [0x1b, 0x28, 0x4a];\n    } // 8. If code point is U+2212, set it to U+FF0D.\n\n\n    if (code_point === 0x2212) code_point = 0xff0d; // 9. Let pointer be the index pointer for code point in index\n    // jis0208.\n\n    var pointer = indexPointerFor(code_point, index('jis0208')); // 10. If pointer is null, return error with code point.\n\n    if (pointer === null) return encoderError(code_point); // 11. If iso-2022-jp encoder state is not jis0208, prepend code\n    // point to stream, set iso-2022-jp encoder state to jis0208,\n    // and return three bytes 0x1B 0x24 0x42.\n\n    if (iso2022jp_state !== states.jis0208) {\n      stream.prepend(code_point);\n      iso2022jp_state = states.jis0208;\n      return [0x1b, 0x24, 0x42];\n    } // 12. Let lead be floor(pointer / 94) + 0x21.\n\n\n    var lead = floor(pointer / 94) + 0x21; // 13. Let trail be pointer % 94 + 0x21.\n\n    var trail = pointer % 94 + 0x21; // 14. Return two bytes whose values are lead and trail.\n\n    return [lead, trail];\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['ISO-2022-JP'] = function (options) {\n  return new ISO2022JPDecoder(options);\n}; // 13.3 Shift_JIS\n// 13.3.1 Shift_JIS decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction ShiftJISDecoder(options) {\n  var fatal = options.fatal; // Shift_JIS's decoder has an associated Shift_JIS lead (initially\n  // 0x00).\n\n  var\n  /** @type {number} */\n  Shift_JIS_lead = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and Shift_JIS lead is not 0x00,\n    // set Shift_JIS lead to 0x00 and return error.\n    if (bite === end_of_stream && Shift_JIS_lead !== 0x00) {\n      Shift_JIS_lead = 0x00;\n      return decoderError(fatal);\n    } // 2. If byte is end-of-stream and Shift_JIS lead is 0x00,\n    // return finished.\n\n\n    if (bite === end_of_stream && Shift_JIS_lead === 0x00) return finished; // 3. If Shift_JIS lead is not 0x00, let lead be Shift_JIS lead,\n    // let pointer be null, set Shift_JIS lead to 0x00, and then run\n    // these substeps:\n\n    if (Shift_JIS_lead !== 0x00) {\n      var lead = Shift_JIS_lead;\n      var pointer = null;\n      Shift_JIS_lead = 0x00; // 1. Let offset be 0x40, if byte is less than 0x7F, and 0x41\n      // otherwise.\n\n      var offset = bite < 0x7f ? 0x40 : 0x41; // 2. Let lead offset be 0x81, if lead is less than 0xA0, and\n      // 0xC1 otherwise.\n\n      var lead_offset = lead < 0xa0 ? 0x81 : 0xc1; // 3. If byte is in the range 0x40 to 0x7E, inclusive, or 0x80\n      // to 0xFC, inclusive, set pointer to (lead − lead offset) ×\n      // 188 + byte − offset.\n\n      if (inRange(bite, 0x40, 0x7e) || inRange(bite, 0x80, 0xfc)) pointer = (lead - lead_offset) * 188 + bite - offset; // 4. If pointer is in the range 8836 to 10715, inclusive,\n      // return a code point whose value is 0xE000 − 8836 + pointer.\n\n      if (inRange(pointer, 8836, 10715)) return 0xe000 - 8836 + pointer; // 5. Let code point be null, if pointer is null, and the\n      // index code point for pointer in index jis0208 otherwise.\n\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('jis0208')); // 6. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n\n      if (code_point === null && isASCIIByte(bite)) stream.prepend(bite); // 7. If code point is null, return error.\n\n      if (code_point === null) return decoderError(fatal); // 8. Return a code point whose value is code point.\n\n      return code_point;\n    } // 4. If byte is an ASCII byte or 0x80, return a code point\n    // whose value is byte.\n\n\n    if (isASCIIByte(bite) || bite === 0x80) return bite; // 5. If byte is in the range 0xA1 to 0xDF, inclusive, return a\n    // code point whose value is 0xFF61 − 0xA1 + byte.\n\n    if (inRange(bite, 0xa1, 0xdf)) return 0xff61 - 0xa1 + bite; // 6. If byte is in the range 0x81 to 0x9F, inclusive, or 0xE0\n    // to 0xFC, inclusive, set Shift_JIS lead to byte and return\n    // continue.\n\n    if (inRange(bite, 0x81, 0x9f) || inRange(bite, 0xe0, 0xfc)) {\n      Shift_JIS_lead = bite;\n      return null;\n    } // 7. Return error.\n\n\n    return decoderError(fatal);\n  };\n} // 13.3.2 Shift_JIS encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction ShiftJISEncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point or U+0080, return a\n    // byte whose value is code point.\n\n    if (isASCIICodePoint(code_point) || code_point === 0x0080) return code_point; // 3. If code point is U+00A5, return byte 0x5C.\n\n    if (code_point === 0x00a5) return 0x5c; // 4. If code point is U+203E, return byte 0x7E.\n\n    if (code_point === 0x203e) return 0x7e; // 5. If code point is in the range U+FF61 to U+FF9F, inclusive,\n    // return a byte whose value is code point − 0xFF61 + 0xA1.\n\n    if (inRange(code_point, 0xff61, 0xff9f)) return code_point - 0xff61 + 0xa1; // 6. If code point is U+2212, set it to U+FF0D.\n\n    if (code_point === 0x2212) code_point = 0xff0d; // 7. Let pointer be the index Shift_JIS pointer for code point.\n\n    var pointer = indexShiftJISPointerFor(code_point); // 8. If pointer is null, return error with code point.\n\n    if (pointer === null) return encoderError(code_point); // 9. Let lead be floor(pointer / 188).\n\n    var lead = floor(pointer / 188); // 10. Let lead offset be 0x81, if lead is less than 0x1F, and\n    // 0xC1 otherwise.\n\n    var lead_offset = lead < 0x1f ? 0x81 : 0xc1; // 11. Let trail be pointer % 188.\n\n    var trail = pointer % 188; // 12. Let offset be 0x40, if trail is less than 0x3F, and 0x41\n    // otherwise.\n\n    var offset = trail < 0x3f ? 0x40 : 0x41; // 13. Return two bytes whose values are lead + lead offset and\n    // trail + offset.\n\n    return [lead + lead_offset, trail + offset];\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['Shift_JIS'] = function (options) {\n  return new ShiftJISEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['Shift_JIS'] = function (options) {\n  return new ShiftJISDecoder(options);\n}; //\n// 14. Legacy multi-byte Korean encodings\n//\n// 14.1 euc-kr\n// 14.1.1 euc-kr decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction EUCKRDecoder(options) {\n  var fatal = options.fatal; // euc-kr's decoder has an associated euc-kr lead (initially 0x00).\n\n  var\n  /** @type {number} */\n  euckr_lead = 0x00;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and euc-kr lead is not 0x00, set\n    // euc-kr lead to 0x00 and return error.\n    if (bite === end_of_stream && euckr_lead !== 0) {\n      euckr_lead = 0x00;\n      return decoderError(fatal);\n    } // 2. If byte is end-of-stream and euc-kr lead is 0x00, return\n    // finished.\n\n\n    if (bite === end_of_stream && euckr_lead === 0) return finished; // 3. If euc-kr lead is not 0x00, let lead be euc-kr lead, let\n    // pointer be null, set euc-kr lead to 0x00, and then run these\n    // substeps:\n\n    if (euckr_lead !== 0x00) {\n      var lead = euckr_lead;\n      var pointer = null;\n      euckr_lead = 0x00; // 1. If byte is in the range 0x41 to 0xFE, inclusive, set\n      // pointer to (lead − 0x81) × 190 + (byte − 0x41).\n\n      if (inRange(bite, 0x41, 0xfe)) pointer = (lead - 0x81) * 190 + (bite - 0x41); // 2. Let code point be null, if pointer is null, and the\n      // index code point for pointer in index euc-kr otherwise.\n\n      var code_point = pointer === null ? null : indexCodePointFor(pointer, index('euc-kr')); // 3. If code point is null and byte is an ASCII byte, prepend\n      // byte to stream.\n\n      if (pointer === null && isASCIIByte(bite)) stream.prepend(bite); // 4. If code point is null, return error.\n\n      if (code_point === null) return decoderError(fatal); // 5. Return a code point whose value is code point.\n\n      return code_point;\n    } // 4. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n\n\n    if (isASCIIByte(bite)) return bite; // 5. If byte is in the range 0x81 to 0xFE, inclusive, set\n    // euc-kr lead to byte and return continue.\n\n    if (inRange(bite, 0x81, 0xfe)) {\n      euckr_lead = bite;\n      return null;\n    } // 6. Return error.\n\n\n    return decoderError(fatal);\n  };\n} // 14.1.2 euc-kr encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction EUCKREncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n\n    if (isASCIICodePoint(code_point)) return code_point; // 3. Let pointer be the index pointer for code point in index\n    // euc-kr.\n\n    var pointer = indexPointerFor(code_point, index('euc-kr')); // 4. If pointer is null, return error with code point.\n\n    if (pointer === null) return encoderError(code_point); // 5. Let lead be floor(pointer / 190) + 0x81.\n\n    var lead = floor(pointer / 190) + 0x81; // 6. Let trail be pointer % 190 + 0x41.\n\n    var trail = pointer % 190 + 0x41; // 7. Return two bytes whose values are lead and trail.\n\n    return [lead, trail];\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['EUC-KR'] = function (options) {\n  return new EUCKREncoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['EUC-KR'] = function (options) {\n  return new EUCKRDecoder(options);\n}; //\n// 15. Legacy miscellaneous encodings\n//\n// 15.1 replacement\n// Not needed - API throws RangeError\n// 15.2 Common infrastructure for utf-16be and utf-16le\n\n/**\n * @param {number} code_unit\n * @param {boolean} utf16be\n * @return {!Array.<number>} bytes\n */\n\n\nfunction convertCodeUnitToBytes(code_unit, utf16be) {\n  // 1. Let byte1 be code unit >> 8.\n  var byte1 = code_unit >> 8; // 2. Let byte2 be code unit & 0x00FF.\n\n  var byte2 = code_unit & 0x00ff; // 3. Then return the bytes in order:\n  // utf-16be flag is set: byte1, then byte2.\n\n  if (utf16be) return [byte1, byte2]; // utf-16be flag is unset: byte2, then byte1.\n\n  return [byte2, byte1];\n} // 15.2.1 shared utf-16 decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {boolean} utf16_be True if big-endian, false if little-endian.\n * @param {{fatal: boolean}} options\n */\n\n\nfunction UTF16Decoder(utf16_be, options) {\n  var fatal = options.fatal;\n  var\n  /** @type {?number} */\n  utf16_lead_byte = null,\n\n  /** @type {?number} */\n  utf16_lead_surrogate = null;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream and either utf-16 lead byte or\n    // utf-16 lead surrogate is not null, set utf-16 lead byte and\n    // utf-16 lead surrogate to null, and return error.\n    if (bite === end_of_stream && (utf16_lead_byte !== null || utf16_lead_surrogate !== null)) {\n      return decoderError(fatal);\n    } // 2. If byte is end-of-stream and utf-16 lead byte and utf-16\n    // lead surrogate are null, return finished.\n\n\n    if (bite === end_of_stream && utf16_lead_byte === null && utf16_lead_surrogate === null) {\n      return finished;\n    } // 3. If utf-16 lead byte is null, set utf-16 lead byte to byte\n    // and return continue.\n\n\n    if (utf16_lead_byte === null) {\n      utf16_lead_byte = bite;\n      return null;\n    } // 4. Let code unit be the result of:\n\n\n    var code_unit;\n\n    if (utf16_be) {\n      // utf-16be decoder flag is set\n      //   (utf-16 lead byte << 8) + byte.\n      code_unit = (utf16_lead_byte << 8) + bite;\n    } else {\n      // utf-16be decoder flag is unset\n      //   (byte << 8) + utf-16 lead byte.\n      code_unit = (bite << 8) + utf16_lead_byte;\n    } // Then set utf-16 lead byte to null.\n\n\n    utf16_lead_byte = null; // 5. If utf-16 lead surrogate is not null, let lead surrogate\n    // be utf-16 lead surrogate, set utf-16 lead surrogate to null,\n    // and then run these substeps:\n\n    if (utf16_lead_surrogate !== null) {\n      var lead_surrogate = utf16_lead_surrogate;\n      utf16_lead_surrogate = null; // 1. If code unit is in the range U+DC00 to U+DFFF,\n      // inclusive, return a code point whose value is 0x10000 +\n      // ((lead surrogate − 0xD800) << 10) + (code unit − 0xDC00).\n\n      if (inRange(code_unit, 0xdc00, 0xdfff)) {\n        return 0x10000 + (lead_surrogate - 0xd800) * 0x400 + (code_unit - 0xdc00);\n      } // 2. Prepend the sequence resulting of converting code unit\n      // to bytes using utf-16be decoder flag to stream and return\n      // error.\n\n\n      stream.prepend(convertCodeUnitToBytes(code_unit, utf16_be));\n      return decoderError(fatal);\n    } // 6. If code unit is in the range U+D800 to U+DBFF, inclusive,\n    // set utf-16 lead surrogate to code unit and return continue.\n\n\n    if (inRange(code_unit, 0xd800, 0xdbff)) {\n      utf16_lead_surrogate = code_unit;\n      return null;\n    } // 7. If code unit is in the range U+DC00 to U+DFFF, inclusive,\n    // return error.\n\n\n    if (inRange(code_unit, 0xdc00, 0xdfff)) return decoderError(fatal); // 8. Return code point code unit.\n\n    return code_unit;\n  };\n} // 15.2.2 shared utf-16 encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {boolean} utf16_be True if big-endian, false if little-endian.\n * @param {{fatal: boolean}} options\n */\n\n\nfunction UTF16Encoder(utf16_be, options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1. If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is in the range U+0000 to U+FFFF, inclusive,\n    // return the sequence resulting of converting code point to\n    // bytes using utf-16be encoder flag.\n\n    if (inRange(code_point, 0x0000, 0xffff)) return convertCodeUnitToBytes(code_point, utf16_be); // 3. Let lead be ((code point − 0x10000) >> 10) + 0xD800,\n    // converted to bytes using utf-16be encoder flag.\n\n    var lead = convertCodeUnitToBytes((code_point - 0x10000 >> 10) + 0xd800, utf16_be); // 4. Let trail be ((code point − 0x10000) & 0x3FF) + 0xDC00,\n    // converted to bytes using utf-16be encoder flag.\n\n    var trail = convertCodeUnitToBytes((code_point - 0x10000 & 0x3ff) + 0xdc00, utf16_be); // 5. Return a byte sequence of lead followed by trail.\n\n    return lead.concat(trail);\n  };\n} // 15.3 utf-16be\n// 15.3.1 utf-16be decoder\n\n/** @param {{fatal: boolean}} options */\n\n\nencoders['UTF-16BE'] = function (options) {\n  return new UTF16Encoder(true, options);\n}; // 15.3.2 utf-16be encoder\n\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['UTF-16BE'] = function (options) {\n  return new UTF16Decoder(true, options);\n}; // 15.4 utf-16le\n// 15.4.1 utf-16le decoder\n\n/** @param {{fatal: boolean}} options */\n\n\nencoders['UTF-16LE'] = function (options) {\n  return new UTF16Encoder(false, options);\n}; // 15.4.2 utf-16le encoder\n\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['UTF-16LE'] = function (options) {\n  return new UTF16Decoder(false, options);\n}; // 15.5 x-user-defined\n// 15.5.1 x-user-defined decoder\n\n/**\n * @constructor\n * @implements {Decoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction XUserDefinedDecoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream The stream of bytes being decoded.\n   * @param {number} bite The next byte read from the stream.\n   * @return {?(number|!Array.<number>)} The next code point(s)\n   *     decoded, or null if not enough data exists in the input\n   *     stream to decode a complete code point.\n   */\n\n  this.handler = function (stream, bite) {\n    // 1. If byte is end-of-stream, return finished.\n    if (bite === end_of_stream) return finished; // 2. If byte is an ASCII byte, return a code point whose value\n    // is byte.\n\n    if (isASCIIByte(bite)) return bite; // 3. Return a code point whose value is 0xF780 + byte − 0x80.\n\n    return 0xf780 + bite - 0x80;\n  };\n} // 15.5.2 x-user-defined encoder\n\n/**\n * @constructor\n * @implements {Encoder}\n * @param {{fatal: boolean}} options\n */\n\n\nfunction XUserDefinedEncoder(options) {\n  var fatal = options.fatal;\n  /**\n   * @param {Stream} stream Input stream.\n   * @param {number} code_point Next code point read from the stream.\n   * @return {(number|!Array.<number>)} Byte(s) to emit.\n   */\n\n  this.handler = function (stream, code_point) {\n    // 1.If code point is end-of-stream, return finished.\n    if (code_point === end_of_stream) return finished; // 2. If code point is an ASCII code point, return a byte whose\n    // value is code point.\n\n    if (isASCIICodePoint(code_point)) return code_point; // 3. If code point is in the range U+F780 to U+F7FF, inclusive,\n    // return a byte whose value is code point − 0xF780 + 0x80.\n\n    if (inRange(code_point, 0xf780, 0xf7ff)) return code_point - 0xf780 + 0x80; // 4. Return error with code point.\n\n    return encoderError(code_point);\n  };\n}\n/** @param {{fatal: boolean}} options */\n\n\nencoders['x-user-defined'] = function (options) {\n  return new XUserDefinedEncoder(options);\n};\n/** @param {{fatal: boolean}} options */\n\n\ndecoders['x-user-defined'] = function (options) {\n  return new XUserDefinedDecoder(options);\n}; // FORK\n// if (!global['TextEncoder']) global['TextEncoder'] = TextEncoder;\n// if (!global['TextDecoder']) global['TextDecoder'] = TextDecoder;\n// babel.config.js skip transpiling files in `libs/`\n\n\nmodule.exports = {\n  TextEncoder: TextEncoder,\n  TextDecoder: TextDecoder\n};","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import \"core-js/modules/es6.typed.uint8-array\";\nimport assert from '../../utils/assert';\n\nvar isArrayBuffer = function isArrayBuffer(x) {\n  return x && x instanceof ArrayBuffer;\n};\n\nvar isBuffer = function isBuffer(x) {\n  return x && x instanceof Buffer;\n};\n\nexport function toArrayBuffer(data) {\n  if (isArrayBuffer(data)) {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    var typedArray = new Uint8Array(data);\n    return typedArray.buffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}","import \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport savePixels from 'save-pixels';\nimport ndarray from 'ndarray';\nimport { bufferToArrayBuffer } from '../utils/to-array-buffer.node';\nexport function encodeImageToStreamNode(image, options) {\n  var type = options.type ? options.type.replace('image/', '') : 'jpeg';\n  var pixels = ndarray(image.data, [image.width, image.height, 4], [4, image.width * 4, 1], 0);\n  return savePixels(pixels, type, options);\n}\nexport function encodeImageNode(image, options) {\n  var imageStream = encodeImageToStreamNode(image, options);\n  return new Promise(function (resolve) {\n    var buffers = [];\n    imageStream.on('data', function (buffer) {\n      return buffers.push(buffer);\n    });\n    imageStream.on('end', function () {\n      var buffer = Buffer.concat(buffers);\n      resolve(bufferToArrayBuffer(buffer));\n    });\n  });\n}","export default `\\\n#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n\n // Constant-Linear-Exponential\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n`;\n","import lightingShader from './lights.glsl';\n\nexport default {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\n\nconst INITIAL_MODULE_OPTIONS = {};\n\n// Take color 0-255 and intensity as input and output 0.0-1.0 range\nfunction convertColor({color = [0, 0, 0], intensity = 1.0} = {}) {\n  return color.map(component => (component * intensity) / 255.0);\n}\n\nfunction getLightSourceUniforms({ambientLight, pointLights = [], directionalLights = []}) {\n  const lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach((pointLight, index) => {\n    lightSourceUniforms[`lighting_uPointLight[${index}].color`] = convertColor(pointLight);\n    lightSourceUniforms[`lighting_uPointLight[${index}].position`] = pointLight.position;\n    lightSourceUniforms[`lighting_uPointLight[${index}].attenuation`] = pointLight.attenuation || [\n      1,\n      0,\n      0\n    ];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n\n  directionalLights.forEach((directionalLight, index) => {\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].color`] = convertColor(\n      directionalLight\n    );\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].direction`] =\n      directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n\n  return lightSourceUniforms;\n}\n\n// eslint-disable-next-line complexity\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  // Specify lights separately\n  if ('lightSources' in opts) {\n    const {ambientLight, pointLights, directionalLights} = opts.lightSources || {};\n    const hasLights =\n      ambientLight ||\n      (pointLights && pointLights.length > 0) ||\n      (directionalLights && directionalLights.length > 0);\n\n    if (!hasLights) {\n      return {lighting_uEnabled: false};\n    }\n\n    return Object.assign(\n      {},\n      getLightSourceUniforms({ambientLight, pointLights, directionalLights}),\n      {\n        lighting_uEnabled: true\n      }\n    );\n  }\n\n  // Support for array of lights. Type of light is detected by type field\n  if ('lights' in opts) {\n    const lightSources = {pointLights: [], directionalLights: []};\n    for (const light of opts.lights || []) {\n      switch (light.type) {\n        case 'ambient':\n          // Note: Only uses last ambient light\n          // TODO - add ambient light sources on CPU?\n          lightSources.ambientLight = light;\n          break;\n        case 'directional':\n          lightSources.directionalLights.push(light);\n          break;\n        case 'point':\n          lightSources.pointLights.push(light);\n          break;\n        default:\n        // eslint-disable-next-line\n        // console.warn(light.type);\n      }\n    }\n\n    // Call the `opts.lightSources`` version\n    return getUniforms({lightSources});\n  }\n\n  return {};\n}\n","import \"core-js/modules/es6.typed.float32-array\";\n\n/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.number.is-finite\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.is-array\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && value.length !== undefined;\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}"],"sourceRoot":""}