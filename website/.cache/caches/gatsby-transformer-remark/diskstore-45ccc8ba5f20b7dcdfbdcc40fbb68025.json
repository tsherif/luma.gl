{"expireTime":9007200809748944000,"key":"transformer-remark-markdown-html-0b5b7867fef113d0204ea4f53fd4d227-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-autolink-headers-","val":"<h1 id=\"writing-glsl-shaders\"><a href=\"#writing-glsl-shaders\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Writing GLSL Shaders</h1>\n<h2 id=\"glsl-versions-and-compatibility\"><a href=\"#glsl-versions-and-compatibility\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GLSL Versions and Compatibility</h2>\n<blockquote>\n<p>The GLSL versions discussed here are the two GLSL versions supported by WebGL2, namely GLSL 3.00 ES and GLSL 1.00 ES. The ES suffix indicates that they are related to the OpenGL ES standards used by WebGL. For simplicity, we will often refer to the GLSL version numbers without the <code class=\"language-text\">ES</code> suffix.</p>\n</blockquote>\n<p>While WebGL1 supports only GLSL 1.00 ES (with four extensions), WebGL2 introduces the choice of writing shaders in GLSL version 3.00 ES. While GLSL 3.00 ES introduces important new features, some parts of the language syntax has changed.</p>\n<p>These syntax differences between versions can be a complication when writing shader code that is inteded to run both on WebGL1 and WebGL2 environments. In particular when creating reusable code for shader modules, it is desirable to be able to write GLSL code that can work in both GLSL 3.00 and 1.00 shaders.</p>\n<h2 id=\"glsl-transpilation\"><a href=\"#glsl-transpilation\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GLSL \"Transpilation\"</h2>\n<p>The shadertools system lets developers write shader source code using the new GLSL 3.00 ES syntax. This allows shader modules to be used in new GLSL 3.00 ES shaders, while relying on the shader assembler system to automatically convert (\"transpile\") the GLSL code to GLSL 1.00 ES when needed to run in GLSL 1.00 ES shaders or under WebGL1.</p>\n<p>Using the compatiblity guidelines below, it is possible to write highly portable shaders. In rare cases it can require deviating from writing pure GLSL 3.00 ES in some cases.</p>\n<p>Naturally, \"transpiled\" GLSL 3.00 ES shaders will only compile successfully in GLSL 1.00 ES if they don't use any GLSL 3.00 ES unique features.</p>\n<h2 id=\"writing-portable-shader-modules\"><a href=\"#writing-portable-shader-modules\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Writing Portable Shader Modules</h2>\n<p>If your shader unconditionally needs features that are unique to GLSL 3.00, you should of course use GLSL 3.00 directly. In this case your GLSL code will never run on GLSL 1.00 so no need to make it compatible. But if your shader uses GLSL 1.00 features and extensions only, then you may want to make some extra effort to ensure it runs under WebGL1 if required.</p>\n<p>Several of the syntactic changes between GLSL 1.00 ES and 3.00 ES relate to shader input/outputs. It is recommended that shader modules let the calling, top level shaders define attribute inputs and fragment shader outputs. The exception is of course \"varyings\" which are typically defined by shader modules that provide both a vertex and fragment shader components, in which case it is recommended that shaders use <code class=\"language-text\">out</code> and <code class=\"language-text\">in</code> syntax rather than <code class=\"language-text\">varying</code>.</p>\n<ul>\n<li>Definition of vertex shader attributes should be done in the top level shader.</li>\n<li>Definition of and assignment to <code class=\"language-text\">gl_FragColor</code>, <code class=\"language-text\">gl_FragDepth</code> and <code class=\"language-text\">gl_FragData</code> or their counterparts should be done in the top level fragment shader. That is, shader modules can calculate the required values but typically do not actually assign to the shader output variables. This makes shader module code independent of the naming of the output variables.</li>\n</ul>\n<h4 id=\"from-glsl-100-to-300\"><a href=\"#from-glsl-100-to-300\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>From GLSL 1.00 to 3.00</h4>\n<p>References</p>\n<ul>\n<li>[Shaderific's Guide on how to update shaders to GLSL 3.00]<a href=\"http://www.shaderific.com/blog/2014/3/13/tutorial-how-to-update-a-shader-for-opengl-es-30\">http://www.shaderific.com/blog/2014/3/13/tutorial-how-to-update-a-shader-for-opengl-es-30</a></li>\n</ul>\n<p>luma.gl can also attempt to do a simple conversion code from GLSL 1.00 to GLSL 3.00. It is essentially the reverse of the mapping described in the matrix above.</p>\n<h2 id=\"conditional-code\"><a href=\"#conditional-code\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conditional Code</h2>\n<h2 id=\"testing-glsl-code\"><a href=\"#testing-glsl-code\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing GLSL Code</h2>\n<p>TBA</p>\n<h2 id=\"glsl-syntax-conversion-reference\"><a href=\"#glsl-syntax-conversion-reference\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GLSL Syntax Conversion Reference</h2>\n<p>The shader assembler replaces keywords to ensure compatibility between GLSL 3.00 ES and GLSL 1.00 ES code per the following rules.</p>\n<p>TBD - Should the tables be moved to the shader module reference docs?</p>\n<p>Vertex Shaders</p>\n<table>\n<thead>\n<tr>\n<th>3.00 ES</th>\n<th>1.00 ES</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">in</code></td>\n<td><code class=\"language-text\">attribute</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">out</code></td>\n<td><code class=\"language-text\">varying</code></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>Fragment Shaders</p>\n<table>\n<thead>\n<tr>\n<th>3.00 ES</th>\n<th>1.00 ES</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">in</code></td>\n<td><code class=\"language-text\">varying</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">out</code></td>\n<td><code class=\"language-text\">gl_FragColor</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">out</code></td>\n<td><code class=\"language-text\">gl_FragData</code></td>\n<td></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">texture</code></td>\n<td><code class=\"language-text\">texture2D</code></td>\n<td><code class=\"language-text\">texture</code> will be replaced with <code class=\"language-text\">texture2D</code> to ensure 1.00 code is correct. See note on <code class=\"language-text\">textureCube</code> below.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">textureCube</code> *</td>\n<td><code class=\"language-text\">textureCube</code></td>\n<td><code class=\"language-text\">textureCube</code> is not valid 3.00 syntax, but must be used to ensure 1.00 code is correct, because <code class=\"language-text\">texture</code> will be substituted with <code class=\"language-text\">texture2D</code> when transpiled to 100. Also <code class=\"language-text\">textureCube</code> will be replaced with correct <code class=\"language-text\">texture</code> syntax when transpiled to 300.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">gl_FragDepth</code></td>\n<td><code class=\"language-text\">gl_FragDepthEXT</code></td>\n<td>WebGL1: <strong>EXT<em>frag</em>depth</strong></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>3.00 ES</th>\n<th>1.00 ES</th>\n<th>Comment</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">texture2DLod</code></td>\n<td><code class=\"language-text\">texture2DLodEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">texture2DProjLod</code></td>\n<td><code class=\"language-text\">texture2DProjLodEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">texture2DProjLod</code></td>\n<td><code class=\"language-text\">texture2DProjLodEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">textureCubeLod</code></td>\n<td><code class=\"language-text\">textureCubeLodEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">texture2DGrad</code></td>\n<td><code class=\"language-text\">texture2DGradEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">texture2DProjGrad</code></td>\n<td><code class=\"language-text\">texture2DProjGradEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">texture2DProjGrad</code></td>\n<td><code class=\"language-text\">texture2DProjGradEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n<tr>\n<td><code class=\"language-text\">textureCubeGrad</code></td>\n<td><code class=\"language-text\">textureCubeGradEXT</code></td>\n<td>WebGL1: <strong>EXT<em>shader</em>texture_lod</strong></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"not-currently-handled\"><a href=\"#not-currently-handled\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Not currently handled</h3>\n<p>Fragment shader <code class=\"language-text\">out</code>s are not well handled at the moment.\n| <strong>EXT<em>draw</em>buffers</strong> |\n| <code class=\"language-text\">glFragData[]</code> |</p>\n<h2 id=\"appendix---new-features-in-glsl-300\"><a href=\"#appendix---new-features-in-glsl-300\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Appendix - New Features in GLSL 3.00</h2>\n<p>The following features are only available in GLSL 3.00 and cannot be directly emulated in 1.00.</p>\n<h4 id=\"texture-sizes-and-pixel-fetch\"><a href=\"#texture-sizes-and-pixel-fetch\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Texture sizes and Pixel Fetch</h4>\n<p>Shaders have access to texture sizes and can query by pixel coordinates instead of uv coordinates.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">vec2 size = textureSize(sampler, lod)\nvec4 values = texelFetch(sampler, ivec2Position, lod);</code></pre></div>\n<h4 id=\"texture-arrays-and-3d-textures\"><a href=\"#texture-arrays-and-3d-textures\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Texture Arrays and 3D textures</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">vec4 color = texture(sampler2DArray, vec3(u, v, index));\nvec4 color = texture(sampler3D, vec3(u, v, depth));</code></pre></div>\n<h4 id=\"non-constant-loops\"><a href=\"#non-constant-loops\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Non-constant loops</h4>\n<h4 id=\"matrix-functions\"><a href=\"#matrix-functions\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Matrix functions</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mat4 m = inverse(matrix);\nmat4 t = transpose(matrix);</code></pre></div>\n<h4 id=\"integer-textures-attributes-and-math\"><a href=\"#integer-textures-attributes-and-math\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integer textures, attributes and math</h4>\n<p>In WebGL2 you can have integer attributes and integer textures.</p>\n<p>GLSL 3.00 ES allows you to do integer math in the shaders, including bit manipulations of integers.</p>\n<h4 id=\"uniform-buffer-objects\"><a href=\"#uniform-buffer-objects\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uniform Buffer Objects</h4>\n<h4 id=\"transform-feedback\"><a href=\"#transform-feedback\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Transform Feedback</h4>\n<h2 id=\"concepts\"><a href=\"#concepts\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Concepts</h2>\n<p>A shader module is either:</p>\n<ul>\n<li><strong>Generic</strong> - a set of generic GLSL functions that can be included either in a fragment shader or a vertex shader (or both). The <code class=\"language-text\">fp64</code> module is a good example of this type of module.</li>\n<li><strong>Functional</strong> - Contains specific vertex and/or fragment shader \"chunks\", often set up so that the vertex shader part sets up a <code class=\"language-text\">varying</code> used by the fragment shader part.</li>\n</ul>\n<p>To define a shader module, you must specify the following fields:</p>\n<ul>\n<li><code class=\"language-text\">name</code> (<em>String</em>) - the name of the shader module</li>\n<li><code class=\"language-text\">dependencies</code> (<em>Array</em>) - a list of other shader modules that this module is dependent on</li>\n<li>\n<p><code class=\"language-text\">deprecations</code> (<em>Array</em>) - a list of deprecated APIs. If supplied, <code class=\"language-text\">assembleShaders</code> will scan the source for usage and issue a console warning. Each API is described in the following format:</p>\n<ul>\n<li><code class=\"language-text\">type</code>: <code class=\"language-text\">uniform &lt;type&gt;</code> or <code class=\"language-text\">function</code></li>\n<li><code class=\"language-text\">old</code>: name of the deprecated uniform/function</li>\n<li><code class=\"language-text\">new</code>: name of the new uniform/function</li>\n<li><code class=\"language-text\">deprecated</code>: whether the old API is still supported</li>\n</ul>\n</li>\n<li><code class=\"language-text\">getUniforms</code> JavaScript function that maps JavaScript parameter keys to uniforms used by this module</li>\n<li><code class=\"language-text\">vs</code></li>\n<li><code class=\"language-text\">fs</code></li>\n</ul>\n<h3 id=\"glsl-code\"><a href=\"#glsl-code\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GLSL Code</h3>\n<p>The GLSL code for a shader module typically contains:</p>\n<ul>\n<li>a mix of uniform and varying declarations</li>\n<li>one or more GLSL function definitions</li>\n</ul>\n<h3 id=\"getuniforms\"><a href=\"#getuniforms\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>getUniforms</h3>\n<p>Each shader module provides a method to get a map of uniforms for the shader. This function will be called with two arguments:</p>\n<ul>\n<li><code class=\"language-text\">opts</code> - the module settings to update. This argument may not be provided when <code class=\"language-text\">getUniforms</code> is called to generate a set of default uniform values.</li>\n<li><code class=\"language-text\">context</code> - the uniforms generated by this module's dependencies.</li>\n</ul>\n<p>The function should return a JavaScript object with keys representing uniform names and values representing uniform values.</p>\n<p>The function should expect the shape of the dependency uniforms to vary based on what's passed in <code class=\"language-text\">opts</code>. This behavior is intended because we only want to recalculate a uniform if the uniforms that it depends on are changed. An example is the <code class=\"language-text\">project</code> and <code class=\"language-text\">project64</code> modules in deck.gl. When <code class=\"language-text\">opts.viewport</code> is provided, <code class=\"language-text\">project64</code> will receive the updated projection matrix generated by the <code class=\"language-text\">project</code> module. If <code class=\"language-text\">opts.viewport</code> is empty, then the <code class=\"language-text\">project</code> module generates nothing and so should <code class=\"language-text\">project64</code>.</p>\n<h3 id=\"platform-detection\"><a href=\"#platform-detection\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Platform Detection</h3>\n<p>Also does some platform detection and injects <code class=\"language-text\">#define</code> statements enabling\nyour shader to conditionally use code.</p>\n<h2 id=\"remarks\"><a href=\"#remarks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remarks</h2>\n<ul>\n<li><strong>No Vertex Attributes</strong> - At the moment shader modules are not expected to use attributes. It is up to the root application shaders to define attributes and call GLSL functions from the imported shader modules with the appropriate attributes. This is just a convention, not a hard limitation.</li>\n</ul>"}