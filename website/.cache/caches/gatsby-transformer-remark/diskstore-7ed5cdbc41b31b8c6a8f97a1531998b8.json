{"expireTime":9007200809748943000,"key":"transformer-remark-markdown-html-05d0c7269096c9ee69e557ac923e145a-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-autolink-headers-","val":"<h1 id=\"building-apps\"><a href=\"#building-apps\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Building Apps</h1>\n<p>This article contains additional information on options for how to build luma.gl.</p>\n<h2 id=\"optimizing-for-bundle-size\"><a href=\"#optimizing-for-bundle-size\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Optimizing for Bundle Size</h2>\n<p>luma.gl and luma.gl provide a lot of functionality and the amount of code these libraries contain will of course impact the size of your application bundle and your startup load time.</p>\n<p>There are multiple techniques used in JavaScript.</p>\n<h3 id=\"choosing-a-dist-folder\"><a href=\"#choosing-a-dist-folder\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Choosing a dist folder</h3>\n<p>When installed from npm, luma.gl and related libraries come with three separate <code class=\"language-text\">dist</code> sub folders.</p>\n<table>\n<thead>\n<tr>\n<th>Folder</th>\n<th><code class=\"language-text\">mainField</code></th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">dist/es6</code></td>\n<td><code class=\"language-text\">esnext</code></td>\n<td>The most compact distribution is with very few exceptions essentially untranspiled ES6/ES2015 code (via <code class=\"language-text\">babel-preset-env</code>). This is the smallest distribution, and is the best choice if you are only targeting modern \"evergreen\" browsers (e.g. not IE11 or older mobile devices).</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">dist/esm</code></td>\n<td><code class=\"language-text\">module</code></td>\n<td>Same as <code class=\"language-text\">dist/es5</code>, except <code class=\"language-text\">export</code> and <code class=\"language-text\">import</code> statements are left untranspiled to enable tree shaking. The main reason to use this distribution is if your are targeting older browsers (e.g. IE11 or older mobile devices).</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">dist/es5</code></td>\n<td><code class=\"language-text\">main</code></td>\n<td>All code is transpiled into ES5 and exports/imports are transpiled into <code class=\"language-text\">commonjs</code> requires. The main reason to use this distribution is if your bundler does not support tree-shaking using <code class=\"language-text\">import</code>/<code class=\"language-text\">export</code> syntax.</td>\n</tr>\n</tbody>\n</table>\n<p>You will have to check the documentation of your particular bundler to see what configuration options are available:</p>\n<ul>\n<li>Webpack 2 and later will pick the <code class=\"language-text\">esm</code> distribution by default (the <code class=\"language-text\">module</code> main field)</li>\n<li>Webpack 4 allows you to choose the <code class=\"language-text\">esnext</code> distribution by specifying a new <code class=\"language-text\">resolve.mainFields</code> array in your application's webpack config.</li>\n<li>For other bundlers, please refer to the respective documentation to see if you can control which distribution to use. If not, expect the <code class=\"language-text\">es5</code> distribution to be used.</li>\n</ul>\n<h3 id=\"about-tree-shaking\"><a href=\"#about-tree-shaking\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>About Tree-Shaking</h3>\n<p>luma.gl is designed to fully leverage tree-shaking. Tree-shaking should be possible with any supporting browser but development has currentle focusing on enabling the webpack 4 + babel 7 combination which provides excellent results.</p>\n<p>Some things to be aware of when working with tree-shaking:</p>\n<ul>\n<li>At least in Webpack, tree shaking is done by the uglifier, which is typically only run as the very last step on production builds. This means that it is typically not possible to assess the benefits of tree shaking during development.</li>\n<li>The lack of tree-shaking during development makes it hard to make statements about bundle size impact of a library just from looking at bundle sizes of development builds or the size of the library's npm module. Our recommendation is to always measure impact on your actual production builds.</li>\n</ul>\n<h3 id=\"pay-for-what-you-use\"><a href=\"#pay-for-what-you-use\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pay for What you Use</h3>\n<p>Naturally, an application that uses all the functionality offered by a framework will benefit little from tree shaking, whereas a small app that only uses a few selected components should expect big savings.</p>\n<p>When we modularize luma.gl, we are less focused on the size of the entire library, and more on making sure that applications only pay for the features they actually use. Also we try to make the core set of functionality small.</p>\n<h3 id=\"bundle-size-numbers\"><a href=\"#bundle-size-numbers\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bundle Size Numbers</h3>\n<p>So, what kind of impact on bundle sizes should you expect when using luma.gl? When do you know if you have set up your bundler optimally. To help answer these questions, we provide some numbers you can compare against. luma.gl has scripts that measure the size of a minified bundle after each build, which allows us to provide comparison numbers between releases. This bundle imports the <code class=\"language-text\">Module</code> and <code class=\"language-text\">AnimationLoop</code> classes, which are the basic building blocks of most apps.</p>\n<table>\n<thead>\n<tr>\n<th>es6-production</th>\n<th>6.1 Bundle/Zip</th>\n<th>6.0 Bundle/Zip</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>es6-production</td>\n<td>144KB  / 42KB</td>\n<td>181KB  / 51KB</td>\n</tr>\n<tr>\n<td>esm-production</td>\n<td>209KB  / 49KB</td>\n<td>281KB  / 66KB</td>\n</tr>\n<tr>\n<td>es5-production</td>\n<td>408KB  / 88KB</td>\n<td>422KB  / 93KB</td>\n</tr>\n<tr>\n<td>es6-development</td>\n<td>787KB  / 123KB</td>\n<td>926KB  / 165KB</td>\n</tr>\n<tr>\n<td>esm-development</td>\n<td>1048KB / 150KB</td>\n<td>1167KB / 192KB</td>\n</tr>\n<tr>\n<td>es5-development</td>\n<td>961KB  / 142KB</td>\n<td>1052KB / 182KB</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>Numbers represent the minified bundle size of a minimal application, bundled with Webpack 4, which means that the <code class=\"language-text\">ES6</code> and ESM numbers benefit from tree shaking.</li>\n<li>The number in parenthesis are the compressed bundle sizes. This is an indication of the how much extra size will be added to your compressed app bundle if you import luma.gl.</li>\n<li>For the ES6 and ESM dists, apps that use more luma.gl classes and features will see an increase in bundle size.</li>\n</ul>\n<h3 id=\"future-work\"><a href=\"#future-work\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Future Work</h3>\n<p>This is not the final word on luma.gl bundle size. More work is being done to reduce the size of luma.gl and we are confident that even as fture releases will have more functionality, we will be able to keep the library code from growing and, more importantly, make luma.gl even more \"tree shakeable\", with the intention that apps should only \"pay for what they use\".</p>\n<h2 id=\"remarks\"><a href=\"#remarks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remarks</h2>\n<ul>\n<li><strong>Optimizing for minified code</strong> - Due to inclusion of sourcemaps etc, the bundle size impact of luma.gl tends to look more significant in development builds than in the final production builds. While reducing the size of the development libraries is also desirable, the current goal is to ensure the impact of adding luma.gl on the final, minified/uglified application bundle is as small as possible.</li>\n<li>Compressed bundle sizes are calculated using <code class=\"language-text\">gzip -9</code>. Consider using slower <code class=\"language-text\">brotli</code> compression for static assests, it typically provides an additional 20% reduction.</li>\n</ul>"}