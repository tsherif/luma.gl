{"expireTime":9007200809748944000,"key":"transformer-remark-markdown-html-518179321e0e6a639026b0ae9a3428e9-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-autolink-headers-","val":"<h1 id=\"attributes\"><a href=\"#attributes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Attributes</h1>\n<p>Attributes (aka \"vertex attributes\") are used to specify the data that the GPU should work on. Attributes contain input data to the the first shader stage in the GPU rendering pipeline (aka the vertex shader). Attributes are the main mechanism through which the application feeds data to the GPU.</p>\n<p>To help apps set up and manage attributes, luma.gl provides the <code class=\"language-text\">VertexArray</code> class (which manages a WebGL <code class=\"language-text\">VertexArrayObject</code>).</p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification\">OpenGL Wiki: Vertex Specification</a> - Detailed technical information about how vertex attributes are handled by OpenGL. Not suitable for beginners, but worth a read if you want a deeper understanding of what is going on.</li>\n<li><a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification_Best_Practices\">OpenGL Wiki: Vertex Specification Best Practices</a> - An easier read, worthwhile if you are thinking about making changes to your vertex attributes to increase performance performance.</li>\n</ul>\n<h2 id=\"overview\"><a href=\"#overview\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview</h2>\n<h3 id=\"vertexarrays\"><a href=\"#vertexarrays\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VertexArrays</h3>\n<p>To provide data to the GPU, the program need to set up one or more \"attributes\" (the exact number depends on how many attributes the vertex shader program is using). These vertex attributes are stored in a luma.gl <code class=\"language-text\">VertexArray</code> instance.</p>\n<p>A <code class=\"language-text\">VertexArray</code> can be thought of as a small conceptual array (typically around 16 entries long) referenced by indices (aka \"locations\") from 0 and up, where each location contains one attribute.</p>\n<p>Each attribute is a an array of numbers stored in GPU Memory (together with some metadata describing how the GPU should access that memory).</p>\n<h3 id=\"attribute-properties-and-accessors\"><a href=\"#attribute-properties-and-accessors\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Attribute Properties and Accessors</h3>\n<p>Apart from the data that will be accessible in shaders, a <code class=\"language-text\">VertexArray</code> manages the following properties for each attribute:</p>\n<ul>\n<li>Data type information: <code class=\"language-text\">size</code> (1-4 values per vertex), <code class=\"language-text\">type</code></li>\n<li>Data layout information: <code class=\"language-text\">offset</code>, <code class=\"language-text\">stride</code>.</li>\n<li>An instance <code class=\"language-text\">divisor</code> (which enables/disables instancing) <strong>WebGL2/Extension</strong>.</li>\n<li>An integer normalization policy (see below).</li>\n<li>An integer conversion policy (see below) <strong>WebGL2</strong>.</li>\n</ul>\n<h3 id=\"attribute-locations\"><a href=\"#attribute-locations\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Attribute Locations</h3>\n<p>Methods in this class take a <code class=\"language-text\">location</code> index to specify which vertex attribute in the array they are operating on. This location needs to be matched with the location (i.e. index) selected by the compiler when compiling a Shader. Therefore it is usually better to work with symbolic names for vertex attributes, which is supported by other luma.gl classes.</p>\n<h3 id=\"using-program-metadata\"><a href=\"#using-program-metadata\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Program Metadata</h3>\n<p>After a <code class=\"language-text\">Program</code> compiles and links its shaders, it extracts information about which attributes, uniforms etc were found in the shader, which locations these were mapped to, and information about data types etc based on the declarations in the shader code.</p>\n<p>This information can be used by the <code class=\"language-text\">VertexArray</code> class and enables applications to specify attributes in a symbolic way, rather than referring to locations by numbers.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> program <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Program</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>vs<span class=\"token punctuation\">,</span> fs<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> vertexAttribute <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VertexAttribute</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>program<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Reads attribute metadata from program</span>\nvertexAttribute<span class=\"token punctuation\">.</span><span class=\"token function\">setAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>color<span class=\"token punctuation\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Now possible to reference attributes by name</span></code></pre></div>\n<h3 id=\"buffer-attributes\"><a href=\"#buffer-attributes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Buffer Attributes</h3>\n<p>The \"standard\" use case is to allocate on buffer per attribute:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">vertexArray<span class=\"token punctuation\">.</span><span class=\"token function\">setAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  positions<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Buffer</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  colors<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Buffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>offset<span class=\"token punctuation\">:</span> <span class=\"token constant\">BUFFER2_START</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"constant-attributes\"><a href=\"#constant-attributes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constant Attributes</h3>\n<p>luma.gl provides extensive support for <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Non-array_attribute_values\">constant attributes</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">vertexArray<span class=\"token punctuation\">.</span><span class=\"token function\">setAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  colors<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint8Array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Remarks:</p>\n<ul>\n<li>The term \"constant attribute\" is luma.gl-specific. WebGL/OpenGL literature usually talks about \"disabled\" attributes, or \"non-array\" attributes.</li>\n<li>Constant attributes are not considered a high-priority use case by OpenGL GPU driver developers, so using constants may not be faster than using buffers, and native OpenGL apps are  sometimes recommended to avoid them, e.g. by creating \"dummy\" buffers with repeated constants.</li>\n<li>However, in WebGL applications, the tradeoffs are different. The cost of allocating and populating big arrays using JavaScript on the CPU is higher and typically worth avoiding, even if this comes at some cost in GPU rendering speed, and memory savings are also more valuable in browser environments.</li>\n</ul>\n<h3 id=\"attributes-as-views-into-buffers\"><a href=\"#attributes-as-views-into-buffers\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Attributes as Views into Buffers</h3>\n<p>By working with offsets, it is possible to have several attributes reference different memory areas in a single buffer. To make this work, set several attributes to the same buffer, with different metadata/accessor information for each.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> largeBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Buffer</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">BUFFER1_START</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">BUFFER1_START</span> <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n\nvertexArray<span class=\"token punctuation\">.</span><span class=\"token function\">setAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  positions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>largeBuffer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Accessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>offset<span class=\"token punctuation\">:</span> <span class=\"token constant\">BUFFER1_START</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  colors<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>largeBuffer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Accessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>offset<span class=\"token punctuation\">:</span> <span class=\"token constant\">BUFFER2_START</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"interleaving-data\"><a href=\"#interleaving-data\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Interleaving Data</h3>\n<p>By working with strides and offsets you can \"interleave\" several attributes in a single buffer.</p>\n<table>\n<thead>\n<tr>\n<th>position1</th>\n<th>color1</th>\n<th>position2</th>\n<th>color2</th>\n<th>position3</th>\n<th>color3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[x,y,z]</td>\n<td>[r,g,b]</td>\n<td>[x,y,z]</td>\n<td>[r,g,b]</td>\n<td>[x,y,z]</td>\n<td>[r,g,b]</td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> interleavedBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Buffer</span><span class=\"token punctuation\">(</span>gl<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">STRIDE</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3 floats (x,y,z) and 3 bytes (r,g,b)</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">COLOR_OFFSET</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3 floats (x,y,z)</span>\n\nvertexArray<span class=\"token punctuation\">.</span><span class=\"token function\">setAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  positions<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>interleavedBuffer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Accessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>stride<span class=\"token punctuation\">:</span> <span class=\"token constant\">STRIDE</span><span class=\"token punctuation\">,</span> offset<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  colors<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>interleavedBuffer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Accessor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>stride<span class=\"token punctuation\">:</span> <span class=\"token constant\">STRIDE</span><span class=\"token punctuation\">,</span> offset<span class=\"token punctuation\">:</span> <span class=\"token constant\">COLOR_OFFSET</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Note: The performance gains of interleaving data will vary between GPUs. On modern desktop GPUs the difference may be small enough (or even slightly negative) such that the additional complexity is not justified. However, the gains might be more noticeable on less powerful platforms (e.g. mobile or older GPUs) and therefore still worthwhile overall. Profiling is recommended.</p>\n<h3 id=\"instanced-attributes\"><a href=\"#instanced-attributes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Instanced Attributes</h3>\n<p>Attributes can be instanced by adding a divisor to the accessor</p>\n<h3 id=\"streaming-attributes\"><a href=\"#streaming-attributes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Streaming Attributes</h3>\n<p>Special techniques like double buffering, \"nulling\", etc can be applied to improve performance when frequently updating (\"streaming\") attributes. See references above.</p>\n<h3 id=\"integer-to-float-conversion-and-normalization\"><a href=\"#integer-to-float-conversion-and-normalization\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integer to Float Conversion and Normalization</h3>\n<p>Integer values in attributes (e.g in an <code class=\"language-text\">Int32Array</code>) are converted to floats before being passed to the shader.</p>\n<p>In addition, normalization, maps values stored in an integer format to a normalized floating point range before they are passed to the shader:</p>\n<ul>\n<li><code class=\"language-text\">[-1,1]</code> (SNORM, for signed integers)</li>\n<li><code class=\"language-text\">[0,1]</code> (UNORM, for unsigned integers)</li>\n</ul>\n<p>In WebGL2, it is possible to disable automatic conversion of integers to integers, enabling shaders to work directly with integer values. This works with all the integer types: <code class=\"language-text\">gl.BYTE</code>, <code class=\"language-text\">gl.UNSIGNED_BYTE</code>, <code class=\"language-text\">gl.SHORT</code>, <code class=\"language-text\">gl.UNSIGNED_SHORT</code>, <code class=\"language-text\">gl.INT</code> and <code class=\"language-text\">gl.UNSIGNED_INT</code>.</p>\n<h3 id=\"transform-feedback\"><a href=\"#transform-feedback\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Transform Feedback</h3>\n<p> For transform feedback operations, the <code class=\"language-text\">TransformFeedback</code> class holds the output buffers that will receive data from vertex shader varyings, complementing the <code class=\"language-text\">VertexArray</code> class which holds the input values. It is worth noting that the <code class=\"language-text\">TransformFeedback</code> class is quite similar to the <code class=\"language-text\">VertexArray</code> class in concept and API, they both read metadata from <code class=\"language-text\">Program</code> instances, etc.</p>\n<h2 id=\"background-how-the-gpu-accesses-attributes\"><a href=\"#background-how-the-gpu-accesses-attributes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Background: How the GPU Accesses Attributes</h2>\n<p>GPUs shaders perform parallel processing on \"vertices\", and one \"value\" in each attribute is made available to the particular shader invocation that processes the corresponding \"vertex\".</p>\n<p>At the start of shader execution, these indices (or 'locations') are matched with small integer indices assigned to shader attributes during shader compilation and program linking. This makes the data the application has set up in the vertex attributes available during shader execution. Vertex attributes thus represent one of the primary mechanisms for communication between JavaScript code and GPU code (GLSL shaders).</p>\n<ul>\n<li>Attributes contains the data for each vertex, i.e. each GPU call.</li>\n<li>Attributes are typically backed by a <a href=\"/docs/api-reference/webgl/buffer.md\"><code class=\"language-text\">WebGLBuffer</code></a> that stores unique values for each vertex/instance, combined with information about the layout of data in the memory managed by the buffer.</li>\n<li>Attributes can also be set to a single \"constant\" vertex value instead of a full buffer/array. This single value will then be passed to every invocation of the vertex shader effectively representing a constant attribute value. A typical example could be to specify a single color for all vertices, instead of providing a buffer with unique colors per vertex.</li>\n</ul>\n<h2 id=\"remarks\"><a href=\"#remarks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remarks</h2>\n<p>There are a suprising number of API complications and \"gotchas\" when using WebGL VertexArrayObjects. The various issues and version differences described here are handled by the luma.gl <code class=\"language-text\">VertexArray</code> API.</p>\n<ul>\n<li>\n<p>Constant attributes: In raw WebGL, constant values are stored on the WebGL context, not the <code class=\"language-text\">VertexArrayObject</code>. Also these \"global\" values are reset every time a vertex attribute is enabled (set to a buffer). luma.gl transparently works around this by updating the constants on the WebGLRenderingContext every time a <code class=\"language-text\">VertexArray</code> is bound.</p>\n</li>\n<li>\n<p>Constant attributes: Attribute location 0 cannot be set to a constant (i.e. cannot be disabled) in desktop OpenGL and in some desktop browsers (notably desktop Safari) this limitation also affects WebGL. In these cases, luma.gl transparently works around this issue by creating a buffer with the constant value repeated.</p>\n</li>\n<li>\n<p>WebGL2: The raw WebGL APIs for <code class=\"language-text\">WebGLVertexArray</code>s are exposed differently in the WebGL1 extension and WebGL2. As always, the luma.gl <code class=\"language-text\">VertexArray</code> class transparently handles the necessary API detection and selection.</p>\n</li>\n<li>\n<p><code class=\"language-text\">ANGLE_instanced_arrays</code>: This extension allows instance divisors to be set, enabling instanced rendering under WebGL1.</p>\n</li>\n<li>\n<p><strong><code class=\"language-text\">OES_VertexArray</code> Extension</strong> Enables the application to create and \"VertexArray\"s to save and restore the entire global vertex attribute array with a single operation.</p>\n</li>\n</ul>\n<h3 id=\"webgl2\"><a href=\"#webgl2\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WebGL2</h3>\n<ul>\n<li>Setting instance divisors no longer requires a WebGL extension.</li>\n<li><code class=\"language-text\">VertexArrays</code> no longer require using a WebGL extension.</li>\n<li>Adds support for exposing integer attribute values directly to shaders (without those values first being auto-converted to floats) The improvements cover both constant and buffer-valued attributes.</li>\n</ul>"}